::StoryTitle
Dawn of Corruption

::StoryCSS [stylesheet]
/* twine-user-stylesheet #1: "notify.css" */
/*
    notify.min.css, by chapel; for use with notify.js
    version 1.0.0
 */
#notify {
    position : fixed;
    display : block;
    width : 26em;
    right : -30em; top : 2em;
    padding : 0.5em;
    -webkit-transition : right 0.3s;
    -moz-transition : right 0.3s;
    -o-transition : right 0.3s;
    transition : right 0.3s;
    text-align: center;
    z-index: 9999;
}
#notify.open { right : 0; }

#notify.Corrupt0
{
  border: 21px solid;
  border-image: url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/side_bar/ui_sidebar_main_0.png) 33.33% round;
  background-color: #2E2820 !important;
}

#notify.Corrupt25
{
  border: 21px solid;
  border-image: url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/side_bar/ui_sidebar_main_25.png) 33.33% round;
  background-color: #2C2822 !important;
}

#notify.Corrupt50
{
  border: 21px solid;
  border-image: url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/side_bar/ui_sidebar_main_50.png) 33.33% round;
  background-color: #2A2724 !important;
}

#notify.Corrupt75
{
  border: 21px solid;
  border-image: url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/side_bar/ui_sidebar_main_75.png) 33.33% round;
  background-color: #292725 !important;
}

#notify.Corrupt100
{
  border: 21px solid;
  border-image: url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/side_bar/ui_sidebar_main_100.png) 33.33% round;
  background-color: #272727 !important;
}
/* twine-user-stylesheet #2: "popover.css" */
/* popover.css, by chapel; for use with popover.js; v1.0.0 */

#ui-dialog-body.popover {
    background: transparent;
    border: 0;
    padding: 0;
}

.popover #ui-dialog-titlebar {
    background: transparent;
}

.popover #ui-dialog-title {
    display: none;
}

.popover #ui-dialog-close {
    position: fixed;
    display: block;
    top: 0;
    right: 0;
    height: 3em;
}

.popover #ui-dialog-close:hover {
    background-color: transparent;
    border-color: transparent;
    color: #c22;
}

#ui-overlay.popover.opaque {
    opacity: 1;
}

#ui-overlay.popover.transparent {
    opacity: 0;
}

#ui-overlay.popover.invert {
    background-color: #f8f8f8;
}

#ui-dialog-body.popover.invert {
    color: #111;
}
/* twine-user-stylesheet #3: "speech.css" */
.say {
    border: 1px solid #eee;
    overflow: auto;
}

.say img {
    max-width: 20%;
    float: left;
    margin-right: 1em;
}

.say p:first-of-type {
    font-weight: bold;
    margin: 0.2em 0;
    border-bottom: 1px solid #eee;
}

.say p:last-of-type {
    padding: 0.5em;
    margin: 0;
}
/* twine-user-stylesheet #4: "Story Stylesheet" */
@import url(https://fonts.googleapis.com/css?family=Patua+One&display=swap);
@import url(https://fonts.googleapis.com/css?family=Georgia&display=swap);
@import url(https://fonts.googleapis.com/css?family=Helvetica&display=swap);
@import url('https://fonts.googleapis.com/css2?family=Almendra:wght@700&display=swap');
@import url('https://fonts.googleapis.com/css?family=Open+Sans:400,600'); 

@font-face {
  font-family: DarkAndBlack;
  src: url(https://sombreve.github.io/Dawn-of-Corruption-Site/Fonts/dark-and-black.otf);
}
@font-face {
  font-family: BreatheFire;
  src: url(https://sombreve.github.io/Dawn-of-Corruption-Site/Fonts/Breathe-Fire.otf);
}

@font-face {
  font-family: Dalelands;
  src: url(https://sombreve.github.io/Dawn-of-Corruption-Site/Fonts/DalelandsUncialCondensedBold-MEyv.ttf);
}

body, tw-story
{
  font-family: Georgia;
  font-size: 1.20em;
  --col-black: #111317;
  --col-gray: #282d31;
  --col-positive: #33cccc;
  --col-button: #2e3192;
  --col-button-select: #c981fb;
  --col-gold: #514523;

  --col-border: #101215;
  --col-soft: #c8bdb5;
  --border-gold: #ac946b #372a0b #201200 #372a0b;
  color: var(--col-soft);
}

progress[value]::-webkit-progress-bar 
{
background: rgba(0, 0, 0, 0);
}

.steamOverlayCanvasFix {
  position: fixed;
  top: 0px;
  left: 0;
  right: 0;
  bottom: 0;
  width: 100%;
  height: 100%;
  opacity: 0.01;
  pointer-events: none;
  z-index: -1;
}

.numberTest
{
  font-family: 'Dalelands';
}

#ui-dialog {
	max-width: none;
}
 
img {
  max-width: 100%;
  height: auto;
}

hr
{
    margin: 0;
}

a
{
  color: #89abff;
}
 /* Passage Links */
#passages a.link-internal[data-passage]:not(.FightSkillCard) {
  display: inline-block;
  width: 40%;
  min-width: max-content;
  color: var(--col-soft);
  background: var(--col-button);
  /* border: 4px solid var(--col-gold);
  border-color: var(--border-gold);
  border-width: 4px 4px 4px 0; */
  padding: 0 .5em 0 3rem;
  margin: .2em 0;
  box-shadow: inset 0 5px 15px rgba(0,0,0,.3);
  clip-path: polygon(0 0, 100% 0%, 100% 100%, 1.5rem 100%);
  white-space: nowrap;
}

#passages a.link-internal[data-passage]:not(.FightSkillCard):hover {
  background: var(--col-button-select);
  color: var(--col-black);
  text-decoration: none;
}
#passages a.link-internal[data-passage]:not(.FightSkillCard):active {
  background: white;
}

#passages a.link-internal:is([data-passage="Name Setup"], [data-passage="CreditsMainMenu"]) {
  clip-path: unset !important;
  padding: 0 .5em !important;
}

.FightSkillCardHighlight
{
  width: 209px;
  height: 295px;
  display: inline-block;
}

.FightSkillCardHighlight.selected
{
  background-image: url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/battle_system/card_selected.png);
}


.FightSkillCard 
{
  display:inline-block;
  width: 175px;
  height: 260px;
  margin-top: 10px;
  margin-right: 5px;
  margin-left: 5px;
  padding: 10px;
  vertical-align: top;
  resize: vertical;
  text-shadow: -1px 0 9px black, 0 1px 4px black, 1px 0 6px black, 0 -1px 6px black;
}

.FightSkillCard a
{
  color: #DFDFDF
}

.FightSkillCard a:hover
{
  color: #8af;
  text-decoration: none;
}

.FightSkillCardStaminaCost
{
  position: absolute;
  width: 43px;
  height: 43px;
  margin-top: -10px;
  margin-left: -15px;
  text-align: center;
  padding-top: 1.5px;
}

.FightSkillCardStaminaCost.Corrupt0
{
    background-image: url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/battle_system/card_stat_stamina_0.png);
}

.FightSkillCardStaminaCost.Corrupt25
{
    background-image: url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/battle_system/card_stat_stamina_25.png);
}

.FightSkillCardStaminaCost.Corrupt50
{
    background-image: url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/battle_system/card_stat_stamina_50.png);
}

.FightSkillCardStaminaCost.Corrupt75
{
    background-image: url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/battle_system/card_stat_stamina_75.png);
}

.FightSkillCardStaminaCost.Corrupt100
{
    background-image: url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/battle_system/card_stat_stamina_100.png);
}

.FightSkillCardCooldown
{
  width: 43px;
  height: 43px;
  float: left;
  text-align: center;
  margin-left: 21px;
}

.FightSkillCardCooldown.Corrupt0
{
    background-image: url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/battle_system/card_stat_cooldown_0.png);
}

.FightSkillCardCooldown.Corrupt25
{
    background-image: url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/battle_system/card_stat_cooldown_25.png);
}

.FightSkillCardCooldown.Corrupt50
{
    background-image: url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/battle_system/card_stat_cooldown_50.png);
}

.FightSkillCardCooldown.Corrupt75
{
    background-image: url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/battle_system/card_stat_cooldown_75.png);
}

.FightSkillCardCooldown.Corrupt100
{
    background-image: url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/battle_system/card_stat_cooldown_100.png);
}

.FightSkillCardAttackDamage
{
  width: 43px;
  height: 43px;
  float: left;
  text-align: center;
}

.FightSkillCardAttackDamage.Corrupt0
{
    background-image: url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/battle_system/card_stat_damage_0.png);
}

.FightSkillCardAttackDamage.Corrupt25
{
    background-image: url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/battle_system/card_stat_damage_25.png);
}

.FightSkillCardAttackDamage.Corrupt50
{
    background-image: url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/battle_system/card_stat_damage_50.png);
}

.FightSkillCardAttackDamage.Corrupt75
{
    background-image: url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/battle_system/card_stat_damage_75.png);
}

.FightSkillCardAttackDamage.Corrupt100
{
    background-image: url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/battle_system/card_stat_damage_100.png);
}

.FightSkillCardCritChance
{
  width: 43px;
  height: 43px;
  float: left;
  margin-right: 21px;
  text-align: center;
}

.FightSkillCardCritChance.Corrupt0
{
    background-image: url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/battle_system/card_stat_crit_0.png);
}

.FightSkillCardCritChance.Corrupt25
{
    background-image: url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/battle_system/card_stat_crit_25.png);
}

.FightSkillCardCritChance.Corrupt50
{
    background-image: url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/battle_system/card_stat_crit_50.png);
}

.FightSkillCardCritChance.Corrupt75
{
    background-image: url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/battle_system/card_stat_crit_75.png);
}

.FightSkillCardCritChance.Corrupt100
{
    background-image: url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/battle_system/card_stat_crit_100.png);
}

.FightSkillCardStackCount
{
  width: 43px;
  height: 43px;
  text-align: center;
  margin-left: 127px;
}

.FightSkillCardStackCount.Corrupt0
{
    background-image: url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/battle_system/card_stat_stack_0.png);
}

.FightSkillCardStackCount.Corrupt25
{
    background-image: url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/battle_system/card_stat_stack_25.png);
}

.FightSkillCardStackCount.Corrupt50
{
    background-image: url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/battle_system/card_stat_stack_50.png);
}

.FightSkillCardStackCount.Corrupt75
{
    background-image: url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/battle_system/card_stat_stack_75.png);
}

.FightSkillCardStackCount.Corrupt100
{
    background-image: url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/battle_system/card_stat_stack_100.png);
}

 /* Passage Links */
 #choiceWindow
{
  display: flex;
  flex-wrap: wrap;
  gap: 3rem 0.5rem;
  width: calc(100% - 450px);
  position: fixed;
  left: 20em;
  top: calc(86vh - 3em);
  z-index: 10;
}

#choiceWindow::before {
  content: '';
  position: absolute;
  inset: 0;
  left: -1rem;
  right: -1rem;
  border-radius: 20px;
}

.choiceWindowElement{
  position: relative;
  display: inline-block;
  height: 3em;
}

.choiceWindowElement a.link-internal[data-passage] {
  min-width: max-content;
  color: var(--col-soft);
  background: var(--col-button);
  padding: 12px 1.5em 12px 2em;
  margin: 0.2em -0.25rem;
  box-shadow: inset 0 5px 15px rgb(0 0 0 / 30%);
  clip-path: polygon(0 0, calc(100% - 1.5rem) 0%, 100% 100%, 1.5rem 100%);
  white-space: nowrap;
}

.choiceIndex {
  position: absolute; 
  top: 0;
  left: 0;
  background: var(--col-black);
  color: var(--col-soft);
  border: 6px double;
  border-color: hsl( var(--hue) var(--saturation) calc(var(--lightness) - 20%) );
  border-radius: 20px;
  width: 1.25em;
  aspect-ratio: 1;
  text-align: center;
  translate: -40% -80%;
  z-index: 2;
}

.choiceWindowElement a.link-internal[data-passage]:hover {
  background: var(--col-button-select);
  color: var(--col-black);
  text-decoration: none;
}

.choiceWindowElement a.link-internal[data-passage]:active {
  background: white;
}

button {
  background: var(--col-button);
  border: none;
}

.corruptText0 a
{
  color: #ffddae;
}

.corruptText25 a
{
  color: #c19788;
}

.corruptText50 a
{
  color: #c18aa9;
}

.corruptText75 a
{
  color: #b779c5;
}

.corruptText100 a
{
  color: #c76bc2;
}

.corruptText0
{
  color: #DCB580;
}

.corruptText25
{
  color: #dca896;
}

.corruptText50
{
  color: #d891b9;
}

.corruptText75
{
  color: #cb92d8;
}

.corruptText100
{
  color: #d86db3;
}

.corruptBackground0
{
  background: #ffb858 !important;
}

.corruptBackground25
{
  background: #cccccc !important;
}

.corruptBackground50
{
  background: #99C8E2 !important;
}

.corruptBackground75
{
  background: #9f70e6 !important;
}

.corruptBackground100
{
  background: #980094d9 !important;
}

.corruptBackground0 button
{
  background: #9f7f54 !important;
}

.corruptBackground25 button
{
  background: #939287 !important;
}

.corruptBackground50 button
{
  background: #304651 !important;
}

.corruptBackground75 button
{
  background: #2d1c47 !important;
}

.corruptBackground100 button
{
  background: #27000f !important;
}

/* .VersionNumber
{
  font-size: 0.7em;
  position: absolute;
  left: 226px;
  bottom: -18px;
} */

.ExitPopupButtons
{
  text-align: center;
}

.SidebarIcons
{
  flex: 1;
  background: var(--col-black);
  width: 100%;
  align-self: flex-end;
  box-shadow: inset 0 10px 25px hsl(0deg 0% 0% / 50%);
  padding: 1rem 0;
}

.sidebar-footer {
  display: flex;
  justify-content: space-around;
  font-size: .7em;
}

#splash-screen {
	position: fixed;
	left: 0;
	top: 0;
	right: 0;
	bottom: 0;
	z-index: 100;
	background-color: #111;
	color: #eee;
}
#splash-screen > img {
	display: block;
	position: absolute;
	left: 50%;
	top: 50%;
	transform: translateX(-50%) translateY(-50%);
}

.comboMoveName
{
  float: left;
  width: 100%;
  font-size: 15px;
  margin-top: -3px;
  text-align: center;
  text-shadow: -1px 0 9px black, 0 1px 1px black, 1px 0 black, 0 -1px 1px black;

}

.comboValueElementInList
{
    background-color: #999;
    border-radius: 25px 0px 0px 25px;
    padding: 7px 15px 7px 15px;
    width: 12px;
    float: left;
    margin: 0px 1px 0px 0px;
    font-weight: bold;
    text-shadow: -1px 0 black, 0 1px black, 1px 0 black, 0 -1px black;
}

.comboValueElementInList::before {
    content: "";
    position: absolute;
    background-color: #00000000;
    height: 47px;
    width: 25px;
    border-top-left-radius: 18px;
    border-bottom-left-radius: 18px;
    box-shadow: inset 20px 0px 0px 0px #999;
    margin-top: -7px;
    margin-left: 11px;
}

#ChangeFightSkillList
{
    padding: 1px 0px 0px 0px;
}

.comboValue
{
  float: right;
  width: 54px;
  height: 54px;
  margin-top: -15px;
  margin-right: -14px;
  text-align: center;
  padding-top: 7.5px;
  font-size: 18px;
}

.Corrupt0 {
  --hue: 40;
  --saturation: 40%;
  --lightness: 70%;
}
.Corrupt25 {
  --hue: 11;
  --saturation: 40%;
  --lightness: 70%;
}
.Corrupt50 {
  --hue: -19;
  --saturation: 40%;
  --lightness: 60%;
}
.Corrupt75 {
  --hue: 310;
  --saturation: 40%;
  --lightness: 60%;
}
.Corrupt100 {
  --hue: 295;
  --saturation: 40%;
  --lightness: 60%;
}

.comboValue.Corrupt0
{
    background-image: url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/battle_system/ui_chain_icon_0.png);
}

.comboValue.Corrupt25
{
    background-image: url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/battle_system/ui_chain_icon_25.png);
}

.comboValue.Corrupt50
{
    background-image: url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/battle_system/ui_chain_icon_50.png);
}

.comboValue.Corrupt75
{
    background-image: url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/battle_system/ui_chain_icon_75.png);
}

.comboValue.Corrupt100
{
    background-image: url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/battle_system/ui_chain_icon_100.png);
}

.monolith
{
  font-family: BreatheFire;
  font-size: 24px;
}

#StatsWindow
{
  
}

.AbilityContainer
{
  
}

#AbilitiesWindow
{
  overflow-y: scroll;
  max-height: calc(55vh - 2em);
  min-height: 60px;
  position: relative;
  padding-right: 10px;
}

*::-webkit-scrollbar {
  background-color: var(--col-border);
  width: 8px;
  border-radius: 50px;
}

*::-webkit-scrollbar-track {
}

*::-webkit-scrollbar-thumb {
  background: rgb(255,237,208);
  background: linear-gradient(to bottom, 
    rgba(255,237,208,1) 0%, 
    rgba(255,255,255,1) 5px, 
    rgba(193,120,81,1) 5px, 
    rgba(70,34,15,1) 6%, 
    rgba(137,72,36,1) 14%, 
    rgb(141, 113, 66) 50%,  
    rgba(108,46,22,1) 91%, 
    rgba(219,170,137,1) calc(100% - 5px), 
    rgba(58,39,25,1) calc(100% - 5px),
    rgba(137,72,36,1) 100%);

  border: 2px outset rgb(196,158,93);
  box-shadow: 0 .5rem 1rem black;
  /* background-color: #131412;
  border-radius: 50px; */
}

/* .Corrupt0::-webkit-scrollbar-thumb {
  background-color: #A88847;
  border: 3px solid #604427;
}

.Corrupt25::-webkit-scrollbar-thumb {
  background-color: #826536;
  border: 3px solid #59342E;
}
.Corrupt50::-webkit-scrollbar-thumb {
  background-color: #754b63;
  border: 3px solid #5A2A37;
}
.Corrupt75::-webkit-scrollbar-thumb {
  background-color: #6b3a77;
  border: 3px solid #5A2140;
}
.Corrupt100::-webkit-scrollbar-thumb {
  background-color: #6d427a;
  border: 3px solid #60298c;
} */

#ui-bar-body::-webkit-scrollbar {
  background-color: black;
  width: 8px;
  border-radius: 50px;
}

#ui-bar-body::-webkit-scrollbar-track {
}


#ui-bar-body.Corrupt0::-webkit-scrollbar-thumb {
  background-color: #A88847;
  border: 3px solid #604427;
}

#ui-bar-body.Corrupt25::-webkit-scrollbar-thumb {
  background-color: #826536;
  border: 3px solid #59342E;
}
#ui-bar-body.Corrupt50::-webkit-scrollbar-thumb {
  background-color: #754b63;
  border: 3px solid #5A2A37;
}
#ui-bar-body.Corrupt75::-webkit-scrollbar-thumb {
  background-color: #6b3a77;
  border: 3px solid #5A2140;
}
#ui-bar-body.Corrupt100::-webkit-scrollbar-thumb {
  background-color: #6d427a;
  border: 3px solid #60298c;
}

.stat-window-offset
{
  /*margin: auto;*/
  width: 87%;
  padding-left: 5px;
  padding-bottom: 8px;
}

.fight-stat-window-offset
{
}

.stat-container
{
  border: 1px solid;
  padding: 10px;
  border-image-width: 20px !important;
}

.stat-container.Corrupt0
{
  border-image: url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/side_bar/ui_sidebar_stats_border_0.png) 33.33% round;
}

.stat-container.Corrupt25
{
  border-image: url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/side_bar/ui_sidebar_stats_border_25.png) 33.33% round;
}

.stat-container.Corrupt50
{
  border-image: url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/side_bar/ui_sidebar_stats_border_50.png) 33.33% round;
}

.stat-container.Corrupt75
{
  border-image: url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/side_bar/ui_sidebar_stats_border_75.png) 33.33% round;
}

.stat-container.Corrupt100
{
  border-image: url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/side_bar/ui_sidebar_stats_border_100.png) 33.33% round;
}

.statBarContainer
{
  margin-top: 5px;
  margin-bottom: 5px;
}

.info-column1 {
  font-weight: bold;
  text-align: left;
  float: left;
  padding-left: 10px;
  padding-top: 8px;
  font-size: 0.8em;
  font-weight: bold;
  letter-spacing: 1px;
  display: grid;
  justify-content: start;
}

.info-column2 {
  text-align: right;
  float: right;
  width: 40%;
  padding-top: 7px;
  padding-right: 16px;
  display: table-row-group;
  justify-content: end;
  font-size: 0.8em;
}

/* .volume-control-container
{
  font-size: 0.7em;
  position: absolute;
  left: -5px;
  bottom: -27px;
} */

.volumeLabel
{
  position: relative;
  top: -10px;
}

#volume-control
{
  border: 0px solid #444;
  padding-left: .6em;
}

#volume-control::-webkit-slider-thumb {
  background-color: #A88847;
  border: 3px solid #604427;
}
#volume-control::-moz-range-thumb {
  background-color: #A88847;
  border: 3px solid #604427;
}
#volume-control::-ms-thumb {
  background-color: #A88847;
  border: 3px solid #604427;
}

#volume-control.Corrupt0::-webkit-slider-thumb {
  background-color: #A88847;
  border: 3px solid #604427;
}
#volume-control.Corrupt0::-moz-range-thumb {
  background-color: #A88847;
  border: 3px solid #604427;
}
#volume-control.Corrupt0::-ms-thumb {
  background-color: #A88847;
  border: 3px solid #604427;
}

#volume-control.Corrupt25::-webkit-slider-thumb {
  background-color: #826536;
  border: 3px solid #59342E;
}
#volume-control.Corrupt25::-moz-range-thumb {
  background-color: #826536;
  border: 3px solid #59342E;
}
#volume-control.Corrupt25::-ms-thumb {
  background-color: #826536;
  border: 3px solid #59342E;
}

#volume-control.Corrupt50::-webkit-slider-thumb {
  background-color: #754b63;
  border: 3px solid #5A2A37;
}
#volume-control.Corrupt50::-moz-range-thumb {
  background-color: #754b63;
  border: 3px solid #5A2A37;
}
#volume-control.Corrupt50::-ms-thumb {
  background-color: #754b63;
  border: 3px solid #5A2A37;
}

#volume-control.Corrupt75::-webkit-slider-thumb {
  background-color: #6b3a77;
  border: 3px solid #5A2140;
}
#volume-control.Corrupt75::-moz-range-thumb {
  background-color: #6b3a77;
  border: 3px solid #5A2140;
}
#volume-control.Corrupt75::-ms-thumb {
  background-color: #6b3a77;
  border: 3px solid #5A2140;
}

#volume-control.Corrupt100::-webkit-slider-thumb {
  background-color: #6d427a;
  border: 3px solid #60298c;
}
#volume-control.Corrupt100::-moz-range-thumb {
  background-color: #6d427a;
  border: 3px solid #60298c;
}
#volume-control.Corrupt100::-ms-thumb {
  background-color: #6d427a;
  border: 3px solid #60298c;
}

.info-row:after {
  content: "";
  display: table;
  clear: both;
}

#stat-container-row-logo
{
  position: absolute;
  top: -34px;
  transform: translateX(-50%) scale(105%);
}

#stat-container-row
{
  position: relative;
  border-left:solid 22px;
  border-right:solid 22px;
  border-top:solid 22px;
  border-bottom: solid 11px;
  font-weight: bold;
  letter-spacing: 0.5px;
}

#stat-container-row.Corrupt0
{
  border-image: url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/side_bar/ui_sidebar_stats_border_top_0.png) 33.33% round;
}

#stat-container-row.Corrupt25
{
  border-image: url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/side_bar/ui_sidebar_stats_border_top_25.png) 33.33% round;
}

#stat-container-row.Corrupt50
{
  border-image: url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/side_bar/ui_sidebar_stats_border_top_50.png) 33.33% round;
}

#stat-container-row.Corrupt75
{
  border-image: url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/side_bar/ui_sidebar_stats_border_top_75.png) 33.33% round;
}

#stat-container-row.Corrupt100
{
  border-image: url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/side_bar/ui_sidebar_stats_border_top_100.png) 33.33% round;
}

.stat-container-column-active
{
  background-image: url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/side_bar/ui_sidebar_stats_selected_tab.png);
  background-position: center;
  background-repeat: no-repeat;
}

#stat-container-column1 {
  text-align: center;
  float: left;
  width: 50%;
  padding: 0px 0px 0px 0px;
  font-size: 0.8em;
}

#stat-container-column2 {
  text-align: center;
  float: right;
  padding: 0;
  width: 50%;
  font-size: 0.8em;
}

#stat-container-row:after {
  content: "";
  display: table;
  clear: both;
}

.stat-column1 {
  font-weight: bold;
  text-align: left;
  float: left;
  font-size: 0.8em;
  display: grid;
  justify-content: start;
}

.stat-column2 {
  text-align: right;
  float: right;
  padding: 0;
  font-size: 0.8em;
  width: 50%;
  display: table-row-group;
  justify-content: end;
  white-space: nowrap;
  overflow: hidden;
}

.stat-row:after {
  content: "";
  display: table;
  clear: both;
}

.ProgressBarColumn1 {
  text-align: left;
  float: left;
  width: 70%;
  font-size: 0.8em;
}

.ProgressBarColumn1 {
  text-align: left;
  float: left;
  width: 70%;
  font-size: 0.8em;
}

.ProgressBarColumn2 {
  text-align: right;
  float: left;
  width: 30%;
  font-size: 0.8em;
}

.ProgressBarRow:after {
  content: "";
  display: table;
  clear: both;
}

.cycle-column1 {
  text-align: left;
  float: left;
  width: 40%;
  padding: 10px;
  font-size: 0.8em;
}

.cycle-column2 {
  text-align: right;
  float: left;
  width: 40%;
  padding: 10px;
  font-size: 0.8em;
}

.cycle-title {
  color: #C0C0C0;
  font-weight: bold;
}

.cycle-row:after {
  content: "";
  display: table;
  clear: both;
}

@-webkit-keyframes animation-lightspeed-in {
  0% {
    opacity: 0;
    -webkit-transform: translateX(-200%);
            transform: translateX(-200%);
  }
  100% {
    opacity: 1;
    -webkit-transform: translateX(0);
            transform: translateX(0);
  }
}

@keyframes animation-lightspeed-in {
  0% {
    opacity: 0;
    -webkit-transform: translateX(-200%);
            transform: translateX(-200%);
  }
  100% {
    opacity: 1;
    -webkit-transform: translateX(0);
            transform: translateX(0);
  }
}

.chart-horizontal {
  margin: 0;
  padding: 0;
  list-style: none;
  overflow: hidden;
}

.chart-horizontal::after {
  clear: both;
  content: "";
  display: block;
}

.chart-horizontal .chart-bar {
  -webkit-animation: 1s animation-lightspeed-in ease forwards;
          animation: 1s animation-lightspeed-in ease forwards;
  height: 20px;
  opacity: 0;
  overflow: hidden;
}

.chart-horizontal .chart-bar:nth-of-type(10) {
  -webkit-animation-delay: 2s;
          animation-delay: 2s;
}

.chart-horizontal .chart-bar:nth-of-type(9) {
  -webkit-animation-delay: 1.8s;
          animation-delay: 1.8s;
}

.chart-horizontal .chart-bar:nth-of-type(8) {
  -webkit-animation-delay: 1.6s;
          animation-delay: 1.6s;
}

.chart-horizontal .chart-bar:nth-of-type(7) {
  -webkit-animation-delay: 1.4s;
          animation-delay: 1.4s;
}

.chart-horizontal .chart-bar:nth-of-type(6) {
  -webkit-animation-delay: 1.2s;
          animation-delay: 1.2s;
}

.chart-horizontal .chart-bar:nth-of-type(5) {
  -webkit-animation-delay: 1s;
          animation-delay: 1s;
}

.chart-horizontal .chart-bar:nth-of-type(4) {
  -webkit-animation-delay: 0.8s;
          animation-delay: 0.8s;
}

.chart-horizontal .chart-bar:nth-of-type(3) {
  -webkit-animation-delay: 0.6s;
          animation-delay: 0.6s;
}

.chart-horizontal .chart-bar:nth-of-type(2) {
  -webkit-animation-delay: 0.4s;
          animation-delay: 0.4s;
}

.chart-horizontal .chart-bar:nth-of-type(1) {
  -webkit-animation-delay: 0.2s;
          animation-delay: 0.2s;
}

.chart-horizontal .chart-bar[data-skill="0"] {width: 1%;}
.chart-horizontal .chart-bar[data-skill="2"] {width: 2%;}
.chart-horizontal .chart-bar[data-skill="4"] {width: 4%;}
.chart-horizontal .chart-bar[data-skill="6"] {width: 6%;}
.chart-horizontal .chart-bar[data-skill="8"] {width: 8%;}
.chart-horizontal .chart-bar[data-skill="10"] {width: 10%;}
.chart-horizontal .chart-bar[data-skill="12"] {width: 12%;}
.chart-horizontal .chart-bar[data-skill="14"] {width: 14%;}
.chart-horizontal .chart-bar[data-skill="16"] {width: 16%;}
.chart-horizontal .chart-bar[data-skill="18"] {width: 18%;}
.chart-horizontal .chart-bar[data-skill="20"] {width: 20%;}
.chart-horizontal .chart-bar[data-skill="22"] {width: 22%;}
.chart-horizontal .chart-bar[data-skill="24"] {width: 24%;}
.chart-horizontal .chart-bar[data-skill="26"] {width: 26%;}
.chart-horizontal .chart-bar[data-skill="28"] {width: 28%;}
.chart-horizontal .chart-bar[data-skill="30"] {width: 30%;}
.chart-horizontal .chart-bar[data-skill="32"] {width: 32%;}
.chart-horizontal .chart-bar[data-skill="34"] {width: 34%;}
.chart-horizontal .chart-bar[data-skill="36"] {width: 36%;}
.chart-horizontal .chart-bar[data-skill="38"] {width: 38%;}
.chart-horizontal .chart-bar[data-skill="40"] {width: 40%;}
.chart-horizontal .chart-bar[data-skill="42"] {width: 42%;}
.chart-horizontal .chart-bar[data-skill="44"] {width: 44%;}
.chart-horizontal .chart-bar[data-skill="46"] {width: 46%;}
.chart-horizontal .chart-bar[data-skill="48"] {width: 48%;}
.chart-horizontal .chart-bar[data-skill="50"] {width: 50%;}
.chart-horizontal .chart-bar[data-skill="52"] {width: 52%;}
.chart-horizontal .chart-bar[data-skill="54"] {width: 54%;}
.chart-horizontal .chart-bar[data-skill="56"] {width: 56%;}
.chart-horizontal .chart-bar[data-skill="58"] {width: 58%;}
.chart-horizontal .chart-bar[data-skill="60"] {width: 60%;}
.chart-horizontal .chart-bar[data-skill="62"] {width: 62%;}
.chart-horizontal .chart-bar[data-skill="64"] {width: 64%;}
.chart-horizontal .chart-bar[data-skill="66"] {width: 66%;}
.chart-horizontal .chart-bar[data-skill="68"] {width: 68%;}
.chart-horizontal .chart-bar[data-skill="70"] {width: 70%;}
.chart-horizontal .chart-bar[data-skill="72"] {width: 72%;}
.chart-horizontal .chart-bar[data-skill="74"] {width: 74%;}
.chart-horizontal .chart-bar[data-skill="76"] {width: 76%;}
.chart-horizontal .chart-bar[data-skill="78"] {width: 78%;}
.chart-horizontal .chart-bar[data-skill="80"] {width: 80%;}
.chart-horizontal .chart-bar[data-skill="82"] {width: 82%;}
.chart-horizontal .chart-bar[data-skill="84"] {width: 84%;}
.chart-horizontal .chart-bar[data-skill="86"] {width: 86%;}
.chart-horizontal .chart-bar[data-skill="88"] {width: 88%;}
.chart-horizontal .chart-bar[data-skill="90"] {width: 90%;}
.chart-horizontal .chart-bar[data-skill="92"] {width: 92%;}
.chart-horizontal .chart-bar[data-skill="94"] {width: 94%;}
.chart-horizontal .chart-bar[data-skill="96"] {width: 96%;}
.chart-horizontal .chart-bar[data-skill="98"] {width: 98%;}
.chart-horizontal .chart-bar[data-skill="100"] {width: 100%;}

.stat-perturn {
  text-align: center;
  font-weight: bold;
  margin-top: -8px;
  padding: 0;
  font-size: 0.7em;
}

.PlayerDescriptor
{
  line-height: 25px;
}

.DateText
{
  font-weight: bold;
  letter-spacing: 1px;
  font-size: 0.8em;
}

.LevelText
{
  font-weight: bold;
  letter-spacing: 2px;
}

.PlayerName
{
  font-size: 1.4em;
  font-weight: bold;
  letter-spacing: 3px;
}

.PlayerRace
{
  font-weight: bold;
  letter-spacing: 2px;
}

.stat-title {
font-weight: bold;
}

.stat-value {
}

.stat-row {
  padding: 0px 0px 0px 40px;
}

.stat-row:after {
  content: "";
  display: table;
  clear: both;
}

body
{
  display: inline-block;
  background: 
    url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/general/Background_fog.png),
    linear-gradient(to bottom, rgba(41, 43, 47, .5), rgba(41, 43, 47, .5));
  background-blend-mode: lighten;
}

body::after {
  content: "";
  background: url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/general/Background_fog.png);
  position: fixed;
  top: 50%;
  right: 0;
  translate: -10% -50%;
  width: 70vw;
  height: 70vw;
  border: 1em solid var(--col-border);
  rotate: 45deg;
}
#story-caption {
  display: flex;
  flex-direction: column;
  height: 100%;
  box-sizing: border-box;
}

#StoryContainer
{
}

#story
{
  /* background-color: #292B2F; */
  min-width: -moz-available;
  min-width: -webkit-fill-available;
  min-width: fill-available;
  height: calc(85vh - 6em);
  top: .5rem;
  bottom: 0;
  position: fixed;
  overflow-y: scroll;
  display: flex;
}
#story::before {
  content: "";
  position: fixed;
  background: linear-gradient(to bottom,
    transparent 20%,
    var(--col-black),
    transparent 80%);
  top: 3em;
  left: 18.5em;
  right: 3.5em;
  bottom: 6em;
  z-index: -1;
}

#story-title 
{
	display: none;
}

#story-author
{
	display: none;
}

#menu
{
  display:none;
}

/* .Sidebar.Corrupt0
{
  border: 21px solid;
  border-image: url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/side_bar/ui_sidebar_main_0.png) 33.33% round;
  background-color: #2E2820 !important;
}

.Sidebar.Corrupt25
{
  border: 21px solid;
  border-image: url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/side_bar/ui_sidebar_main_25.png) 33.33% round;
  background-color: #2C2822 !important;
}

.Sidebar.Corrupt50
{
  border: 21px solid;
  border-image: url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/side_bar/ui_sidebar_main_50.png) 33.33% round;
  background-color: #2A2724 !important;
}

.Sidebar.Corrupt75
{
  border: 21px solid;
  border-image: url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/side_bar/ui_sidebar_main_75.png) 33.33% round;
  background-color: #292725 !important;
}

.Sidebar.Corrupt100
{
  border: 21px solid;
  border-image: url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/side_bar/ui_sidebar_main_100.png) 33.33% round;
  background-color: #272727 !important;
} */

.ImageBorder
{

}

.EnemyImage
{
  position: relative;
  text-align: center;
  width: fit-content;
  margin: auto;
}

.PlaceholderHeader
{
  position: relative;
  text-align: center;
  width: fit-content;
  margin: auto;
  font-size: 0.8em;
}

.BodyVisualEnemyImage
{
  pointer-events: none;
  position: relative;
  text-align: center;
  width: fit-content;
  margin: auto;
}

.EmotePortrait
{
  position: absolute;
  width: calc(100%);
  height: calc(100%);
}

.TorgarSmallBodyHead
{
  position: absolute;
  width: calc(100%);
  height: calc(100%);
  top: -26%;
  left: 6%;
}

.TorgarInfectedBodyHead
{
  position: absolute;
  width: calc(100%);
  height: calc(100%);
  top: -26%;
  left: 6%;
}

.TorgarLostBodyHead
{
  position: absolute;
  width: calc(100%);
  height: calc(100%);
  top: -26%;
  left: 6%;
}

.TorgarAscendedBodyHead
{
  position: absolute;
  width: calc(100%);
  height: calc(100%);
  top: -26%;
  left: 6%;
}

.TorgarSmallBody1Cock
{
  position: absolute;
  width: calc(100%);
  height: calc(100%);
  top: 16%;
  left: 8%;
}

.TorgarSmallBody2Cock
{
  position: absolute;
  width: calc(100%);
  height: calc(100%);
  top: 21.5%;
  left: 11%;
}

.TorgarInfected2Cock
{
  position: absolute;
  width: calc(100%);
  height: calc(100%);
  top: 8%;
  left: 7.5%;
}

.TorgarInfected3Cock
{
  position: absolute;
  width: calc(100%);
  height: calc(100%);
  top: 6%;
  left: 8.5%;
}

.TorgarLost4Cock
{
  position: absolute;
  width: calc(100%);
  height: calc(100%);
  top: 11%;
  left: 3.5%;
}

.TorgarAscended5Cock
{
  position: absolute;
  width: calc(100%);
  height: calc(100%);
  top: 6%;
  left: 14%;
}

.AbelHead
{
  position: absolute;
}

.ApothusHead
{
  position: absolute;
}

.ApothusBody
{
  position: absolute;
}

.BindHead
{
  position: absolute;
}

.BindBody
{
  position: absolute;
}

.ImpSmallBodyHead
{
  position: absolute;
  width: calc(100%);
  height: calc(100%);
  top: 3%;
  left: 3%;
}

.ImpSmallBody1Cock
{
  position: absolute;
  width: calc(100%);
  height: calc(100%);
  top: 25%;
  left: 5.5%;
}

.ImpSmallBody2Cock
{
  position: absolute;
  width: calc(100%);
  height: calc(100%);
  top: 23%;
  left: 7.5%;
}

.ImpMediumBodyHead
{
  position: absolute;
  width: calc(100%);
  height: calc(100%);
  top: -15.5%;
  left: 0.5%;
}

.ImpMediumBody2Cock
{
  position: absolute;
  width: calc(100%);
  height: calc(100%);
  top: 20%;
  left: 5.5%;
}

.ImpMediumBody3Cock
{
  position: absolute;
  width: calc(100%);
  height: calc(100%);
  top: 18%;
  left: 9%;
}

.ImpMediumBody4Cock
{
  position: absolute;
  width: calc(100%);
  height: calc(100%);
  top: 12%;
  left: 10.5%;
}

.ImpBigBodyHead
{
  position: absolute;
  width: calc(100%);
  height: calc(100%);
  top: -31.5%;
  left: -2%;
}

.ImpBigBody4Cock
{
  position: absolute;
  width: calc(100%);
  height: calc(100%);
  top: 11%;
  left: 10%;
}

.ImpBigBody5Cock
{
  position: absolute;
  width: calc(100%);
  height: calc(100%);
  top: 0%;
  left: 2%;
}

.ImpBigBody6Cock
{
  position: absolute;
  width: calc(100%);
  height: calc(100%);
  top: 1%;
  left: 1%;
}

.BodyCumClass
{
  position: absolute;
  width: calc(100%);
  height: calc(100%);
}

#ui-bar-toggle
{
  display:none;
}

@media (max-width: 1081px)
{
  #ui-bar
  {
    width: 25vw;
    font-size: 0.8em;
  } 
}

#ui-bar {
  box-sizing: border-box;
  background: 
    radial-gradient(transparent, hsla(0 0% 0% / 30%)),
    var(--col-gray);
  height: 84vh;
  top: 2rem;
  left: 2rem;
  width: 16em;
  padding: .5rem;
  border: 4px solid;
  border-color: hsl(
      var(--hue)
      var(--saturation)
      calc(var(--lightness) - 0%)
    )
    hsl(
      var(--hue)
      calc(var(--saturation) - 10%)
      calc(var(--lightness) - 30%)
    )
    hsl(
      var(--hue)
      calc(var(--saturation) - 20%)
      calc(var(--lightness) - 50%)
    );
  box-shadow: inset 0 15px 40px hsl(0deg 0% 0% / 50%);
}

#ui-bar::-webkit-scrollbar 
{ 
  width: 0 !important ;
  height: 0 !important ;
}

/* #ui-bar-body 
{ 
  overflow-x: hidden;
  -ms-overflow-style: none;
  margin: -13px -20px 0px -20px;
  padding: 0;
  height: auto;
  max-height: 99%;
} */

#ui-bar-body 
{ 
  overflow-x: hidden;
  -ms-overflow-style: none;
  padding: 0;
  height: 100%;
  margin: 0;
}

#ui-bar-body>:not(:first-child)
{
  margin-top: 0px;
}

/*loading screen*/
#init-screen
{
  background-color: #000;
}

/*html[data-init=loading] #init-loading
{
  border:0;
  background: url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/IconDiscord.png);
  animation: init-loading-spin 100s linear infinite;
  width: 512px;
  height: 512px;
}*/

#ui-sidebar-toggle
{
  pointer-events: none;
  cursor: default;
  opacity: .35;
  display: none;
}

#topBorder
{
  top: -148px;
  position: relative;
  width: 80px;
  height: 0px;
  left: 50%;
  transform: translateX(-50%);
}

#bottomBorder
{
  bottom: -68px;
  position: relative;
  width: 80px;
  height: 0px;
  left: 50%;
  transform: translateX(-50%);
  -webkit-transition: none !important;
  -moz-transition: none !important;
  -o-transition: none !important;
  transition: none !important;
}

.SidebarDivisionMid
{
  margin-left: -10px;
}

.LargeBorder
{
  /* border: 32px solid transparent;
  border-image-width: 66px !important;
  padding: 0px;
  margin-top: 19px ! important; */
  outline: 4px solid var(--col-border);
  outline-offset: 1em;
}

.LargeBorder.Corrupt0
{
  border-image: url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/general/ui_borderlarge_2_corrupt0.png) 28.625% round;
  border-image-outset: 15px
}
.LargeBorder.Corrupt25
{
  border-image: url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/general/ui_borderlarge_2_corrupt25.png) 28.625% round;
  border-image-outset: 15px
}
.LargeBorder.Corrupt50
{
  border-image: url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/general/ui_borderlarge_2_corrupt50.png) 28.625% round;
  border-image-outset: 15px
}
.LargeBorder.Corrupt75
{
  border-image: url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/general/ui_borderlarge_2_corrupt75.png) 28.625% round;
  border-image-outset: 15px
}
.LargeBorder.Corrupt100
{
  border-image: url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/general/ui_borderlarge_2_corrupt100.png) 28.625% round;
  border-image-outset: 15px
}

.ImageContainer
{

}

.FillWidth
{
  position: absolute;
  width: calc(100% - 64px);
  height: calc(100% - 64px);
  top: -5px;
  padding: 8px !important;
}

.MobileBorder
{
  border: 24px solid transparent;
  padding: 15px;
}

.MobileBorder.Corrupt0
{
  border-image: url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/general/ui_border_small_0.png) 30% round;
  border-image-outset: 2px;
}
.MobileBorder.Corrupt25
{
  border-image: url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/general/ui_border_small_25.png) 30% round;
  border-image-outset: 2px;
}
.MobileBorder.Corrupt50
{
  border-image: url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/general/ui_border_small_50.png) 30% round;
  border-image-outset: 2px;
}
.MobileBorder.Corrupt75
{
  border-image: url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/general/ui_border_small_75.png) 30% round;
  border-image-outset: 2px;
}
.MobileBorder.Corrupt100
{
  border-image: url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/general/ui_border_small_100.png) 30% round;
  border-image-outset: 2px;
}

.ChoiceBorder
{
  border: 12px solid transparent;
  padding: 15px;
}

.ChoiceBorder.Corrupt0
{
  border-image: url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/general/ui_border_small_0.png) 20% round;
  border-image-outset: 2px;
}
.ChoiceBorder.Corrupt25
{
  border-image: url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/general/ui_border_small_25.png) 20% round;
  border-image-outset: 2px;
}
.ChoiceBorder.Corrupt50
{
  border-image: url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/general/ui_border_small_50.png) 20% round;
  border-image-outset: 2px;
}
.ChoiceBorder.Corrupt75
{
  border-image: url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/general/ui_border_small_75.png) 20% round;
  border-image-outset: 2px;
}
.ChoiceBorder.Corrupt100
{
  border-image: url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/general/ui_border_small_100.png) 20% round;
  border-image-outset: 2px;
}

.outerComboContainer
{
    background: #151515;
}

.comboCounterContainer
{
  text-align: center;
}

.comboReadyButton
{
  display: inline-block;
  background-color: #694269;
  color: #fff;
  text-align: center;
  border-radius: 6px;
}

.captionButton
{
  cursor: pointer;
}

.picked {
  opacity: 0.65;
}

.inactive {
  pointer-events: none;
  cursor: default;
  opacity: .35;
}

.reallyInactive {
  pointer-events: none;
  cursor: default;
  opacity: .15;
}

.passage button {
	background: #455A64;
  border-color: #BEC5D8;
}

.hidden {
  display:none;
}

.expandInfo {
  border: 2px solid #ededed;
  background-color: #464646;
  padding: 5px;
}

table.LevelUpStatTable {
  max-width: 600px;
  text-align: left;
  border-collapse: collapse;
}
table.LevelUpStatTable td, table.LevelUpStatTable th {
  border: 1px solid #AAAAAA;
  padding: 8px 4px;
  height: 50px;
}

.StatCaption
{
  margin-top: 5px;
  margin-right: 10px;
  margin-left: 0;
  resize: vertical;
  border: 32px solid transparent;
  padding: 0px;
  color: white;
}

.StatCaption.Corrupt0
{
  border-image: url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/general/ui_border_small_0.png) 40% round;
  border-image-outset: 2px;
}
.StatCaption.Corrupt25
{
  border-image: url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/general/ui_border_small_25.png) 40% round;
  border-image-outset: 2px;
}
.StatCaption.Corrupt50
{
  border-image: url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/general/ui_border_small_50.png) 40% round;
  border-image-outset: 2px;
}
.StatCaption.Corrupt75
{
  border-image: url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/general/ui_border_small_75.png) 40% round;
  border-image-outset: 2px;
}
.StatCaption.Corrupt100
{
  border-image: url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/general/ui_border_small_100.png) 40% round;
  border-image-outset: 2px;
}

.ComboFightMovesContainer
{
  text-align:center;
  margin-top: 6px;
}

.FightSkillsComboContainer {
  display: inline-flex;
}

.FightSkillsCombo {
  display: inline-block;
}

.FightSkillsComboAdd {
  display: inline-block;
  padding-top: 8px;
}

.ComboButtonsContainer{
  display: inline-block;
}

.BottomComboZone {
  display: inline;
}

.BottomComboContainer {
  height: 40px;
  width: 100%;
  text-align: center;
}

.MainMenu {
  text-align: center;
}

.ComboButtons button{
    background: #999999;
}

.AchievementWindowContentContainer
{
  margin-bottom: 10px;
  display: grid;
}

.AchievementWindowHeaderTitle
{
  margin: 0;
}

.AchievementWindowHeader
{
  width: 100%;
  float: left;
}

.AchievementCardsContainer
{
  width: 650px;
}

.AchievementCardsBottomText
{
  margin-top: auto;
}

.AchievementWindow
{
  text-align: center;
}

.VolumeMenuWindow
{
  text-align: center;
  padding-top: 20px;
}

.VolumeMenuTitle
{
  display: block;
  font-size: 1.7em;
  margin-inline-start: 0px;
  margin-inline-end: 0px;
  font-weight: bold;
}

.VolumeMenuSlider
{
  padding-bottom: 30px;
}

.VolumeMenu
{
  
}

.AbilityCategoryIconsContainer
{
  position: relative;
  height: 51px;
  width: 100%;
}

.AbilityCategoryIconsContainerInternal
{
  display: flex;
  justify-content: space-around;
}

.AbilityCategoryIconButton
{
  position: relative;
}

/* .AbilityCategoryIconButton.Powers
{
  
}

.AbilityCategoryIconButton.Alteration
{
  left: 60px;
}

.AbilityCategoryIconButton.StatusEffects
{
  left: 120px;
}

.AbilityCategoryIconButton.Global
{
  left: 180px;
} */

#AbilitiesWindowContentList
{

}

.AbilityCategoryHighlight
{
  inset: 0;
  position: absolute;
  background-repeat: no-repeat;
}

.AbilityNotification
{
  position: absolute;
  bottom: 10px;
  right: 0;

  border-radius: 10px;
  background: #000000;
  width: 15px;
  font-size: 0.8em;
  color: white;
  padding: 0px 3px 0px 3px;
  z-index: 9;
}

.AbilityNotificationBlip
{
  position: absolute;
  bottom: 20px;
  right: -3px;
  z-index: 10;

  border-radius: 10px;
  background: #ff0000;
  width: 5px;
  padding: 0px 1px 0px 1px;
  height: 7px;
}

.AbilityNotificationBlipContainer
{
  position: relative;
}

.AbilityHeaderNotificationBlip
{
  position: absolute;
  right: 0;
  z-index: 10;
  border-radius: 10px;
  background: #ff0000;
  width: 5px;
  padding: 0px 3px 0px 3px;
  height: 11px;
}

.AbilityCategoryHighlight.selected
{
  background-image: url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/Abilities/ui_abilities_selected.png);
}

.AchievementAbility {
  background: #000000;
  border-radius: 10px;
  margin-top: 5px;
  margin-bottom: 10px;
  text-align: center;
  width: 200px;
  margin-right: 10px;
  float: left;
}

.AchievementAbilityHeader
{
  text-transform: capitalize;
  font-size: 0.76em;
  padding-top: 5px;
}

.AchievementAbilityBody {
  background: #3a3a3a;
  border-radius: 5px;
  margin-top: 5px;
  margin-bottom: 0px;
  font-size: 15px;
  text-align: center;
  padding-left: 10px;
  padding-right: 10px;
  display: grid;
}

.AchievementAbilityBodyCompleteLock {
  align-self: center;
  background: #060606;
  border-radius: 10px;
  padding: 20px;
}

.AchievementAbilityBodyNewGameLock {
  align-self: center;
  background: #060606;
  border-radius: 10px;
  padding: 10px;
}

.AchievementAbilityBodyRow {
  align-self: center;
}

.AchievementAbilityBody.Idle {
  height: 150px;
}

.AchievementAbilityBody.Complete {
  height: 300px;
}

.AchievementAbilityBody.Activated {
  height: 300px;
}

.AchievementAbilityBodySpacer {
  margin-top: 5px;
  margin-bottom: 0px;
}

/* Tooltip container */
.PassiveAbility {
  background: rgba(20, 20, 20, .5);
  border-radius: 10px;
  font-size: 0.8em;
  cursor: pointer;
  text-align: left;
  filter: drop-shadow(2px 4px 6px #000000);
}

.PassiveAbilityHeader
{
  text-transform: capitalize;
  padding-left: 10px;
  background:
    radial-gradient(#302c2c, transparent), 
    rgb(36 31 31);
  border: 2px solid rgba(50, 50, 50, .5);
  border-radius: 5px;
  margin: 2px;
  color: #bd9f89;
}

.PassiveAbilityHeader.Corrupt0
{
  color: #DCB580;
}

.PassiveAbilityHeader.Corrupt25
{
  color: #dca896;
}

.PassiveAbilityHeader.Corrupt50
{
  color: #d891b9;
}

.PassiveAbilityHeader.Corrupt75
{
  color: #cb92d8;
}

.PassiveAbilityHeader.Corrupt100
{
  color: #d86db3;
}

.levelUpCardCategory{
  text-align: center;
  border-radius: 5px;
  padding: 10px 10px 10px 10px;
}

.AbilityGradeVeryLow{
  border-color: #4646467a !important;
  background: #4646467a;
}

.AbilityGradeLow{
  border-color: #717171 !important;
  background: #717171;
}

.AbilityGradeMedium{
  border-color: #254024 !important;
  background: #254024;
}

.AbilityGradeHigh{
  border-color: #34124e !important;
  background: #34124e;
}

.AbilityGradeVeryHigh{
  border-color: #5f3d00 !important;
  background: #5f3d00;
}

.levelUpCards{
  font-size: 21px;
  text-align: left;
  border-radius: 5px;
  margin-top: 15px;
  padding: 10px 5px 5px 5px;
}

.levelUpCards p{
  text-align: left;
  background: #131412;
  padding: 10px 10px 10px 20px;
  font-size: 18px;
  border-radius: 3px;
  margin-block-start: 0em;
  margin-block-end: 0em;
  margin-inline-start: 0px;
  margin-inline-end: 0px;
}

.AbilityLevelUpCard
{
  border-radius: 20px;
  margin-top: 5px;
  margin-bottom: 10px;
  text-align: center;
  width: 300px;
  margin-right: 25px;
  float: left;
  border: 2px solid;
}

.AbilityLevelUpCardDescription
{
  border-radius: 5px;
  margin-top: 5px;
  margin-bottom: 0px;
  height: 150px;
  font-size: 15px;
  text-align: center;
  padding-left: 10px;
  padding-right: 10px;
  display: grid;
  background: #0e0e0e;
}

.AbilityLevelUpCardHeader
{
  text-transform: capitalize;
  font-size: 0.9em;
  padding-top: 5px;
  background: #0a0a0a;
  border-radius: 5px;
}

.AbilityLevelUpCardBody
{

}

/* Tooltip text */
.PassiveAbilityBody {
  background: 
    linear-gradient(to bottom, transparent 90%, #6355684a 100%),
    linear-gradient(339deg, #312b34, #473b4c4a, transparent 30%), 
    linear-gradient(18deg, #312b34, #473b4c4a, transparent 30%),
    #131412;
  border-radius: 5px;
  margin-top: 5px;
  margin-bottom: 0px;
  text-align: left;
  font-size: 15px;
  padding-left: 20px;
  padding-bottom: 5px;
  cursor: default;
}

#LevelBarContainer {
  flex: 0 0 50px;
  width: 200px;
  position: relative;
  align-self: center;
  font-weight: bold;
  letter-spacing: 1px;
  margin: auto;
  height: 50px;
}
#LevelBarContent {
  width: 100%;
  height: 100%;
  position: absolute;
}

#ProgressBarContent,
#LevelBarBorder {
  width: 100%;
  height: 100%;
  position: absolute;
}
#LevelBarBorder {
  margin-top:-6px;
  z-index: 10;
}

#ProgressBarContainer {
  height: 54px;
  width: 236px;
  position: relative;
  margin: 0 auto;
  border: 1px;
}

@media (max-width: 1081px)
{
  #ProgressBarContainer 
  {
    width: 21vw;
  }
}

#ProgressBarContent,
#ProgressBarBorder {
  width: 100%;
  height: 100%;
  position: absolute;
  z-index: 15;
}
#ProgressBarBorder {
  z-index: 10;
}

#ProgressBarContent,
.ProgressBarBackground {
  width: 100%;
  height: 100%;
  position: absolute;
  z-index: 10;
}
.ProgressBarBackground {
  z-index: 5;
}

#ProgressBarName {
  position: absolute;
  left: 45px;
  font-size: 0.7em;
  top: 4px;
}

#ProgressBarText {
  position: absolute;
  left: 45px;
  top: 24px;
  font-size: 0.65em;
  font-weight: bold;
  letter-spacing: 1px;
}

progress
{
  border: 0px solid white;
}

progress#LevelProgress {
  background: rgba(0, 0, 0, 0);
  vertical-align: baseline;
}

progress#LevelProgress::-webkit-progress-value {
  background: rgba(0, 0, 0, 0) url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/side_bar/ui_sidebar_bar_level_full.png) no-repeat border-box;
}
progress#LevelProgress::-moz-progress-bar {
  background: rgba(0, 0, 0, 0) url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/side_bar/ui_sidebar_bar_level_full.png) no-repeat border-box;
}

progress#HPProgress {
  background: rgba(0, 0, 0, 0);
  vertical-align: baseline;
  height: inherit;
  width: inherit;
}

progress#HPProgress::-webkit-progress-value {
  background: rgba(0, 0, 0, 0) url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/side_bar/ui_sidebar_bar_stats_full_health.png) no-repeat border-box;
}
progress#HPProgress::-moz-progress-bar {
  background: rgba(0, 0, 0, 0) url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/side_bar/ui_sidebar_bar_stats_full_health.png) no-repeat border-box;
}

progress#StaminaProgress {
  background: rgba(0, 0, 0, 0);
  vertical-align: baseline;
  height: inherit;
  width: inherit;
}

progress#StaminaProgress::-webkit-progress-value {
  background: rgba(0, 0, 0, 0) url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/side_bar/ui_sidebar_bar_stats_full_stamina.png) no-repeat border-box;
}
progress#StaminaProgress::-moz-progress-bar {
  background: rgba(0, 0, 0, 0) url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/side_bar/ui_sidebar_bar_stats_full_stamina.png) no-repeat border-box;
}

progress#ArousalProgress {
  background: rgba(0, 0, 0, 0);
  vertical-align: baseline;
  height: inherit;
  width: inherit;
}

progress#ArousalProgress::-webkit-progress-value {
  background: rgba(0, 0, 0, 0) url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/side_bar/ui_sidebar_bar_stats_full_arousal.png) no-repeat border-box;
}

progress#ArousalProgress::-moz-progress-bar {
  background: rgba(0, 0, 0, 0) url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/side_bar/ui_sidebar_bar_stats_full_arousal.png) no-repeat border-box;
}

#StatModifierPositive
{
  color:var(--col-positive);
}

#StatModifierNegative
{
  color:red;
}

.turnHeaderText
{
  width: 100%;
  text-align: center;
}

.AttackAttemptContainer
{
  float: left;
  width: 100%;
  margin-bottom: 50px;
  text-align: center;
}

.attackAttemptDesc
{
}

.FightSkillCardContainer
{
  float: left;
  width: 100%;
}

@media (max-width: 1201px) and (max-height: 801px) 
{
  .FightSkillCardHighlight 
  {
    zoom: 0.7;
  }
  #passages 
  {
    font-size: 0.8em;
  }
}

#passages 
{
  max-width: 54em;
  padding: 1rem;
  margin: auto;
}

.FightSkillActionCosts
{
  width: 100%;
  height: 50px;
  margin-left: 14px;
  display: flex;
}

.FightSkillActionCostsFirstLink
{
  width: 33px;
  height: 33px;
  margin-left: 10px;
  margin-right: -17px;
  float: left;
  background-image: url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/battle_system/card_chain_left.png);
}

.FightSkillActionCostsNumberInCombo
{
  position: absolute;
  float: left;
  margin-left: 13px;
  margin-top: -20px;
}

.FightSkillActionCostsNumberInComboContainer
{
  position: relative;
  float: left;
}

.FightSkillActionCostsNumber
{
  position: absolute;
  float: left;
  margin-left: -2px;
  margin-top: -2px;
}

.FightSkillActionCostsMiddleLink
{
  width: 33px;
  height: 33px;
  margin-right: -17px;
  float: left;
  background-image: url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/battle_system/card_chain_middle.png);
}

.FightSkillActionCostsLastLink
{
  width: 33px;
  height: 33px;
  float: left;
  background-image: url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/battle_system/card_chain_right.png);
}

.UIActionCostsFirstLink
{
  width: 54px;
  height: 54px;
  margin-right: -27px;
  float: left;
  background-image: url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/battle_system/ui_chain_0_left.png);
}

.UIActionCostsFirstLink.Alt
{
  background-image: url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/battle_system/ui_chain_1_left.png);
}

.UIActionCostsFirstLink.Grayed
{
  background-image: url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/battle_system/ui_chain_slot_left.png);
}

.UIActionCostsLastLink
{
  width: 54px;
  height: 54px;
  float: left;
  background-image: url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/battle_system/ui_chain_0_right.png);
}

.UIActionCostsLastLink.Alt
{
  background-image: url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/battle_system/ui_chain_1_right.png);
}

.UIActionCostsLastLink.Grayed
{
  background-image: url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/battle_system/ui_chain_slot_right.png);
}

.UIActionCostsMiddleLink
{
  width: 54px;
  height: 54px;
  margin-right: -27px;
  float: left;
  background-image: url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/battle_system/ui_chain_0_middle.png);
}

.UIActionCostsMiddleLink.Alt
{
  background-image: url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/battle_system/ui_chain_1_middle.png);
}

.UIActionCostsMiddleLink.Grayed
{
  background-image: url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/battle_system/ui_chain_slot_middle.png);
}

.FightSkillHeaderStatIconRow
{
  position: absolute;
  margin-top: 73px;
}

#FightSkillHeader { 
  height: 116px;
  font-size: 20px;
  background-position: center;
}

#FightSkillHeader.offensive
{
  background-image: url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/battle_system/card_symbol_offensive.png);
}

#FightSkillHeader.demon
{
  background-image: url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/battle_system/card_symbol_offensive_demon.png);
}

#FightSkillHeader.special
{
  background-image: url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/battle_system/card_symbol_pacific.png);
}

#FightSkillHeader.symbiote
{
  background-image: url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/battle_system/card_symbol_offensive_symbiote.png);
}

#FightSkillHeader.buff
{
  background-image: url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/battle_system/card_symbol_buff.png);
}

#FightSkillHeader.sigil
{
  background-image: url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/battle_system/card_symbol_sigil.png);
}

#FightSkillBody { 
  margin-top: 5px;
  margin-bottom: 0px;
  font-size: 14px;
  line-height: 19px;
  text-align: left;
  padding-left: 10px;
  padding-top: 29px;
  margin-left: 5px;
  margin-right: 14px;
  height: 80px;
}

#statButtonText {
  position: absolute;
  width: 110px;
  top: -11px;
  left: -13px;
  background-position: center;
}

#abilitiesButtonText {
  position: absolute;
  width: 110px;
  text-align: center;
  bottom: -10px;
  top: -11px;
  left: 120px;
  background-position: right;
}

.tooltipContainer {
  position: absolute;
}

.tooltip {
  position: static;
  display: inline-block;
}

.tooltip .tooltiptext {
  visibility: hidden;
  width: max-content;
  max-width: 50ch;
  white-space: break-spaces;
  background-color: var(--col-button);
  color: var(--col-soft);
  text-align: center;
  border-radius: 6px;
  padding: 1em;
  position: absolute;
  z-index: 9999;
  bottom: 125%;
  left: 0%;
  opacity: 0;
  transition: opacity 0.3s;
  font-size: 13px;
  font-weight: normal;
  letter-spacing: normal;
  font-family: Georgia;
  text-shadow: none;
  translate: calc(-50% - 1ch) 0;
  pointer-events: none;
}

.tooltip .tooltiptext::after {
  content: "";
  position: absolute;
  top: 100%;
  left: 50%;
  margin-left: -5px;
  border-width: 5px;
  border-style: solid;
  border-color: var(--col-button) transparent transparent transparent;
  z-index: 9999;
}

.tooltip:hover .tooltiptext {
  visibility: visible;
  opacity: 1;
}

.tooltipskill {
  position: relative;
  display: inline-block;
  border-bottom: 1px dotted black;
}

.tooltipskill .tooltipskilltext {
  visibility: hidden;
  width: 250px;
  background-color: #555;
  color: #fff;
  text-align: center;
  border-radius: 6px;
  padding: 5px 0;
  position: absolute;
  z-index: 9999;
  bottom: 100%;
  left: 36%;
  margin-left: -90px;
  opacity: 0;
  transition: opacity 0.3s;
  font-size: 13px;
  pointer-events: none;
}

.tooltipskill .tooltipskilltext::after {
  content: "";
  position: absolute;
  top: 100%;
  left: 50%;
  margin-left: -5px;
  border-width: 5px;
  border-style: solid;
  border-color: #555 transparent transparent transparent;
}

.tooltipskill:hover .tooltipskilltext {
  visibility: visible;
  opacity: 1;
}

.glitch {
  position: relative;
  margin: 0 auto;
  background: #292B2F;
  white-space: nowrap;
  color: #87CEFA;
}

.glitch::before,
.glitch::after {
  -webkit-animation-iteration-count: infinite;
          animation-iteration-count: infinite;
  -webkit-animation-timing-function: linear;
          animation-timing-function: linear;
  animation-direction: alternate-reverse;
  overflow: hidden;
  position: absolute;
  clip: rect(0, 9999px, 0, 0);
  content: attr(data-text);
}

.glitch::after {
  -webkit-animation-name: glitch-animation;
          animation-name: glitch-animation;
  -webkit-animation-duration: 4s;
          animation-duration: 4s;
  left: 2px;
  top: -8px;
  text-shadow: 2px 2px 4px #000000;
  background: #292B2F;
}

.glitch::before {
  -webkit-animation-name: glitch-animation-2;
          animation-name: glitch-animation-2;
  -webkit-animation-duration: 6s;
          animation-duration: 6s;
  left: -2px;
  top: -8px;
  text-shadow: 2px 2px 4px #000000;
  background: #292B2F;
}

.glitch.nyx {
  color: unset;
}

.glitch.nyx::after {
  color: #cb92d8;
}

.glitch.nyx::before {
  color: #af2fb7;
}

.glitch.nyx.fucked {
  color: unset;
}

.glitch.nyx.fucked::after {
  animation-duration: 5s;
  font-weight: bold;
  color: #cb92d8;
}

.glitch.nyx.fucked::before {
  animation-duration: 3s;
  font-weight: bold;
  color: #af2fb7;
}

/* Expanded Animations */
@-webkit-keyframes glitch-animation {
  0% {
    clip: rect(42px, 9999px, 44px, 0);
  }
  5% {
    clip: rect(12px, 9999px, 59px, 0);
  }
  10% {
    clip: rect(48px, 9999px, 29px, 0);
  }
  15.0% {
    clip: rect(42px, 9999px, 73px, 0);
  }
  20% {
    clip: rect(63px, 9999px, 27px, 0);
  }
  25% {
    clip: rect(34px, 9999px, 55px, 0);
  }
  30.0% {
    clip: rect(86px, 9999px, 73px, 0);
  }
  35% {
    clip: rect(20px, 9999px, 20px, 0);
  }
  40% {
    clip: rect(26px, 9999px, 60px, 0);
  }
  45% {
    clip: rect(25px, 9999px, 66px, 0);
  }
  50% {
    clip: rect(57px, 9999px, 98px, 0);
  }
  55.0% {
    clip: rect(5px, 9999px, 46px, 0);
  }
  60.0% {
    clip: rect(82px, 9999px, 31px, 0);
  }
  65% {
    clip: rect(54px, 9999px, 27px, 0);
  }
  70% {
    clip: rect(28px, 9999px, 99px, 0);
  }
  75% {
    clip: rect(45px, 9999px, 69px, 0);
  }
  80% {
    clip: rect(23px, 9999px, 85px, 0);
  }
  85.0% {
    clip: rect(54px, 9999px, 84px, 0);
  }
  90% {
    clip: rect(45px, 9999px, 47px, 0);
  }
  95% {
    clip: rect(37px, 9999px, 20px, 0);
  }
  100% {
    clip: rect(4px, 9999px, 91px, 0);
  }
}
@keyframes glitch-animation {
  0% {
    clip: rect(42px, 9999px, 44px, 0);
  }
  5% {
    clip: rect(12px, 9999px, 59px, 0);
  }
  10% {
    clip: rect(48px, 9999px, 29px, 0);
  }
  15.0% {
    clip: rect(42px, 9999px, 73px, 0);
  }
  20% {
    clip: rect(63px, 9999px, 27px, 0);
  }
  25% {
    clip: rect(34px, 9999px, 55px, 0);
  }
  30.0% {
    clip: rect(86px, 9999px, 73px, 0);
  }
  35% {
    clip: rect(20px, 9999px, 20px, 0);
  }
  40% {
    clip: rect(26px, 9999px, 60px, 0);
  }
  45% {
    clip: rect(25px, 9999px, 66px, 0);
  }
  50% {
    clip: rect(57px, 9999px, 98px, 0);
  }
  55.0% {
    clip: rect(5px, 9999px, 46px, 0);
  }
  60.0% {
    clip: rect(82px, 9999px, 31px, 0);
  }
  65% {
    clip: rect(54px, 9999px, 27px, 0);
  }
  70% {
    clip: rect(28px, 9999px, 99px, 0);
  }
  75% {
    clip: rect(45px, 9999px, 69px, 0);
  }
  80% {
    clip: rect(23px, 9999px, 85px, 0);
  }
  85.0% {
    clip: rect(54px, 9999px, 84px, 0);
  }
  90% {
    clip: rect(45px, 9999px, 47px, 0);
  }
  95% {
    clip: rect(37px, 9999px, 20px, 0);
  }
  100% {
    clip: rect(4px, 9999px, 91px, 0);
  }
}
@-webkit-keyframes glitch-animation-2 {
  0% {
    clip: rect(65px, 9999px, 100px, 0);
  }
  5% {
    clip: rect(52px, 9999px, 74px, 0);
  }
  10% {
    clip: rect(79px, 9999px, 85px, 0);
  }
  15.0% {
    clip: rect(75px, 9999px, 5px, 0);
  }
  20% {
    clip: rect(67px, 9999px, 61px, 0);
  }
  25% {
    clip: rect(14px, 9999px, 79px, 0);
  }
  30.0% {
    clip: rect(1px, 9999px, 66px, 0);
  }
  35% {
    clip: rect(86px, 9999px, 30px, 0);
  }
  40% {
    clip: rect(23px, 9999px, 98px, 0);
  }
  45% {
    clip: rect(85px, 9999px, 72px, 0);
  }
  50% {
    clip: rect(71px, 9999px, 75px, 0);
  }
  55.0% {
    clip: rect(2px, 9999px, 48px, 0);
  }
  60.0% {
    clip: rect(30px, 9999px, 16px, 0);
  }
  65% {
    clip: rect(59px, 9999px, 50px, 0);
  }
  70% {
    clip: rect(41px, 9999px, 62px, 0);
  }
  75% {
    clip: rect(2px, 9999px, 82px, 0);
  }
  80% {
    clip: rect(47px, 9999px, 73px, 0);
  }
  85.0% {
    clip: rect(3px, 9999px, 27px, 0);
  }
  90% {
    clip: rect(26px, 9999px, 55px, 0);
  }
  95% {
    clip: rect(42px, 9999px, 97px, 0);
  }
  100% {
    clip: rect(38px, 9999px, 49px, 0);
  }
}
@keyframes glitch-animation-2 {
  0% {
    clip: rect(65px, 9999px, 100px, 0);
  }
  5% {
    clip: rect(52px, 9999px, 74px, 0);
  }
  10% {
    clip: rect(79px, 9999px, 85px, 0);
  }
  15.0% {
    clip: rect(75px, 9999px, 5px, 0);
  }
  20% {
    clip: rect(67px, 9999px, 61px, 0);
  }
  25% {
    clip: rect(14px, 9999px, 79px, 0);
  }
  30.0% {
    clip: rect(1px, 9999px, 66px, 0);
  }
  35% {
    clip: rect(86px, 9999px, 30px, 0);
  }
  40% {
    clip: rect(23px, 9999px, 98px, 0);
  }
  45% {
    clip: rect(85px, 9999px, 72px, 0);
  }
  50% {
    clip: rect(71px, 9999px, 75px, 0);
  }
  55.0% {
    clip: rect(2px, 9999px, 48px, 0);
  }
  60.0% {
    clip: rect(30px, 9999px, 16px, 0);
  }
  65% {
    clip: rect(59px, 9999px, 50px, 0);
  }
  70% {
    clip: rect(41px, 9999px, 62px, 0);
  }
  75% {
    clip: rect(2px, 9999px, 82px, 0);
  }
  80% {
    clip: rect(47px, 9999px, 73px, 0);
  }
  85.0% {
    clip: rect(3px, 9999px, 27px, 0);
  }
  90% {
    clip: rect(26px, 9999px, 55px, 0);
  }
  95% {
    clip: rect(42px, 9999px, 97px, 0);
  }
  100% {
    clip: rect(38px, 9999px, 49px, 0);
  }
}

section {
  display: flex;    
  flex-flow: row wrap;
  flex-direction: column;
}
section > div {
  flex: 1;
  padding: 0.5rem;
}

.AbilityLevelUpCardRadio{
  display: none;
  &:not(:disabled) ~ .AbilityLevelUpCardRadio {
    cursor: pointer;
  }
  &:disabled ~ .AbilityLevelUpCardRadio {
    color: hsla(150, 5%, 75%, 1);
    border-color: hsla(150, 5%, 75%, 1);
    box-shadow: none;
    cursor: not-allowed;
  }
}
.abilityLabel {
  height: 100%;
  display: block;
  padding: 1rem;
  border-radius: 16px;
  margin-left: -0.5px;
}
input[type="radio"]:checked + .abilityLabel {
  background: #60fbff;
  color: hsla(215, 0%, 100%, 1);
  box-shadow: 0px 0px 20px #2bfaff;
  &::after {
    color: hsla(215, 5%, 25%, 1);
    font-family: FontAwesome;
    border: 2px solid hsla(150, 75%, 45%, 1);
    content: "\f00c";
    font-size: 24px;
    position: absolute;
    top: -25px;
    left: 50%;
    transform: translateX(-50%);
    height: 50px;
    width: 50px;
    line-height: 50px;
    text-align: center;
    border-radius: 50%;
    background: white;
    box-shadow: 0px 2px 5px -2px hsla(0, 0%, 0%, 0.25);
  }
}

.link-internal[role=link]
{
  font-size: 1.05em;
}

.VolumeWarning
{
  font-size: 0.63em;
  position: absolute;
  top: 46px;
  left: 450px;
}

.bind1
{
  text-transform: uppercase;
  color: lightgreen;
}

.bind2
{
  font-size: 0.7em;
  padding-left: 15px;
  color: darkseagreen;
}

/* Set the style for the currently-selected link. */
a.gamepadSelected {
  border: 2px dotted blue;
  padding: 0px;
}

.ModifyMetabolismTable 
{


}
.ModifyMetabolismRow 
{
  width: 100%;
  height: 40px;
}

.ModifyMetabolismElementStatName
{
  display: grid;
  margin: auto;
  width: 25%;
  float: left;
}

.ModifyMetabolismElementStatValue
{
  display: grid;
  margin: auto;
  width: auto;
  float: left;
}

.ModifyMetabolismElementRight 
{
  display: grid;
  margin: auto;
  width: 10%;
  float: right;
}

.CharacterSheet_Imp
{
  
} 

.CharacterSheet_Abel
{

} 

.CharacterSheet_Apothus
{

} 

.CharacterSheet_Apothus_2nd_Form
{

} 

.CharacterSheet_MQ002_DragonMonk
{

} 

.CharacterSheet_MQ002_NyxParasite
{

} 

.CharacterSheet_Torgar
{

} 

.CharacterSheet_MQ002_Guard
{

}
/* twine-user-stylesheet #5: "character_float.css" */
#passages:has(div.BodyVisualEnemyImage) {
  width: 80%;
  max-width: unset;
}

.BodyVisualEnemyImage {
  float: right;
  max-width: 40vw;
  --temp-width: 30%;
  /* Default float shape */
  shape-outside: ellipse(var(--temp-width) 60%);
}
/* . Height Adjustments. */
/* Short */
.BodyVisualEnemyImage:has(img[src='https://sombreve.github.io/Dawn-of-Corruption-Site/Images/characters/Imp/portrait_imp_body_1.png']) {
  position: relative;
  top: -260px;
}
/* Kinda Short */
.BodyVisualEnemyImage:has(img[src='https://sombreve.github.io/Dawn-of-Corruption-Site/Images/characters/Imp/portrait_imp_body_2.png']),
.BodyVisualEnemyImage.CharacterSheet_Torgar {
  position: relative;
  top: -80px;
}

/* . Width Adjustments. */
/* Medium */
.BodyVisualEnemyImage.CharacterSheet_Torgar {
  --temp-width: 40%;
}
.BodyVisualEnemyImage.CharacterSheet_Shard_Ring {
  --temp-width: 45%;
}
.BodyVisualEnemyImage.CharacterSheet_Apothus {
  --temp-width: 45%;
}
/* Wide */
.BodyVisualEnemyImage:has(img[src='https://sombreve.github.io/Dawn-of-Corruption-Site/Images/characters/Imp/portrait_imp_body_2.png']){
  --temp-width: 50%;
}

.BodyVisualEnemyImage:has(img[src='https://sombreve.github.io/Dawn-of-Corruption-Site/Images/characters/Imp/portrait_imp_body_3.png']) {
  shape-outside: unset;
}
/* twine-user-stylesheet #6: "typedjs-integration-module.css" */
/* Typed.js text (and cursor) styling. */
.typed, .typed-cursor {
	font-family: monospace, monospace;
	color: lime;
}

/* Typed.js animated cursor styling. */
@-webkit-keyframes blink {
	0% { opacity: 1; }
	50% { opacity: 0; }
	100% { opacity: 1; }
}
@-moz-keyframes blink {
	0% { opacity: 1; }
	50% { opacity: 0; }
	100% { opacity: 1; }
}
@keyframes blink {
	0% { opacity: 1; }
	50% { opacity: 0; }
	100% { opacity: 1; }
}
.typed-cursor {
	opacity: 1;
	-webkit-animation: blink 0.7s infinite;
	-moz-animation: blink 0.7s infinite;
	animation: blink 0.7s infinite;
}

::StoryJS [script]
/* twine-user-script #1: "articles.js" */
(function () {
    // v1.0.0
    'use strict';

    var _overrides = new Map();

    var _defaultIrregulars = [ // lifted from: https://github.com/tandrewnichols/indefinite/blob/master/lib/irregular-words.js
        // e
        'eunuch', 'eucalyptus', 'eugenics', 'eulogy', 'euphemism', 'euphony', 'euphoria', 'eureka', 'european', 'euphemistic', 'euphonic', 'euphoric', 'euphemistically', 'euphonically', 'euphorically', 
        // h
        'heir', 'heiress', 'herb', 'homage', 'honesty', 'honor', 'honour', 'hour', 'honest', 'honorous', 'honestly', 'hourly',
        // o
        'one', 'ouija', 'once',
        // u
        'ubiquitous', 'ugandan', 'ukrainian', 'unanimous', 'unicameral', 'unified', 'unique', 'unisex', 'universal', 'urinal', 'urological', 'useful', 'useless', 'usurious', 'usurped', 'utilitarian', 'utopic', 'ubiquitously', 'unanimously', 'unicamerally', 'uniquely', 'universally', 'urologically', 'usefully', 'uselessly', 'usuriously'
    ];

    var _validArticles = ['a', 'an'];

    var _vowels = /[aeiou8]/i;
    var _acronyms = /[A-Z]+$/;
    var _irregularAcronyms = /[UFHLMNRSX]/;
    var _punctuation = /[.,\/#!$%\^&\*;:{}=\-_`~()]/g;

    function _switch (article) {
        if (article === 'a') {
            return 'an';
        }
        return 'a';
    }

    function _isAcronym (word, article) {
        if (_acronyms.test(word) && _irregularAcronyms.test(word.first())) {
            return _switch(article);
        }
        return false;
    }

    function _isDefaultIrregular (word, article) {
        if (_defaultIrregulars.includes(word.toLowerCase())) {
            return _switch(article);
        }
        return false;
    }

    function addOverride (article, word, caseSensitive) {
        var msg;
        if (State.length > 0) {
            // must be called in story JS or StoryInit, as the override map isn't stateful
            msg = 'cannot add article override -> needs to be run in StoryInit special passage or earlier';
            console.error(msg);
            return msg;
        }
        // check args
        if (!word || typeof word !== 'string') {
            msg = 'cannot add article override -> invalid word';
            console.error(msg);
            return msg;
        }
        if (article && typeof article === 'string') {
            // clean up article
            article = article.toLowerCase().trim();
        }
        if (!_validArticles.includes(article)) {
            msg = 'cannot add article override -> invalid article, must be "a" or "an"';
            console.error(msg);
            return msg;
        }
        // clean up phrase
        word = word.trim();

        if (caseSensitive) {
            _overrides.set(word, {
                article : article,
                caseSensitive : !!caseSensitive
            });
        } else {
            _overrides.set(word.toLowerCase(), {
                article : article,
                caseSensitive : !!caseSensitive
            });
        }
    }

    function _checkOverrides (word) {
        word = word.trim();
        // check user-defined overrides
        var check = word.toLowerCase();
        if (_overrides.has(check) || _overrides.has(word)) {
            var override = _overrides.get(check) || _overrides.get(word);
            // check if we require an exact (case-sensitive) match
            if (override.caseSensitive && !_overrides.has(word)) {
                    return null;
            }
            // return the article
            return override.article;
        }
        // return nothing, passing on to built-in article checks
        return null;
    }

    function _checkVowels (word) {
        var article;
        // select the article based on vowels
        if (_vowels.test(word.first())) {
            article = 'an';
        } else {
            article = 'a';
        }
        // check for irregular words, then acronyms
        return _isDefaultIrregular(word, article) || _isAcronym(word, article) || article;
    }

    function find (word) {
        if (!word || typeof word !== 'string') {
            return;
        }
        var cleanedWord = word.trim().split(' ')[0].trim();
        cleanedWord = cleanedWord.replace(_punctuation, '');
        return _checkOverrides(cleanedWord) || _checkVowels(cleanedWord);
    }

    function article (word, upper) {
        if (!word || typeof word !== 'string') {
            return word; // ? just throw back whatever we got
        }
        var article = find(word);
        // return article, capitalized if requested, appended to the original phrase
        return (upper ? article.toUpperFirst() : article) + ' ' + word;
    }

    setup.articles = {
        find : find,
        output : article,
        override : addOverride
    };

    Macro.add('setarticle', {
        handler : function () {
            var check = addOverride(this.args[0], this.args[1], this.args[2]);
            if (check && typeof check === 'string') {
                this.error(check);
            }
        }
    });

    Macro.add(['a', 'an', 'A', 'An'], {
        handler : function () {
            var isUpper = this.name.first() === this.name.first().toUpperCase();
            this.output.append(article(String(this.args[0]), isUpper));
        }
    });
}());
/* twine-user-script #2: "continue.js" */
(function () {
    // v1.0.1
    'use strict';

    // selectors to ignore
    var ignored = ['a', ':button', '*[role="button"]', '.continue-macro-ignore', '#ui-bar', '#ui-dialog'];

    var _i = 0;

    prehistory['%%continue-expiration'] = function () {
        _i = 0;
    };

    function ns () {
        // create unique namespace
        var namespace = '.' + Date.now().toString(36) + '-' + _i;
        _i++;
        return namespace;
    }

    function ignoreMe () {
        $(document).on('click.continue-macro keyup.continue-macro', ignored.join(', '), function (ev) { 
            ev.stopPropagation(); 
        });
    }

    function addIgnore () {
        if (State.length > 0) {
            return false;
        }
        var args = [].slice.call(arguments).flatten();
        ignored = ignored.concat(args);
        return true;
    }

    $(document).one(':passagerender', function () {
        // on first render, set up the ignore list
        ignoreMe();
    });

    // continue functions
    function cont (press, cb) {
        var namespace = ns();
        if (!cb || typeof cb !== 'function') {
            return;
        }
        var events = 'click.continue-macro' + namespace;
        if (press) {
            events = events + ' keyup.continue-macro' + namespace;
        }
        $(document).one(events, function () {
            cb.call();
            // expire all namespaced events
            $(document).off(namespace);
        });
    }

    function reset () {
        var args = [].slice.call(arguments).flatten();
        ignored = ignored.concat(args);
        $(document).off('.continue-macro');
        ignoreMe();
    }

    // macros

    // <<ignore selectors...>>
    Macro.add('ignore', {
        handler : function () {
            var check = addIgnore(this.args);
            if (!check) {
                return this.error('the <<ignore>> macro should only be run from StoryInit or equivalent.');
            }
        }
    });

    // <<cont [append] [press]>>Code<</cont>>
    Macro.add('cont', {
        tags : null,
        handler : function () {
            var append = this.args.includes('append'), // append keyword
                press = this.args.includesAny('key', 'keypress', 'press', 'button'), // keypress keyword
                wiki = this.payload[0].contents, // content to wikify
                $output; // output element (if needed)

            if (append) {
                // create output element, but only if needed (e.g. if appending content)
                $output = $(document.createElement('span'))
                    .addClass('macro-' + this.name)
                    .appendTo(this.output);
            }

            cont(press, this.createShadowWrapper( function () {
                // wikify 
                if (append && $output && $output instanceof $) {
                    $output.wiki(wiki);
                } else {
                    $.wiki(wiki);
                }
            }));
        }
    });

    // APIs

    setup.cont = cont;
    setup.cont.ignore = addIgnore;
    setup.cont.reset = reset;

    window.cont = window.cont || setup.cont;

}());
/* twine-user-script #3: "css-macro.js" */
(function () {
    // v1.0.0
    'use strict';

    function mapper (args) {
        if (args.length % 2 !== 0) {
            // check the pairs are even
            return 'Style rules should be a list of key/value pairs; you\'ve passed an odd number.';
        }
        var map = {};

        args.forEach(function(item, idx) {
            // even val (0, 2, 4, etc) is paired with the next value
            if (idx % 2 === 0) {
               map[item] = args[idx + 1];
            }
        });

        return map;
    }

    function getStyledOn ($el, map) {
        try {
            if (typeof map === 'string') {
                // was an error
                return map;
            }
            if (!($el instanceof jQuery)) {
                // wrap if needed
                $el = $($el);
            }
            // run the method
            return $el.css(map);
        } catch (err) {
            // return error message strings
            return err.message;
        }
    }

    function cssChanger (/*element, args...*/) {
        try {
            var args = [].slice.call(arguments).flatten(),
                $el = args.shift(),
                map;
            if (typeof args[0] === 'string') {
                map = mapper(args);
            } else if (typeof args[0] === 'object') {
                map = clone(args[0]);
            }
            return getStyledOn($el, map);
        } catch (err) {
            return err.message;
        }
    }

    // <<css selector stylerules>>
    // style rules can be a list of key/value pairs or a single object
    Macro.add('css', {
        handler : function () {
            var worked = cssChanger(this.args);
            if (typeof worked === 'string') {
                // output error message
                return this.error(worked);
            }
        }
    });

}());
/* twine-user-script #4: "dialog-api-macro-set.js" */
// dialog API macro set, by chapel; for sugarcube 2
// version 1.3.0
// see the documentation: https://github.com/ChapelR/custom-macros-for-sugarcube-2#dialog-api-macros

// <<dialog>> macro
Macro.add('dialog', {
       tags : ['onopen', 'onclose'],
    handler : function () {
        
        // handle args (if any)
        var errors = [];
        var content = '', onOpen = null, onClose = null;
        var title = (this.args.length > 0) ? this.args[0] : '';
        var classes = (this.args.length > 1) ? this.args.slice(1).flatten() : [];

        this.payload.forEach( function (pl, idx) {
            if (idx === 0) {
                content = pl.contents;
            } else {
                if (pl.name === 'onopen') {
                    onOpen = onOpen ? onOpen + pl.contents : pl.contents;
                } else {
                    onClose = onClose ? onClose + pl.contents : pl.contents;
                }
            }
        });
        
        // add the macro- class
        classes.push('macro-' + this.name);
        
        // dialog box
        Dialog.setup(title, classes.join(' '));
        Dialog.wiki(content);

        // should these be shadowWrapper-aware?
        if (onOpen && typeof onOpen === 'string' && onOpen.trim()) {
            $(document).one(':dialogopened', function () {
                $.wiki(onOpen);
            });
        }

        if (onClose && typeof onClose === 'string' && onClose.trim()) {
            $(document).one(':dialogclosed', function () {
                $.wiki(onClose);
            });
        }

        Dialog.open();
        
    }

});

// <<popup>> macro
Macro.add('popup', {
    handler : function () {
        
        // errors
        if (this.args.length < 1) {
            return this.error('need at least one argument; the passage to display');
        }
        if (!Story.has(this.args[0])) {
            return this.error('the passage ' + this.args[0] + 'does not exist');
        }
        
        // passage name and title
        var psg   = this.args[0];
        var title = (this.args.length > 1) ? this.args[1] : '';
        var classes = (this.args.length > 2) ? this.args.slice(2).flatten() : [];
        
        // add the macro- class
        classes.push('macro-' + this.name);
        
        // dialog box
        Dialog.setup(title, classes.join(' '));
        Dialog.wiki(Story.get(psg).processText());
        Dialog.open();
        
    }

});

// <<dialogclose>> macro
Macro.add('dialogclose', { 
    skipArgs : true, 
    handler : function () {
        Dialog.close();
    } 
});
/* twine-user-script #5: "disable.js" */
(function () {
    // disable.js, by chapel, for sugarcube 2
    // v1.0.0

    'use strict';

    var cls = 'disabled';
    var interactive = ['button', 'fieldset', 'input', 'menuitem', 'optgroup', 'option', 'select', 'textarea'];

    function getEl (self) {
        // get the first interactive element
        var $el = $(self).find(interactive.join(',')).first();
        if (!$el[0]) {
            $el = $(self).children().eq(0);
            if (!$el[0]) {
                return $(self);
            }
        }
        return $el;
    }

    function changeCls ($el) {
        if ($el.ariaIsDisabled()) {
            $el.addClass(cls);
        } else {
            $el.removeClass(cls);
        }
    }

    function disable ($el, bool) {
        if (!($el instanceof $)) {
            $el = $($el);
        }
        $el.ariaDisabled((bool === undefined) ? true : !!bool);
        changeCls($el);
        return $el;
    }

    // no need for JS API as there us a built-in jQuery extension

    Macro.add('disable', {
        tags : null,
        handler : function () {
            var bool, $wrapper = $(document.createElement('span'))
                .addClass('macro-' + this.name)
                .wiki(this.payload[0].contents);

            try {
                bool = this.args.raw.trim() ? !!Scripting.evalJavaScript(this.args.full) : undefined;
            } catch (err) {
                return this.error("bad evaluation: " + err.message);
            }

            disable(getEl($wrapper), bool);

            // output
            $(this.output).append($wrapper);
        }
    });

}());
/* twine-user-script #6: "events.js" */
// event macro set, by chapel; for sugarcube 2
// version 2.0.0

(function () {
    setup.eventMacroNamespace = 'macro-event';

    // the <<trigger>> macro
    Macro.add('trigger', {
        handler : function () {
            
            // declare vars
            var evt, $el;
            
            // check for errors
            if (this.args.length > 2 || this.args.length === 0) {
                return this.error('incorrect number of arguments');
            }
            if (typeof this.args[0] != 'string') {
                return this.error('first argument should be a string and a valid event type');
            }
            
            // some setup
            evt = this.args[0];
            $el = (this.args.length === 1 ||
                (this.args[1] && typeof this.args[1] === 'string' &&
                this.args[1].toLowerCase().trim() === 'document')) ?
                $(document) : $(this.args[1]);
            
            // fire the event
            $el.trigger(evt);
            
        }
    });

    // the <<event>> macro: <<event type [selector] [once]>>
    Macro.add(['event', 'on', 'one'], {
           tags : ['which'],
        handler : function () {
            
            var payload = this.payload;
            var method = 'on';
            var evt, sel = '', code = '', i;
            
            if (this.args.length > 3 || this.args.length === 0) {
                return this.error('incorrect number of arguments');
            }
            if (typeof this.args[0] != 'string') {
                return this.error('first argument should be a string and a valid event type');
            }
            if (this.args.length === 2 && typeof this.args[1] == 'string' && this.args[1] !== 'once') {
                sel = this.args[1];
            }
            
            if (this.args.includes('once') || this.name === 'one') {
                method = 'one';
            }

            evt = this.args[0];
            
            $(document)[method](evt + '.' + setup.eventMacroNamespace, sel, function (e) {
                code = payload[0].contents;
                if (payload.length > 1) {
                    for (i = 1; i < payload.length; i++) {
                        if (payload[i].args.includes(e.which)) {
                            code = code + payload[i].contents;
                        }
                    }
                }
                new Wikifier(null, code);
            });
            
        }
    });

    Macro.add('off', {
        handler : function () {
            
            // declare vars
            var evt, $el;
            
            // check for errors
            if (this.args.length > 2 || this.args.length === 0) {
                return this.error('incorrect number of arguments');
            }
            if (typeof this.args[0] != 'string') {
                return this.error('first argument should be a string and a valid event type or namespace');
            }
            
            // some setup
            evt = this.args[0];
            $el = (this.args.length === 1 ||
                (this.args[1] && typeof this.args[1] === 'string' &&
                this.args[1].toLowerCase().trim() === 'document')) ?
                $(document) : $(this.args[1]);
            
            // fire the event
            $el.off(evt);
            
        }
    });

}());
/* twine-user-script #7: "fading-macro-set.js" */
// fading macro set, by chapel; for SugarCube 2
// version 1.1.0
// see the documentation: https://github.com/ChapelR/custom-macros-for-sugarcube-2#fading-macros

// <<fadein>> macro
Macro.add('fadein', {
       tags : null,
    handler : function () {

        var $wrapper = $(document.createElement('span'));
        var content  = this.payload[0].contents, time, delay;

        if (this.args.length === 0) {
            return this.error('no arguments given');
        }
        
        time  = Util.fromCssTime(this.args[0]);
        delay = (this.args.length > 1) ?  Util.fromCssTime(this.args[1]) : 0;

        $wrapper
            .wiki(content)
            .addClass('macro-' + this.name)
            .appendTo(this.output)
            .hide()
            .delay(delay)
            .fadeIn(time);

    }
});

// <<fadeout>> macro
Macro.add('fadeout', {
       tags : null,
    handler : function () {

        var $wrapper = $(document.createElement('span'));
        var content  = this.payload[0].contents, time, delay;

        if (this.args.length === 0) {
            return this.error('no arguments given');
        }
        
        time  = Util.fromCssTime(this.args[0]);
        delay = (this.args.length > 1) ?  Util.fromCssTime(this.args[1]) : 0;

        $wrapper
            .wiki(content)
            .addClass('macro-' + this.name)
            .appendTo(this.output)
            .delay(delay)
            .fadeOut(time);

    }
});
/* twine-user-script #8: "first-macro.js" */
// first macro, by chapel; for sugarcube 2
// version 1.1.1
// see the documentation: https://github.com/ChapelR/custom-macros-for-sugarcube-2#first-macro

// <<first>> macro
Macro.add('first', {
    skipArgs : true,
        tags : ['then', 'finally'],
     handler : function () {

        var $wrapper = $(document.createElement('span')),
            last     = this.payload[this.payload.length - 1],
            visits   = visited() - 1, 
            content;
            
            if (visits < this.payload.length) {
                content = this.payload[visits].contents;
            } else {
                content = (last.name === 'finally') ? last.contents : '';
            }

        $wrapper
            .wiki(content)
            .addClass('macro-' + this.name)
            .appendTo(this.output);
    }

});
/* twine-user-script #9: "fs.js" */
// fs.js v1.1.0; for SugarCube 2, by chapel

(function () {
    
    // core functions
    
    function bail (err) {
        console.error(err);
        return null;
    }
    
    function stringify (o) {
        try {
            return JSON.stringify(o);
        } catch (err) {
            return bail(err);
        }
    }
    
    function b64ify (objOrStr) {
        try {
            var str;
            if (objOrStr === undefined) {
                return null;
            } else if (typeof objOrStr !== 'string') {
                str = stringify(objOrStr);
            } else {
                str = objOrStr;
            }
            if (str != null) {
                return LZString.compressToBase64(str);
            }
        } catch (err) {
            return bail(err);
        }
    }
    
    function decompressB64 (data) {
        try {
            return LZString.decompressFromBase64(data);
        } catch (err) {
            return bail(err);
        }
    }
    
    function parse (data) {
        try {
            return JSON.parse(data);
        } catch (err) {
            try {
                return JSON.parse(decompressB64(data));
            } catch (err) {
                return bail(err);
            }
        }
    }
    
    function saveToState (objOrStr, varName) {
        try {
            if (varName[0] !== '$' && varName[0] !== '_') {
                throw new Error('Invalid stateful variable');
            }
            if (State.setVar) {
                State.setVar(varName, clone(objOrStr));
            } else {
                if (varName[0] === '$') {
                    State.variables[varName.substr(1)] = clone(objOrStr);
                } else {
                    State.temporary[varName.substr(1)] = clone(objOrStr);
                }
            }
        } catch (err) {
            return bail(err);
        }
    }
    
    function saveToFile (fileName, data) {
        if (typeof data !== 'string') {
            data = stringify(data);
        }
        if (data == null) {
            return;
        }
        if (!fileName || typeof fileName !== 'string') {
            fileName = 'file.twinedata';
        } else {
            fileName = Util.slugify(fileName.trim()).toLowerCase();
        }
        if (!fileName.includes('.')) {
            fileName = fileName + '.twinedata';
        }
        try {
            saveAs(new Blob([data], { type : 'text/plain;charset=UTF-8'}), fileName);
        } catch (err) {
            return bail(err);
        }
    }
    
    function readData (dataType, data) {
        if (data == null) {
            return null;
        }
        switch (dataType) {
            case 'json':
                return parse(data);
            case 'base64':
            case 'b64':
            case '64':
                return parse(decompressB64(data));
            default:
                return data;
        }
    }
    
    function loadFromFile (e) {
        var file = e.target.files[0],
            reader = new FileReader(),
            storyVar = e.storyVar || '$fileData',
            dataType = e.dataType || 'text';
        
        $(reader).on('load', function (event) {
            try {
                var target = event.currentTarget;
                if (!target.result) {
                    return;
                }
                
                var data = readData(dataType, target.result);
                
                saveToState(data, storyVar);

                $(document).trigger({
                    type : ':import-macro',
                    success : true,
                    data : clone(data),
                    raw : target.result,
                    storyVar : storyVar
                });

            } catch (err) {

                saveToState(null, storyVar);

                $(document).trigger({
                    type : ':import-macro',
                    success : false,
                    data : null,
                    raw : null,
                    storyVar : storyVar
                });
                
                return bail(err);

            }
        });
        
        reader.readAsText(file);
    }
    
    function createImportButton (text, storyVar, dataType, asLink) {
        var $btn = $(document.createElement(asLink ? 'a' : 'button'))
                .wiki(text),
            $label = $(document.createElement('label'))
                .attr('for', 'file-import')
                .addClass('upload-file')
                .append($btn),
            $input = $(document.createElement('input'))
                .attr({
                    id : 'file-import',
                    type : 'file',
                    'data-format' : dataType
                }).css('display', 'none').on('change', function (e) {
                    var ev = Object.assign(clone(e), {
                        storyVar : storyVar,
                        dataType : $(this).attr('data-format')
                    });
                    loadFromFile(ev);
                }),
            $wrapper = $(document.createElement('span'))
                .append($label, $input);
        
        $btn.ariaClick(function () {
            $label.trigger('click');
        });
        
        return $wrapper;
    }
    
    function exportToFile (data, fileName, dataType) {
        var str;
        switch (dataType) {
            case 'json':
                str = stringify(data);
                break;
            case 'base64':
            case 'b64':
            case '64':
                str = b64ify(stringify(data) || data);
                break;
            default:
                str = (typeof data === 'string') ? data : stringify(data);
        }
        saveToFile(fileName, str);
    }
    
    function importFromFile (targetOnPage, text, storyVar, dataType, asLink) {
        var $importElement = createImportButton(text, storyVar, dataType, asLink),
            target;
        if (targetOnPage && typeof targetOnPage === 'string') {
            target = $(targetOnPage);
        } else if (targetOnPage) {
            target = targetOnPage;
        } else {
            target = '#passages';
        }
        
        $importElement.appendTo(target);
    }
    
    // setup API
    
    setup.fileSystem = {
        config : {
            defaultText : 'Import',
            renderAsLink : false
        },
        JSON : {
            stringify : stringify,
            parse : parse
        }, 
        b64 : {
            compress : b64ify,
            decompress : decompressB64
        }, 
        toState : saveToState,
        toFile : saveToFile,
        fromFile : loadFromFile
    };
    
    // global API
    
    window.Chapel = window.Chapel || {};
    Chapel.fileSystem = Chapel.fileSystem || setup.fileSystem;
    
    // macros
    
    Macro.add('import', {
        handler : function () {
            
            var target = this.output,
                linkText = this.args[2], 
                storyVar = this.args[0], 
                dataType = this.args[1];
            
            if (!linkText || typeof linkText !== 'string') {
                linkText = setup.fileSystem.config.defaultText;
            }
            if (!storyVar || typeof storyVar !== 'string' || (storyVar[0] !== '$' && storyVar[0] !== '_')) {
                return this.error('Invalid variable name.');
            }
            if (!dataType || typeof dataType !== 'string') {
                dataType = 'text';
            } else {
                dataType = dataType.trim();
            }
            importFromFile(target, linkText, storyVar, dataType, setup.fileSystem.config.renderAsLink);
            
        }
    });
    
    Macro.add('export', {
        handler : function () {
            
            var data = this.args[0],
                file = this.args[1],
                type = this.args[2];
            
            if (!data) {
                return this.error('No data to save...');
            }
            if (!type || typeof type !== 'string') {
                type = 'text';
            } else {
                type = type.trim();
            }
            if (!file || typeof file !== 'string') {
                file = 'file.twinedata';
            } else {
                file = file.trim();
            }
            
            exportToFile(data, file, type);
            
        }
    });
}());
/* twine-user-script #10: "message-macro.js" */
// message macro, by chapel (with help from T.M. Edwards); for sugarcube 2
// version 1.0.1
// see the documentation: https://github.com/ChapelR/custom-macros-for-sugarcube-2#message-macro

//intialize namespace
setup.messageMacro = {};

// default text option:
setup.messageMacro.default = 'Help';

// <<message>> macro
Macro.add('message', {
    tags    : null,
    handler : function () {
        var message  = this.payload[0].contents;
        var $wrapper = $(document.createElement('span'));
        var $link    = $(document.createElement(this.args.includes('btn') ? 'button' : 'a'));
        var $content = $(document.createElement('span'));

        $link
            .wiki(this.args.length > 0 && this.args[0] !== 'btn' ? this.args[0] : setup.messageMacro.default)
            .ariaClick( this.createShadowWrapper( function () {
                if ($wrapper.hasClass('open')) {
                    $content
                        .css('display', 'none')
                        .empty();
                }
                else {
                    $content
                        .css('display', 'block')
                        .wiki(message);
                }

                $wrapper.toggleClass('open');
            }));

        $wrapper
            .attr('id', 'macro-' + this.name + '-' + this.args.join('').replace(/[^A-Za-z0-9]/g, ''))
            .addClass('message-text')
            .append($link)
            .append($content)
            .appendTo(this.output);
    }
});
/* twine-user-script #11: "meters.js" */
(function () {
    'use strict';
    // meters.js, by Chapel; for SugarCube 2
    // v1.0.1

    var options = {
        tryGlobal : true, // attempt to send `Meter` to the global scope?
        allowClobbering : false, // allow a new meter to replace a previously defined meter with the same name instead of throwing
        IAmAGrownUp : false
    };


    var defaultSettings = {
        full : '#2ECC40', // color when the bar is full
        empty : '#FF4136', // color when the bar is empty
        back : '#DDDDDD', // color of the backing
        height : '12px', // height of the bar
        width : '180px', // width of the bar
        animate : 400, // ms
        easing : 'swing', // animation easing
        text : '#111111', // label text color
        label : '', // label text
        align : 'center' // label alignment
    };

    var _validAlignments = ['center', 'left', 'right'];
    var _validEasing = ['swing', 'linear'];

    function _handleString (str, def) {
        if (str && typeof str === 'string') {
            str = str.toLowerCase().trim();
            if (str) {
                return str;
            }
        }
        return def || '';
    }

    function _colorEasing (t) {
        // from: https://gist.github.com/gre/1650294
        return (t < 0.5) ? 2 * t * t : -1 + (4 - 2 * t) *t;
    }

    function Meter (opts, value) {
        if (!(this instanceof Meter)) {
            return new Meter(opts, value);
        }

        var defs = clone(defaultSettings);

        this.settings = Object.assign(defs, opts);

        // default malformed settings

        this.settings.align = _handleString(this.settings.align);
        this.settings.easing = _handleString(this.settings.easing);

        if (!_validAlignments.includes(this.settings.align)) {
            this.settings.align = 'center';
        }

        if (!_validEasing.includes(this.settings.easing)) {
            this.settings.easing = 'swing';
        }

        // set the value, or default to 1

        value = Number(value);
        if (Number.isNaN(value)) {
            value = 1;
        }
        value = Math.clamp(value, 0, 1);
        this.value = value;

        // the backing of the meter, and the container
        var $wrapper = $(document.createElement('div'))
            .addClass('chapel-meter')
            .attr({
                'data-val' : value,
                'data-label' : this.settings.label
            })
            .css({
                'position' : 'relative',
                'background-color' : this.settings.back,
                'height' : this.settings.height,
                'width' : this.settings.width,
                'overflow' : 'hidden'
            });

        // the meter's label
        var $label = $(document.createElement('div'))
            .addClass('meter-label')
            .css({
                'top' : 0,
                'right' : 0,
                'font-size' : this.settings.height,
                'font-weight' : 'bold',
                'line-height' : '100%',
                'width' : '100%',
                'height' : '100%',
                'vertical-align' : 'middle',
                'text-align' : this.settings.align,
                'color' : this.settings.text,
                'z-index' : 1,
                'position' : 'relative',
                'bottom' : '100%'
            })
            .wiki(this.settings.label)
            .appendTo($wrapper);

        // this is just here to give the bar a smooth transitioning coloration
        var $barTop = $(document.createElement('div'))
            .addClass('meter-top')
            .css({
                'background-color' : this.settings.full,
                'opacity' : _colorEasing(this.value),
                'width' : '100%',
                'height' : '100%',
                'z-index' : 0
            });

        // this actually holds the value and the 'real' bar color
        var $barBottom = $(document.createElement('div'))
            .addClass('meter-bottom')
            .css({
                'position' : 'absolute',
                'top' : 0,
                'left' : 0,
                'background-color' : this.settings.empty,
                'opacity' : 1,
                'width' : (this.value * 100) + '%',
                'height' : '100%',
                'z-index' : 0
            })
            .append($barTop)
            .appendTo($wrapper);

        this.$element = $wrapper;
        this.$bars = { // undocumented
            top : $barTop,
            bottom : $barBottom
        };
        this.$label = $label; // undocumented

        // mostly a reminder
        $label.css('font-size', (parseInt($wrapper.css('height'), 10) < parseInt($('.passage').css('font-size'), 10)) ? 
            $wrapper.css('height') : $('.passage').css('font-size'));
        $label.css('line-height', $wrapper.css('height'));
    }

    Object.assign(Meter, {
        _list : new Map(), // undocumented; meter data dump
        is : function (thing) { // see if passed "thing" is a meter instance
            return thing instanceof Meter;
        },
        has : function (name) { // does the named meter exist?
            return Meter._list.has(name) && Meter.is(Meter._list.get(name));
        },
        get : function (name) { // return the meter instance
            if (Meter.has(name)) {
                return Meter._list.get(name);
            }
            return null;
        },
        del : function (name) { // delete the meter with the indicated name
            if (Meter.has(name)) {
                Meter._list.delete(name);
            }
        },
        add : function (name, opts, value) { // add a new meter; the constructor should not be used
            if (Meter.has(name) && !options.allowClobbering) {
                console.error('Meter "' + name + '" already exists.');
                return;
            }
            Object.assign(opts, { id : name });
            var meter = new Meter(opts, value);
            Meter._list.set(name, meter);
            return meter;
        },
        _emit : function (inst, name) { // undocumented; emit an event on the given meter
            if (!Meter.is(inst)) {
                return;
            }
            inst.$element.trigger({
                type : ':' + name,
                meter : inst
            });
        }
    });

    Object.assign(Meter.prototype, {
        constructor : Meter,
        _label : function (wait) { // undocumented; reprocess the meter label and set the sizes
            // THE LABEL IS AN ACTUAL NIGHTMARE
            var self = this;
            function process () {
                self.$label.empty().wiki(self.settings.label);
                self.$label.css('font-size', (parseInt(self.$element.css('height'), 10) < parseInt(self.$element.parent().css('font-size'), 10)) ? 
                    self.$element.css('height') : self.$element.parent().css('font-size'));
                self.$label.css('line-height', self.$element.css('height'));
            }
            if (wait) {
                setTimeout(process, Engine.minDomActionDelay);
            } else {
                process();
            }
            return this;
        },
        _width : function () { // undocumented; change the meter width
            var self = this;
            this.$bars.bottom.animate({
                'width' : (this.value * 100) + '%'
            }, this.settings.animate, this.settings.easing, function () {
                Meter._emit(self, 'meter-animation-complete');
            });
            return this;
        },
        _color : function () { // undocumented; blend the full and empty meter colors
            this.$bars.top.animate({
                'opacity' : _colorEasing(this.value)
            }, this.settings.animate, this.settings.easing);
            return this;
        },
        animate : function () { // animate bar changes
            Meter._emit(this, 'meter-animation-start');
            return this._color()._width()._label();
        },
        val : function (n) { // set and get bar value
            if (n !== undefined) {
                n = Number(n);
                if (Number.isNaN(n)) {
                    n = 1;
                }
                n = Math.clamp(n, 0, 1);

                this.value = n;
                this.animate();
            }
            return this.value;
        },
        options : function (opts) {
            // set or get bar settings
            if (opts && typeof opts === 'object') {
                Object.assign(this.settings, opts);
            }
            return this.settings;
        },
        unwrap : function () {
            // return unwrapped container element
            return this.$element[0];
        },
        place : function ($target, options) { // put the bar in a known element, with a wrapper
            var $wrapper = $(document.createElement('span'));
            if (!($target instanceof jQuery)) {
                $target = $($target);
            }
            if (!$target[0]) {
                console.warn('meter#place() -> no valid target');
            }
            if (options && typeof options === 'object') {
                // options can contain classes or attributes for the wrapper
                if (options.classes && (Array.isArray(options.classes) || typeof options.classes === 'string')) {
                    $wrapper.addClass(options.classes);
                }
                if (options.attr && typeof options.attr === 'object') {
                    $wrapper.attr(options.attr);
                }
            }
            $target.append($wrapper.append(this.$element));
            // make sure to process the label
            this._label(true);
            return this;
        },
        // event methods for meters
        on : function (eventType, cb) {
            if (typeof cb !== 'function') {
                return this;
            }
            if (!eventType || typeof eventType !== 'string' || !eventType.trim()) {
                return this;
            }
            eventType = eventType.split(' ').map( function (type) {
                type = type.split('.')[0];
                return type + '.userland';
            }).join(' ');
            this.$element.on(eventType, cb);
            return this;
        },
        one : function (eventType, cb) {
            if (typeof cb !== 'function') {
                return this;
            }
            if (!eventType || typeof eventType !== 'string' || !eventType.trim()) {
                return this;
            }
            eventType = eventType.split(' ').map( function (type) {
                type = type.split('.')[0];
                return type + '.userland';
            }).join(' ');
            this.$element.one(eventType, cb);
            return this;
        },
        off : function (eventType) {
            if (eventType && typeof eventType === 'string' && eventType.trim()) {
                eventType = eventType.split(' ').map( function (type) {
                    type = type.split('.')[0];
                    return type + '.userland';
                }).join(' ');
            } else {
                eventType = '.userland'; // remove all user events
            }
            this.$element.off(eventType);
            return this;
        },
        // ariaClick-style setup
        click : function (options, cb) {
            // let SugarCube handle the errors
            this.$element.ariaClick(options, cb);
            return this;
        },
        // for completeness and in case a meter winds up in the state
        clone : function () {
            return new Meter(this.settings, this.value);
        },
        toJSON : function () {
            return JSON.reviveWrapper('new setup.Meter(' + JSON.stringify(this.settings) + ', ' + this.value + ')');
        }
    });

    // setup-spaced API
    setup.Meter = Meter;

    if (options.tryGlobal) { // global API, if undefined
        window.Meter = window.Meter || Meter;
    }

    // <<newmeter '$variable' [optional: starting value (between 0 and 1)]>>...<</newmeter>>
    // optional child tags: <<metercolors full [empty] [backing]>>, <<metersizing height [width]>>, <<meteranimation timeOrBool [easing]>>, <<meterlabel labelText [textColor] [alignment]>>
    Macro.add('newmeter', {
        tags : ['colors', 'sizing', 'animation', 'label'],
        handler : function () {

            if (State.length > 0 && !options.IAmAGrownUp) {
                // you are not a grown up
                return this.error('The `<<newmeter>>` macro must be called in your `StoryInit` special passage. Seriously. No excuses. --Love, Chapel');
            }

            if (this.args.length < 1) {
                return this.error('The `<<newmeter>>` macro requires at least one argument: a meter name.');
            }

            var meterName = this.args[0], 
                colorsTag = null, 
                sizeTag = null, 
                animTag = null,
                labelTag = null;

            if (typeof meterName !== 'string') {
                return this.error('Invalid meter name.');
            }

            meterName = meterName.trim();

            if (Meter.has(meterName) && !options.allowClobbering) {
                return this.error('Cannot clobber the existing meter "' + meterName + '".');
            }

            if (this.payload.length) {
                // get each child tag for processing
                colorsTag = this.payload.find( function (pl) {
                    return pl.name === 'colors';
                });
                sizeTag = this.payload.find( function (pl) {
                    return pl.name === 'sizing';
                });
                animTag = this.payload.find( function (pl) {
                    return pl.name === 'animation';
                });
                labelTag = this.payload.find( function (pl) {
                    return pl.name === 'label';
                });
            }

            var opts = {};

            if (colorsTag) {
                // process the colors tag
                if (!colorsTag.args.length) {
                    return this.error('No arguments passed to the `<<colors>>` tag.');
                }

                switch (colorsTag.args.length) {
                    case 1:
                        opts.empty = colorsTag.args[0];
                        opts.full = 'transparent'; // make the meter one solid color
                        break;
                    case 2:
                        opts.full = colorsTag.args[0];
                        opts.empty = colorsTag.args[1];
                        break;
                    default:
                        opts.full = colorsTag.args[0];
                        opts.empty = colorsTag.args[1];
                        opts.back = colorsTag.args[2];
                }
            }

            if (sizeTag) {
                // process the sizin tag
                if (!sizeTag.args.length) {
                    return this.error('No arguments passed to the `<<sizing>>` tag.');
                }

                opts.width = sizeTag.args[0];

                if (sizeTag.args[1]) {
                    opts.height = sizeTag.args[1];
                }

            }

            if (animTag) {
                // process the animations tag
                if (!animTag.args.length) {
                    return this.error('No arguments passed to the `<<animation>>` tag.');
                }

                if (typeof animTag.args[0] === 'boolean' && !animTag.args[0]) {
                    opts.animate = 0; // functionally no animation--we still want the event, though, so we'll just 0 it out
                } else if (typeof animTag.args[0] === 'string') {
                    opts.animate = Util.fromCssTime(animTag.args[0]);
                } else {
                    return this.error('The argument to the `<<animation>>` tag should be `true`, `false`, or a valid CSS time value.');
                }

                if (animTag.args[1] && ['swing', 'linear'].includes(animTag.args[1])) {
                    opts.easing = animTag.args[1];
                }
            }

            if (labelTag) {
                // process the label tag
                var text = labelTag.args[0];
                if (text && typeof text === 'string') {
                    opts.label = text.trim();
                } else {
                   return this.error('The labelText argument for the `<<label>>` tag is required.');
                }

                if (labelTag.args[1] && typeof labelTag.args[1] === 'string') {
                    opts.text = labelTag.args[1];
                }
                if (labelTag.args[2] && typeof labelTag.args[2] === 'string') {
                    opts.align = labelTag.args[2];
                }
            }

            Meter.add(meterName, opts, this.args[1]);

        }
    });

    // <<showmeter '$variable' [value]>>
    Macro.add('showmeter', {
        handler : function () {

            if (this.args.length < 1) {
                return this.error('This macro requires at least one argument: the meter\'s name.');
            }

            // get the meter
            var meterName = this.args[0];

            if (typeof meterName !== 'string') {
                return this.error('Invalid meter name.');
            }

            meterName = meterName.trim();

            var meter = Meter.get(meterName);

            if (!meter || !Meter.is(meter)) {
                return this.error('The meter "' + meterName + '" does not exist.');
            }

            // set the meter, if necessary
            if (typeof this.args[1] === 'number') {
                meter.val(this.args[1]);
            }

            // render the meter
            meter.place(this.output, {
                classes : 'macro-' + this.name,
                attr : { id : 'meter-' + Util.slugify(meterName) }
            });

        }
    });

    // <<updatebar '$variable' value>>
    Macro.add('updatemeter', {
        handler : function () {

            if (this.args.length < 2) {
                return this.error('This macro requires two arguments: the meter\'s name and a value.');
            }

            // get the meter
            var meterName = this.args[0];

            if (typeof meterName !== 'string') {
                return this.error('Invalid meter name.');
            }

            meterName = meterName.trim();

            var meter = Meter.get(meterName);

            if (!meter || !Meter.is(meter)) {
                return this.error('The meter "' + meterName + '" does not exist.');
            }

            // set it
            meter.val(this.args[1]); // if it's on the page, should update and animate auto-magically.

        }
    });

}());
/* twine-user-script #12: "mouseover.js" */
(function () {
    // mouseover macro, v1.0.1, by chapel, for sugarcube 2

    Macro.add('mouseover', {

        tags: [
            'onhover', 
            'onmouseover', 
            'onmousein', 
            'onmouseenter',
            'onmouseout'
        ],

        skipArgs: true,

        handler: function () {

            if (this.payload.length < 2) {
                return this.error('No event tag used.');
            }

            var wiki = {
                mouseover : [],
                mousein : [],
                mouseout : []
            };

            var $el = $(document.createElement('span'))
                .addClass('macro-' + this.name)
                .wiki(this.payload[0].contents)
                .appendTo(this.output);

            // iterate through the tags
            this.payload.forEach( function (payload) {
                switch (payload.name) {
                    case 'onhover':
                    case 'onmouseover':
                        wiki.mouseover.push(payload.contents);
                        break;
                    case 'onmousein':
                    case 'onmouseenter':
                        wiki.mousein.push(payload.contents);
                        break;
                    case 'onmouseout':
                        wiki.mouseout.push(payload.contents);
                        break;
                    default:
                        return;
                }
            });

            // attach appropriate events
            if (wiki.mouseover.length) {
                $el.on('mouseover', this.createShadowWrapper(function (ev) {
                    $.wiki(wiki.mouseover.join(' '));
                }));
            }
            if (wiki.mousein.length) {
                $el.on('mouseenter', this.createShadowWrapper(function (ev) {
                    $.wiki(wiki.mousein.join(' '));
                }));
            }
            if (wiki.mouseout.length) {
                $el.on('mouseout', this.createShadowWrapper(function (ev) {
                    $.wiki(wiki.mouseout.join(' '));
                }));
            }
        }
    });
}());
/* twine-user-script #13: "notify.js" */
(function () {
    // notify.js, by chapel; for sugarcube 2
    // version 1.1.1
    // requires notify.css / notify.min.css

    var DEFAULT_TIME = 5000; // default notification time (in MS)

    var isCssTime = /\d+m?s$/;

    $(document.body).append("<div id='notify'></div>");
    $(document).on(':notify', function (ev) {
        if (ev.message && typeof ev.message === 'string') {
            // trim message
            ev.message.trim();
            // classes
            if (ev.class) {
                if (typeof ev.class === 'string') {
                    ev.class = 'open macro-notify ' + ev.class;
                } else if (Array.isArray(ev.class)) {
                    ev.class = 'open macro-notify ' + ev.class.join(' ');
                } else {
                    ev.class = 'open macro-notify';
                }
            } else {
                ev.class = 'open macro-notify';
            }
            
            // delay
            if (ev.delay) {
                if (typeof ev.delay !== 'number') {
                    ev.delay = Number(ev.delay);
                }
                if (Number.isNaN(ev.delay)) {
                    ev.delay = DEFAULT_TIME;
                }
            } else {
                ev.delay = DEFAULT_TIME;
            }
            
            $('#notify')
                .empty()
                .wiki(ev.message)
                .addClass(ev.class);

            $('#notify')
                .empty()
                .wiki(ev.message)
                .addClass(setup.getCorruptionUIClassName("dummy", setup.getStatValue(State.variables.CharacterSheet_Player, "corruption")));
                    
            setTimeout(function () {
                $('#notify').removeClass();
                $('#notify').addClass(setup.getCorruptionUIClassName("dummy", setup.getStatValue(State.variables.CharacterSheet_Player, "corruption")));
            }, ev.delay);

            
        }
    });

    function notify (message, time, classes) {

        if (typeof message !== 'string') {
            return;
        }

        if (typeof time !== 'number') {
            time = false;
        }

        $(document).trigger({
            type    : ':notify',
            message : message,
            delay   : time,
            class   : classes || ''
        });
    }

    // <<notify delay 'classes'>> message <</notify>>
    Macro.add('notify', {
           tags : null,
        handler : function () {
            
            // set up
            var msg     = this.payload[0].contents, 
                time    = false, 
                classes = false, i;
            
            // arguments
            if (this.args.length > 0) {
                var cssTime = isCssTime.test(this.args[0]);
                if (typeof this.args[0] === 'number' || cssTime) {
                    time    = cssTime ? Util.fromCssTime(this.args[0]) : this.args[0];
                    classes = (this.args.length > 1) ? this.args.slice(1).flatten() : false;
                } else {
                    classes = this.args.flatten().join(' ');
                }
            }
            
            // fire event
            notify(msg, time, classes);
            
        }
    });

    setup.notify = notify;
}());
/* twine-user-script #14: "operations.js" */
(function () {
    'use strict';
    // operations, by chapel; for sugarcube 2.x
    // v1.1.0
    // adds a dice roller and 'fairmath'
    var setup = setup || {};
    // options object
     var options = {
        tryGlobal : true, 
        nicknames : true, 
        fmRange   : [0, 100]
    };

    /*                  DICE                    */

    // dice helpers
    function _processDice (a, b) {
        // find the number of dice and the type of die
        var roll = [], i, result = 0, add = +1;
        if (typeof a === 'string') {
            roll = a.split('d');
        } else if (typeof a === 'number' && b) {
            roll = [a, b];
        } else if (Array.isArray(a) && a.length >= 2) {
            a.length = 2;
            roll = a;
        } else {
            throw new TypeError('dice(): could not process arguments...');
        }
        // check types
        roll[0] = Number(roll[0]);
        // handle fate/fudge dice
        if (typeof roll[1] === 'string' && roll[1].trim().toUpperCase() === 'F') {
            roll[1] = 3; // -1, 0, or 1
            add = -1;
        } else {
            roll[1] = Number(roll[1]);
        }
        if (roll.some( function (n) {
            return Number.isNaN(n);
        })) {
            throw new TypeError('dice(): could not process arguments...');
        }
        for (i = 0; i < roll[0]; i++) {
            /*
                we're going to roll each die.  we could generate a number
                between the max and min possible simply enough,
                but real dice have weights -- rolling 3d6 is far more likely to result 
                in 10 or 11 than in 3 or 18, and pure randomization will not emulate this
            */
            var die = 0;
            die = Math.floor(State.random() * roll[1]) + add;
            result += die; // update result
        }
        return result; // this prelimary result ignores modifiers; it only rolls the dice
    }

    function _processString (string) {
        // recieves strings like '1d6 + 6' or 1d20+3'
        var parsed = [];
        // remove all whitespace and trim
        string = string.trim().replace(/\s/g, '');
        // check for and return the parts of the roll (2 chunks: '1d6' and '+6')
        parsed = string.match(/(\d+[d][\df]\d*)(.*)/i);
        return [parsed[1], Number(parsed[2])]; // send the data off as an array
    }

    function roll (a, b) {
        if (typeof a === 'string') {
            var result = _processString(a);
            /* 
                the expression below rolls the dice and adds the modifier, 
                which must be additive (i.e. +5 or -5, but never *5)
            */
            return _processDice(result[0]) + result[1];
        } else {
            // just run it, it'll toss out its own errors
            return _processDice(a, b);
        }
    }

    setup.dice = { roll : roll };

    // global dice() function: dice('[x]d[y] +/- [z]') or dice([x], [y]) + [z]
    if (options.tryGlobal) { // test options
        window.dice = window.dice || roll; 
    }
    // always available via setup.dice.roll() when unavailable here

    // dice method; Number.prototype.dice(number)
    // ex. (1).dice(6) + 10; $roll = $die.number.dice($die.type); etc
    if (!Number.prototype.dice) {
        Object.defineProperty(Number.prototype, 'dice', {
            configurable : true,
            writable     : true,
            
            value : function (val) {
                // errors and weirdness
                if (this === 0) {
                    return 0;
                } 
                if (this < 0) {
                    throw new TypeError('Number.prototype.dice: cannot roll a negative number of dice!');
                } 
                if (typeof val !== 'string' || val.trim().toUpperCase() !== 'F') {
                    if (val == null || typeof val !== 'number' || val <= 0 || !Number.isInteger(val)) {
                        throw new TypeError('Number.prototype.dice: error in argument');
                    }
                }
                if (!Number.isInteger(this)) {
                    throw new TypeError('Number.prototype.dice: cannot roll partial dice!');
                }
                
                // call the dice processing function
                return roll(this, val);
            }
        });
    }

    /*                  FAIRMATH                */

    // fairmath method; Number.prototype.fairmath(value)
    // ex. (20).fairmath(30); $var = $var.fairmath(-10); etc 
    if (!Number.prototype.fairmath) {
        Object.defineProperty(Number.prototype, 'fairmath', {
            configurable : true,
            writable     : true,
            
            value : function (val) {
                // errors
                var op = options.fmRange;
                
                if (this < op[0] || this > op[1]) {
                    throw new TypeError('Number.prototype.fairmath called on a number that is out of the defined range (the number was ' + this + ').');
                }
                if (val == null || typeof val != 'number' || val > 100 || val < -100 || arguments.length < 1) {
                    throw new TypeError('Number.prototype.fairmath given incorrect argument or an argument that is out of the valid 0-100 range.');
                }
                
                // do the 'fair' math!
                if (val === 0) { // a 0 increase or decrease; just trunc and clamp
                    return Math.clamp(Math.trunc(this), op[0], op[1]);
                }
                if (val < 0) { // number is negative, representing a decrease
                    val = val * -1; // make positive for the math below
                    return Math.clamp(Math.trunc(
                        this - ((this - op[0]) * (val / op[1]))
                    ), op[0], op[1]);
                }
                if (val > 0) { // number is positive, represeting an increase
                    return Math.clamp(Math.trunc(
                        this + ((op[1] - this) * (val / op[1]))
                    ), op[0], op[1]);
                }
                // something inexplicable happened
                throw new Error('Number.prototype.fairmath encountered an unspecified error.');
            }
        });
    }

    /* Number.between() */
    if (!Number.prototype.between) {
        Object.defineProperty(Number.prototype, 'between', {
            configurable : true,
            writable     : true,
            
            value : function (a, b) {
                // errors
                if (typeof a !== 'number' || typeof b !== 'number') {
                    throw new TypeError('Number.between() -> both values must be numbers');
                }
                var n = Number(this);
                if (a === b) {
                    return n === a;
                }
                if (b < a) {
                    var c = b;
                    b = a;
                    a = c;
                }
                return n >= a && n <= b;
            }
        });
    }

    // Math.fairmath() method 
    if (!Math.fairmath) {
        Object.defineProperty(Math, 'fairmath', {
            configurable : true,
            writable     : true,
            
            value : function (base, val) { 
                return base.fairmath(val);
            }
        });
    }

    /* Math.between() */
    if (!Math.between) {
        Object.defineProperty(Math, 'between', {
            configurable : true,
            writable     : true,
            
            value : function (base, a, b) { 
                return base.between(a, b);
            }
        });
    }

    /*                  EXTRAS                  */

    // now for some shortcuts
    if (options.nicknames) {
        if (!Math.fm) { // Math.fm()
            Object.defineProperty(Math, 'fm', {
                configurable : true,
                writable     : true,
                
                value : function (base, val) { 
                    return base.fairmath(val);
                }
            });
        }
        if (!Number.prototype.fm) { // <number>.fm()
            Object.defineProperty(Number.prototype, 'fm', {
                configurable : true,
                writable     : true,
                
                value : function (val) { 
                    return this.fairmath(val);
                }
            });
        }
        if (!Number.prototype.d) { // <number>.d()
            Object.defineProperty(Number.prototype, 'd', {
                configurable : true,
                writable     : true,
            
                value : function (val) { 
                    return this.dice(val);
                }
            });
        }
    }
}());
/* twine-user-script #15: "playtime.js" */
(function () {
    'use strict';
    // play time system, by chapel; for SugarCube 2
    // version 2.1.0

    // options object:
    var options = {
        tryGlobal : true,
        storyVar  : 'playtime',
        pauseTag  : 'pausetimer'
    };

    State.variables[options.storyVar] = Date.now();

    predisplay['start-playtime'] = function (t) {
        delete predisplay[t]; // single use
        // we need to grab a starting time so errors don't appear in user saves prior to adding this code:
        if (!State.variables[options.storyVar]) {
            State.variables[options.storyVar] = Date.now();
        }
    };

    // pause tag handling
    prehistory['pause-playtime'] = function (t) {
        if (tags().includes(options.pauseTag)) {
            State.variables[options.storyVar] += time();
        }
    };

    // the function:
    function _getMS () {
        return (Date.now() - State.variables[options.storyVar]);
    }

    function _getTimeArray (ms) {
        if (!ms || ms < 0 || typeof ms !== 'number') {
            return;
        }
        
        var time = [];
        
        time.push(Math.floor(ms / 1000) % 60); // second [0]
        time.push(Math.floor(ms / 60000) % 60); // minutes [1]
        time.push(Math.floor(ms / 3600000)); // hours [2]
        
        return time;
    }

    // set up valid args
    var hourNames = ['h', 'hr', 'hrs', 'hour', 'hours'];
    var minNames  = ['m', 'min', 'mins', 'minute', 'minutes'];
    var secNames  = ['s', 'sec', 'secs', 'second', 'seconds'];

    // user function
    function _getPlayTime (m) {
        var ms   = _getMS();
        var time = _getTimeArray(ms);
        if (hourNames.includes(m)) {
            return time[2];
        }
        if (minNames.includes(m)) {
            return time[1];
        }
        if (secNames.includes(m)) {
            return time[0];
        }
        return ms;
    }

    function _formatTime (arr, fmt) {
        if (!arr || !Array.isArray(arr) || arr.length < 3) {
            return;
        }
        
        var hr  = (arr[2] < 10) ? '0' + arr[2] : '' + arr[2],
            min = (arr[1] < 10) ? '0' + arr[1] : '' + arr[1],
            sec = (arr[0] < 10) ? '0' + arr[0] : '' + arr[0];
            
        if (fmt) {
            return '<b>' + hr + ':' + min + '</b>' + ':' + sec;
        }
        return hr + ':' + min + ':' + sec;
    }

    function _outputPlaytime (fmt) {
        var ms = _getMS();
        return _formatTime(_getTimeArray(ms), fmt);
    }

    /* 
        (setup|window).playTime(arg):
        
            if (arg) is a string, returns a positive integer:
                * hour, hours, h, hr, etc            : returns hours
                * min, minutes, minute, m, mins, etc : returns minutes
                * sec, secs, s, second, seconds, etc : returns seconds
                * anyother string                    : returns milliseconds

            if (arg) is not a string:
                * (arg) is truthy : returns formatted time string
                * (arg) is falsey : returns unformatted time string
    */

    // setup API
    setup.playTime = function (arg) {
        if (typeof arg === 'string') {
            return _getPlayTime(arg);
        }
        return _outputPlaytime(arg);
    };

    // global playTime() function
    if (options.tryGlobal) {
        window.playTime = window.playTime || setup.playTime;
    }

    // <<playtime>> macro
    // if given the format argument, bold hours and minutes
    Macro.add('playtime', {
        handler : function () {
            var arr = this.args.map(function (arg) {
                return String(arg).trim().toLowerCase();
            });
            var $wrapper = $(document.createElement('span'));
            var fmt      = arr.includesAny(['format', 'f', 'fmt', 'b', 'bold', 'true']);
            var string   = _outputPlaytime(fmt);
            
            $wrapper
                .wiki(string)
                .addClass('macro-' + this.name)
                .appendTo(this.output);
        }
    });
}());
/* twine-user-script #16: "popover.js" */
(function () {
    'use strict';
    // popover macro, by chapel, for SugarCube 2
    // v1.0.0

    function handleClasses () {
        return [].slice.call(arguments).flatten().filter( function (c) {
            return c && typeof c === 'string' && c.trim();
        }) || [];
    }

    function popover (content, classList) {
        classList = handleClasses(classList);
        $('#ui-overlay, #ui-dialog').addClass('popover');
        // classList
        $('#ui-overlay, #ui-dialog, #ui-dialog-body').addClass(classList);
        // no-click
        if (classList.includesAny('noclick', 'no-click')) {
            $('#ui-overlay').removeClass('ui-close');
        }
        // dialog
        Dialog.setup('', 'popover');
        Dialog.wiki(content);
        Dialog.open();
        // remove classes
        $(document).one(':dialogclosed', function () {
            $('#ui-overlay').addClass('ui-close');
            $('#ui-overlay, #ui-dialog').removeClass('popover');
            $('#ui-overlay, #ui-dialog, #ui-dialog-body').removeClass(classList);
        });
    }

    // built-in options: invert, opaque, transparent, noclick
    Macro.add('popover', {
        tags: null,
        handler : function () {
            popover(this.payload[0].contents, this.args);
        }
    });

    Macro.add('dismisspopover', {
        skipArgs: true,
        handler : function () {
            if ($('ui-overlay').hasClass('popover')) {
                Dialog.close();
            }
        }
    });

    setup.popover = popover;
}());
/* twine-user-script #17: "preload.js" */
(function () {
    'use strict';
    // v1.0.0
    // preload images prior to story startup

    function preloadImage (url, cb) {
        var img = new Image();
        img.onload = cb;
        img.onerror = cb;
        img.src = url;
    }

    function preloadAll (urls, cb) {
        var loaded = 0;
        var toBeLoaded = urls.length;
        urls.forEach( function (url) {
            preloadImage( url, function () {
                loaded++;
                if (loaded === toBeLoaded) {
                    cb();
                }
            });
        });
    }

    function isInit () {
        return State.length <= 0;
    }


    function preload () {
        var list = [].slice.call(arguments).flatten();
        var id = isInit() ? LoadScreen.lock() : false;
        preloadAll( list, function () {
            if (id) {
                LoadScreen.unlock(id);
            }
        });
        return id;
    }

    setup.preload = preload;
    setup.preload.force = false;

    /* <<preload imageUrls...>> */
    Macro.add('preload', {
        handler : function () {
            if (!isInit() && !setup.preload.force) {
                return this.error("Attempting to preload images outside of `StoryInit` or similar can cause performance issues. Set `setup.preload.force` to `true` if you want to do it anyway.");
            }
            preload(this.args.flatten().filter( function (url) {
                return typeof url === 'string';
            }));
        }
    });
}());
/* twine-user-script #18: "simple-inventory.js" */
(function () {
    // simple-inventory.js, by chapel; for sugarcube 2
    // version 2.3.0
    'use strict';

    // options object

    var options = {
        tryGlobal : true,
        defaultStrings : {
            empty     : 'The inventory is empty...',
            listDrop  : 'Discard',
            separator : '\n'
        }
    };

    // private functions

    function _attachEvent (inv, loc, items, cont) {
        // attach special inventory change events to the document
        $(document).trigger({
            type       : (cont === 'initialized') ?  ':inventory-init' : ':inventory-update', // the event name
            instance   : inv, // the calling instance; the giver in transfers
            receiving  : loc, // the inventory recieving transfers, or null
            moved      : items, // the items moved to or from the calling inventory, or null
            context    : cont // drop, pickup, transfer, or initialized
        });
    }

    function _getUID (name, i) {
        // generates a random, unique-enough-for-this-purpose ID
        var key = Math.random().toString(36).substring(7);
        if (arguments.length < 2) {
            // we'll generate an id anyway, but it might not be as unique as i'd like.
            name = Math.random().toString(36).substring(7);
            i    = random(99);
        }
        return ('simple-inv-' + i + '-' + Date.now() + '-' + name.replace(/[^A-Za-z0-9]/g, '') + '-' + key);
    }

    // constructor

    function Inventory (array) {
        if (array) {
            // some number of arguments were passed
            array = [].slice.call(arguments);
            array = array.flatten();
        } else { 
            // no arguments were passed
            array = [];
        }
        
        if (this instanceof Inventory) {
            this.inv = array;
            array = (array.length) ? array : null;
            // run the event only if assignement is successful
            _attachEvent(this, null, array, 'initialized');
        } else { // if the author forgets the 'new' operator, add it for them
            return new Inventory(array);
        }
    }

    // static methods

    Object.assign(Inventory, {
        is : function (inv) {
            // test to see if passed object is an inventory instance
            return (inv instanceof Inventory);
        },
        log : function (inv) {
            // logs the inventory to the console (for debugging)
            var string = (Inventory.is(inv)) ?
                ('Inventory.log() -> ' + inv.toArray().join(' - ')) : 
                ('Inventory.log() -> object is not an inventory...');
            return string;
        },
        removeDuplicates : function (inv) {
            // removes duplicate items from an inventory
            if (!Inventory.is(inv)) {
                return; // not an inventory
            }
            var items = inv.toArray();
            var uniq  = (function (i) {
                var ret = [];
                i.forEach( function (item) {
                    if (!ret.includes(item)) {
                        ret.push(item);
                    }
                });
                return ret;
            }(items));
            
            return uniq;
        }
    });

    Object.assign(Inventory.prototype, {
        transfer : function (loc) {
            // transfer items from this inventory to a specified inventory
            if (arguments.length < 2) {
                return this; // error in args, do nothing
            }   
            if (!Inventory.is(loc)) {
                return this; // error in args, do nothing
            }
            
            var items = [].slice.call(arguments);
            items = items.slice(1).flatten();
            
            var pushed = [];
            for (var i = 0, l = items.length; i < l; i++) {
                // only transfer the item if it exists
                if (this.inv.includes(items[i])) { 
                    this.inv.delete(items[i]);
                    pushed.push(items[i]);
                }
            }
            
            if (pushed.length) {
                loc.inv = loc.inv.concat(pushed);
                _attachEvent(this, loc, pushed, 'transfer');
                return this; // for chaining
            }
            return this; // for chaining
        },
        
        has : function () { // this inventory has any of the passed items
            var items = [].slice.call(arguments).flatten();
            if (items && items.length) {
                return this.inv.includesAny(items);
            }
            return false;
        },
        
        hasAll : function () { // this inventory has all of the passed items
            var items = [].slice.call(arguments).flatten();
            if (items && items.length) {
                return this.inv.includesAll(items);
            }
            return false;
        },
        
        pickUp : function (unique) { // add items to this inventory
            var items = [].slice.call(arguments).flatten(), inventory = this;
            if (items && items.length) {
                if (unique === 'unique' || items[0] === 'unique') { // items must be unique in each inventory instance
                    items = items.splice(1);
                    items = (function (items) { 
                        var ret = []; // this code could use some cleanup
                        items.forEach(function (item) {
                            if (!inventory.inv.includes(item) && !ret.includes(item)) {
                                ret.push(item);
                            }
                        });
                        return ret;
                    }(items));
                }
                // concat the arrays and call the event
                this.inv = this.inv.concat(items);
                _attachEvent(this, null, items, 'pickup');
            }
            return this; // for chaining
        },
        
        drop : function () { // remove items from this inventory
            var items = [].slice.call(arguments).flatten(),
                inventory = this, del; // we need to access this in the <array>.forEach()
            if (items && items.length) {
                var moved = [];
                items.forEach(function (item) {
                    if (inventory.has(item)) {
                        moved.push(item); // for the event below
                        del = inventory.inv.indexOf(item);
                        inventory.inv.deleteAt(del);
                    }
                });
                _attachEvent(this, null, moved, 'drop');
            }
            return this; // for chaining
        },
        
        sort : function () { // sorts this inventory
            this.inv = this.inv.sort();
            _attachEvent(this, null, null, 'sort');
            return this;
        },
        
        show : function (sep) { // returns a string representing the inventory
            if (!sep || typeof sep !== 'string') {
                sep = options.defaultStrings.separator; // default
            }
            if (this.inv.length) {
                return this.inv.join(sep);
            }
            return options.defaultStrings.empty; // nothing is in this inventory
        },
        
        empty : function () { // remove all items from this inventory
            var temp = clone(this.inv); // for the event
            this.inv = []; 
            // this is still technically a 'drop' event
            _attachEvent(this, null, temp, 'drop');
            return this; // for that sweet chaining action
        },
        
        toArray : function () { // not super necessary
            return (this.inv);
        },

        count : function (item) {
            // if item, count the number of duplicates
            if (item && typeof item === 'string') {
                var cnt = 0;
                this.toArray().forEach( function (i) {
                    if (i === item) {
                        cnt++;
                    }
                });
                return cnt;
            }
            // else return the length
            return this.toArray().length;
        },

        isEmpty : function () {
            return this.toArray().length === 0;
        },
        
        linkedList : function (loc, action) { // construct the list elements to keep the macro call clean-ish
            if (!loc || !Inventory.is(loc)) {
                loc = false; // if no loc, then no transferring
            }
            
            // set up vars
            var list = this.toArray();
            var inv = this;
            var $wrapper = $(document.createElement('span'));
            
            // if inventory is empty, append message and return element
            if (!list || !list.length) {
                $wrapper.wiki(options.defaultStrings.empty);
                return $wrapper;
            }
            
            // construct the link list
            list.forEach(function (item, idx, arr) {
                var $listing = $(document.createElement('span')),
                    $link    = $(document.createElement('a')),
                    drop     = (action) ? action : options.defaultStrings.drop, // the action name or default
                    UID      = _getUID(item, idx); // create a unique element ID 
                
                $link // create the drop link
                    .wiki(drop)
                    .addClass('simple-inv drop-link');
                
                // add click event handler
                $link.ariaClick(function () {
                    if (loc) {
                        inv.transfer(loc, item);
                    } else {
                        inv.drop(item);
                    }
                    $('#' + UID).empty(); // empty the listing by its UID
                });
                
                // set up the listing element, which contains the name and the link
                $listing
                    .attr('id', UID)
                    .addClass('simple-inv link-listing')
                    .wiki(item + ' ')
                    .append($link);
                
                // add newline via <br> for listings that aren't last
                // this also allows the newline to disappear with its associated listing when dropped
                if (idx < arr.length - 1) {
                    $listing.wiki('<br />');
                }
                
                // attach to the return element
                $wrapper.append($listing);
            });
            
            // return the whole element
            return $wrapper;
        },
        
        // we need to reassign this since we may have clobbered it using the prototype
        constructor : Inventory,
        
        toJSON : function () { // the custom revive wrapper for SugarCube's state tracking
            // use `setup` version in case the global version is unavailable
            return JSON.reviveWrapper('new setup.Inventory(' + JSON.stringify(this.inv) + ')');
        },
        
        clone : function () { return new Inventory(this.inv); }
    });

    // JS APIs

    setup.Inventory = Inventory;
    setup.simpleInv = { inventory : Inventory }; // legacy

    if (options.tryGlobal) {
        // this allows authors to access the JS API using the global Inventory function
        window.Inventory = window.Inventory || Inventory;
        // ... but only if window.Inventory is undefined
    }

    // macros

    // <<newinventory '$var' '(optional) list of items'>>
    Macro.add('newinventory', {
        handler : function () {

            if (this.args.length < 1) {
                return this.error('incorrect number of arguments');
            }
            var varName = this.args[0].trim();
            // check variable string
            if (varName[0] !== '$' && varName[0] !== '_') {
                return this.error('variable name "' + this.args[0] + '" is missing its sigil ($ or _)');
            }
            
            // set up new inventory
            Wikifier.setValue(varName, new Inventory(this.args.slice(1).flatten()));
        }
    });

    // <<pickup '$var' 'list of items'>>
    Macro.add('pickup', {
        handler : function () {
            
            if (this.args.length < 2) {
                return this.error('incorrect number of arguments');
            }
            
            var varName = this.args[0].trim();
            // check variable string
            if (varName[0] !== '$' && varName[0] !== '_') {
                return this.error('variable name "' + this.args[0] + '" is missing its sigil ($ or _)');
            }
            
            // check if story var is an inventory instance
            var inv = Wikifier.getValue(varName);
            if (!Inventory.is(inv)) {
                return this.error('variable ' + varName + ' is not an inventory!');
            }
            
            inv.pickUp(this.args.slice(1).flatten());
        }
    });

    // <<drop '$var' 'list of items'>>
    Macro.add('drop', {
        handler : function () {
            
            if (this.args.length < 2) {
                return this.error('incorrect number of arguments');
            }
            
            var varName = this.args[0].trim();
            // check variable string
            if (varName[0] !== '$' && varName[0] !== '_') {
                return this.error('variable name "' + this.args[0] + '" is missing its sigil ($ or _)');
            }
            
            // check if story var is an inventory instance
            var inv = Wikifier.getValue(varName);
            if (!Inventory.is(inv)) {
                return this.error('variable ' + varName + ' is not an inventory!');
            }
            
            inv.drop(this.args.slice(1).flatten());
        }
    });

    // <<transfer '$var' '$anotherVar' 'list of items'>>
    Macro.add('transfer', {
        handler : function () {
            
            if (this.args.length < 3) {
                return this.error('incorrect number of arguments');
            }
            
            var varName = this.args[0].trim();
            // check variable string
            if (varName[0] !== '$' && varName[0] !== '_') {
                return this.error('variable name "' + this.args[0] + '" is missing its sigil ($ or _)');
            }
            
            // check if story var is an inventory instance
            var inv = Wikifier.getValue(varName);
            if (!Inventory.is(inv)) {
                return this.error('variable ' + varName + ' is not an inventory!');
            }
            
            /* the receiving inventory */
            var recVarName = this.args[1].trim();
            // check variable string
            if (recVarName[0] !== '$' && recVarName[0] !== '_') {
                return this.error('variable name "' + this.args[1] + '" is missing its sigil ($ or _)');
            }
            
            // check if story var is an inventory instance
            var recInv = Wikifier.getValue(recVarName);
            if (!Inventory.is(recInv)) {
                return this.error('variable ' + recVarName + ' is not an inventory!');
            }
            
            inv.transfer(recInv, this.args.slice(2).flatten());
        }
    });

    // <<dropall '$var'>>
    Macro.add('dropall', {
        handler : function () {
            
            if (this.args.length !== 1) {
                return this.error('incorrect number of arguments');
            }
            
            var varName = this.args[0].trim();
            // check variable string
            if (varName[0] !== '$' && varName[0] !== '_') {
                return this.error('variable name "' + this.args[0] + '" is missing its sigil ($ or _)');
            }
            
            // check if story var is an inventory instance
            var inv = Wikifier.getValue(varName);
            if (!Inventory.is(inv)) {
                return this.error('variable ' + varName + ' is not an inventory!');
            }
            
            inv.empty();
        }
    });

    // <<clear>> (same as <<dropall>>)
    Macro.add('clear', 'dropall', false);

    // <<sort '$var'>>
    Macro.add('sort', {
        handler : function () {
            
            if (this.args.length !== 1) {
                return this.error('incorrect number of arguments');
            }
            
            var varName = this.args[0].trim();
            // check variable string
            if (varName[0] !== '$' && varName[0] !== '_') {
                return this.error('variable name "' + this.args[0] + '" is missing its sigil ($ or _)');
            }
            
            // check if story var is an inventory instance
            var inv = Wikifier.getValue(varName);
            if (!Inventory.is(inv)) {
                return this.error('variable ' + varName + ' is not an inventory!');
            }
            
            inv.sort();
        }
    });

    // <<inventory '$var' 'separator'>>
    Macro.add('inventory', {
        handler : function () {
            
            if (this.args.length < 1 || this.args.length > 2) {
                return this.error('incorrect number of arguments');
            }
            
            var varName = this.args[0].trim();
            // check variable string
            if (varName[0] !== '$' && varName[0] !== '_') {
                return this.error('variable name "' + this.args[0] + '" is missing its sigil ($ or _)');
            }
            
            // check if story var is an inventory instance
            var inv = Wikifier.getValue(varName);
            if (!Inventory.is(inv)) {
                return this.error('variable ' + varName + ' is not an inventory!');
            }
            
            // create output element and add to DOM
            var $wrapper = $(document.createElement('span')), 
                sep = (this.args[1]) ? this.args[1] : false;
            
            $wrapper
                .wiki(inv.show(sep))
                .addClass('macro-' + this.name)
                .appendTo(this.output);
        }
    });

    // <<linkedinventory 'action name' '$var' '(optional) $anotherVar'
    Macro.add('linkedinventory', {
        handler : function () {
            
            if (this.args.length < 2 || this.args.length > 3) {
                return this.error('incorrect number of arguments');
            }
            
            var recInv = false,
                recVarName = '',
                varName = this.args[1].trim(),
                action = (typeof this.args[0] === 'string') ? this.args[0] : false; // the action name, which is required
            
            if (!action) { // just in case
                return this.error('first argument should be the link text');
            }
            
            // check variable string
            if (varName[0] !== '$' && varName[0] !== '_') {
                return this.error('variable name "' + this.args[1] + '" is missing its sigil ($ or _)');
            }
            
            // use a varID for linked lists
            var varID = Util.slugify(varName); 
            varID = this.name + '-' + varID;
            
            // check if story var is an inventory instance
            var inv = Wikifier.getValue(varName);
            if (!Inventory.is(inv)) {
                return this.error('variable ' + varName + ' is not an inventory!');
            }
            
            if (this.args.length > 2) {
                // the receiving inventory, if applicable
                recVarName = this.args[2].trim();
                // check variable string
                if (recVarName[0] !== '$' && recVarName[0] !== '_') {
                    return this.error('variable name "' + this.args[2] + '" is missing its sigil ($ or _)');
                }
                
                // check if story var is an inventory instance
                recInv = Wikifier.getValue(recVarName);
                if (!Inventory.is(recInv)) {
                    return this.error('variable ' + recVarName + ' is not an inventory!');
                }
            }
            
            // create output and att to DOM
            var $list = inv.linkedList(recInv, action);
            $list
                .attr({ // add data to reconstruct the call via an event
                    id : varID,
                    'data-rec' : recVarName,
                    'data-self' : varName,
                    'data-action' : action
                })
                .addClass('macro-' + this.name)
                .appendTo(this.output);
        }
    });

}());
/* twine-user-script #19: "speech.js" */
(function () {
    // v1.1.1
    'use strict';

    var characters = new Map();

    function addCharacter (name, displayname, icon) {
		if(icon === undefined && displayname){
			icon = displayname;
			displayname = null;
		}
        if (State.length) {
            throw new Error('addCharacter() -> must be called before story starts');
        }
        if (!name || !icon) {
            console.error('addCharacter() -> invalid arguments');
            return;
        }
        if (characters.has(name)) {
            console.error('addCharacter() -> overwriting character "' + name + '"');
        }
        characters.set(name, {displayName: displayname, image: icon});
    }

    function say ($output, character, text, imgSrc) {
        // 
        var $box = $(document.createElement('div'))
            .addClass(Util.slugify(character) + ' say');

			
        // portrait
        var _img = characters.has(character) ? characters.get(character).image : null;        
        var $img = $(document.createElement('img'))
            .attr('src', imgSrc || _img || '');

        if ($img.attr('src') && $img.attr('src').trim()) {
            $box.append($img);
        }

        // name and content boxes
		var _name =  character.toUpperFirst();
		if (characters.has(character) && characters.get(character).displayName) {
            _name = characters.get(character).displayName;
        }

        $box.append($(document.createElement('p'))
            .wiki(_name))
            .append($(document.createElement('p'))
                .wiki(text));

        if ($output) {
            if (!($output instanceof $)) {
                $output = $($output);
            }
            $box.appendTo($output);
        }

        return $box;
    }

    setup.say = say;
    setup.addCharacter = addCharacter;

    Macro.add('character', {
        // character macro
        handler : function () {
            addCharacter(this.args[0], this.args[1], this.args[2]);
        }
    });

    $(document).one(':passagestart', function () {
        // construct array of character names
        var names = Array.from(characters.keys());
        names.push('say');
        // generate macros
        Macro.add(names, {
            tags : null,
            handler : function () {
                if (this.name !== 'say') {
                    say(this.output, this.name, this.payload[0].contents);
                } else {
                    say(this.output, this.args[0], this.payload[0].contents, this.args[1]);
                }
            }
        });
    });
}());
/* twine-user-script #20: "swap-macro-set.js" */
/*
    the following `(function () {...}());` statement creates a local scope for our JavaScript code.
    this is called an IIFE, or "immediately invoked function expression". most langauges have block scoping,
    JS has function scoping. think of this as a way to get block scoping to prevent any of our stuff from
    polluting the global scope.
*/

(function () {

    // v1.1.0

    /*
        in SC, all of your scripts run in-engine are run in strict mode no matter what you do, so the below
        statement is optional. still, it's best to be explicit with what's happening. generally speaking, I
        recommend strict mode all the time; there's some cases where you may want to skip it, but overall it
        makes JavaScript way more consistent and way more likely to tell you about errors instead of doing something
        unexpected.
    */

    'use strict';

    /*
        I usually use an object like the one below to set up user configuration options. because of
        when our script is loaded, we need to set these options here, we can't do something like 
        `Config.swapMacro.normal = 'x'` like SugarCube's configs can, at least not in SC's current version
    */

    var options = {  
        // the colors of the content
        tryGlobal : true,
        resetButton : true, // if false, renders a link (`<a>`) instead of a button
        normal : 'violet',
        selected : 'red',
        cls : 'swappable' // we use 'cls' because 'class' is a reserved word in JavaScript
    };

    setup.swap = setup.swap || {};

    /*
        the `first` variable below is inside what is called a 'closure.' this means the variable is 
        only accessible within this `(function () { ... }());` scope. this variable will hold one of our swap
        elements. if it's set to something when a swap is clicked, it'll do the swap thing
    */

    var $first = null;

    function getCurrent (str) {
        // create a function on the fly
        var g = function () {
            return str;
        };
        setup.swap.current = g;
        if (options.tryGlobal) {
            window.swapCurrent = g;
        }
    }

    function removeCurrent () {
        if (setup.swap.current && typeof setup.swap.current === 'function') {
            delete setup.swap.current;
        }
        if (options.tryGlobal && window.swapCurrent && typeof window.swapCurrent === 'function') {
            delete window.swapCurrent;
        }
    }

    /*
        we're going to have a function and a macro definition. we can put the function
        inside the macro, but I try to avoid doing that--doing so means that the only way you can
        use this system from inside JavaScript is by the jQuery `wiki()` methods, which are slow.
        by creating the function separately, we build a JavaScript-facing API for authors to use, but
        more on that later.
    */

    function swappable (content /* the word(s) to be swapped */, wiki /* wikicode to run */) {
        /*
            $wrapper is a jQuery object; we add the $ at the start to denote this,
            the $ has nothing to do with story variables, so don't let that confuse you
        */
        var $wrapper = $(document.createElement('span'));
        // a wrapper is just an element to hold the stuff we want.
        var $swappable = $(document.createElement('a'))
            .wiki(content) // this wikifies (parses the `content` into the `a` element)
            .css('color', options.normal) // set our default color
            .attr({
                // these are custom html attributes; they always start with `data-`
                'data-swap-flag' : 'false', // set our custom attribute to the string false
                // normally you wouldn't use a string, but html converts everything to a string
                'data-orig-content' : content, // this is the original content so we can reset it
                'data-wiki-code' : wiki || ''
            }) 
            .addClass(options.cls) // this adds out class
            .appendTo($wrapper); // this adds the `a` element to our wrapper

        /*
            we're going to add our event handlers now. we could chain these above, but this is simpler to comment
            we use SC's `ariaClick()` method instead of `on('click', ...)` or `click(...)` because it is designed
            for accessibility from the ground up.
        */

        $swappable.ariaClick( function (ev /* this is the event object */) {
            ev.preventDefault(); // this stops any default browser behavior from happening
            // we cache a reference to $(this); the jQuery-wrapped `this`, since we'll use it a lot
            var $this = $(this); // the `this` keyword in an event handler is the element the handler was attached to

            // let's check the swapped state
            // we check this first because swapping an element with itself is possible, but a waste of resources
            if ($this.attr('data-swap-flag') === 'true') {
                // if the attribute swap flag is already set, we should toggle it
                $this
                    .attr('data-swap-flag', 'false')
                    .css('color', options.normal);
                // reset the first clicked element, since this one was clicked twice
                $first = null;
            } else {
                // this was clicked and wasn't clicked twice, so let's see if there's already an element in `first`
                if (!$first) {
                    // null is false-y and jQuery objects are truthy. this block is run if nothing was captured by `first` yet
                    $first = $this; // we pass a reference to *this* element to first
                    // then we set the element to appear selected
                    $this
                        .attr('data-swap-flag', 'true')
                        .css('color', options.selected);
                } else {
                    // another element was already selected. there's a few things we need to do here.
                    var firstContent = $first.text();
                    var secondContent = $this.text();

                    // cache the wikifier code
                    var firstWiki = $first.attr('data-wiki-code');
                    var secondWiki = $this.attr('data-wiki-code');

                    $first
                        // reset the flag and color
                        .attr('data-swap-flag', 'false')
                        .css('color', options.normal)
                        // empty and replace the content
                        .empty()
                        .wiki(secondContent);
                    $this // do the same with $this
                        .attr('data-swap-flag', 'false')
                        .css('color', options.normal)
                        .empty()
                        .wiki(firstContent);
                    // reset $first!

                    // run the wikifier code for both, if they exist
                    if (firstWiki && typeof firstWiki === 'string' && firstWiki.trim()) {
                        getCurrent(secondContent);
                        $.wiki(firstWiki);
                    }
                    if (secondWiki && typeof secondWiki === 'string' && secondWiki.trim()) {
                        getCurrent(firstContent);
                        $.wiki(secondWiki);
                    }
                    removeCurrent();
                    $first = null;
                }
            }
        });

        // we return the whole html structure
        return $wrapper;

        /*
            the html structure is:

            <span> ($wrapper)
                <a class='swappable' data-swap-flag='false'> ($swappable)
                    [content]
                </a>
            </span>
        */
    }

    function reset () {
        // this function will reset ever swappable element on the page
        $first = null;
        // reset each link
        $('a.' + options.cls).each( function () {
            var $this = $(this);
            $this
                // restore original content
                .empty()
                .wiki($this.attr('data-orig-content'))
                // reset flag and color
                .attr('data-swap-flag', 'false')
                .css('color', options.normal);
        });
    }

    // now lets make a macro

    Macro.add('swap' /* the macro name, so `<<swap>>` */, {
        tags : ['onswap'], // this makes a container macro, eg: `<<macro>>...<</macro>>`
        skipArgs : true, // we aren't using the argument parser, so this saves us performance
        handler : function () {
            // this is the macro's behavior, `this` represents the context and content of the macro
            var content = this.payload[0].contents; // this is the content between <<swap>> and <<onswap>>
            var wikiCode = this.payload[1] ? this.payload[1].contents : ''; // the code between <<onswap>> and <</swap>>
            var output = this.output; // this is the macro's position on the page--it's where the output will go
            var name = this.name; // this is the macro's name (eg: 'swap'); this lets us change the macros name easily rather than hard-coding it

            // now we call our function
            var $wrapper = swappable(content, wikiCode);

            // now we append the generated jQuery element to the output area:
            $wrapper
                .addClass('macro-' + name)
                .appendTo(output);
        }
    });

    // now for a <<swapreset>> macro

    Macro.add('resetswap', { // by skipping the `tags` option altogether, we make a normal macro (eg, no closing tag)
        handler : function () {
            var text = (this.args && this.args[0] && typeof this.args[0] === 'string') ? this.args[0] : 'Reset';
            $(document.createElement(options.resetButton ? 'button' : 'a'))
                .wiki(text)
                .ariaClick({ label : 'Reset all swappable elements.' }, function (ev) {
                    ev.preventDefault();
                    reset();
                })
                .appendTo(this.output);
        }
    });

    // now we send out API functions to setup
    setup.swap.create = swappable;
    setup.swap.reset = reset;
    // now we have a JavaScript API and a set of macros!
}());
/* twine-user-script #21: "type-sim.js" */
(function () {
    'use strict';
    // typesim macro, by chapel; for sugarcube 2
    // version 2.0.0

    function typeSim (content, $target, callback) {
        if (!content || typeof content !== 'string') {
            return;
        }

        if ($target && !($target instanceof $)) {
            $target = $($target);
        }

        var i = 0;
        var arrayify = content.split('');
        var message = [];

        var $textarea = $(document.createElement('textarea'))
            .addClass('type-sim')
            .on('input.type-sim', function () {
                var $self = $(this);
                i = message.push(arrayify[i]);
                $self.val(message.join(''));
                if (content.length === message.length) {
                    $self
                        .off('input.type-sim')
                        .ariaDisabled(true);
                    if (callback && typeof callback === 'function') {
                        callback(message.join(''));
                    }
                    $(document).trigger({ 
                        type : ':type-sim-end',
                        message : message.join('')
                    });
                }
            });

        if ($target && $target[0]) {
            $target.append($textarea);
        }

        return $textarea;
    }

    Macro.add('typesim', {
        tags : null,
        handler : function () {
            if (!this.args.length || !this.args[0] || typeof this.args[0] !== 'string') {
                return this.error('no text to type out was provided');
            }

            var $wrapper = $(document.createElement('span')).addClass('macro' + this.name);
            var $callbackOutput = $(document.createElement('div'));

            var wiki;
            if (this.payload[0].contents && this.payload[0].contents.trim()) {
                wiki = this.payload[0].contents;
            }

            function callback () {
                $callbackOutput.wiki(wiki);
            }

            typeSim(this.args[0], $wrapper, callback);

            $wrapper
                .append($callbackOutput)
                .appendTo($(this.output));
        }
    });

})();
/* twine-user-script #22: "ui-macro.js" */
(function () {
    // ui macro, for SugarCube 2, by Chapel, v1.0.0
    
    var ui = {
        update : UIBar.setStoryElements,
        stow : UIBar.stow,
        unstow :  UIBar.unstow,
        toggle : function () {
            if ($('#ui-bar').hasClass('stowed')) {
                UIBar.unstow();
            } else {
                UIBar.stow();
            }
        },
        hide : function () {
            $('#ui-bar').css('display', 'none');
        },
        show : function () {
            $('#ui-bar').css('display', 'block');
        },
        kill : function () {
            $('#ui-bar').css('display', 'none');
            $('#story').css('margin-left', '2.5em');
        },
        restore : function () {
            $('#ui-bar').css('display', 'block');
            $('#story').css('margin-left', '20em');
        },
        jump : UI.jumpto,
        saves : UI.saves,
        restart : UI.restart,
        settings : UI.settings,
        share : UI.share,
        aliases : {
            refresh : 'update',
            reload : 'update',
            destroy : 'kill',
            revive : 'restore',
            jumpto : 'jump',
            save : 'saves',
            load : 'saves',
            setting : 'settings',
            sharing : 'share'
        },
    };

    var validCommands = Object.keys(ui);

    function isValid (command) {
        return validCommands.includes(command);
    }

    function alias (command) {
        return ui.aliases[command] || null;
    }

    function runCommand (command) {
        if (!command || typeof command !== 'string') {
            return 'Command is not a string.'; // error
        }
        command = command.toLowerCase().trim();
        if (!isValid(command)) {
            command = alias(command);
            if (!command) {
                return 'Command "' + command + '" is not a valid command.'; // error
            }
        }
        ui[command]();
        return false;
    }

    function processCommandList (arr) {
        if (!Array.isArray(arr)) {
            return 'Command list error.';
        }
        var check = [];
        arr.forEach( function (cmd) {
            check.push(runCommand(cmd));
        });
        return check;
    }

    Macro.add('ui', {
        handler : function () {

            if (!Array.isArray(this.args) || !this.args.length) {
                this.error('No commands passed to macro.');
            }

            var cmdList = this.args.flatten();

            var ret = processCommandList(cmdList);

            var errors = '';

            ret = ret.filter( function (result) {
                return typeof result === 'string';
            });

            errors = ret.join(' ');

            if (ret.length && errors) {
                this.error(errors);
            }

        }
    });

}());
/* twine-user-script #23: "AbilityHelper.js" */
setup.getAbilityId = function(index)
{
    return displayString.join("\n");
};

setup.callAbilityTrigger = function(character, triggerName, abilityParams)
{
    if(character.fight.abilities == undefined)
        return "";

    var displayString = [];

    var i;
    for(i = 0; i < character.fight.abilities.length; i++)
	{
		if(character.fight.abilities[i][triggerName] != undefined)
		{
			displayString.push(character.fight.abilities[i][triggerName](abilityParams));
		}
    }
    
    return displayString.join("\n");
};

setup.hasModifier = function(character, name)
{
    var i;
    for(i = 0; i < character.fight.variables.fightModifiers.length; i++)
    {
        if(character.fight.variables.fightModifiers[i].name == name)
        {
            return true;
        }
    }

    return false;
};

setup.hasFightMove = function(character, fightMoveID)
{
    var fightMoves = setup.getFightMovesWithAddons(character);
    
    for(let i = 0; i < fightMoves.length; i++) 
    {
        if(fightMoves[i] == fightMoveID)
        {
            return true;
        }
    }

    return false;
}

setup.levelUp = function(character, levelUpParams)
{
    if(State.variables.Level == 3)
    {
        character.fight.fightMoveIDs.push("FightMove_FirstStrike");
    }

    if(State.variables.Level == 6)
    {
        character.fight.fightMoveIDs.push("FightMove_EnragedPummel");
    }

    State.variables.Level++;

    setup.setBaseStatValue(character, "hp", levelUpParams.hp.value);
    setup.setBaseStatValue(character, "stamina", levelUpParams.stamina.value);
    setup.setBaseStatValue(character, "strength", levelUpParams.strength.value);
    setup.setBaseStatValue(character, "arousalGain", levelUpParams.arousalGain.value);
    character.info.limitBreaks.points = levelUpParams.limitBreaks.value;

    var abilityChoiceIndex = $('input[name=select]:checked').val();

    if(abilityChoiceIndex != undefined)
    {
        character.applyAbilityRuntimeData(setup.UnlockableAbilityList[abilityChoiceIndex]);
    }

    var params = 
    {
        trigger: setup.AbilityTrigger.ON_LEVEL_UP,
        self: character,
    }
    character.broadcastAbilityTrigger(params);
};

setup.getDemonicTFPassage = function(character)
{
    if(character.hasAbility("Ability_DemonicCorruption"))
    {
        return "Transformation_Incubus_Level2_1";
    }
    else if(character.hasAbility("Ability_DemonicCorruption_2"))
    {
        return "Transformation_Incubus_Level3_1";
    }
    else if(character.hasAbility("Ability_DemonicCorruption_3"))
    {
        return undefined;
    }
    return "Transformation_Incubus_Level1_1"  
};

setup.displaySeedMoveIntro = function(character, target, color)
{
    var displayString = " ";

    displayString += character.info.name +"\n";
    displayString += "\n";
    displayString += setup.processFlavours(character, ""+color+""+setup.getLength(setup.getStatValue(character, "cock"))+" @[all| cocks| noverb]"+target.info.name+"\n");
    return displayString;
}

setup.getDemonicTFCost = function(character)
{
    if(character.hasAbility("Ability_DemonicCorruption"))
    {
        return 500;
    }
    else if(character.hasAbility("Ability_DemonicCorruption_2"))
    {
        return 1000;
    }
    else if(character.hasAbility("Ability_DemonicCorruption_3"))
    {
        return undefined;
    }
    return 200;
};

setup.getNyxChosenCocoonSize = function()
{
    if(State.variables.WorldState.apothusChosen.essenceLevel == 0)
    {
        return setup.getLength(620);
    }
    else if(State.variables.WorldState.apothusChosen.essenceLevel == 1)
    {
        return setup.getLength(2500);
    }
    else if(State.variables.WorldState.apothusChosen.essenceLevel == 2)
    {
        return setup.getLength(6000);
    }
    else if(State.variables.WorldState.apothusChosen.essenceLevel == 3)
    {
        return setup.getLength(16896);
    }
    return 9999999;
}

setup.getNyxChosenFeedEssenceCost = function()
{
    if(State.variables.WorldState.apothusChosen.essenceLevel == 0)
    {
        return 1500;
    }
    else if(State.variables.WorldState.apothusChosen.essenceLevel == 1)
    {
        return 3000;
    }
    else if(State.variables.WorldState.apothusChosen.essenceLevel == 2)
    {
        return 5000;
    }
    return 9999999;
};

setup.displayStatsUp = function(character, levelUpParams)
{
    var displayString = "";
    var statGain = setup.LevelUpStatGainTable[State.variables.Level % 6];

    for(var propertyName in statGain) 
    {
        levelUpParams[propertyName].value += statGain[propertyName];
        displayString += "" + statGain[propertyName] + " " + levelUpParams[propertyName].name + "\n";
    }

    if(State.variables.Level == 3)
    {
        displayString += "\n";
    }

    if(State.variables.Level == 6)
    {
        displayString += "\n";
    }
    
    return displayString;
};

setup.printChangeFightSkillList = function()
{
    var displayString = "";

    displayString += State.variables.FightMovesLeft + '\n';

    for(let i = 0; i < State.variables.ComboableMovesInfo.length; i++) 
    {
        if(State.variables.FightMovesLeft <= 0 && (State.variables.ComboableMovesInfo[i].chosen == undefined || State.variables.ComboableMovesInfo[i].chosen == false))
        {
            displayString += "<span class='reallyInactive'>";
        }
        
        var pickedClass = "";
        if(State.variables.ComboableMovesInfo[i].chosen == true)
        {
            displayString += '<div class="FightSkillCardHighlight selected">';
        }
        else
        {
            displayString += '<div class="FightSkillCardHighlight">';
        }

        let params = 'class="FightSkillCard" style="'+setup.getFightSkillCardBackgroundStyle(State.variables.CharacterSheet_Player, undefined, setup[State.variables.ComboableMovesInfo[i].id])+'"';
        displayString += '<div '+params+'>';
        displayString += '<<link "'+setup.getSkillDisplayString(State.variables.CharacterSheet_Player, undefined, setup[State.variables.ComboableMovesInfo[i].id], undefined)+'">>';
        displayString += '<<replace "#ChangeFightSkillList">>';

        if(State.variables.ComboableMovesInfo[i].chosen == true)
        {
            displayString += '<<set $FightMovesLeft++>>';
            displayString += '<<set $ComboableMovesInfo['+i+'].chosen = false>>';
        }
        else
        {
            displayString += '<<set $FightMovesLeft-->>';
            displayString += '<<set $ComboableMovesInfo['+i+'].chosen = true>>';
        }
        displayString += '<<print setup.printChangeFightSkillList()>>';

        displayString += '<</replace>>';
        displayString += '<</link>>';
        displayString += '</div>';
        displayString += '</div>';

        if(State.variables.FightMovesLeft <= 0 && (State.variables.ComboableMovesInfo[i].chosen == undefined || State.variables.ComboableMovesInfo[i].chosen == false))
        {
            displayString += '</span>';
        }
    }

    displayString += "\n\n";
    displayString += "[[->Village][[setup.resetComboableFightMoveList()]]]";
    displayString += "\n";

    if(State.variables.FightMovesLeft <= 0)
    {
        displayString += "[[->Village][setup.applyComboableFightMoveList(); setup.resetComboableFightMoveList()]]";
    }
    else
    {
        displayString += "<span class='inactive'>[[->Village]]</span>";
    }

    return displayString;
}

setup.resetComboableFightMoveList = function()
{
    var movelist = setup.getFightMovesWithAddons(State.variables.CharacterSheet_Player);

    State.variables.ComboableMovesInfo = undefined;
}

setup.applyComboableFightMoveList = function()
{
    var movelistIDs = setup.getFightMovesWithAddons(State.variables.CharacterSheet_Player);

    State.variables.EquippedFightMoveIDs= [];
    
    State.variables.ComboableMovesInfo = State.variables.ComboableMovesInfo.filter(function(val) {
        return val.chosen == true;
    });

    for(let i = 0; i < movelistIDs.length; ++i)
    {
        for(let j = 0; j < State.variables.ComboableMovesInfo.length; ++j)
        {
            if(movelistIDs[i] == State.variables.ComboableMovesInfo[j].id)
            {
                State.variables.EquippedFightMoveIDs.push(movelistIDs[i]);
            }
        }
    }

    State.variables.ComboableMovesInfo = undefined;
}

setup.displayChangeFightMoves = function()
{
    var displayString = "";
    var movelistIDs = setup.getFightMovesWithAddons(State.variables.CharacterSheet_Player);

    movelistIDs = movelistIDs.filter(function(val) {
        console.log("1")
        console.log(setup[val])
        if(setup[val].comboCost != undefined && setup[val].unique == undefined)
        {
            return true;
        }
        return false;
    });

    State.variables.ComboableMovesInfo = [];
    for(let i = 0; i < movelistIDs.length; ++i)
    {
        State.variables.ComboableMovesInfo.push(
            {
                id: movelistIDs[i],
                chosen: false,
            }
        )
    }

    
    displayString += '<span id="ChangeFightSkillList">';
    displayString += setup.printChangeFightSkillList();
    displayString += '</span>';

    return displayString;
};

setup.canRemoveAbilityPoint = function(propertyName, value)
{
    if(State.variables.CharacterSheet_Player.fight[propertyName] != undefined)
    {
        if(State.variables.CharacterSheet_Player.fight[propertyName] >= value)
        {
            return false;
        }
            
    }

    return true;
};

setup.displayAbilitiesUp = function(character)
{
    var displayString = "<section>";

    for(var propertyName in setup.AbilityCategory)
    {
        var categoryString = setup.getAbilityCategoryDescription(character, setup.AbilityCategory[propertyName]);
        if(categoryString != "")
        {
            displayString += setup.getAbilityCategory(setup.AbilityCategory[propertyName]);
            displayString += categoryString;
            displayString += "</div>"
        }
    }

    displayString += "</section>"
    return displayString;
};

setup.getAbilityByIndex = function(index)
{
    return setup[setup.AbilityIDCache[index]];
}

setup.getAbilityCategoryDescription = function(character, category)
{
    var i;
    var j;
    var displayString = "";
    for(var gradeProperty in setup.AbilityGrade)
    {
        for(i = 0; i < setup.UnlockableAbilityList.length; i++)
        {
            if(category != setup.UnlockableAbilityList[i].category)
            {
                continue;
            }
                
            if(setup.AbilityGrade[gradeProperty] != setup.UnlockableAbilityList[i].grade)
            {
                continue;
            }

            var ability = undefined;
            var unlocked = false;
            for(j = 0; j < character.abilityHandler.abilityRuntimeDatas.length; j++)
            {
                let abilityRuntimeData = character.abilityHandler.abilityRuntimeDatas[j];
                let abilityData = setup.getAbilityByIndex(abilityRuntimeData.abilityDataIndex);

                if(setup.UnlockableAbilityList[i].baseID == abilityData.baseID)
                {
                    unlocked = true;
                    if(setup.canRank(abilityRuntimeData))
                    {
                        ability = abilityData;
                        displayString += setup.createRadioButton(i, abilityRuntimeData, abilityData, character);
                    }
                    else if (abilityData.nextAbilityID != undefined)
                    {
                        if (abilityData.upgradeConditionFunction(abilityRuntimeData, character))
                        {
                            displayString += setup.createRadioButton(i, abilityRuntimeData, abilityData, character);
                        }
                        else
                        {
                            let nextAbility = setup[abilityData.nextAbilityID];

                            let info = nextAbility.name + " " + "[]" +" :\n";
                            info += "<p style='opacity:.35'>" + nextAbility.description(character, undefined) + '</p>';
                            info += "<p style='color:#9e21218c;'>" + abilityData.upgradeDescription(character) + '</p>';
                            displayString += '<div class="AbilityLevelUpCard '+setup.getAbilityGradeClass(abilityData)+'"><span class="inactive">' + info + '</span></div>';
                        }
                    }
                }
            }
            if(!unlocked && (setup.UnlockableAbilityList[i].unlockCondition(character)))
            {            
                displayString += setup.createRadioButton(i, undefined, setup.UnlockableAbilityList[i], character);
            }
        }
    }

    return displayString;
}

setup.canRank = function(abilityRuntimeData)
{
    let ability = setup.getAbilityByIndex(abilityRuntimeData.abilityDataIndex);
    
    if(abilityRuntimeData.rank < ability.maxRank){
        return true;
    }else{
        return false;
    }
}

setup.addRank = function(abilityRuntimeData)
{
    if(setup.canRank(abilityRuntimeData)){
        abilityRuntimeData.rank += 1
        abilityRuntimeData.seen = false;
    }
}

setup.getRankGrowth = function(newAbilityRuntimeData, growthType, growthFactor)
{
    switch(growthType){
        case "constant":
            return growthFactor; 
        case "linear":
            return newAbilityRuntimeData.rank * growthFactor;
        case "exp":
            return Math.pow(growthFactor, newAbilityRuntimeData.rank);
        case "log":
            return Math.log(newAbilityRuntimeData.rank) / Math.log(growthFactor);
    }
}

setup.getUnseenAbilitiesAmount = function(filter)
{
    let displayString = "";
    var abilities = State.variables.CharacterSheet_Player.abilityHandler.abilityRuntimeDatas;
    let count = 0;
    let hasUnseen = false;

	for(var i = 0; i < abilities.length; i++)
	{
        if(abilities[i].isActive == false)
            continue;

        var abilityData = setup.getAbilityByIndex(abilities[i].abilityDataIndex);

        if(abilityData.filter != filter)
            continue;

        count++;

        if(abilities[i].seen == false)
        {
            hasUnseen = true;
        }
	}

    displayString += "<div class='AbilityNotification'>"+count+"</div>"

    if(hasUnseen == true)
    {
        displayString += "<div class='AbilityNotificationBlip'></div>"
    }

    return displayString;
}

setup.getAbilityCategory = function(category)
{
    var displayString = '<div class="levelUpCardCategory">';
    displayString += setup.getAbilityCategoryDisplayName(category);

    return displayString;
}

setup.getAbilityCategoryDisplayName = function(category)
{
    var categories = setup.AbilityCategory;

    var displayString = "<h2>";

    switch(category)
    {
        case categories.NONE:
            displayString += "";
            break;
        case categories.WARRIOR:
            displayString += "";
            break;
        case categories.GROWTH:
            displayString += "";
            break;
        case categories.SOMBREVE:
            displayString += "";
            break;
        case categories.PURITY:
            displayString += "";
            break;
        case categories.LUST:
            displayString += "";
            break;
    }

    displayString += "</h2>";

    return displayString;
}

setup.getAbilityGradeClass = function(abilityData)
{
    var grades = setup.AbilityGrade;
    switch(abilityData.grade)
    {
        case grades.VERYLOW:
            return "AbilityGradeVeryLow";
        case grades.LOW:
            return "AbilityGradeLow";
        case grades.MEDIUM:
            return "AbilityGradeMedium";
        case grades.HIGH:
            return "AbilityGradeHigh";
        case grades.VERYHIGH:
            return "AbilityGradeVeryHigh";
    }
}  

setup.createRadioButton = function(radioListIndex, abilityRuntimeData, abilityData, character){
    var displayString = "";
    var upgradeString = "";
    var ability = abilityData;
    
    if(abilityRuntimeData != undefined)
    {
        if(setup.canRank(abilityRuntimeData))
        {
            upgradeString += " [" + abilityRuntimeData.rank + "/" + ability.maxRank + "]" + "  " + " [" + (abilityRuntimeData.rank + 1) + "/" + ability.maxRank + "]"
        }
        else
        {
            ability = setup[ability.nextAbilityID];

            if (ability.upgradeConditionFunction(abilityRuntimeData, character))
            {
                upgradeString += "[]";
            }
        }
    }

    //stupid ass hack - Can we keep this comment in here forever? - OK
    var levelUpRuntimeData = clone(abilityRuntimeData);
    if(levelUpRuntimeData != undefined)
    {
        if(setup.canRank(abilityRuntimeData)){
            levelUpRuntimeData.rank++;
        }
    }

    displayString += "<div class='AbilityLevelUpCard "+setup.getAbilityGradeClass(abilityData)+"'>";

    displayString += '<input type="radio" class="AbilityLevelUpCardRadio" id="control_'+radioListIndex+'" name="select" value="'+radioListIndex+'" checked>';
    displayString += '<label class="abilityLabel" for="control_'+radioListIndex+'">';
	displayString += "<div class='AbilityLevelUpCardHeader'>" + ability.name + " " + upgradeString + "</div>";
	displayString += 	"<div class='AbilityLevelUpCardDescription' >";
	displayString +=        "<div class='AchievementAbilityBodyRow'>";
	displayString +=            ability.description(character, levelUpRuntimeData);
	displayString +=        "</div>";
	displayString +=    "</div>";
    displayString += '</label>';
	displayString += "</div>";

    return displayString;
}

setup.applyCurseOfTheNaga = function()
{    
    if(!State.variables.CharacterSheet_Player.hasAbility(State.variables.CharacterSheet_Player, "Ability_CurseOfTheNaga"))
    {
        let musclesDrain = Math.ceil(setup.getStatValue(State.variables.CharacterSheet_Player, "muscles") * 0.2);

        let height = setup.getStatValue(State.variables.CharacterSheet_Player, "height") - Math.min(68, setup.getStatValue(State.variables.CharacterSheet_Player, "height"));
        let heightDrain = Math.ceil(height * 0.2);

        let cock = setup.getStatValue(State.variables.CharacterSheet_Player, "cock") - Math.min(6, setup.getStatValue(State.variables.CharacterSheet_Player, "cock"));
        let cockDrain = Math.ceil(cock * 0.2);

        let balls = setup.getStatValue(State.variables.CharacterSheet_Player, "balls") - Math.min(2, setup.getStatValue(State.variables.CharacterSheet_Player, "balls"));
        let ballsDrain = Math.ceil(balls * 0.2);

        if(musclesDrain <= 0 || heightDrain <= 0 || cockDrain <= 0 || ballsDrain <= 0)
        {
            return "TooSmall";
        } 

        State.variables.CharacterSheet_Player.quest.curseOfTheNagaStatDrain.muscles = musclesDrain;
        State.variables.CharacterSheet_Player.quest.curseOfTheNagaStatDrain.height = heightDrain;
        State.variables.CharacterSheet_Player.quest.curseOfTheNagaStatDrain.cock = cockDrain;
        State.variables.CharacterSheet_Player.quest.curseOfTheNagaStatDrain.balls = ballsDrain;

        State.variables.CharacterSheet_Player.applyAbilityRuntimeData(setup.Ability_CurseOfTheNaga);
        State.variables.CharacterSheet_Lost_Naga.applyAbilityRuntimeData(setup.Ability_StolenMass);

        return "Cursed";
    }

    return "AlreadyCursed";
}

setup.removeCurseOfTheNaga = function()
{
    State.variables.CharacterSheet_Player.removeAbilityRuntimeData(setup.Ability_CurseOfTheNaga);
    return State.variables.CharacterSheet_Lost_Naga.removeAbilityRuntimeData(setup.Ability_StolenMass);
}
/* twine-user-script #24: "FightHelper.js" */
setup.createEntity = function(characterSheet, difficulty = 0)
{	
	characterSheet.info.alive = true;

	var difficultyArrayName = setup.getEncounterListNameByDifficulty(difficulty);

	if(State.variables[difficultyArrayName] != undefined)
	{
		State.variables[difficultyArrayName].push(characterSheet.id);
		return;
	}
	return;
};

setup.getEncounterListNameByDifficulty = function(difficulty)
{
	switch(difficulty)
	{
		case 0:
			return "EasyRandomEncounters";
		case 1:
			return "MediumRandomEncounters";
	}
}

setup.getEncounterList = function(difficulty)
{
	switch(difficulty)
	{
		case 0:
			return State.variables.EasyRandomEncounters;
		case 1:
			return State.variables.MediumRandomEncounters;
	}
}

setup.getAllEncounters = function()
{
	var allEncounters = [];
	allEncounters = allEncounters.concat(State.variables.EasyRandomEncounters);
	allEncounters = allEncounters.concat(State.variables.MediumRandomEncounters);
	return allEncounters;
}


setup.getEncounterAmount = function()
{
	return State.variables.EasyRandomEncounters.length + State.variables.MediumRandomEncounters.length
}

setup.aiFightStart = function()
{
    if(State.variables.Encounter_Target.id == State.variables.CharacterSheet_Player.fight.teammate)
    {
        State.variables.CachedTeammate = State.variables.CharacterSheet_Player.fight.teammate;
        State.variables.CharacterSheet_Player.fight.teammate = undefined;
    }

	if(State.variables.Encounter_Target.fight.aiFightStart)
	{
		State.variables.Encounter_Target.fight.aiFightStart()
	}
};

setup.broadcastFightFlowTrigger = function(player, enemy, trigger)
{
    var displayString = "";
    var params = 
    {
        trigger: trigger,
        self: player,
        target: enemy,
    }
    displayString += player.broadcastAbilityTrigger(params);

    let teammate = player.fight.teammate;

    if(teammate != undefined)
    {
        var params = 
        {
            trigger: trigger,
            self: State.variables[teammate],
            target: enemy,
        }
        displayString += State.variables[teammate].broadcastAbilityTrigger(params);
    }

    params = 
    {
        trigger: trigger,
        self: enemy,
        target: player,
    }
    displayString += enemy.broadcastAbilityTrigger(params);

    return displayString;
}

setup.displayTooltipedString = function(exterior, interior)
{
    var displayString = "";
    displayString += "<span class='tooltip'>"
    displayString +=  exterior;

    displayString += "<span class='tooltipContainer'>";
    displayString += "<span class='tooltiptext'>";
    displayString += interior;
    displayString += "</span>";
    displayString += "</span>";

    displayString += "</span>";

    return displayString;
}

setup.getSkillDisplayString = function(character, target, fightMove, fightHotkey, useDoubleBackslashLinebreak = true)
{
	var displayString = "";
    var allowedLines = 8;

    var linebreak = "\\n";

    if(useDoubleBackslashLinebreak == false)
    {
        linebreak = "\n";
    }

    if(fightMove.comboValue != undefined)
    {
        displayString += "<div class='"+setup.getCorruptionUIClassName("comboValue", setup.getStatValue(character, "corruption"))+"'>";
        displayString += setup.displayTooltipedString(fightMove.comboValue != 0 ? fightMove.comboValue : "*", "<br>()");
        displayString += "</div>";
    }

    displayString += "<div id='FightSkillHeader' class='"+fightMove.skillType+"'>"

	if(fightMove.staminaCost != 0)
	{
        displayString += "<div class='"+setup.getCorruptionUIClassName("FightSkillCardStaminaCost", setup.getStatValue(character, "corruption"))+"'>"
        displayString += setup.displayTooltipedString(fightMove.staminaCost, "");
        displayString += "</div>";
	}

    displayString += "<div class='FightSkillHeaderStatIconRow'>"
	if(fightMove.critMod != 100)
	{
		displayString += setup.displayChanceToHit(character, fightMove);
	}

    if(setup.getAttackDamage(character, target, fightMove) >= 0)
	{
		displayString += setup.getAttackDamageDisplay(character, target, fightMove);
	}

	if(fightMove.cooldown)
	{
        displayString += "<div class='"+setup.getCorruptionUIClassName("FightSkillCardCooldown", setup.getStatValue(character, "corruption"))+"'>"
        displayString += setup.displayTooltipedString(fightMove.cooldown, "");
        displayString += "</div>";
	}
    
	if(fightMove.maxStack)
	{
        displayString += "<div class='"+setup.getCorruptionUIClassName("FightSkillCardStackCount", setup.getStatValue(character, "corruption"))+"'>"
        displayString += setup.displayTooltipedString(fightMove.maxStack, "");
        displayString += "</div>";
    }

    displayString += "</div>";
    displayString += "</div>";

    displayString += "<div class='comboMoveName'>";
    /*if(fightHotkey != undefined)
    {
        displayString += fightHotkey +". ";
    }*/

    displayString += fightMove.name;
    displayString += "</div>";
    
    displayString += "<p id='FightSkillBody'>";

    //remove allowed lines mechanic
	if(fightMove.skillStatsToDescriptionSpacing)
	{
		allowedLines -= fightMove.skillStatsToDescriptionSpacing;
	}
	else
	{
		//assume one line for flavour text by default
		allowedLines--;
	}
	
	displayString += fightMove.skillDescription;
    displayString += "</p>";

    console.log("2")
    console.log(fightMove)
    if(fightMove.comboCost != undefined)
	{
        displayString += "<div class='FightSkillActionCosts'>"

        displayString += "<span class='tooltip'>"

        displayString +=    "<div class='FightSkillActionCostsNumber'>"
        displayString +=    fightMove.comboCost
        displayString +=    "</div>";
        displayString +=    "<div class='FightSkillActionCostsFirstLink'>"
        displayString +=    "</div>";

        for(let i =0; i < fightMove.comboCost; ++i)
        {
            displayString +=    "<div class='FightSkillActionCostsMiddleLink'>"
            displayString +=    "</div>";
        }

        displayString +=    "<div class='FightSkillActionCostsLastLink'>"
        displayString +=    "</div>";

        displayString += "<span class='tooltipContainer'>";
        displayString += "<span class='tooltiptext'>";
        displayString += "<br>()";
        displayString += "</span>";
        displayString += "</span>";
    
        displayString += "</span>";

        displayString += "</div>";
	}
	
	return displayString;
};

setup.getAttackChanceToHit = function(character, fightMove)
{
	return setup.getCritChance(character) + fightMove.critMod;
};

setup.getAttackDamage = function(character, target, fightMove)
{
	var strength = setup.getStatValue(character, "strength");
	if(fightMove.dmg)
	{
        let param = fightMove.dmg(character, target);
		return Math.floor(param.multiplier * strength / 5) + param.addon;
	}
	
	return 0;
};

setup.getAttackDamageDisplay = function(character, target, fightMove)
{
	var displayString = "";

	if(fightMove.dmg)
	{
        let param = fightMove.dmg(character, target)
        let damage = setup.getAttackDamage(character, target, fightMove);

        console.log("asdasdasddsasdasdsadasddas")
        console.log(damage)
        if(damage > 0)
        {
            displayString += "<div class='"+setup.getCorruptionUIClassName("FightSkillCardAttackDamage", setup.getStatValue(character, "corruption"))+"'>"

            var strength = setup.getStatValue(character, "strength");
    
            displayString += " <span class='tooltip' id=";
            if(damage < Math.floor(param.multiplier * strength / 5))
            {
                displayString += "'StatModifierNegative'";
            }
            else
            {
                displayString += "'StatModifierPositive'";
            }
    
            displayString += ">"+ damage;
            displayString += "<span class='tooltipContainer'>";
            displayString += "<span class='tooltiptext'>";
            displayString += "<br><br>";
            displayString += ":<br>";
    
    
            var damageMod = {mod: setup.mod.ADD, value: Math.floor(strength / 5)};
            displayString += setup.displayModifierText(damageMod, "");
            displayString += "<br>";
    
            if(param.multiplier != 0 && param.multiplier != 1)
            {
                var multiplierMod = {mod: setup.mod.MULTIPLYPOS, value: param.multiplier};
                displayString += setup.displayModifierText(multiplierMod, " ");
                displayString += "<br>";
            }
    
            var addonMod = {mod: setup.mod.ADD, value: param.addon};
            displayString += setup.displayModifierText(addonMod, "");
    
            displayString += "</span>";
            displayString += "</span>";
            displayString += "</span>";
    
            displayString += "</div>"
        }
    }

	return displayString;
};

setup.applyCooldown = function(character, target, fightMove)
{
	var cooldown = 
	{
		skillID: fightMove.name,
		value: fightMove.cooldown,
	}

	character.fight.variables.cooldowns.push(cooldown);
}

setup.updateCooldowns = function(character, target)
{
	character.fight.variables.cooldowns = character.fight.variables.cooldowns.filter(function(val) 
	{
		val.value --;
		if(val.value <= 0)
		{
			return false;
		}
	  	return true;
	});
}

setup.preAttacksUpdate = function(character, target)
{    
    State.variables.FightTurn++;

    if(setup.isStunned(character))
    {
        setup.clearCombo();
    }
    
    var params = 
    {
        trigger: setup.AbilityTrigger.ON_FIGHT_TURN_START,
        self: character,
        target: target,
    }
    character.fight.variables.currentTurnAbilityText = character.broadcastAbilityTrigger(params);

    let teammate = character.fight.teammate;

    if(teammate != undefined)
    {
        params = 
        {
            trigger: setup.AbilityTrigger.ON_FIGHT_TURN_START,
            self: State.variables[teammate],
            target: target,
        }
        State.variables[teammate].fight.variables.currentTurnAbilityText = State.variables[teammate].broadcastAbilityTrigger(params);
    }

    params = 
    {
        trigger: setup.AbilityTrigger.ON_FIGHT_TURN_START,
        self: target,
        target: character,
    }
    target.fight.variables.currentTurnAbilityText = target.broadcastAbilityTrigger(params);

	setup.updateCooldowns(character, target);
    if(teammate != undefined)
    {
        setup.updateCooldowns(State.variables[teammate], target);
    }
	setup.updateCooldowns(target, character);

	if(target.fight.preAttacksAIUpdate)
	{
		target.fight.preAttacksAIUpdate();
	}
};

setup.postAttacksAIUpdate = function(character)
{
	if(character.fight.postAttacksAIUpdate)
	{
		character.fight.postAttacksAIUpdate();
	}
};

setup.doComboAttack = function(attackerSheet, victimSheet)
{
    var displayString = "";
    for(let i = 0; i < State.variables.FightComboStackIndexes.length; i++)
    {
        attackerSheet.fight.variables.currentFightMoveOutcome = "";
        let fightSkillIndex = State.variables.FightComboStackIndexes[i];
        attackerSheet.fight.variables.currentFightMove = State.variables.FightSkills[fightSkillIndex];

        displayString += "<div class='AttackAttemptContainer'>";

        if(State.variables.FightSkills[fightSkillIndex].attackAttemptDesc && State.variables.FightSkills[fightSkillIndex].currentStep == State.variables.FightSkills[fightSkillIndex].steps)
        {
            displayString += "<div class='attackAttemptDesc'>";
            displayString += State.variables.FightSkills[fightSkillIndex].attackAttemptDesc(attackerSheet, victimSheet);
            displayString += "</div>";
        }
        
        displayString += setup.doAttack(attackerSheet, victimSheet);
        displayString += "</div>";
        displayString += "\n\n"
    }

    //attackerSheet.fight.variables.currentStamina -= setup.calculateComboStaminaCost();

    attackerSheet.fight.variables.currentFightMoveOutcome = displayString;
}

setup.displayTurnHeaderText = function(attackerSheet, victimSheet)
{
    var displayString = "";

    displayString += "<div class='turnHeaderText'>";
    displayString += "<h1>"+attackerSheet.info.name+"</h1>";
    displayString += "</div>";

    return displayString;
}

setup.doAttack = function(attackerSheet, victimSheet)
{
    if(setup.isStunned(attackerSheet))
    {
        attackerSheet.fight.variables.currentFightMove = setup.FightMove_Stunned;
    }

    function addToFightOutcome(fightvariables, displayString)
    {
        if (displayString != "" && displayString != undefined)
        {
			if (displayString == "undefined" || displayString == undefined){
				console.log("WARN: Undefined return received from ability " + fightvariables.currentFightMove.id);
			}else{
                displayString += "\n";
				fightvariables.currentFightMoveOutcome += displayString;
			}
		}
	}

	if(attackerSheet.fight.variables.currentFightMove.persistentEffectOpponent)
	{
		if(attackerSheet.fight.variables.currentFightMove.persistentEffectOpponent.onActivate)
		{
			attackerSheet.fight.variables.currentFightMove.persistentEffectOpponent.onActivate(attackerSheet, victimSheet, undefined);
		}
	}

	var params =
	{
        self: attackerSheet,
        target: victimSheet,
		thresholdToMiss: setup.getAttackChanceToHit(attackerSheet, attackerSheet.fight.variables.currentFightMove),
		attackDamage: setup.getAttackDamage(attackerSheet, victimSheet, attackerSheet.fight.variables.currentFightMove),
		hitcheck: random(0,100),
		ignoreAdditionalEffects: false,
		finalDamageModifier: 1,
    };

	attackerSheet.fight.variables.currentFightMoveOutcome = ""
    addToFightOutcome(attackerSheet.fight.variables, setup.callAbilityTrigger(attackerSheet, "onDoAttack", params));

    if(params.attackDamage <= 0)
    {
        params.trigger = setup.AbilityTrigger.ON_FIGHT_DO_DAMAGELESS_ATTACK;
        addToFightOutcome(attackerSheet.fight.variables, attackerSheet.broadcastAbilityTrigger(params));
    }
    else
    {
        params.trigger = setup.AbilityTrigger.ON_FIGHT_DAMAGING_HIT;
        addToFightOutcome(attackerSheet.fight.variables, attackerSheet.broadcastAbilityTrigger(params));
    }

	if(attackerSheet.fight.variables.currentFightMove.cooldown)
	{
		setup.applyCooldown(attackerSheet, victimSheet, attackerSheet.fight.variables.currentFightMove);
	}

    var fightCard = "";

    fightCard += '<div class="FightSkillCardContainer">';
    fightCard += '<div class="FightSkillCard" style="'+setup.getFightSkillCardBackgroundStyle(attackerSheet, victimSheet, setup[attackerSheet.fight.variables.currentFightMove.id])+'">';
    fightCard += setup.getSkillDisplayString(attackerSheet, victimSheet, setup[attackerSheet.fight.variables.currentFightMove.id], undefined);
    fightCard += '</div>';
    fightCard += '</div>';

    addToFightOutcome(attackerSheet.fight.variables, fightCard);

	if(attackerSheet.fight.variables.stunnedDuration > 0)
	{
        //hook hook MOVE THIS SOMEWHERE ELSE
		attackerSheet.fight.variables.stunnedDuration -= 1;

		if(attackerSheet.fight.variables.stunnedDuration == 0)
		{
			attackerSheet.fight.variables.hypnotizedMoveIDsList = [];
		}
	}
	else if(attackerSheet.fight.variables.currentFightMove.doesNothing || attackerSheet.fight.variables.currentFightMove.currentStep != attackerSheet.fight.variables.currentFightMove.steps)
	{
		//do nothing
	}
	else
	{
		if(attackerSheet.fight.variables.currentFightMove.attackHitDesc)
		{
			addToFightOutcome(attackerSheet.fight.variables, attackerSheet.fight.variables.currentFightMove.attackHitDesc(attackerSheet, victimSheet));
		}

		if(attackerSheet.fight.variables.currentFightMove.persistentEffectOpponent)
		{
            //remove this next version
			setup.addPersistentEffect(victimSheet, attackerSheet.fight.variables.currentFightMove.persistentEffectOpponent);
		}

		if(params.hitcheck <= params.thresholdToMiss)
		{
            
			params.attackDamage = Math.ceil(params.attackDamage * setup.getStatValue(attackerSheet, "critDamage"));
		}

		if(!params.ignoreAdditionalEffects)
		{
			if(params.attackDamage != 0)
			{
				//remove this next version
				addToFightOutcome(attackerSheet.fight.variables, setup.triggerVictimPersistentEffects(attackerSheet, victimSheet, "onDamagingHit", params));
			}
		}

        params.attackDamage = Math.ceil(params.attackDamage * params.finalDamageModifier);
        
        params.trigger = setup.AbilityTrigger.ON_FIGHT_PRE_RECEIVE_DAMAGE;
            
        if(!params.ignoreAdditionalEffects)
        {
			let abilityString = victimSheet.broadcastAbilityTrigger(params);
            addToFightOutcome(attackerSheet.fight.variables, abilityString);
        }

		if(params.attackDamage != 0)
		{
			if(params.hitcheck <= params.thresholdToMiss)
			{
				addToFightOutcome(attackerSheet.fight.variables, "<span style='color:#ff0000;'>" + params.attackDamage + "</span>");
			}
			else
			{
				addToFightOutcome(attackerSheet.fight.variables, "<span style='color:#ff0000;'>" + params.attackDamage + "</span>");
            }
			params.trigger = setup.AbilityTrigger.ON_FIGHT_POST_RECEIVE_DAMAGE;
            
			if(!params.ignoreAdditionalEffects)
			{
				let abilityString = victimSheet.broadcastAbilityTrigger(params);
                addToFightOutcome(attackerSheet.fight.variables, abilityString);
            }
            var previousHP = victimSheet.fight.variables.currentHP;
            victimSheet.fight.variables.currentHP = Math.max(victimSheet.fight.variables.currentHP - params.attackDamage, 0);

            if(victimSheet.fight.variables.currentHP / setup.getStatValue(victimSheet, "hp") <= 0.5 &&
            previousHP / setup.getStatValue(victimSheet, "hp") > 0.5)
            {
                params.trigger = setup.AbilityTrigger.ON_ENTER_MID_HEALTH;
                addToFightOutcome(attackerSheet.fight.variables, victimSheet.broadcastAbilityTrigger(params));
            }
            else if(victimSheet.fight.variables.currentHP / setup.getStatValue(victimSheet, "hp") > 0.5 &&
                previousHP / setup.getStatValue(victimSheet, "hp") <= 0.5)
            {
                params.trigger = setup.AbilityTrigger.ON_ENTER_MID_HEALTH;
                addToFightOutcome(attackerSheet.fight.variables, victimSheet.broadcastAbilityTrigger(params));
            }

            if(victimSheet.fight.variables.currentHP / setup.getStatValue(victimSheet, "hp") <= 0.25 &&
               previousHP / setup.getStatValue(victimSheet, "hp") > 0.25)
            {
				params.trigger = setup.AbilityTrigger.ON_ENTER_LOW_HEALTH;
                addToFightOutcome(attackerSheet.fight.variables, victimSheet.broadcastAbilityTrigger(params));
            }
            else if(victimSheet.fight.variables.currentHP / setup.getStatValue(victimSheet, "hp") > 0.25 &&
               previousHP / setup.getStatValue(victimSheet, "hp") <= 0.25)
            {
				params.trigger = setup.AbilityTrigger.ON_EXIT_LOW_HEALTH;
                addToFightOutcome(attackerSheet.fight.variables, victimSheet.broadcastAbilityTrigger(params));
            }
        }
		
		if(!params.ignoreAdditionalEffects)
		{
			for(let i = 0; i < attackerSheet.fight.variables.currentFightMove.additionalEffects.length; i++)
			{
				let additionalEffectText = attackerSheet.fight.variables.currentFightMove.additionalEffects[i](attackerSheet, victimSheet);

				if(additionalEffectText != "")
				{
					addToFightOutcome(attackerSheet.fight.variables, additionalEffectText);
				}
			}
		}
	}

    if(attackerSheet.id != "CharacterSheet_Player")
    {
        attackerSheet.fight.variables.currentStamina = Math.min(attackerSheet.fight.variables.currentStamina + setup.getStaminaRecovery(attackerSheet), setup.getStatValue(attackerSheet, "stamina"));
    
        if(State.variables.FightComboStackIndexes.length == 0)
        {
            attackerSheet.fight.variables.currentStamina -= attackerSheet.fight.variables.currentFightMove.staminaCost;
        }
    }
    
    return attackerSheet.fight.variables.currentFightMoveOutcome;
};

setup.displayFightTurnOutcome = function(attackerSheet, victimSheet)
{
	var attackerFightVariables = attackerSheet.fight.variables;
	var victimFightVariables = victimSheet.fight.variables;
	
	var displayString = "";

	if(typeof attackerFightVariables.currentFightMove !== 'undefined' && typeof victimFightVariables.currentFightMove !== 'undefined')
	{
        displayString += setup.displayTurnHeaderText(attackerSheet, victimSheet);

        if(attackerFightVariables.currentFightMove.comboValue != undefined)
        {
            for(let i = 0; i < State.variables.FightComboStackIndexes.length; i++)
            {
                let fightSkillIndex = State.variables.FightComboStackIndexes[i];
                State.variables.FightSkills[fightSkillIndex].available = true;
            }
        }

        displayString += "<div class='AttackAttemptContainer'>";

        if(attackerFightVariables.currentTurnAbilityText)
        {
            displayString += attackerFightVariables.currentTurnAbilityText;
        }

        if(attackerFightVariables.currentFightMove.comboValue == undefined)
        {
            if(attackerFightVariables.currentFightMove.attackAttemptDesc && attackerFightVariables.currentFightMove.currentStep == attackerFightVariables.currentFightMove.steps)
            {
                let attackAttemptDesc = attackerFightVariables.currentFightMove.attackAttemptDesc(attackerSheet, victimSheet);
                displayString += attackAttemptDesc;
            }
        }

        if (attackerFightVariables.currentFightMoveOutcome.length > 0){
            displayString += attackerFightVariables.currentFightMoveOutcome +"\n";
        }
        displayString += "</div>";
	}

    return displayString;
};

setup.learnRandomMoveFromTarget = function(attackerSheet, victimSheet)
{
    var victimMovelist = setup.getFightMovesWithAddons(victimSheet);
    var attackerMovelist = setup.getFightMovesWithAddons(attackerSheet);

    var victimNoComboSkills = victimMovelist.filter(function(val) {
        if(val.skillType != "special" && val.comboCost == undefined)
        {
            return true;
        }
        return false;
    });
    
    var attackerNoComboSkills = attackerMovelist.filter(function(val) {
        if(val.skillType != "special" && val.unique == true)
        {
            return true;
        }
        return false;
    });
	
	victimNoComboSkills = victimNoComboSkills.filter(function(val) 
	{
		if(val.unlearnable == true)
		{
			return false;
		}

		var i;
	  	for(i = 0; i < attackerNoComboSkills.length; i++)
		{
			if(val.name == attackerNoComboSkills[i].name)
			{
				return false;
			}
		}
	  	return true;
	});
	
	return victimNoComboSkills.random();
};

setup.hasLostFight = function(character)
{
	return character.fight.variables.currentHP <= 0 || character.fight.variables.surrender;
}

setup.onFightEnd = function(winner, loser)
{
    var displayString = "";
    var params = 
    {
        trigger: setup.AbilityTrigger.ON_FIGHT_BATTLE_WON,
        self: winner,
        target: loser,
    }
    displayString += winner.broadcastAbilityTrigger(params);

    if(winner.fight.teammate != undefined)
    {
        params = 
        {
            trigger: setup.AbilityTrigger.ON_FIGHT_BATTLE_WON,
            self: State.variables[winner.fight.teammate],
            target: loser,
        }
        displayString += State.variables[winner.fight.teammate].broadcastAbilityTrigger(params);
    }

    params = 
    {
        trigger: setup.AbilityTrigger.ON_FIGHT_BATTLE_LOST,
        self: loser,
        target: winner,
    }
    displayString += loser.broadcastAbilityTrigger(params);

    if(loser.fight.teammate != undefined)
    {
        params = 
        {
            trigger: setup.AbilityTrigger.ON_FIGHT_BATTLE_WON,
            self: State.variables[loser.fight.teammate],
            target: winner,
        }
        displayString += State.variables[loser.fight.teammate].broadcastAbilityTrigger(params);
    }

    return displayString;
}

setup.updateFightStatus = function(attackerSheet, victimSheet)
{
	var victimFightVariables = victimSheet.fight.variables;
	
	var displayString = "";

    console.log("1")

	if(setup.hasLostFight(victimSheet) && setup.hasLostFight(attackerSheet))
	{
		attackerSheet.fight.variables.currentHP = 0.1;
		displayString += "\n\n";
		displayString += "[[->Fight Outcome]]";
		State.variables.FightSkills = undefined;
	}
	else if(setup.hasLostFight(victimSheet))
	{
		displayString += attackerSheet.info.name + "\n\n";
		displayString += "[[->Fight Outcome]]";
		State.variables.FightSkills = undefined;
	}
	else if(setup.hasLostFight(attackerSheet))
	{
		displayString += attackerSheet.info.name + "\n\n";
		displayString += "[[->Fight Outcome]]";
		State.variables.FightSkills = undefined;
	}
	else
	{
		if(setup.isStunned(victimSheet))
		{
			if(victimFightVariables.hypnotizedMoveIDsList.length > 0)
			{
				victimFightVariables.currentFightMove = setup[victimFightVariables.hypnotizedMoveIDsList.random()];
			}
			else
			{
				victimFightVariables.currentFightMove = setup.FightMove_Stunned;
			}
		}
		else
		{
            if(attackerSheet.fight.teammate != undefined)
            {
                setup.aiApplyNextFightMove(State.variables[attackerSheet.fight.teammate], attackerSheet);
            }

            setup.aiApplyNextFightMove(victimSheet, attackerSheet);
		}

        console.log("2")

        if(attackerSheet.fight.teammate != undefined)
        {
            var teammateEffects = setup.displayCurrentPersistentEffects(State.variables[attackerSheet.fight.teammate], victimSheet);
            if(teammateEffects != "")
            {
                displayString += teammateEffects;
                displayString += "\n";
            }
        }

        console.log("3")

		var attackerEffects = setup.displayCurrentPersistentEffects(attackerSheet, victimSheet);
		if(attackerEffects != "")
		{
			displayString += attackerEffects;
			displayString += "\n";
		}

		var victimEffects = setup.displayCurrentPersistentEffects(victimSheet, attackerSheet);
		if(victimEffects != "")
		{
			displayString += victimEffects;
			displayString += "\n";
		}

        console.log("4")
		
		displayString += victimSheet.info.name + "" + setup.Fight_HealthDescriptor(setup.getMaxHP(victimSheet), victimFightVariables.currentHP);
		displayString += "\n\n";
        
        if(attackerSheet.fight.teammate != undefined)
        {
            displayString += State.variables[attackerSheet.fight.teammate].fight.variables.currentFightMove.preparation(State.variables[attackerSheet.fight.teammate], attackerSheet);
            
            if(State.variables[attackerSheet.fight.teammate].fight.variables.currentFightMove.callbackOnPreparation)
            {
                State.variables[attackerSheet.fight.teammate].fight.variables.currentFightMove.callbackOnPreparation(State.variables[attackerSheet.fight.teammate], attackerSheet);
            }

            displayString += "\n\n";
        }

        console.log("5")

		displayString += victimFightVariables.currentFightMove.preparation(victimSheet, attackerSheet);
		
		if(victimFightVariables.currentFightMove.callbackOnPreparation)
		{
            victimFightVariables.currentFightMove.callbackOnPreparation(victimSheet, attackerSheet);
		}
		
		displayString +="\n";
        displayString +="\n";

        console.log("6")

        let teammate = attackerSheet.fight.teammate;

        if(teammate != undefined)
        {
            displayString +="<<click '"+State.variables[teammate].info.name+"'>><<toggleclass '#InspectTeammateText' 'hidden'>><</click>> \n";
            displayString +="<span id='InspectTeammateText' class='hidden'> "+setup.getInspectText(attackerSheet, State.variables[teammate])+"</span>";
        }
        
        displayString +="<<click '"+victimSheet.info.name+"'>><<toggleclass '#InspectText' 'hidden'>><</click>> \n";
        displayString +="<span id='InspectText' class='hidden'> "+setup.getInspectText(attackerSheet, victimSheet)+"</span>";
		
        console.log("7")

		if(setup.isStunned(attackerSheet))
		{
			if(attackerSheet.fight.variables.hypnotizedMoveIDsList.length > 0)
			{
				State.variables.availableFightMoveIDs = attackerSheet.fight.variables.hypnotizedMoveIDsList;

				displayString += setup.displayAvailableFightMoves(attackerSheet, victimSheet, State.variables.availableFightMoveIDs);
			}
			else
			{
                //hook
				var _fightMoveDescription = setup.getSkillDisplayString(attackerSheet, victimSheet, setup.FightMove_Stunned, "1", false);
				displayString += "<a class='FightSkillCard' style='"+setup.getFightSkillCardBackgroundStyle(attackerSheet, victimSheet, setup.FightMove_Stunned)+"' data-passage='FightLogic' data-setter='$CharacterSheet_Player.fight.variables.currentFightMove = setup.FightMove_Stunned'>"+ _fightMoveDescription +" </a>";
			}
		}
		else
		{
            State.variables.availableFightMoveIDs = setup.getFightMovesWithAddons(attackerSheet);
			displayString += setup.displayAvailableFightMoves(attackerSheet, victimSheet, State.variables.availableFightMoveIDs);
		}

        console.log("8")
	}
	
	return displayString;
};

setup.aiApplyNextFightMove = function(ai, aiTarget)
{
    var aiAvailableMoveIDs = setup.getFightMovesWithAddons(ai);
    aiAvailableMoveIDs = aiAvailableMoveIDs.filter(function(val) {
        if(setup.canActivateFightMove(ai, aiTarget, setup[val]) == "")
        {
            return true;
        }
        return false;
    });

    if(aiAvailableMoveIDs.length <= 0)
    {
        aiAvailableMoveIDs.push(setup.FightMove_Basic_Attack.id);
    }

    if(ai.fight.variables.currentFightMove && ai.fight.variables.currentFightMove.currentStep != ai.fight.variables.currentFightMove.steps)
    {
        ai.fight.variables.currentFightMove.currentStep++;
    }
    else
    {
        if(ai.fight.getNextFightMoveID)
        {
            ai.fight.variables.currentFightMove = setup[ai.fight.getNextFightMoveID()];
        }
        else
        {					
            ai.fight.variables.currentFightMove = setup[aiAvailableMoveIDs.random()];
        }
    }
}

setup.canTeammateAct = function(protagonistSheet, enemySheet, timing)
{
    var teammateName = protagonistSheet.fight.teammate;

    if(teammateName != undefined)
    {
        if(State.variables[teammateName].fight.teammateSettings.attackTiming == timing)
        {
            return true;
        }
    }

    return false;
}

setup.getInspectText = function(character, target)
{
    var displayString = "";

    displayString += character.info.name  + ""+target.info.name+"\n\n";

    if(target.info.picture != undefined)
    {
        displayString += setup.displayEncounterImage(target.info.picture) + "\n\n";
    }
    else if(target.id == "CharacterSheet_Imp" || target.id == "CharacterSheet_Torgar")
    {
        displayString += setup.setAndDisplayBodyVisual(target, "normal") + "\n\n";
    }

    displayString += "HP: "+target.fight.variables.currentHP+"/"+setup.displayStatValue(target, "hp")+"\n";
    displayString += ""+target.fight.variables.currentStamina+"/"+setup.displayStatValue(target, "stamina")+"\n";
    displayString += ""+target.fight.variables.currentArousal+"\n\n";

    displayString += ""+setup.displayStatValue(target, "strength")+"\n";
    displayString += ""+setup.displayStatValue(target, "critChance")+"\n";
    displayString += ""+setup.displayStatValue(target, "arousalGain")+"\n";
    displayString += ""+setup.displayStatValue(target, "staminaRecovery")+"\n\n";

    displayString += ""+setup.getStatValue(target, "corruption")+"\n";
    displayString += ""+setup.getMusclesDescriptor(target)+"("+setup.displayStatValue(target, "muscles")+")\n";
    displayString += ""+setup.displayStatValue(target, "height", true)+"\n";
    displayString += ""+setup.displayStatValue(target, "cock", true)+"\n\n";

    displayString += "\n";

    if(character.abilityHandler.abilityRuntimeDatas.length > 0)
    {
        for(let i = 0; i < target.abilityHandler.abilityRuntimeDatas.length; ++i)
        {
            let abilityRuntimeData = target.abilityHandler.abilityRuntimeDatas[i];
            if(abilityRuntimeData.isActive == true)
            {
                let abilityData = setup.getAbilityByIndex(abilityRuntimeData.abilityDataIndex);
                displayString += abilityData.name +": "+ abilityData.description(target, abilityRuntimeData) +"\n";
            }
        }
    }
    else
    {
        displayString += "None\n";
    }

    displayString += "\n"

    return displayString;
}

setup.getFightMoveCooldown = function(attackerSheet, victimSheet, fightMove)
{
	if(fightMove.cooldown)
	{
		for(let i = 0; i < attackerSheet.fight.variables.cooldowns.length; i++)
		{
			if(attackerSheet.fight.variables.cooldowns[i].skillID == fightMove.name)
			{
				return attackerSheet.fight.variables.cooldowns[i].value;
			}
		}
	}

	return 0;
}

setup.usesArousal = function(character)
{
    if(character.id == "CharacterSheet_Player")
    {
        return character.hasAbility("Ability_HostOfEcho");
    }

    return true;
}

setup.calculateAvailableComboSlots = function()
{
    var maxSlots = setup.getStatValue(State.variables.CharacterSheet_Player, "actionSlots");
    maxSlots += State.variables.AddSlotCount;

    var slotsTaken = setup.calculateTakenComboSlots();

    return maxSlots - slotsTaken;
}

setup.calculateTakenComboSlots = function()
{
    var slotsTaken = 0;
    for(let i = 0; i < State.variables.FightComboStackIndexes.length; i++)
    {
        let fightMove = State.variables.FightSkills[State.variables.FightComboStackIndexes[i]];
        if(!fightMove.available)
        {
            slotsTaken += fightMove.comboCost;
        }
    }

    return slotsTaken;
}

setup.canActivateFightMove = function(attackerSheet, victimSheet, fightMove, fightSkillIndex)
{
    if(fightSkillIndex != undefined && fightMove.comboValue != undefined)
    {
        if(!fightMove.available)
        {
            return "";
        }
        
        console.log("3")
        console.log(fightMove)
        if(setup.calculateAvailableComboSlots() < fightMove.comboCost)
        {
            return "";
        }

        if(fightMove.maxStack)
        {
            if(!setup.canStackPersistentEffect(attackerSheet, victimSheet, fightMove.persistentEffectOpponent.id, fightMove.maxStack))
            {
                return "" + fightMove.maxStack + "";
            }
        }

        if(State.variables.FightComboStackIndexes.length != 0)
        {
            var latestComboValue = State.variables.FightSkills[State.variables.FightComboStackIndexes[State.variables.FightComboStackIndexes.length - 1]].comboValue;
            var currentComboValue = State.variables.FightSkills[fightSkillIndex].comboValue;
            var isNotAdjacent = currentComboValue - 1 != latestComboValue && currentComboValue + 1 != latestComboValue;
            var isFourAndOne = (currentComboValue == 1 && latestComboValue == 4) || (latestComboValue == 1 && currentComboValue == 4);
            var isZero = currentComboValue == 0 || latestComboValue == 0;
    
            if(!isZero && (isNotAdjacent && !isFourAndOne))
            {
                return "("+currentComboValue+")("+latestComboValue+")";
            }
        }

        if(fightMove.staminaCost)
        {
            if(attackerSheet.fight.variables.currentStamina < (setup.calculateComboStaminaCost() + fightMove.staminaCost))
            {
                return "";
            }
        }

        let cooldown = setup.getFightMoveCooldown(attackerSheet, victimSheet, fightMove);
    
        if(cooldown != 0)
        {
            return "" + cooldown + ""
        }
    }
    else
    {
        if(fightMove.maxStack)
        {
            if(!setup.canStackPersistentEffect(attackerSheet, victimSheet, fightMove.persistentEffectOpponent.id, fightMove.maxStack))
            {
                return "" + fightMove.maxStack + "";
            }
        }
    
        if(fightMove.staminaCost)
        {
            if(attackerSheet.fight.variables.currentStamina < fightMove.staminaCost)
            {
                return "";
            }
        }
    
        let cooldown = setup.getFightMoveCooldown(attackerSheet, victimSheet, fightMove);
    
        if(cooldown != 0)
        {
            return "" + cooldown + ""
        }
    }


	if(fightMove.activationCondition)
	{
		if(!fightMove.activationCondition(attackerSheet, victimSheet))
		{
			return "";
		}
    }

	return "";
}

setup.isFightMoveEquipped = function(fightMoveID)
{
    for(var i = 0; i < State.variables.EquippedFightMoveIDs.length; i++)
    {
        if(fightMoveID == State.variables.EquippedFightMoveIDs[i])
            return true;
    }

    return false;
}

setup.displayAvailableFightMoves = function(character, target, fightMoveIDs)
{
    var displayString = "";

    var comboSkillIDs = fightMoveIDs.filter(function(val) {
        console.log("4")
        console.log(setup[val])
        if(setup[val].comboCost != undefined && setup.isFightMoveEquipped(val) == true && setup[val].unique == undefined && setup[val].skillType != "special")
        {
            return true;
        }
        return false;
    });

    var uniqueSkillIDs = fightMoveIDs.filter(function(val) {
        if(setup[val].skillType != "special" && setup[val].unique == true)
        {
            return true;
        }
        return false;
    });

    var specialSkillIDs = fightMoveIDs.filter(function(val) {
        if(setup[val].skillType == "special")
        {
            return true;
        }
        return false;
    });

    State.variables.FightSkills = [];
    State.variables.FightComboStackIndexes = [];
    
    var i;
    
    if(comboSkillIDs.length != 0)
    {
        var comboMovesPerTurn = setup.getStatValue(character, "comboMovesPerTurn");
        var comboValueList = setup.getRandomComboValueList(comboMovesPerTurn);
        setup.corruptComboableFightMoveList(comboSkillIDs);

        for(var i = 0; i < comboMovesPerTurn; i++)
        {
            var skill = {...(setup[comboSkillIDs.random()])};
            
            skill.comboValue = comboValueList[i];
            skill.available = true;
            State.variables.FightSkills.push(skill);
        }
    }

    for(var i = 0; i < uniqueSkillIDs.length; i++)
    {
        var skill = {...(setup[uniqueSkillIDs[i]])};
            
        skill.comboValue = 0;
        skill.available = true;
        State.variables.FightSkills.push(skill);
    }

    for(var i = 0; i < specialSkillIDs.length; i++)
    {
        State.variables.FightSkills.push(setup[specialSkillIDs[i]]);
    }
    
    displayString += '<span id="FightSkillsList">';
	displayString += setup.printAvailableFightMovesString(character, target);
    displayString += '</span>';

    return displayString;
};

setup.printComboCost = function(character, target)
{
    var displayString = "";

    displayString += ""+ setup.getRemainingStamina(character, target) +"\n"+setup.calculateAvailableComboSlots();

    return displayString;
}

setup.calculateComboStaminaCost = function(character, target)
{
    var staminaCost = 0;
    for(let i = 0; i < State.variables.FightComboStackIndexes.length; i++)
    {
        let fightMove = State.variables.FightSkills[State.variables.FightComboStackIndexes[i]];
        if(!fightMove.available)
        {
            staminaCost += fightMove.staminaCost;
        }
    }

    return staminaCost;
}

setup.getRemainingStamina = function(character, target)
{
    return character.fight.variables.currentStamina - setup.calculateComboStaminaCost(character, target);
}

setup.printAvailableFightMovesString = function(character, target)
{
    var displayString= "";
    
    displayString += '<div class="outerComboContainer '+setup.getCorruptionUIClassName("StatCaption", setup.getStatValue(character, "corruption"))+'">';
    displayString += setup.printComboCost(character, target);
    displayString += '\n\n'
    displayString += '<div class="comboCounterContainer">';
    displayString +=    '<div class="FightSkillsComboContainer">';
    displayString +=    '<div class="FightSkillsCombo">'+setup.printFightSkillsComboList()+'</div>';
    displayString +=    '<div class="FightSkillsComboAdd">';

    if(!setup.canAddSlot(character, target))
    {
        displayString += "<span class='inactive'>";
    }   

    displayString +=    '<span class="'+setup.getCorruptBackgroundClass(character)+'">';
    displayString +=        '<<button "('+setup.getAddSlotCost()+')">>';
    displayString +=             '<<run setup.addComboSlot()>>';
    displayString +=             '<<replace "#FightSkillsList">> <<print setup.printAvailableFightMovesString(State.variables.CharacterSheet_Player, State.variables.Encounter_Target)>> <</replace>>';
    displayString +=        '<</button>>';
    displayString +=    '</span>';

    if(!setup.canAddSlot(character, target))
    {
        displayString += "</span>";
    }
    
    displayString +=    '</div>';
    displayString +=    '</div>';

    displayString +=    "<div class='SidebarDivisionMid'>"+setup.getCorruptSidebarDividerMid()+"</div>";

    displayString +=        "<div class='BottomComboContainer'>";

    if(!setup.canRedraw(character, target))
    {
        displayString += "<span class='inactive'>";
    }   
     
    displayString +=                '<div id="MulliganButton" class="BottomComboZone">';
    displayString +=                   '<span class="'+setup.getCorruptBackgroundClass(character)+'">';
    displayString +=                       '<<button "('+setup.getRedrawCost()+')">>';
    displayString +=                           '<<run setup.drawComboMove()>>';
    displayString +=                           '<<replace "#FightSkillsList">> <<print setup.printAvailableFightMovesString(State.variables.CharacterSheet_Player, State.variables.Encounter_Target)>> <</replace>>';
    displayString +=                       '<</button>>';
    displayString +=                   '</span>';
    displayString +=                '</div>';
    displayString +=                '<div class="BottomComboZone">';
    displayString +=                '&nbsp;';
    displayString +=                '</div>';

    if(!setup.canRedraw(character, target))
    {
        displayString += "</span>";
    }

    if(State.variables.FightComboStackIndexes.length > 0)
    {    
        displayString +=            '<div id="ClearButton" class="BottomComboZone">';
        displayString +=                '<span class="'+setup.getCorruptBackgroundClass(character)+'">';
        displayString +=                    '<<button "">>';
        displayString +=                        '<<run setup.clearCombo()>>';
        displayString +=                        '<<replace "#FightSkillsList">> <<print setup.printAvailableFightMovesString(State.variables.CharacterSheet_Player, State.variables.Encounter_Target)>> <</replace>>';
        displayString +=                    '<</button>>';
        displayString +=                '</span>';
        displayString +=            '</div>';
        displayString +=            '<div class="BottomComboZone">';
        displayString +=                '&nbsp;';
        displayString +=            '</div>';
        displayString +=            '<div id="AttackButton" class="BottomComboZone">';
        displayString +=                '<span class="'+setup.getCorruptBackgroundClass(character)+'">';
        displayString +=                    '<<button [[->FightLogic]]>><</button>>';
        displayString +=                '</span>';
        displayString +=            '</div>';
    }
    
    displayString +=            '</div>';
    displayString +=        '</div>';

    var comboSkills = [];
    for(let i = 0; i < State.variables.FightSkills.length; ++i)
    {
        console.log("5")
        console.log(State.variables.FightSkills[i])
        console.log(character)
        console.log(target)
        console.log(i)
        console.log(State.variables.FightSkills)
        if(State.variables.FightSkills[i].comboCost != undefined && State.variables.FightSkills[i].unique == undefined)
        {
            comboSkills.push(
                {
                    fightSkill: State.variables.FightSkills[i],
                    index: i,
                }
                );
        }
    }

    let sortedByComboValues = comboSkills.sort(function(a, b)
    {
        return a.fightSkill.comboValue - b.fightSkill.comboValue;
    });

    comboSkills = sortedByComboValues;

    var noComboSkills = [];
    for(let i = 0; i < State.variables.FightSkills.length; ++i)
    {
        if(State.variables.FightSkills[i].skillType != "special" && State.variables.FightSkills[i].unique == true)
        {
            noComboSkills.push(
                {
                    fightSkill: State.variables.FightSkills[i],
                    index: i,
                }
                );
        }
    }

    var specialSkills = [];
    for(let i = 0; i < State.variables.FightSkills.length; ++i)
    {
        if(State.variables.FightSkills[i].skillType == "special")
        {
            specialSkills.push(
                {
                    fightSkill: State.variables.FightSkills[i],
                    index: i,
                }
                );
        }
    }

    displayString += '<div class="ComboFightMovesContainer">';
    for(let i = 0; i < comboSkills.length; ++i)
    {
        displayString += setup.displayFightSkillCard(character, target, comboSkills[i].fightSkill, comboSkills[i].index);
    }
    
    if(noComboSkills.length != 0)
    {
        displayString += "<br><br><hr><br>";
    }
    
    for(let i = 0; i < noComboSkills.length; ++i)
    {
        displayString += setup.displayFightSkillCard(character, target, noComboSkills[i].fightSkill, noComboSkills[i].index);
    }

    if(specialSkills.length != 0)
    {
        displayString += "<br><br><hr><br>";
    }

    for(let i = 0; i < specialSkills.length; ++i)
    {
        displayString += setup.displayFightSkillCard(character, target, specialSkills[i].fightSkill, specialSkills[i].index);
    }

    displayString += "</div>";
    displayString += "</div>";

    return displayString;
}

setup.getFightSkillCardBackgroundStyle = function(character, target, fightSkill)
{
    var displayString = "background-image: ";
    var corruptionLink = "";

	switch(setup.getCorruptionTier(character))
	{
		case 0:
			corruptionLink =  "url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/battle_system/card_border_0.png)";
            break;
		case 1:
			corruptionLink =  "url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/battle_system/card_border_25.png)";
            break;
		case 2:
			corruptionLink =  "url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/battle_system/card_border_50.png)";
            break;
		case 3:
			corruptionLink =  "url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/battle_system/card_border_75.png)";
            break;
		case 4:
			corruptionLink =  "url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/battle_system/card_border_100.png)";
            break;
		default:
			corruptionLink =  "url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/battle_system/card_border_100.png)";
            break;
	}

    displayString += corruptionLink + ", ";

    var skillTypeLink = "";
	switch(fightSkill.skillTheme)
	{
		case "offensive":
			skillTypeLink =  "url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/battle_system/card_bg_offensive.png)";
            break;
		case "sigil":
			skillTypeLink =  "url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/battle_system/card_bg_sigil.png)";
            break;
		case "buff":
			skillTypeLink =  "url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/battle_system/card_bg_buff.png)";
            break;
		case "symbiote":
			skillTypeLink =  "url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/battle_system/card_bg_offensive_symbiote.png)";
            break;
		case "special":
			skillTypeLink =  "url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/battle_system/card_bg_pacific.png)";
            break;
		case "demon":
			skillTypeLink =  "url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/battle_system/card_bg_offensive_demon.png)";
            break;
        case "corruption":
            skillTypeLink =  "url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/battle_system/card_bg_corruption.png)";
            break;
		default:
			skillTypeLink =  "url(https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/battle_system/card_bg_pacific.png)";
            break;
	}

    displayString += skillTypeLink;

    displayString += ";";

    return displayString;
}

setup.displayFightSkillCard = function(character, target, fightSkill, index)
{
    var displayString = "";

    var fightMoveActivationString = setup.canActivateFightMove(character, target, fightSkill, index);
        
    if(fightMoveActivationString != "")
    {
        displayString += "<span class='tooltipskill'>";
        if(fightSkill.available == false)
        {
            displayString += "<span>";
        }
        else
        {
            displayString += "<span class='inactive'>";
        }
    }

    let _fightMoveDescription = setup.getSkillDisplayString(character, target, fightSkill, setup.FightHotkeys[index]);
    let params = 'class="FightSkillCard" style="'+setup.getFightSkillCardBackgroundStyle(character, target, fightSkill)+'"';

    if(fightMoveActivationString != "" && fightSkill.available == false && fightSkill.comboValue != undefined)
    {
        displayString += '<div class="FightSkillCardHighlight selected">';
    }
    else
    {
        displayString += '<div class="FightSkillCardHighlight">';
    }
    
    displayString += '<span '+params+'>';
    displayString += '<<link "'+_fightMoveDescription+'">>';
    displayString += '<<set $CharacterSheet_Player.fight.variables.currentFightMove = setup["'+fightSkill.id+'"]>>';
    displayString += '<<run setup.onAttackClick("'+index+'")>>';

    if(fightSkill.comboValue != undefined)
    {
        displayString += '<<replace "#FightSkillsList">> <<print setup.printAvailableFightMovesString(State.variables.CharacterSheet_Player, State.variables.Encounter_Target)>><</replace>>';
    }

    displayString += '<</link>>';
    displayString += '</span>';
    displayString += '</div>';

    if( fightMoveActivationString != "")
    {
        displayString += "</span>";//inactive close

        displayString += "<span class='tooltipskilltext'>";
        displayString += fightMoveActivationString;
        displayString += "</span></span>";
    }

    return displayString;
}

setup.getRandomComboValueList = function(amount)
{
    var comboValueList = [];

    for(var i = 0; i < amount; i++)
    {
        let value = setup.getRandomInt(1, 4);

        comboValueList.push(value)
    }

    return comboValueList;
}

setup.corruptComboableFightMoveList = function(fightMoveList)
{
	switch(setup.getCorruptionTier(State.variables.CharacterSheet_Player))
	{
		case 0:
            return fightMoveList;
		case 1:
            fightMoveList.push("FightMove_LustfulInstincts");
            break;
		case 2:
            fightMoveList.push("FightMove_LustfulInstincts");
            fightMoveList.push("FightMove_CorruptedUrges");
            break;
		case 3:
            fightMoveList.push("FightMove_LustfulInstincts");
            fightMoveList.push("FightMove_CorruptedUrges");
            fightMoveList.push("FightMove_CorruptedRemedy");
            break;
		case 4:
            fightMoveList.push("FightMove_LustfulInstincts");
            fightMoveList.push("FightMove_CorruptedUrges");
            fightMoveList.push("FightMove_CorruptedRemedy");
            fightMoveList.push("FightMove_InfectiousLust");
            break;
		default:
            fightMoveList.push("FightMove_LustfulInstincts");
            fightMoveList.push("FightMove_CorruptedUrges");
            fightMoveList.push("FightMove_CorruptedRemedy");
            fightMoveList.push("FightMove_InfectiousLust");
            break;
	}

    return fightMoveList;
}

setup.drawComboMove = function()
{
    setup.clearCombo();

    var fightMoveIDs = State.variables.availableFightMoveIDs;

    var comboSkillIDs = fightMoveIDs.filter(function(val) {
        if(setup[val].comboCost != undefined && setup.isFightMoveEquipped(val) == true)
        {
            return true;
        }
        return false;
    });

    if(comboSkillIDs.length != 0)
    {
        setup.corruptComboableFightMoveList(comboSkillIDs);
        
        var skill = {...(setup[comboSkillIDs.random()])};

        skill.comboValue = setup.getRandomInt(1, 4);;
        skill.available = true;
        State.variables.FightSkills.unshift(skill);
    }

    State.variables.CharacterSheet_Player.fight.variables.currentStamina = Math.max(0, State.variables.CharacterSheet_Player.fight.variables.currentStamina - setup.getRedrawCost());

    State.variables.RedrawCount++;
    UIBar.update()
}

setup.addComboSlot = function()
{
    State.variables.CharacterSheet_Player.fight.variables.currentStamina = Math.max(0, State.variables.CharacterSheet_Player.fight.variables.currentStamina - setup.getAddSlotCost());
    State.variables.AddSlotCount++;
}

setup.mulliganComboMoves = function()
{
    setup.clearCombo();

    var fightMoveIDs = State.variables.availableFightMoveIDs;

    var comboSkillIDs = fightMoveIDs.filter(function(val) {
        if(setup[val].comboCost != undefined && setup.isFightMoveEquipped(val) == true)
        {
            return true;
        }
        return false;
    });

    if(comboSkillIDs.length != 0)
    {
        var comboMovesPerTurn = setup.getStatValue(State.variables.CharacterSheet_Player, "comboMovesPerTurn");
        var comboValueList = setup.getRandomComboValueList(comboMovesPerTurn);
        setup.corruptComboableFightMoveList(comboSkillIDs);

        for(var i = 0; i < comboMovesPerTurn; i++)
        {
            var skill = {...(setup[comboSkillIDs.random()])};
    
            skill.comboValue = comboValueList[i];
            skill.available = true;
            State.variables.FightSkills[i] = skill;
        }
    }

    State.variables.CharacterSheet_Player.fight.variables.currentStamina = Math.max(0, State.variables.CharacterSheet_Player.fight.variables.currentStamina - setup.getRedrawCost());

    State.variables.RedrawCount++;
    UIBar.update()
}

setup.getRedrawCost = function()
{
    if(State.variables.RedrawCount < setup.RedrawCosts.length)
    {
        return setup.RedrawCosts[State.variables.RedrawCount];
    }
    else
    {
        let multiplierExponent = State.variables.RedrawCount - (setup.RedrawCosts.length - 1);
        return setup.RedrawCosts[setup.RedrawCosts.length - 1] * Math.pow(2, multiplierExponent);
    }
}

setup.getAddSlotCost = function()
{
    if(State.variables.AddSlotCount < setup.AddSlotCosts.length)
    {
        return setup.AddSlotCosts[State.variables.AddSlotCount];
    }
    else
    {
        let multiplierExponent = State.variables.AddSlotCount - (setup.AddSlotCosts.length - 1);
        return setup.AddSlotCosts[setup.AddSlotCosts.length - 1] * Math.pow(2, multiplierExponent);
    }
}

setup.canRedraw = function(character, target)
{
    return setup.getRemainingStamina(character, target) >= setup.getRedrawCost();
}

setup.canAddSlot = function(character, target)
{
    return setup.getRemainingStamina(character, target) >= setup.getAddSlotCost();
}

setup.clearCombo = function()
{
    for(let i = 0; i < State.variables.FightComboStackIndexes.length; i++)
    {
        let fightSkillIndex = State.variables.FightComboStackIndexes[i];
        State.variables.FightSkills[fightSkillIndex].available = true;
    }

    State.variables.FightComboStackIndexes = [];
}

setup.onAttackClick = function(fightSkillIndex)
{
    setup.attackPressedLogic(fightSkillIndex);
}

setup.attackPressedLogic = function(fightSkillIndex)
{    
    if(State.variables.FightSkills[fightSkillIndex].comboValue != undefined)
    {
        if(setup.canActivateFightMove(State.variables.CharacterSheet_Player, State.variables.Encounter_Target, State.variables.FightSkills[fightSkillIndex], fightSkillIndex) == "")
        {
            State.variables.FightSkills[fightSkillIndex].available = false;
            State.variables.FightComboStackIndexes.push(fightSkillIndex);
        }
    }
    else
    {
        State.variables.CharacterSheet_Player.fight.variables.currentFightMove = State.variables.FightSkills[fightSkillIndex];
        Engine.play("FightLogic");
    }
}

setup.printFightSkillsComboList = function()
{
    var displayString = "";

    var firstLinkClass = "UIActionCostsFirstLink";
    if(State.variables.FightComboStackIndexes.length == 0)
    {
        firstLinkClass += " Grayed";
    }

    displayString += "<div class='"+firstLinkClass+"'>"
    displayString += "</div>";

    var takenActionsCount = 0;

    for(let i = 0; i < State.variables.FightComboStackIndexes.length; i++)
    {
        displayString += "<div class='FightSkillActionCostsNumberInComboContainer'>"
        displayString +=   "<div class='FightSkillActionCostsNumberInCombo'>"

        let comboValue = State.variables.FightSkills[State.variables.FightComboStackIndexes[i]].comboValue;

        displayString +=    comboValue != 0 ? comboValue : "*"
        displayString +=   "</div>";
        displayString += "</div>";

        var middleLinkClass = "UIActionCostsMiddleLink";
        
        if(i % 2 == 1)
        {
            middleLinkClass += " Alt";
        }

        console.log("6")
        console.log(State.variables.FightSkills[State.variables.FightComboStackIndexes[i]])

        for(let j = 0; j < State.variables.FightSkills[State.variables.FightComboStackIndexes[i]].comboCost; j++)
        {
            displayString += "<div class='"+middleLinkClass+"'>"
            displayString += "</div>";
        }

        takenActionsCount += State.variables.FightSkills[State.variables.FightComboStackIndexes[i]].comboCost;
    }
    
    var actionSlots = setup.getStatValue(State.variables.CharacterSheet_Player, "actionSlots");
    actionSlots += State.variables.AddSlotCount;

    for(let i = takenActionsCount; i < actionSlots; i++)
    {
        displayString += "<div class='UIActionCostsMiddleLink Grayed'>"
        displayString += "</div>";
    }
    
    var lastLinkClass = "UIActionCostsLastLink";
    if(takenActionsCount < actionSlots)
    {
        lastLinkClass += " Grayed";
    }
    else if(State.variables.FightComboStackIndexes.length % 2 == 0)
    {
        lastLinkClass += " Alt";
    }

    displayString +=    "<div class='"+lastLinkClass+"'>"
    displayString +=    "</div>";

    return displayString;
}

setup.getCharacterSheet = function(sheetID)
{
	return State.variables[sheetID];
}

setup.getRandomEncounter = function(difficulty)
{	
	var encounters;
    encounters = setup.getEncounterList(difficulty);
    
    if(encounters.length > 1)
    {
        encounters = encounters.filter(function(val)
        {
            if(val == State.variables.LastEncounter)
            {
                return false;
            }
              return true;
        });
    }
    
    var randomEncounter = encounters.random();
    State.variables.LastEncounter = randomEncounter;
    
	return State.variables[randomEncounter];
};

setup.fillDestinationArray = function()
{
	var lookup = Story.lookup("tags", "Explore");

	State.variables.Explore_Destinations = [];

	var i;
	for(i = 0; i < lookup.length; i++)
	{
		State.variables.Explore_Destinations.push(lookup[i].title);
	}
};

setup.getExploreDestination = function()
{
	var encounterAmount = setup.getEncounterAmount();
	var destinationRange = encounterAmount + State.variables.Explore_Destinations.length;

    var choice = Math.floor(Math.random() * destinationRange);
	
	if(choice < encounterAmount && (State.variables.LastExplorationEnemyEncounter < 2 || State.variables.Explore_Destinations.length == 0))
	{
        State.variables.LastExplorationEnemyEncounter++;
		return "RandomEcounter";
	}
	else
	{
        State.variables.LastExplorationEnemyEncounter = 0;
		return State.variables.Explore_Destinations.random();
	}
};

setup.getManorDestinations = function()
{
	var destinations = ["WestWing_GymRoom", "WestWing_NyxSpawnPit", "WestWing_DrenthRoom", "WestWing_NyxSpawnFight", "WestWing_MirrorRoom", "WestWing_GloryHole"];

	for(let i = 0; i < destinations.length; i++)
	{
		if(destinations[i] == State.variables.WorldState.cultManor.westWing_LastDestination)
        {
            destinations.splice(i, 1);
        }
	}

    while(destinations.length >= 2)
    {
        console.log("removing")
        var index = setup.getRandomInt(0, destinations.length - 1);
        destinations.splice(index, 1);

        setup.shuffle(destinations);
    }

    /*var majorDestinations = ["WestWing_DrenthRoom","WestWing_NyxSpawnFight"]

    destinations.push(majorDestinations[setup.getRandomInt(0, majorDestinations.length - 1)])*/
	
	return destinations;
};

setup.shuffle = function(array) {
    for (let i = array.length - 1; i > 0; i--) {
      let j = Math.floor(Math.random() * (i + 1));
      [array[i], array[j]] = [array[j], array[i]];
    }
  }


setup.getNextManorDestination = function()
{
    var dest = "";
    if(State.variables.MQ002_Manor_Destinations.length >= 1)
    {
        dest = State.variables.MQ002_Manor_Destinations.shift();
        
        State.variables.WorldState.cultManor.westWing_LastDestination = dest;
    }
    else
    {
        dest = "MQ002_Manor_WestWing_Ending";
    }

    return "[[->"+dest+"]]";
};

setup.clearWestWingRoom = function(room)
{
    State.variables.CharacterSheet_MQ002_Guard.quest.lustIncrease = true;
    
    for(let i = 0; i < State.variables.WorldState.cultManor.westWing_ClearedRooms.length; i++)
	{
		if(room == State.variables.WorldState.cultManor.westWing_ClearedRooms[i])
        {
            return "";
        }
	}

    State.variables.WorldState.cultManor.westWing_ClearedRooms.push(room);

    if(State.variables.WorldState.cultManor.westWing_ClearedRooms.length >= 5)
    {
        setup.completeAchievement("Achievement_ExplorerOfCorruptedDepths");
    }

    return "";
};

setup.getFightStartPassages = function(character)
{
	var displayString = "";

    character.quest.met = true;
    State.variables.Encounter_Target = character;
	
	if(setup.sizeCharactercomparison(State.variables.CharacterSheet_Player, character) >= setup.Comparators.REACHES_WAIST)
	{
		displayString += '<<run setup.choice("[[->FightLogic]]");>>' +
		'\<<run setup.choice("[[->Village]]");>>';
	}
	else
	{
        displayString += '<<run setup.choice("[[->FightLogic]]");>>' +
		'\<<run setup.choice("[[->Village]]");>>';
	}

	return displayString;
};

setup.impSetAggressiveMoveset = function()
{
	State.variables.CharacterSheet_Imp.fight.fightMoveIDs = [setup.FightMove_Basic_Attack.id, setup.FightMove_Lunge.id]
};

setup.impSetSigilMoveset = function()
{
	State.variables.CharacterSheet_Imp.fight.fightMoveIDs = [setup.FightMove_Sigil_Vitality.id, setup.FightMove_Sigil_Pain.id, setup.FightMove_Sigil_Growth.id, setup.FightMove_Sigil_Perception.id]
};

setup.impSetGrowthMoveset = function()
{
	State.variables.CharacterSheet_Imp.fight.fightMoveIDs = [setup.FightMove_Sigil_Growth.id, setup.FightMove_PridefulAscent.id]
};

setup.hasKnownEncounter = function()
{
    var encounterList = setup.getEncounterListByEncounterID(state.variables.Encounter_Target.id);
    
    if(encounterList == undefined)
    {
        return false;
    }

    for(let i = 0; i < encounterList.length; ++i)
    {
        if(state.variables[encounterList[i]].info.known == setup.EncounterKnownState.KNOWN)
        {
            return true;
        }
    }

    return false;
}

setup.displayKnownEncounters = function()
{
	var encounterList = setup.getEncounterListByEncounterID(state.variables.Encounter_Target.id);
    if(encounterList == undefined)
    {
        return "";
    }

    var displayString = "";

    for(let i = 0; i < encounterList.length; ++i)
    {
        if(state.variables[encounterList[i]].info.known == setup.EncounterKnownState.KNOWN)
        {
            displayString += "[["+state.variables[encounterList[i]].info.name+"->KnownEncounter][$Encounter_Target = $"+state.variables[encounterList[i]].id+"]]\n";
        }
    }

    return displayString;
};

setup.getEncounterListByEncounterID = function(id)
{
    for(let i =0; i < state.variables.EasyRandomEncounters.length; ++i)
    {
        if(state.variables.EasyRandomEncounters[i] == id)
        {
            return state.variables.EasyRandomEncounters;
        }
    }

    for(let i =0; i < state.variables.MediumRandomEncounters.length; ++i)
    {
        if(state.variables.MediumRandomEncounters[i] == id)
        {
            return state.variables.MediumRandomEncounters;
        }
    }

    return undefined;
}
/* twine-user-script #25: "FightMoveEffects.js" */
setup.addPersistentEffect = function(character, persistentEffect)
{
	character.fight.variables.persistentEffects.push(persistentEffect);
};

setup.removePersistentEffect = function(character, persistentEffect)
{
	character.fight.variables.persistentEffects = character.fight.variables.persistentEffects.filter(function(val) {
		if(val.id == persistentEffect.id)
		{
			return false;
		}
		return true;
	})
};

setup.triggerVictimPersistentEffects = function(attacker, victim, trigger, params)
{
	var displayString = "";
	var persistentEffects = victim.fight.variables.persistentEffects;
	for(let i = 0; i < persistentEffects.length; i++)
	{
		if(persistentEffects[i][trigger])
		{
			displayString += persistentEffects[i][trigger](attacker, victim, params) + "\n";
		}
	}

	return displayString;
};

setup.canStackPersistentEffect = function(attacker, victim, effectID, maxStack)
{
	var persistentEffects = victim.fight.variables.persistentEffects;
    var stackCount = 0;

	if(attacker.id == "CharacterSheet_Player")
	{
		if(State.variables.FightComboStackIndexes != undefined)
		{
			for(let i = 0; i < State.variables.FightComboStackIndexes.length; i++)
			{
				let fightMove = State.variables.FightSkills[State.variables.FightComboStackIndexes[i]];
				if(fightMove.persistentEffectOpponent != undefined)
				{
					if(fightMove.persistentEffectOpponent.id == effectID)
					{
						stackCount++;
					}
				}
			}
		}
	}

	for(let i = 0; i < persistentEffects.length; i++)
	{
		if(persistentEffects[i].id == effectID)
		{
			stackCount++;
		}
	}
	
	return stackCount < maxStack;
}

setup.displayCurrentPersistentEffects = function(character, target)
{
	var displayString = "";
	var persistentEffects = character.fight.variables.persistentEffects;
	for(let i = 0; i < persistentEffects.length; i++)
	{
		displayString += persistentEffects[i].constantDesc(character, target) +"\n";
	}

	return displayString;
};

setup.hypnotize = function(attackerSheet, victimSheet, stunDuration = 2)
{
	if(victimSheet.fight.immuneToCharms)
	{
		return victimSheet.info.name+"'s mind is too strong to be hypnotized!";
	}
	else
	{
		victimSheet.fight.variables.stunnedDuration = stunDuration;
		victimSheet.fight.variables.hypnotizedMoveIDsList = [setup.FightMove_Worship.id];

		return victimSheet.info.name+""+attackerSheet.info.name+"";
	}
}

setup.worship = function(attackerSheet, victimSheet)
{
	victimSheet.fight.variables.currentArousal += 20;

	victimSheet.fight.variables.currentArousal = Math.min(victimSheet.fight.variables.currentArousal, 100);

	return "";
};

setup.heraldsDevotionEffect = function(attackerSheet, victimSheet)
{
	var maxHP = setup.getMaxHP(attackerSheet);
	var arousal = attackerSheet.fight.variables.currentArousal;
	var healAmount = 0;
	
	if(!setup.usesArousal(attackerSheet))
	{
		healAmount = maxHP * 0.15;
	}
	else
	{
		if(arousal < 20)
		{
			healAmount = maxHP * 0.35;
		} 
		else if(arousal < 70)
		{
			healAmount = maxHP * 0.10;
		}
	}

	healAmount = Math.min(healAmount, maxHP - attackerSheet.fight.variables.currentHP);

	attackerSheet.fight.variables.currentHP += healAmount;

	console.log("post heal")
	console.log(attackerSheet.fight.variables.currentHP)

	return ""+attackerSheet.info.name+""+healAmount+"";
};

setup.stunTarget = function(attackerSheet, victimSheet, stunDuration = 2)
{
	if(victimSheet.fight.immuneToStun)
	{
		return victimSheet.info.name+"";
	}
	else
	{
		victimSheet.fight.variables.stunnedDuration = stunDuration;

		return victimSheet.info.name+"";
	}
	
};

setup.infestStun = function(attackerSheet, victimSheet)
{
	var displayString = "";
	if(victimSheet.fight.variables.currentArousal >= 50)
	{
		displayString += setup.stunTarget(attackerSheet, victimSheet, 1);
	}	

	return displayString;
};

setup.witheringVenom = function(attackerSheet, victimSheet)
{
	var displayString = "";
	
	displayString += victimSheet.applyAbilityRuntimeData(setup.Ability_WitheringVenom);

	return displayString;
};

setup.cumDeluge = function(attackerSheet, victimSheet)
{
	var displayString = "";
	
	displayString += victimSheet.applyAbilityRuntimeData(setup.Ability_BuriedInCum);

	return displayString;
};

setup.consumeLost = function(attackerSheet, victimSheet)
{
	var displayString = "";

	setup.applyGrowth(attackerSheet, "cock", 9);
	setup.applyGrowth(attackerSheet, "balls", 3);
	setup.applyGrowth(attackerSheet, "muscles", 5);
	setup.applyGrowth(attackerSheet, "height", 18);

	return displayString;
};

setup.tonicOfStillness = function(attackerSheet, victimSheet)
{
	var displayString = "";

	var appliedCorruption = Math.max(-5, State.variables[attackerSheet.id].info.corruption * -1);

	if(appliedCorruption != 0)
	{
		displayString += "" + attackerSheet.info.name + "" + Math.max(0, State.variables[attackerSheet.id].info.corruption - 5) + "7"
	
		State.variables[attackerSheet.id].applyAbilityRuntimeData(setup.Ability_TonicOfStillness);
	}
	else
	{
		displayString += "" + State.variables[attackerSheet.id].info.name + ""
	}

	return displayString;
};

setup.doParry = function(attackerSheet, victimSheet)
{
    var displayString = "";
	
	displayString += attackerSheet.applyAbilityRuntimeData(setup.Ability_ActiveParry);

	return displayString;
}

setup.surrender = function(attackerSheet, victimSheet)
{
	attackerSheet.fight.variables.surrender = true;

	return "";
};

setup.pridefulAscentEffects = function(attackerSheet, victimSheet)
{
	var cockGrowth = setup.getRandomInt(3, 6);
	var ballsGrowth = cockGrowth / 2;
	var muscleGrowth = setup.getRandomInt(3, 4);
	var sizeGrowth = setup.getRandomInt(2, 5);

	cockGrowth = setup.applyGrowth(attackerSheet, "cock", cockGrowth);
	ballsGrowth = setup.applyGrowth(attackerSheet, "balls", ballsGrowth);
	muscleGrowth = setup.applyGrowth(attackerSheet, "muscles", muscleGrowth);
	sizeGrowth = setup.applyGrowth(attackerSheet, "height", sizeGrowth);

	var displayString = "";
	
	displayString += setup.growthFlavourDescriptors(attackerSheet, victimSheet, cockGrowth, ballsGrowth, muscleGrowth, sizeGrowth);

	return displayString;
};

setup.bindLossSubEffect = function()
{
	var displayString = "";
	var loss = setup.getRandomInt(12, 20);
	State.variables.Essence -= loss;

	displayString += ""+ loss + "\n"

	var cockGrowth = setup.getRandomInt(6, 12);
	var ballsGrowth = cockGrowth / 2;
	var muscleGrowth = setup.getRandomInt(6, 12);
	var sizeGrowth = setup.getRandomInt(15, 20);

	cockGrowth = setup.applyGrowth(State.variables.CharacterSheet_Shard_Ring, "cock", cockGrowth);
	ballsGrowth = setup.applyGrowth(State.variables.CharacterSheet_Shard_Ring, "balls", ballsGrowth);
	muscleGrowth = setup.applyGrowth(State.variables.CharacterSheet_Shard_Ring, "muscles", muscleGrowth);
	sizeGrowth = setup.applyGrowth(State.variables.CharacterSheet_Shard_Ring, "height", sizeGrowth);	
	
	displayString += setup.growthFlavourDescriptors(State.variables.CharacterSheet_Shard_Ring, State.variables.CharacterSheet_Player, cockGrowth, ballsGrowth, muscleGrowth, sizeGrowth);

	return displayString;
};

setup.absorbEssenceEffects = function(attackerSheet, victimSheet)
{
	var displayString = "";

	attackerSheet.applyAbilityRuntimeData(setup.Ability_EssenceSurge);

	displayString += ""+attackerSheet.info.name+""+ (State.variables.FightTurn * 5)+""

	return displayString;
};

setup.incubusStrikeEffects = function(attackerSheet, victimSheet)
{
	var attackDamage = setup.getAttackDamage(attackerSheet, victimSheet, attackerSheet.fight.variables.currentFightMove);
	var lustAbsorbtion = attackDamage * 3;

	victimSheet.fight.variables.currentArousal -= lustAbsorbtion;
	victimSheet.fight.variables.currentArousal = Math.max(victimSheet.fight.variables.currentArousal, setup.getStatValue(victimSheet, "minArousal"));

	var cockGrowth = Math.min(Math.ceil(attackDamage * 0.07), 6);
	var ballsGrowth = Math.min(Math.ceil(attackDamage * 0.025), 2);
	var muscleGrowth = Math.min(Math.ceil(attackDamage * 0.02), 3);
	var sizeGrowth = Math.min(Math.ceil(attackDamage * 0.13), 18);

	cockGrowth = setup.applyGrowth(attackerSheet, "cock", cockGrowth);
	ballsGrowth = setup.applyGrowth(attackerSheet, "balls", ballsGrowth);
	muscleGrowth = setup.applyGrowth(attackerSheet, "muscles", muscleGrowth);
	sizeGrowth = setup.applyGrowth(attackerSheet, "height", sizeGrowth);

	var displayString = "";
	
	displayString += setup.growthFlavourDescriptors(attackerSheet, victimSheet, cockGrowth, ballsGrowth, muscleGrowth, sizeGrowth);

	return displayString;
};

setup.growthFlavourDescriptors = function(attackerSheet, victimSheet, cockGrowth, ballsGrowth, muscleGrowth, sizeGrowth, minimal)
{
	var His = setup.getPronoun(attackerSheet,"pronounDepPosCap");
	var his = setup.getPronoun(attackerSheet,"pronounDepPos");

	var displayString = "";

	if(attackerSheet.id == "CharacterSheet_Player")
	{
		if(muscleGrowth > 0)
		{
			displayString += setup.getMuscleGrowthSequenceText(attackerSheet, "", minimal);
			displayString += "\n"
		}

		if(cockGrowth > 0 && minimal != true)
		{
			displayString += setup.getFlavourBasedDescription(attackerSheet, "CockGrowthFlavourText", 1)
			displayString += "\n";
		}

        if(setup.hasLimb(attackerSheet.info.anatomy, "cocks") && cockGrowth > 0)
        {
            displayString += ""+ setup.getLength(cockGrowth) + "\n";
        }
        
        if(setup.hasLimb(attackerSheet.info.anatomy, "balls") && ballsGrowth > 0)
        {
            displayString += ""+ setup.getLength(ballsGrowth) + "\n";
        }
		
		if(sizeGrowth > 0)
		{
			displayString += ""+ setup.getLength(sizeGrowth) + "\n";
		}
		
		displayString += "" + setup.getLength(setup.getStatValue(attackerSheet, "height")) + "";
		displayString += ""+ setup.getLength(setup.getStatValue(attackerSheet, "cock")) + ""
		
	}
	else
	{
		if(muscleGrowth > 0)
		{
			displayString += setup.getMuscleGrowthSequenceText(attackerSheet, His)
			displayString += "\n"
		}

		if(cockGrowth > 0 && minimal != true)
		{
			displayString += setup.getFlavourBasedDescription(attackerSheet, "CockGrowthFlavourText", 1)
			displayString += "\n"
		}

        if(setup.hasLimb(attackerSheet.info.anatomy, "cocks") && cockGrowth > 0)
        {
            displayString +=  ""+his+""+ setup.getLength(cockGrowth) + "\n";
        }

        if(setup.hasLimb(attackerSheet.info.anatomy, "balls") && ballsGrowth > 0)
        {
            displayString += ""+his+""+ setup.getLength(ballsGrowth) + "\n";
        }

		if(sizeGrowth > 0)
		{
			displayString += ""+his+""+ setup.getLength(sizeGrowth) + "\n";
		}
		
		displayString += attackerSheet.info.name +""+his+" " + setup.getLength(setup.getStatValue(attackerSheet, "height")) + "";
		displayString += His+" "+ setup.getLength(setup.getStatValue(attackerSheet, "cock")) + ""
	}

	return displayString;
}

setup.slimeLungeEffects = function(attackerSheet, victimSheet)
{
    var displayString = "";
    if(setup.sizecomparison(setup.getStatValue(attackerSheet, "height"), setup.getStatValue(victimSheet, "height")) >= setup.Comparators.SLIGHTLY_BIGGER)
    {
        
        if(setup.getRandomInt(0, 100) > 80)
        {
            displayString += attackerSheet.info.name+" knocks "+victimSheet.info.name+" down on their back.";
            setup.stunTarget(attackerSheet, victimSheet, 1);
        }
    }
    else
    {
        displayString += attackerSheet.info.name+" clashes against "+victimSheet.info.name+"'s body, but their impressive stature stands.";
    }

    return displayString;
}

setup.incubusCallEffects = function(attackerSheet, victimSheet)
{
	victimSheet.fight.variables.currentArousal += 40;
	victimSheet.fight.variables.currentArousal = Math.min(victimSheet.fight.variables.currentArousal, 100);

	var ballsGrowth = 1;
	var cockGrowth = 2;
	var bodyGrowth = 3;
	bodyGrowth = setup.applyGrowth(victimSheet, "height", bodyGrowth);
	cockGrowth = setup.applyGrowth(victimSheet, "cock", cockGrowth);
	ballsGrowth = setup.applyGrowth(victimSheet, "balls", ballsGrowth);

	var displayString = "";
	displayString += ""+victimSheet.info.name + "<span style='color:#ac46c5;'>40</span>\n";
	displayString += ""+victimSheet.info.name+""+ setup.getLength(cockGrowth) + "\n";
	displayString += ""+victimSheet.info.name+""+ setup.getLength(bodyGrowth) + "\n";
	displayString += ""+victimSheet.info.name+""+ setup.getLength(ballsGrowth);

	return displayString;
};

setup.masturbate = function(attackerSheet, victimSheet)
{
	attackerSheet.fight.variables.currentArousal += Math.abs(setup.getStatValue(attackerSheet, "arousalGain"))

	attackerSheet.fight.variables.currentArousal = Math.min(attackerSheet.fight.variables.currentArousal, 100);

	return "";
};

setup.focusFightMove = function(attackerSheet, victimSheet)
{
	var displayString = "";
	
	displayString += attackerSheet.applyAbilityRuntimeData(setup.Ability_Focused);

	return displayString;
};

setup.lustfulInstinctsMove = function(attackerSheet, victimSheet)
{
	var displayString = "";

	attackerSheet.fight.variables.currentStamina = Math.min(attackerSheet.fight.variables.currentStamina, setup.getMaxStamina(attackerSheet));
	attackerSheet.fight.variables.currentArousal = Math.min(attackerSheet.fight.variables.currentArousal + 10, 100);

	displayString += ""+attackerSheet.info.name + "10\n";

	return displayString;
};

setup.corruptedUrgesMove = function(attackerSheet, victimSheet)
{
	var displayString = "";
	
	displayString += attackerSheet.applyAbilityRuntimeData(setup.Ability_CorruptedStrength);

	displayString += ""+attackerSheet.info.name + "\n";

	return displayString;
};

setup.infectiousLustMove = function(attackerSheet, victimSheet)
{
	var displayString = "";

	setup.applyCorruption(victimSheet, 5);
	victimSheet.fight.variables.currentArousal = Math.min(victimSheet.fight.variables.currentArousal + 50, 100);

	displayString += ""+victimSheet.info.name+"5\n";
	displayString += ": "+victimSheet.info.name+"50";

	return displayString;
};

setup.corruptedRemedyMove = function(attackerSheet, victimSheet)
{
	var displayString = "";
	
	let corruption = setup.getStatValue(attackerSheet, "corruption");
	let value = Math.floor(corruption * 0.05);

	attackerSheet.fight.variables.currentHP = Math.min(attackerSheet.fight.variables.currentHP + value, setup.getMaxHP(attackerSheet));

	displayString += attackerSheet.info.name +""+value+"hp"

	return displayString;
};
/* twine-user-script #26: "FightMoveStore.js" */
setup.displayFightMoveStore = function()
{
    var displayString = "";
    var moves = setup.getAvailableStoreFightMoveIDs(State.variables.CharacterSheet_Player);

    for(let i = 0; i < moves.length; i++)
    {
        var fightMove = setup[moves[i]];
        if(State.variables.Essence < fightMove.essenceCost)
        {
            displayString += "<span class = 'inactive'>";
        }

        displayString += "[["+fightMove.itemName+" ["+fightMove.essenceCost+" Essence]->"+fightMove.buyPassage+"]]";

        if(State.variables.Essence < fightMove.essenceCost)
        {
            displayString += "</span>";
        }

        displayString += "\n";
    }

    return displayString;
}

setup.buyFightMove = function(character, fightMoveId)
{
    State.variables.CharacterSheet_Torgar.quest.relationshipScoring++;
    var move = setup[fightMoveId];
    if(move)
    {
        character.fight.fightMoveIDs.push(move.id);
    }

    State.variables.Essence -= move.essenceCost;

    State.variables.BoughtFightMoves++;
}

setup.getSigilBoughtPassage = function()
{
    if(State.variables.BoughtFightMoves <= 0)
    {
        return "Buy_First_Sigil_1";
    }
    else if(State.variables.CharacterSheet_Torgar.quest.usedVialOnPlayerDick == false)
    {
        return "Buy_More_Sigil";
    }
    else
    {
        return "Buy_Sigil_Used_Vial_On_Dick";
    }
}

setup.getAvailableStoreFightMoveIDs = function(character)
{    
    var moveIDsFromStore = [...setup.FightMoveIDs];
    moveIDsFromStore = moveIDsFromStore.filter(function(val) {
        if(setup[val].buyFromStore)
        {
            return true;
        }
	  	return false;
    });

    var characterMoveIDs = [...character.fight.fightMoveIDs];
	characterMoveIDs = characterMoveIDs.filter(function(val) {
        if(setup[val].buyFromStore)
        {
            return true;
        }
	  	return false;
    });

    moveIDsFromStore = moveIDsFromStore.filter(function(val) {
		var i;
	  	for(i = 0; i < characterMoveIDs.length; i++)
		{
			if(setup[characterMoveIDs[i]].name == setup[val].name)
			{
				return false;
			}
		}
	  	return true;
    });
	return moveIDsFromStore;
};
/* twine-user-script #27: "StatsHelper.js" */
setup.isStunned = function(character)
{
	return character.fight.variables.stunnedDuration > 0;
};

setup.getPronoun = function(character, desc)
{	
	if(character.info.gender == "male")
	{
		switch(desc)
		{
			case "pronoun":
				return "";
			case "pronounCap":
				return "";
			case "pronounDepPos":
				return "";
			case "pronounDepPosCap":
				return "";
			case "pronounObject":
					return "";
			case "pronounObjectCap":
				return "";
		}
	}
	
	return "";
};

setup.getSymbioteStats = function()
{
	return State.variables.Player_Symbiote_Modifiers_Level_1;
}

setup.applyFightModifier = function(character, modifier)
{	
	character.fight.variables.fightModifiers.push(modifier);

	for(var propertyName in modifier) 
	{
		if(character.fight.variables[propertyName])
		{
			character.fight.variables[propertyName].push(modifier[propertyName]);
		}
	}
};

setup.getValueWithModifier = function(character, valueToModify, propertyName, ignoreAbility)
{
	var i;
    var modifiers = setup.getModifiers(character);
    var modifierLines = [];
    var replaceArray = [];
    
    for(i = 0; i < modifiers.length; i++)
    {
		let ability = setup.getAbilityByIndex(modifiers[i].abilityIndex);

        for(var modifierPropertyName in modifiers[i])
        {
            if(propertyName == modifierPropertyName && ability.id != ignoreAbility)
            {
                modifierLines.push(modifiers[i][modifierPropertyName]);
            }
        }
    }

	for(i = 0; i < modifierLines.length; i++)
	{
		if(Array.isArray(modifierLines[i].value))
		{
			if(modifierLines[i].mod == setup.mod.ADD)
			{
				valueToModify.push(...modifierLines[i].value);
            }
            else if(modifierLines[i].mod == setup.mod.REPLACE)
            {
                replaceArray.push(...modifierLines[i].value);
            }
		}
		else if(!isNaN(modifierLines[i].value))
		{
			if(modifierLines[i].mod == setup.mod.ADD)
			{
                valueToModify = valueToModify + modifierLines[i].value;
			}
			else if(modifierLines[i].mod == setup.mod.REMOVE)
			{
				valueToModify -= modifierLines[i].value;
			}
		}
    }

	if(!isNaN(valueToModify))
	{
		//Apply multipliers after additives
		var multiplier = 1;
		for(i = 0; i < modifierLines.length; i++)
		{
			if(!isNaN(modifierLines[i].value))
			{
				if(modifierLines[i].mod == setup.mod.MULTIPLYPOS)
				{
					multiplier += multiplier * modifierLines[i].value;
				}
				else if(modifierLines[i].mod == setup.mod.MULTIPLYNEG)
				{
					multiplier -= multiplier * modifierLines[i].value;
				}
			}
		}
		
		valueToModify = Math.ceil(valueToModify * multiplier);
	}

    
    if(replaceArray.length > 0)
    {
        valueToModify = replaceArray;
    }

	for(i = 0; i < modifierLines.length; i++)
	{
		if(modifierLines[i].mod == setup.mod.REPLACE)
		{
			valueToModify = modifierLines[i].value;
		}
    }
    
	return valueToModify;
};

setup.updateArousal = function(character)
{	
	var arousalGain = setup.getArousalGain(character);
	character.fight.variables.currentArousal += arousalGain;
	if(character.fight.variables.currentArousal >= 100)
	{
		character.fight.variables.currentArousal = 100;
        var params = 
        {
            trigger: setup.AbilityTrigger.ON_MAX_LUST,
            self: character,
		}
		
		if (character.id == "CharacterSheet_Player"){
			return character.broadcastAbilityTrigger(params) + "\n\n";
		}else{
			return character.broadcastAbilityTrigger(params)
		}
        
	}
	else if(character.fight.variables.currentArousal < setup.getStatValue(character, "minArousal"))
	{
        character.fight.variables.currentArousal = setup.getStatValue(character, "minArousal");
        
        var params = 
        {
            trigger: setup.AbilityTrigger.ON_MIN_LUST,
            self: character,
        }
        return character.broadcastAbilityTrigger(params) + "\n\n";
	}

	return "";
};

setup.applyCorruption = function(character, amount)
{	
    var previousCorruption = setup.getStatValue(character, "corruption");
	
	if(character.id == "CharacterSheet_Player")
	{
		//Corruption of the player is applied with Ability_ProcessingCorruption
	}
	else
	{
		if(character.info.corruption + amount < 0)
		{
			amount = character.info.corruption * -1;
		}

		console.log("adding " + amount);
		setup.addToBaseStatValue(character, "corruption", amount)

		if(setup.getStatValue(character, "corruption") >= 150)
		{
			setup.completeAchievement("Achievement_BaptismInCorruption");
		}
	}
     
    var params = 
    {
        trigger: setup.AbilityTrigger.ON_GAIN_CORRUPTION,
        self: character,
		gainedCorruption: amount,
    }
    character.broadcastAbilityTrigger(params);

	if(character.info.name == State.variables.CharacterSheet_Player.info.name)
	{
		//did we change tier?
		if(setup.getCorruptionTierFromValue(previousCorruption) != setup.getCorruptionTier(character))
		{
			setup.updateStaticCorruptionUI(character);
		}
	}
};

setup.applyDailyCorruption = function(character)
{
	let amount = State.variables.CharacterSheet_Player.info.accumulatedCorruption + setup.getStatValue(State.variables.CharacterSheet_Player, "corruptionPerDay");
	var previousCorruption = setup.getStatValue(character, "corruption");
	
	if(character.info.corruption + amount < 0)
	{
		amount = character.info.corruption * -1;
	}

	if(character.info.accumulatedCorruption > 0)
	{
		character.info.accumulatedCorruption = Math.max(0, character.info.accumulatedCorruption + setup.getStatValue(State.variables.CharacterSheet_Player, "corruptionPerDay"))
	}

	setup.addToBaseStatValue(character, "corruption", amount)

	if(character.info.name == State.variables.CharacterSheet_Player.info.name)
	{
		//did we change tier?
		if(setup.getCorruptionTierFromValue(previousCorruption) != setup.getCorruptionTier(character))
		{
			setup.updateStaticCorruptionUI(character);
		}
	}
}

setup.updateStaticCorruptionUI = function(character)
{
	var corruption = setup.getStatValue(character, "corruption");
	var story = document.getElementById("story");
	story.className = setup.getCorruptionUIClassName(window.screenClass, corruption);

	var uibar = document.getElementById("ui-bar");
	uibar.className = setup.getCorruptionUIClassName("Sidebar", corruption);

	//document.getElementById("topBorderImage").src = setup.getBorderTop();
	//document.getElementById("bottomBorderImage").src = setup.getBordeBottom();

	//initialized in runtime
	var rowLogo = document.getElementById("stat-container-row-logo");
	if(rowLogo)
	{
		document.getElementById("stat-container-row-logo").src = setup.getStatWindowLogo(character);
	}
}

setup.getCorruptionTier = function(character)
{
	let corruption = setup.getStatValue(character, "corruption");

	return setup.getCorruptionTierFromValue(corruption);
};

setup.getCorruptionTierFromValue = function(corruption)
{
	let tier = 0;

	for(let i = 0; i < setup.corruptionTiers.length; i++)
	{
		if(i == setup.corruptionTiers.length - 1)
		{
			//we are at max tier
			tier = setup.corruptionTiers.length - 1;
			break;
		}

		if(corruption >= setup.corruptionTiers[i] && corruption < setup.corruptionTiers[i + 1])
		{
			tier = i;
			break;
		}
	}

	return tier;
}

setup.getCorruptionUIClassName = function(baseClass, corruption)
{
	switch(setup.getCorruptionTier(State.variables.CharacterSheet_Player))
	{
		case 0:
			return baseClass+" Corrupt0";
		case 1:
			return baseClass+" Corrupt25";
		case 2:
			return baseClass+" Corrupt50";
		case 3:
			return baseClass+" Corrupt75";
		case 4:
			return baseClass+" Corrupt100";
		default:
			return baseClass+" Corrupt100";
	}
}

setup.getStatWindowLogo = function(character)
{
	switch(setup.getCorruptionTier(character))
	{
		case 0:
			return "https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/side_bar/ui_sidebar_stats_border_top_middle_0.png";
		case 1:
			return "https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/side_bar/ui_sidebar_stats_border_top_middle_25.png";
		case 2:
			return "https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/side_bar/ui_sidebar_stats_border_top_middle_50.png";
		case 3:
			return "https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/side_bar/ui_sidebar_stats_border_top_middle_75.png";
		case 4:
			return "https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/side_bar/ui_sidebar_stats_border_top_middle_100.png";
		default:
			return "https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/side_bar/ui_sidebar_stats_border_top_middle_100.png";
	}
}

setup.getProgressBarImage = function(character)
{
	switch(setup.getCorruptionTier(character))
	{
		case 0:
			return "https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/side_bar/ui_sidebar_bar_stats_border_0.png";
		case 1:
			return "https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/side_bar/ui_sidebar_bar_stats_border_25.png";
		case 2:
			return "https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/side_bar/ui_sidebar_bar_stats_border_50.png";
		case 3:
			return "https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/side_bar/ui_sidebar_bar_stats_border_75.png";
		case 4:
			return "https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/side_bar/ui_sidebar_bar_stats_border_100.png";
		default:
			return "https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/side_bar/ui_sidebar_bar_stats_border_100.png";
	}
}

setup.getEXPBarImage = function(character)
{
	switch(setup.getCorruptionTier(character))
	{
		case 0:
			return "https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/side_bar/ui_sidebar_bar_level_border_0.png";
		case 1:
			return "https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/side_bar/ui_sidebar_bar_level_border_25.png";
		case 2:
			return "https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/side_bar/ui_sidebar_bar_level_border_50.png";
		case 3:
			return "https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/side_bar/ui_sidebar_bar_level_border_75.png";
		case 4:
			return "https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/side_bar/ui_sidebar_bar_level_border_100.png";
		default:
			return "https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/side_bar/ui_sidebar_bar_level_border_100.png";
	}
}

setup.getProgressBarBackground = function(statName)
{
	switch(statName)
	{
		case "Health":
			return "https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/side_bar/ui_sidebar_bar_stats_back_health.png";
		case "Stamina":
			return "https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/side_bar/ui_sidebar_bar_stats_back_stamina.png";
		case "Arousal":
			return "https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/side_bar/ui_sidebar_bar_stats_back_arousal.png";		
		default:
			return "https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/side_bar/ui_sidebar_bar_stats_back_arousal.png";
	}
}

setup.getSaveIcon = function(character)
{
	switch(setup.getCorruptionTier(character))
	{
		case 0:
			return "https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/side_bar/ui_sidebar_button_save_0.png";
		case 1:
			return "https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/side_bar/ui_sidebar_button_save_25.png";
		case 2:
			return "https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/side_bar/ui_sidebar_button_save_50.png";
		case 3:
			return "https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/side_bar/ui_sidebar_button_save_75.png";
		case 4:
			return "https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/side_bar/ui_sidebar_button_save_100.png";
		default:
			return "https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/side_bar/ui_sidebar_button_save_100.png";
	}
}

setup.getResetIcon = function(character)
{
	switch(setup.getCorruptionTier(character))
	{
		case 0:
			return "https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/side_bar/ui_sidebar_button_erase_0.png";
		case 1:
			return "https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/side_bar/ui_sidebar_button_erase_25.png";
		case 2:
			return "https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/side_bar/ui_sidebar_button_erase_50.png";
		case 3:
			return "https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/side_bar/ui_sidebar_button_erase_75.png";
		case 4:
			return "https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/side_bar/ui_sidebar_button_erase_100.png";
		default:
			return "https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/side_bar/ui_sidebar_button_erase_100.png";
	}
}

setup.getAchievementIcon = function(character)
{
	switch(setup.getCorruptionTier(character))
	{
		case 0:
			return "https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/side_bar/ui_sidebar_button_achievement_0.png";
		case 1:
			return "https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/side_bar/ui_sidebar_button_achievement_25.png";
		case 2:
			return "https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/side_bar/ui_sidebar_button_achievement_50.png";
		case 3:
			return "https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/side_bar/ui_sidebar_button_achievement_75.png";
		case 4:
			return "https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/side_bar/ui_sidebar_button_achievement_100.png";
		default:
			return "https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/side_bar/ui_sidebar_button_achievement_100.png";
	}
}

setup.getSideBarButton = function()
{
	var corruptionTier = setup.getCorruptionTier(State.variables.CharacterSheet_Player)
	if(UIBar.isStowed())
	{
		switch(corruptionTier)
		{
			case 0:
				return "https://sombreve.github.io/Dawn-of-Corruption-Site/UI/ui_button_expand_corrupt0.png";
			case 1:
				return "https://sombreve.github.io/Dawn-of-Corruption-Site/UI/ui_button_expand_corrupt25.png";
			case 2:
				return "https://sombreve.github.io/Dawn-of-Corruption-Site/UI/ui_button_expand_corrupt50.png";
			case 3:
				return "https://sombreve.github.io/Dawn-of-Corruption-Site/UI/ui_button_expand_corrupt75.png";
			case 4:
				return "https://sombreve.github.io/Dawn-of-Corruption-Site/UI/ui_button_expand_corrupt100.png";
			default:
				return "https://sombreve.github.io/Dawn-of-Corruption-Site/UI/ui_button_expand_corrupt100.png";
		}
	}
	else
	{
		switch(corruptionTier)
		{
			case 0:
				return "https://sombreve.github.io/Dawn-of-Corruption-Site/UI/ui_button_collapse_corrupt0.png";
			case 1:
				return "https://sombreve.github.io/Dawn-of-Corruption-Site/UI/ui_button_collapse_corrupt25.png";
			case 2:
				return "https://sombreve.github.io/Dawn-of-Corruption-Site/UI/ui_button_collapse_corrupt50.png";
			case 3:
				return "https://sombreve.github.io/Dawn-of-Corruption-Site/UI/ui_button_collapse_corrupt75.png";
			case 4:
				return "https://sombreve.github.io/Dawn-of-Corruption-Site/UI/ui_button_collapse_corrupt100.png";
			default:
				return "https://sombreve.github.io/Dawn-of-Corruption-Site/UI/ui_button_collapse_corrupt100.png";
		}
	}
}

setup.getBorderTop = function()
{
	switch(setup.getCorruptionTier(State.variables.CharacterSheet_Player))
	{
		case 0:
			return "https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/general/ui_borderlarge_corrupt_middle_top_0.png";
		case 1:
			return "https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/general/ui_borderlarge_corrupt_middle_top_25.png";
		case 2:
			return "https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/general/ui_borderlarge_corrupt_middle_top_50.png";
		case 3:
			return "https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/general/ui_borderlarge_corrupt_middle_top_75.png";
		case 4:
			return "https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/general/ui_borderlarge_corrupt_middle_top_100.png";
		default:
			return "https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/general/ui_borderlarge_corrupt_middle_top_100.png";
	}
}

setup.getBordeBottom = function()
{
	switch(setup.getCorruptionTier(State.variables.CharacterSheet_Player))
	{
		case 0:
			return "https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/general/ui_borderlarge_corrupt_middle_bottom_0.png";
		case 1:
			return "https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/general/ui_borderlarge_corrupt_middle_bottom_25.png";
		case 2:
			return "https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/general/ui_borderlarge_corrupt_middle_bottom_50.png";
		case 3:
			return "https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/general/ui_borderlarge_corrupt_middle_bottom_75.png";
		case 4:
			return "https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/general/ui_borderlarge_corrupt_middle_bottom_100.png";
		default:
			return "https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/general/ui_borderlarge_corrupt_middle_bottom_100.png";
	}
}

setup.onVillageEnterCallback = function()
{
	//save file hack
    if(State.variables.VolumeControls == undefined)
    {
        State.variables.VolumeControls =
        {
            master:
            {
                volume: 0.2,
            },
            music:
            {
                volume: 0.2,
                list: [], 
            },
            voices:
            {
                volume: 0.8,
                list: [], 
            },
            sfx:
            {
                volume: 1,
                list: [], 
            },
        };
    }

	var currentPassage = Story.get(State.peek().title);

	if(currentPassage.tags && currentPassage.tags.includes("NyxCastle"))
	{
		if(!Save.slots.has(7) || Save.slots.get(7).title == "Autosave")
		{
			Save.slots.save(7, "Autosave");
		}
	}

    if(currentPassage.tags && currentPassage.tags.includes("Overworld"))
    {
        if(State.variables.InOverworld == false || State.variables.InOverworld == undefined)
        {
            State.variables.InOverworld = true;
            setup.addDays(1);
			
			if(!Save.slots.has(7) || Save.slots.get(7).title == "Autosave")
			{
				Save.slots.save(7, "Autosave");
			}

			switch(setup.getCorruptionTier(State.variables.CharacterSheet_Player))
			{
				case 0:
					State.variables.PlayingVillageTheme = "village_bgm1";
					break;
				case 1:
					State.variables.PlayingVillageTheme = "village_bgm2";
					break;
				case 2:
					State.variables.PlayingVillageTheme = "village_bgm3";
					break;
				case 3:
					State.variables.PlayingVillageTheme = "village_bgm4";
					break;
				default:
					State.variables.PlayingVillageTheme = "village_bgm4";
					break;
			}

			console.log(State.variables.PlayingVillageTheme);
			console.log(setup.getCorruptionTier(State.variables.CharacterSheet_Player));

			var aList = SimpleAudio.lists.get(State.variables.PlayingVillageTheme);
			if(aList.isPlaying() == false)
			{
				State.variables.VolumeControls.music.list = [];

				console.log('village start')
				console.log(State.variables.VolumeControls.music.volume)
				aList.stop();
				aList.shuffle(true);
				aList.loop(true);
				aList.volume(State.variables.VolumeControls.music.volume);
				aList.play();

				State.variables.VolumeControls.music.list.push(State.variables.PlayingVillageTheme);
			}
        }
    }
    else
    {
		if(State.variables.InOverworld == true && State.variables.PlayingVillageTheme != undefined)
		{
			if(SimpleAudio.lists.get(State.variables.PlayingVillageTheme).isPlaying())
			{
				//leaving overworld
				SimpleAudio.lists.get(State.variables.PlayingVillageTheme).fadeOut(2);
			}
		}

        State.variables.InOverworld = false;
    }
};

setup.saveFightAttributes = function(character)
{
	character.fight.variables = State.variables.FightVariables;
	State.variables[character.id].info = character.info;
	State.variables[character.id].fight = character.fight;

	SimpleAudio.lists.get(setup.getBattleTheme(character)).fadeOut(2);
}

setup.getBattleTheme = function(character)
{
	if(character.id == "CharacterSheet_Ethrex")
	{
		return "battle_bgm_hard"
	}

	if(character.id == "CharacterSheet_Imp")
	{
		return "battle_bgm"
	}

	if(character.fight.fightReward >= setup.RewardTier.HIGH)
	{
		return "battle_bgm_hard"
	}
	else
	{
		return "battle_bgm"
	}
}

setup.applyGrowth = function(character, type, amount)
{
    switch(type)
    {
        case "cock":
            if(!setup.hasLimb(character.info.anatomy, "cocks"))
            {
                return 0;
            }
            break;
        case "muscles":
            if(!setup.hasLimb(character.info.anatomy, "arms") &&
               !setup.hasLimb(character.info.anatomy, "pecs") &&
               !setup.hasLimb(character.info.anatomy, "abdominals") &&
               !setup.hasLimb(character.info.anatomy, "legs"))
            {
                return 0;
            }
            break;
        case "balls":
            if(!setup.hasLimb(character.info.anatomy, "balls"))
            {
                return 0;
            }
            break;
	}

    var multiplier = setup.getStatValue(character, "growthMultiplier");

	amount *= multiplier;

	if(amount > 0)
	{
        switch(type)
        {
            case "cock":
                amount += setup.getStatValue(character, "bonusGrowthCock");
                break;
            case "muscles":
                amount += setup.getStatValue(character, "bonusGrowthMuscles");
                break;
            case "height":
                amount += setup.getStatValue(character, "bonusGrowthHeight");
                break;
            case "balls":
                amount += setup.getStatValue(character, "bonusGrowthBalls");
                break;
        }
	}

	//because .tofixed turns it into a string lmao what a joke
	var growth = Math.round(amount * 100) / 100;

	switch(type)
	{
		case "cock":
            setup.addToBaseStatValue(character, "cock", growth);
			break;
		case "muscles":
            setup.addToBaseStatValue(character, "muscles", growth);
			break;
		case "height":
            setup.addToBaseStatValue(character, "height", growth);
			break;
		case "balls":
            setup.addToBaseStatValue(character, "balls", growth);
			break;
	}

    var params = 
    {
        trigger: setup.AbilityTrigger.ON_APPLY_GROWTH,
        self: character,
    }
    character.broadcastAbilityTrigger(params);

	return growth;
}

setup.displayCorruptSidebar = function(character)
{
	var displayString = "";

	displayString +=  "<span class='corruptText100'>";
	displayString +=  "<span class='glitch nyx fucked' data-text='sTHE AGE OF NYXs '>s s </span> \n";
	displayString +=  "<div id='SidebarDivisionTop'>"+setup.getCorruptSidebarDividerTop()+"</div>";
	displayString += "<div class='stat-window-offset'>"
	displayString += 	"<div class='info-row'>"
    displayString += 	   "<div class='info-column1 corruptText100'>"
    displayString += 	       "\n"
    displayString += 	       "\n"
    displayString += 	       "\n"
    displayString += 	   "</div>";
    displayString += 	   "<div class='info-column2'>"
    displayString += 	       " uuodx\n"
    displayString += 	       "iiiT\n"
    displayString += 	       "All oUmig\n"
    displayString += 	   "</div>";
	displayString += 	"</div>";
	displayString += "<div class='statBarContainer'>";
	displayString += 	setup.displayStatProgressBar(character, "Arousal", 99999999, 99999999, "ArousalProgress");	
	displayString += 	"<div class='stat-perturn'>";
	displayString += 		setup.displaySign(setup.getArousalGain(character)) +  setup.displayStatValue(character, "arousalGain");
	displayString +=		" <span style='color:#d600b2'>per turn </span></div>";
	displayString += 	"</div>";
	displayString += "</div>";
	displayString += "<div class='statBarContainer'>";
	displayString += 	setup.displayStatProgressBar(character, "Arousal", 99999999, 99999999, "ArousalProgress");	
	displayString += 	"<div class='stat-perturn'>";
	displayString += 		setup.displaySign(setup.getArousalGain(character)) +  setup.displayStatValue(character, "arousalGain");
	displayString +=		" <span style='color:#d600b2'>per turn </span></div>";
	displayString += 	"</div>";
	displayString += "</div>";
	displayString += "<div class='statBarContainer'>";
	displayString += 	setup.displayStatProgressBar(character, "Arousal", undefined, 99999999999, "ArousalProgress");	
	displayString += 	"<div class='stat-perturn'>";
	displayString += 		setup.displaySign(setup.getArousalGain(character)) +  setup.displayStatValue(character, "arousalGain");
	displayString +=		" <span style='color:#d600b2'>per turn </span></div>";
	displayString += 	"</div>";
	displayString += "</div>";
	displayString += "</span>";

	return displayString;
}

setup.displayInfoStats = function(character)
{
	var cycle = State.variables.Cycle;
	var expedition = State.variables.Expedition;
	var displayString = "";
	
	displayString +=  "<span class='DateText'>"+setup.ordinal_suffix(expedition) +""+ setup.ordinal_suffix(cycle) +"</span> \n";
	displayString +=  "<div id='SidebarDivisionTop'>"+setup.getCorruptSidebarDividerTop()+"</div>";
	displayString +=  "<div class='PlayerDescriptor'>";
	displayString +=  "<span class='PlayerName'>"+State.variables.CharacterSheet_Player.info.name.toUpperCase() +"</span>\n";
	displayString +=  "<span class='LevelText'> "+State.variables.Level+"</span> <span class='PlayerRace'>"+setup.getRace(State.variables.CharacterSheet_Player.info.anatomy).toUpperCase() +"</span>\n";
	displayString +=  "</div>";
	displayString += "<div id='LevelBarContainer'>";
	displayString += "<div class='ProgressBarRow'>"
    displayString +=    "<div class='ProgressBarColumn1'>"
    displayString +=        ""
    displayString +=    "</div>";
	displayString +=    "<div class='ProgressBarColumn2'>"
	
	if(State.variables.Exp >= setup.getXPRequirement(State.variables.Level))
	{
		displayString += 0;
	}
	else
	{
		displayString += (setup.getXPRequirement(State.variables.Level) - State.variables.Exp).toFixed(2).replace(/\.00$/, '');
	}
    
    displayString +=    "</div>";
	displayString += "</div>";
	displayString += 	"<div id='LevelBarContent'>";
	displayString += 		"<progress id='LevelProgress' @value='"+(State.variables.Exp - setup.getXPRequirement(State.variables.Level - 1))+"' @max='"+setup.getXPRequirement(State.variables.Level)+"'></progress>";
	displayString += 	"</div>";
	displayString += 	"<div id='LevelBarBorder'><img src='"+setup.getEXPBarImage(character)+"'></div>";
	displayString += 	"<div class='ProgressBarBackground'><img src='https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/side_bar/ui_sidebar_bar_level_empty.png'></div>";
	displayString += "</div>";
	displayString += 	"<div class='info-row'>"
    displayString += 	   "<div class='info-column1 "+setup.getCorruptTextClass(character)+"'>"
    displayString += 	       "\n"
    displayString += 	       "\n"
    displayString += 	   "</div>";
    displayString += 	   "<div class='info-column2'>"
    displayString += 	       State.variables.Essence.toFixed(2).replace(/\.00$/, '') + "\n"
    displayString += 	       setup.displayStatValue(State.variables.CharacterSheet_Player, "corruption")
	
	if(State.variables.CharacterSheet_Player.info.accumulatedCorruption > 0)
	{
		let perDay = State.variables.CharacterSheet_Player.info.accumulatedCorruption;
		displayString += "&nbsp;+&nbsp;"+perDay+"&nbsp;daily"
	}

    displayString += 	   "</div>";
	displayString += 	"</div>";

	return displayString;
}

setup.ordinal_suffix = function(i) {
    var j = i % 10,
        k = i % 100;
    if (j == 1 && k != 11) {
        return i + "st";
    }
    if (j == 2 && k != 12) {
        return i + "nd";
    }
    if (j == 3 && k != 13) {
        return i + "rd";
    }
    return i + "th";
}

setup.displayFightStats = function(character)
{
	var displayString = "";

	displayString += "<div class='statBarContainer'>";
    if(character.fight.variables.currentHP != undefined)
    {
		displayString += setup.displayStatProgressBar(character, "Health", "currentHP", setup.getMaxHP(character), "HPProgress");
    }
    else
    {
		displayString += setup.displayStatProgressBar(character, "Health", undefined, setup.getMaxHP(character), "HPProgress");
    }
    displayString += "<div class='stat-perturn'>";
	displayString +=    "&nbsp;";
	displayString += "</div>";
	displayString += "</div>";

	if(character.hasAbility("Ability_HostOfEcho"))
	{		
		displayString += "<div class='statBarContainer'>";
		if(character.fight.variables.currentStamina != undefined)
		{
			displayString += setup.displayStatProgressBar(character, "Arousal", "currentArousal", 100, "ArousalProgress");
		}
		else
		{
			displayString += setup.displayStatProgressBar(character, "Arousal", undefined, 100, "ArousalProgress");
		}
		
		displayString += "<div class='stat-perturn'>";
		displayString += setup.displaySign(setup.getArousalGain(character)) +  setup.displayStatValue(character, "arousalGain");
		displayString +=" <span style='color:#d600b2'></span></div>";
		displayString += "</div>";
	}

	displayString +="<div class='fight-stat-window-offset'>";
	displayString +="<div id='stat-container'>";
	displayString +=	"<div id='stat-container-row' class='"+setup.getCorruptionUIClassName(setup.getCorruptTextClass(character), setup.getStatValue(character, "corruption"))+"'>";
	displayString +=	    "<img id='stat-container-row-logo' src='"+setup.getStatWindowLogo(character)+"'>";

	displayString +=	    "<div id='stat-container-column1'>";

	if(State.variables.DisplayStatWindow)
	{
		displayString +=	    	"<div id='statButtonText' class='stat-container-column-active'>";
	}
	else
	{
		displayString +=	    	"<div id='statButtonText'>";
	}
	
    displayString +=	    	"<<click ''>>";
	displayString +=	  		   "<<if $DisplayStatWindow == false>>";
	displayString +=	  		      "<<toggleclass '#StatsWindow' 'hidden'>>";
	displayString +=	  		      "<<toggleclass '#statButtonText' 'stat-container-column-active'>>";
	displayString +=	  		      "<<toggleclass '#abilitiesButtonText' 'stat-container-column-active'>>";
	displayString +=	  		      "<<toggleclass '#AbilitiesWindow' 'hidden'>>";
	displayString +=	  		   "<</if>>";
	displayString +=	  		   "<<set $DisplayStatWindow = true>>";
	displayString +=			"<</click>>";
	displayString +=	    	"</div>";
	displayString +=	    "</div>";
	
	displayString +=	    "<div id='stat-container-column2'>";

	if(State.variables.DisplayStatWindow)
	{
		displayString +=	    	"<div id='abilitiesButtonText'>";
	}
	else
	{
		displayString +=	    	"<div id='abilitiesButtonText' class='stat-container-column-active'>";
	}

	displayString +=			"<<click '&nbsp;&nbsp;&nbsp;&nbsp;'>>";
	displayString +=	   		   "<<if $DisplayStatWindow == true>>";
	displayString +=	   		      "<<toggleclass '#StatsWindow' 'hidden'>>";
	displayString +=	  		      "<<toggleclass '#statButtonText' 'stat-container-column-active'>>";
	displayString +=	   		      "<<toggleclass '#abilitiesButtonText' 'stat-container-column-active'>>";
	displayString +=	   		      "<<toggleclass '#AbilitiesWindow' 'hidden'>>";
	displayString +=	   		   "<</if>>";
	displayString +=	   		   "<<set $DisplayStatWindow = false>>";
	displayString +=			"<</click>>";
	displayString +=	    	"</div>";
    displayString +=	    "</div>";
	displayString +=	"</div>";
	displayString +="</div>";

	displayString +="<div class='"+setup.getCorruptionUIClassName("stat-container", setup.getStatValue(character, "corruption"))+"'>";

	if(State.variables.DisplayStatWindow)
	{
		displayString +=	"<div id='StatsWindow'>";
	}
	else
	{
		displayString +=	"<div id='StatsWindow' class='hidden'>";
	}

    displayString +=		"<div class='info-row'>";
    displayString +=		    "<div class='stat-column1 "+setup.getCorruptTextClass(character)+"'>";
    displayString +=		        "\n";
    displayString +=		        "\n";
    displayString +=		        " %\n";
    displayString +=		        "\n";
    displayString +=		    "</div>";
    displayString +=		    "<div class='stat-column2'>";
    displayString +=		        setup.displayStatValue(character, "strength") + "\n";
    displayString +=		        setup.displayStatValue(character, "stamina") + "\n";
    displayString +=		        setup.displayStatValue(character, "critChance") + "%\n";
    displayString +=		        " "+setup.displayStatValue(character, "critDamage") + "\n";
    displayString +=		    "</div>";
	displayString +=		"</div>";
	displayString +=  		"<div class='SidebarDivisionMid'>"+setup.getCorruptSidebarDividerMid()+"</div>";
	displayString += 		setup.displayBodyStats(character);
	displayString +=	"</div>";

	var classname = setup.getCorruptionUIClassName("dummy", setup.getStatValue(character, "corruption"));
	if(!State.variables.DisplayStatWindow)
	{
		displayString +=	"<div id='AbilitiesWindow' class='"+classname+"'>";
	}
	else
	{
		displayString +=	"<div id='AbilitiesWindow' class='hidden "+classname+"'>";
	}
	displayString +=		"<div id='AbilitiesWindowContentList'>";
	displayString += 			setup.displayAbilityCategoryIcons(character);
	displayString += 			setup.displayPersistentAbilities(character);
	displayString +=		"</div>";
	displayString +=	"</div>";

    displayString +="</div>";
	displayString +="</div>";
	
	return displayString;
};

setup.displayStatProgressBar = function(character, statName, currentStatVariable, statValue, statStyle)
{
	var displayString = "";

	console.log(statValue)
	var statValueString = statValue.toFixed(0);
	
	var statNameColor = undefined;
	var statValueName = "";

	switch(statName)
	{
		case "Health":
			statNameColor = "#ff6767"
			statValueName = "hp"
		break;
		case "Stamina":
			statNameColor = "#42ff87"
			statValueName = "stamina"
		break;
		case "Arousal":
			statNameColor = "#ff5ae3"

		break;
	}

	displayString += "<div id='ProgressBarContainer'>";
	displayString += 	"<div id='ProgressBarContent'>";

	if(statNameColor == undefined)
	{
		displayString += 	"<div id='ProgressBarName'>";
	}
	else
	{
		displayString += 	"<div id='ProgressBarName' style='color:"+statNameColor+"'>";
	}

	displayString += 			statName;
	displayString += 		"</div>";
	
	if(currentStatVariable == undefined)
	{
		if(statName == "Arousal")
		{
			displayString += 	"<progress id='"+statStyle+"' @value=\""+0+"\" @max=\"" + statValueString + "\"></progress>";
		}
		else
		{
			displayString += 	"<progress id='"+statStyle+"' @value=\""+statValueString+"\" @max=\"" + statValueString + "\"></progress>";
		}
	}
	else
	{
		displayString += 		"<progress id='"+statStyle+"' @value=\"$CharacterSheet_Player.fight.variables."+currentStatVariable+"\" @max=\"" + statValueString + "\"></progress>";
	}
	
	displayString += 	"</div>";
	displayString += 	"<div class='ProgressBarBackground'><img src='"+setup.getProgressBarBackground(statName)+"'></div>";
	displayString += 	"<div id='ProgressBarBorder'><img src='"+setup.getProgressBarImage(character)+"'>";
	displayString += 		"<div id='ProgressBarText'>";

	if(currentStatVariable == undefined)
	{
		if(statName == "Arousal")
		{
			if(State.variables.CorruptSidebar)
			{
				displayString += statValueString+" / "+statValueString;
			}
			else
			{
				displayString += "0 / "+statValueString;
			}
		}
		else
		{
			displayString += statValueString +" / "+setup.displayStatValue(character, statValueName);
		}
	}
	else
	{
		if(statName == "Arousal")
		{
			displayString +="$CharacterSheet_Player.fight.variables."+currentStatVariable + " / " + statValueString;
		}
		else
		{
			displayString +="$CharacterSheet_Player.fight.variables."+currentStatVariable + " / " + setup.displayStatValue(character, statValueName);
		}

	}
	
	displayString += 		"</div>";
	displayString += 	"</div>";

	displayString += "</div>";
	
	return displayString;
}

setup.displayBodyStats = function(character)
{
    var displayString = "";

    displayString +="<div class='info-row'>";
    displayString +=    "<div class='stat-column1 "+setup.getCorruptTextClass(character)+"'>";
    displayString +=        "\n";
    displayString +=        "\n";
    displayString +=        "\n";
    displayString +=        "\n";
    displayString +=    "</div>";
    displayString +=    "<div class='stat-column2'>";
    displayString +=        "<<nobr>>"+setup.getMusclesDescriptor(character)+"&nbsp;("+ setup.displayStatValue(character, "muscles")+")<</nobr>>\n";
    displayString +=        setup.displayStatValue(character, "height", true) +"\n";
    displayString +=        setup.displayStatValue(character, "cock", true)+"\n";
    displayString +=        setup.displayStatValue(character, "balls", true)+"\n";
    displayString +=    "</div>";
    displayString +="</div>";

    return displayString;
}

setup.getCorruptTextClass = function(character)
{
    switch(setup.getCorruptionTier(character))
	{
		case 0:
			return "corruptText0";
		case 1:
			return "corruptText25";
		case 2:
			return "corruptText50";
		case 3:
			return "corruptText75";
		case 4:
			return "corruptText100";
		default:
			return "corruptText100";
	}
}

setup.getCorruptBackgroundClass = function(character)
{
    switch(setup.getCorruptionTier(character))
	{
		case 0:
			return "corruptBackground0";
		case 1:
			return "corruptBackground25";
		case 2:
			return "corruptBackground50";
		case 3:
			return "corruptBackground75";
		case 4:
			return "corruptBackground100";
		default:
			return "corruptBackground100";
	}
}

setup.getCorruptSidebarDividerMid = function()
{
    switch(setup.getCorruptionTier(State.variables.CharacterSheet_Player))
	{
		case 0:
			return "<img src='https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/side_bar/ui_sidebar_division_mid_0.png'>";
		case 1:
			return "<img src='https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/side_bar/ui_sidebar_division_mid_25.png'>";
		case 2:
			return "<img src='https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/side_bar/ui_sidebar_division_mid_50.png'>";
		case 3:
			return "<img src='https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/side_bar/ui_sidebar_division_mid_75.png'>";
		case 4:
			return "<img src='https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/side_bar/ui_sidebar_division_mid_100.png'>";
		default:
			return "<img src='https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/side_bar/ui_sidebar_division_mid_100.png'>";
	}
}

setup.getCorruptSidebarDividerTop = function()
{
    switch(setup.getCorruptionTier(State.variables.CharacterSheet_Player))
	{
		case 0:
			return "<img src='https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/side_bar/ui_sidebar_division_top_0.png'>";
		case 1:
			return "<img src='https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/side_bar/ui_sidebar_division_top_25.png'>";
		case 2:
			return "<img src='https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/side_bar/ui_sidebar_division_top_50.png'>";
		case 3:
			return "<img src='https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/side_bar/ui_sidebar_division_top_75.png'>";
		case 4:
			return "<img src='https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/side_bar/ui_sidebar_division_top_100.png'>";
		default:
			return "<img src='https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/side_bar/ui_sidebar_division_top_100.png'>";
	}
}

setup.getAbilitiesPowerIcon = function()
{
    switch(setup.getCorruptionTier(State.variables.CharacterSheet_Player))
	{
		case 0:
			return '<img title="Perks" src="https://sombreve.github.io/Dawn-of-Corruption-Site/UI/Abilities/ui_abilities_power_corrupt0.png">';
		case 1:
			return '<img title="Perks" src="https://sombreve.github.io/Dawn-of-Corruption-Site/UI/Abilities/ui_abilities_power_corrupt25.png">';
		case 2:
			return '<img title="Perks" src="https://sombreve.github.io/Dawn-of-Corruption-Site/UI/Abilities/ui_abilities_power_corrupt50.png">';
		case 3:
			return '<img title="Perks" src="https://sombreve.github.io/Dawn-of-Corruption-Site/UI/Abilities/ui_abilities_power_corrupt75.png">';
		case 4:
			return '<img title="Perks" src="https://sombreve.github.io/Dawn-of-Corruption-Site/UI/Abilities/ui_abilities_power_corrupt100.png">';
		default:
			return '<img title="Perks" src="https://sombreve.github.io/Dawn-of-Corruption-Site/UI/Abilities/ui_abilities_power_corrupt100.png">';
	}
}

setup.getAbilitiesAlterationIcon = function()
{
    switch(setup.getCorruptionTier(State.variables.CharacterSheet_Player))
	{
		case 0:
			return '<img src="https://sombreve.github.io/Dawn-of-Corruption-Site/UI/Abilities/ui_abilities_alteration_corrupt0.png">';
		case 1:
			return '<img src="https://sombreve.github.io/Dawn-of-Corruption-Site/UI/Abilities/ui_abilities_alteration_corrupt25.png">';
		case 2:
			return '<img src="https://sombreve.github.io/Dawn-of-Corruption-Site/UI/Abilities/ui_abilities_alteration_corrupt50.png">';
		case 3:
			return '<img src="https://sombreve.github.io/Dawn-of-Corruption-Site/UI/Abilities/ui_abilities_alteration_corrupt75.png">';
		case 4:
			return '<img src="https://sombreve.github.io/Dawn-of-Corruption-Site/UI/Abilities/ui_abilities_alteration_corrupt100.png">';
		default:
			return '<img src="https://sombreve.github.io/Dawn-of-Corruption-Site/UI/Abilities/ui_abilities_alteration_corrupt100.png">';
	}
}

setup.getAbilitiesStatusEffectsIcon = function()
{
    switch(setup.getCorruptionTier(State.variables.CharacterSheet_Player))
	{
		case 0:
			return '<img src="https://sombreve.github.io/Dawn-of-Corruption-Site/UI/Abilities/ui_abilities_statuseffect_corrupt0.png">';
		case 1:
			return '<img src="https://sombreve.github.io/Dawn-of-Corruption-Site/UI/Abilities/ui_abilities_statuseffect_corrupt25.png">';
		case 2:
			return '<img src="https://sombreve.github.io/Dawn-of-Corruption-Site/UI/Abilities/ui_abilities_statuseffect_corrupt50.png">';
		case 3:
			return '<img src="https://sombreve.github.io/Dawn-of-Corruption-Site/UI/Abilities/ui_abilities_statuseffect_corrupt75.png">';
		case 4:
			return '<img src="https://sombreve.github.io/Dawn-of-Corruption-Site/UI/Abilities/ui_abilities_statuseffect_corrupt100.png">';
		default:
			return '<img src="https://sombreve.github.io/Dawn-of-Corruption-Site/UI/Abilities/ui_abilities_statuseffect_corrupt100.png">';
	}
}

setup.getAbilitiesGlobalIcon = function()
{
    switch(setup.getCorruptionTier(State.variables.CharacterSheet_Player))
	{
		case 0:
			return '<img src="https://sombreve.github.io/Dawn-of-Corruption-Site/UI/Abilities/ui_abilities_global_corrupt0.png">';
		case 1:
			return '<img src="https://sombreve.github.io/Dawn-of-Corruption-Site/UI/Abilities/ui_abilities_global_corrupt25.png">';
		case 2:
			return '<img src="https://sombreve.github.io/Dawn-of-Corruption-Site/UI/Abilities/ui_abilities_global_corrupt50.png">';
		case 3:
			return '<img src="https://sombreve.github.io/Dawn-of-Corruption-Site/UI/Abilities/ui_abilities_global_corrupt75.png">';
		case 4:
			return '<img src="https://sombreve.github.io/Dawn-of-Corruption-Site/UI/Abilities/ui_abilities_global_corrupt100.png">';
		default:
			return '<img src="https://sombreve.github.io/Dawn-of-Corruption-Site/UI/Abilities/ui_abilities_global_corrupt100.png">';
	}
}

setup.getAbilityCategoryIcon = function(category)
{
	var displayString = "";

	switch(category)
	{
		case 0:
			displayString += setup.getAbilitiesPowerIcon();
			break;
		case 1:
			displayString += setup.getAbilitiesAlterationIcon();
			break;
		case 2:
			displayString += setup.getAbilitiesStatusEffectsIcon();
			break;
		case 3:
			displayString += setup.getAbilitiesGlobalIcon();
			break;
		default:
			displayString += setup.getAbilitiesGlobalIcon();
			break;
	}

	displayString += setup.getUnseenAbilitiesAmount(category);
	
	console.log("displayAbilityCategoryIcons")
	console.log(category)

	displayString += "<<link \"<div "+setup.displayAbilityCategoryTitleElement(category)+" class='AbilityCategoryHighlight"+setup.isAbilityCategorySelected(category)+"'></div>\">>";
	displayString += '<<replace "#AbilitiesWindowContentList">>';
	displayString += '<<set $SelectedAbilityFilter = '+category+'>>';
	displayString += '<<print setup.displayAbilityCategoryIcons(State.variables.CharacterSheet_Player)>>';
	displayString += '<<print setup.displayPersistentAbilities(State.variables.CharacterSheet_Player)>>';
	displayString += '<</replace>>';
	displayString += '<</link>>';

	return displayString
}

setup.displayAbilityCategoryTitleElement = function(category)
{
	var displayString = "";

	switch(category)
	{
		case 0:
			displayString += "title=''";
			break;
		case 1:
			displayString += "title=''";
			break;
		case 2:
			displayString += "title=''";
			break;
		case 3:
			displayString += "title=''";
			break;
		default:
			displayString += "title=''";
			break;
	}

	return displayString;
}

setup.displayAbilityCategoryIcons = function(character)
{
	var displayString = "";

	displayString += '<div class="AbilityCategoryIconsContainer">';
	displayString += '<div class="AbilityCategoryIconsContainerInternal">';
	displayString += 	'<div class="AbilityCategoryIconButton Powers">';
	displayString += 		setup.getAbilityCategoryIcon(0);
	displayString += 	'</div>';
	displayString += 	'<div class="AbilityCategoryIconButton Alteration">';
	displayString += 		setup.getAbilityCategoryIcon(1);
	displayString += 	'</div>';
	displayString += 	'<div class="AbilityCategoryIconButton StatusEffects">';
	displayString += 		setup.getAbilityCategoryIcon(2);
	displayString += 	'</div>';
	displayString += 	'<div class="AbilityCategoryIconButton Global">';
	displayString += 		setup.getAbilityCategoryIcon(3);
	displayString += 	'</div>';
	displayString += '</div>';
	displayString += '</div>';

	return displayString;
}

setup.isAbilityCategorySelected = function(category)
{
	var displayString = "";

	if(category == State.variables.SelectedAbilityFilter)
	{
		displayString += " selected"
		
		console.log("selected")
	}
	

	return displayString;
}

setup.displayPersistentAbilities = function(character)
{
	var displayString = "";
    var abilities = character.abilityHandler.abilityRuntimeDatas;

	var i;
	for(i = 0; i < abilities.length; i++)
	{
        if(abilities[i].isActive == false)
        {
            continue;
        }

		let ability = setup.getAbilityByIndex(abilities[i].abilityDataIndex);

		if(ability.filter != State.variables.SelectedAbilityFilter)
		{
            continue;
        }

        var modifier = abilities[i].modifier;
        var rankString  = setup.displayRankText(abilities[i]);

		displayString += "<span class='AbilityContainer'>"
		if(abilities[i].seen == false)
		{
			abilities[i].seen = true;
			displayString += "<div class='AbilityNotificationBlipContainer'>"
			displayString += "<div class='AbilityHeaderNotificationBlip'></div>"
			displayString += "</div>"
		}

		displayString += "<details class='PassiveAbility'>";

		displayString += "<summary class='"+setup.getCorruptionUIClassName("PassiveAbilityHeader", setup.getStatValue(character, "corruption"))+"'>" + ability.name + " "+rankString+"</summary>";
		displayString += 	"<p class='PassiveAbilityBody' >";

		displayString += setup.displayModifiers(modifier);
           
        if(ability.description != undefined || ability.description(character, abilities[i]) != "")
        {
            displayString += ability.description(character, abilities[i]);
            displayString += "\n"
        }
        
		displayString += 	"</p>";
		displayString += "</details>";
		displayString += "</span>";
    }

	return displayString;
}

setup.displayModifiers = function(modifier)
{
	var displayString = "";

	for(var propertyName in modifier)
	{
		if(propertyName == "maxHPMods")
		{
			displayString += setup.displayModifierText(modifier[propertyName], "");
			displayString += "<br>"
		}

		if(propertyName == "maxStaminaMods")
		{
			displayString += setup.displayModifierText(modifier[propertyName], "");
			displayString += "<br>"
		}

		if(propertyName == "strengthMods")
		{
			displayString +=  setup.displayModifierText(modifier[propertyName], "");
			displayString += "<br>"
		}

		if(propertyName == "critChanceMods")
		{
			displayString += setup.displayModifierText(modifier[propertyName], "");
			displayString += "<br>"
		}
		
		if(propertyName == "critDamageMods")
		{
			displayString += setup.displayModifierText(modifier[propertyName], "");
			displayString += "<br>"
		}
		
		if(propertyName == "essenceMultiplierMods")
		{
			displayString += setup.displayModifierText(modifier[propertyName], "");
			displayString += "<br>" 
		}
		
		if(propertyName == "actionSlotsMods")
		{
			displayString += setup.displayModifierText(modifier[propertyName], "");
			displayString += "<br>" 
		}
		
		if(propertyName == "comboMovesPerTurnMods")
		{
			displayString += setup.displayModifierText(modifier[propertyName], "");
			displayString += "<br>" 
		}

		if(propertyName == "arousalGainMods")
		{
			displayString += setup.displayModifierText(modifier[propertyName], "");
			displayString += "<br>"
		}

		if(propertyName == "minArousalMods")
		{
			displayString += setup.displayModifierText(modifier[propertyName], "");
			displayString += "<br>"
		}

		if(propertyName == "staminaRecoveryMods")
		{
			displayString += setup.displayModifierText(modifier[propertyName], "");
			displayString += "<br>"
		}

		if(propertyName == "corruptionMods")
		{
			displayString += setup.displayModifierText(modifier[propertyName], "");
			displayString += "<br>"
		}

		if(propertyName == "cockMods")
		{
			displayString += setup.displayModifierText(modifier[propertyName], "", true);
			displayString += "<br>"
		}

		if(propertyName == "ballsMods")
		{
			displayString += setup.displayModifierText(modifier[propertyName], "", true);
			displayString += "<br>"
		}

		if(propertyName == "heightMods")
		{
			displayString += setup.displayModifierText(modifier[propertyName], "", true);
			displayString += "<br>"
		}

		if(propertyName == "musclesMods")
		{
			displayString += setup.displayModifierText(modifier[propertyName], "");
			displayString += "<br>"
		}

		if(propertyName == "growthMods")
		{
			displayString += setup.displayModifierText(modifier[propertyName], "");
			displayString += "<br>"
		}

		if(propertyName == "xpMultiplierMods")
		{
			displayString += setup.displayModifierText(modifier[propertyName], "");
			displayString += "<br>"
		}

		if(propertyName == "corruptionPerDayMods")
		{
			displayString += setup.displayModifierText(modifier[propertyName], "");
			displayString += "<br>"
		}
	}

	return displayString;
}

setup.displayRankText = function(abilityRuntimeData)
{
    var rankString = "";
	let ability = setup.getAbilityByIndex(abilityRuntimeData.abilityDataIndex);

    if(ability.maxRank > 1)
    {
        rankString += "["+abilityRuntimeData.rank+"]";
    }

    return rankString;
}

setup.displayModifierText = function(modifier, propertyName, asLength = false)
{
	var displayString = "";
	displayString += propertyName + setup.displayModifierTypeText(modifier) +" ";

	if(modifier.mod == setup.mod.MULTIPLYPOS || modifier.mod == setup.mod.MULTIPLYNEG)
	{
		displayString += (modifier.value * 100).toFixed(2).replace(/\.00$/, '') +"%";
	}
	else
	{
		if(asLength)
		{
			displayString += setup.getLength(modifier.value);
		}
		else
		{
			displayString += modifier.value.toFixed(2).replace(/\.00$/, '');
		}
	}

	return displayString;
}

setup.displayModifierTypeText = function(modifier)
{
	var displayString = "";

	if(modifier.mod == setup.mod.ADD || modifier.mod == setup.mod.MULTIPLYPOS)
	{
		displayString += " + ";
	}
	else if(modifier.mod == setup.mod.REMOVE || modifier.mod == setup.mod.MULTIPLYNEG)
	{
		displayString += " - ";
	}
	else if(modifier.mod == setup.mod.REPLACE)
	{
		displayString += "  ";
	}

	return displayString;
}

setup.displayChanceToHit = function(character, fightMove)
{    
    var displayString = "";

	if(fightMove.critMod != undefined)
	{
		displayString += "<div class='"+setup.getCorruptionUIClassName("FightSkillCardCritChance", setup.getStatValue(character, "corruption"))+"'>";

        var statValue = setup.getStatValue(character, "critChance");
		var critChance = statValue + fightMove.critMod;
		
        displayString += " <span class='tooltip' id=";
        if(statValue < 0)
        {
            displayString += "'StatModifierNegative'";
        }
        else
        {
            displayString += "'StatModifierPositive'";
        }

		displayString += ">"+ critChance;
		displayString += "<span class='tooltipContainer'>";
        displayString += "<span class='tooltiptext'>";

		displayString += "<br><br>"
		displayString += ":<br>";

        var statValue = setup.getStatValue(character, "critChance");
        var damageMod = {mod: setup.mod.ADD, value: statValue};

        displayString += setup.displayModifierText(damageMod, "");

        displayString += "</span>";
        displayString += "</span>";
        displayString += "</span>";

		displayString += "</div>"
    }

    return displayString;
}

setup.displaySign = function(number)
{
	if(number >= 0)
	{
		return "+";
	}
		
	return "";
}

setup.getModifiers = function(character)
{    
    var modifiers = [];
    var runtimeAbilityDatas = character.abilityHandler.abilityRuntimeDatas;
    for(let i = 0; i < runtimeAbilityDatas.length; i++)
	{
        if(runtimeAbilityDatas[i].modifier != undefined && runtimeAbilityDatas[i].isActive == true)
        {
            modifiers.push(runtimeAbilityDatas[i].modifier);
        }
    }

	return modifiers;
}

setup.getModifiersForStat = function(character, statName)
{
	var baseModifiers = setup.getModifiers(character);
	var statInfo = setup.getStatModifierPropertyName(statName);

	var modifiers = [];
	var i;
	for(i = 0; i < baseModifiers.length; i++)
	{
		for(var propertyName in baseModifiers[i])
		{
			if(propertyName == statInfo.modifierProperty)
			{
				modifiers.push(baseModifiers[i]);
			}
		}
	}

	return modifiers;
}

setup.getStatModifierPropertyName = function(stat)
{
	var statInfo = {name: stat, modifier: undefined};

	switch(stat)
	{
		case "hp":
			statInfo.modifierProperty = "maxHPMods";
			break;
		case "stamina":
			statInfo.modifierProperty = "maxStaminaMods";
			break;
		case "strength":
			statInfo.modifierProperty = "strengthMods";
			break;
		case "critChance":
			statInfo.modifierProperty = "critChanceMods";
			break;
		case "critDamage":
			statInfo.modifierProperty = "critDamageMods";
			break;
		case "essenceMultiplier":
			statInfo.modifierProperty = "essenceMultiplierMods";
			break;
		case "actionSlots":
			statInfo.modifierProperty = "actionSlotsMods";
			break;
		case "comboMovesPerTurn":
			statInfo.modifierProperty = "comboMovesPerTurnMods";
			break;
		case "arousalGain":
			statInfo.modifierProperty = "arousalGainMods";
			break;
		case "minArousal":
			statInfo.modifierProperty = "minArousalMods";
			break;
		case "growthMultiplier":
			statInfo.modifierProperty = "growthMods";
			break;
		case "xpMultiplier":
			statInfo.modifierProperty = "xpMultiplierMods";
			break;
		case "corruptionPerDay":
			statInfo.modifierProperty = "corruptionPerDayMods";
			break;
		case "staminaRecovery":
			statInfo.modifierProperty = "staminaRecoveryMods";
			break;
		case "corruption":
			statInfo.modifierProperty = "corruptionMods";
			break;
		case "muscles":
			statInfo.modifierProperty = "musclesMods";
			break;
		case "height":
			statInfo.modifierProperty = "heightMods";
			break;
		case "cock":
			statInfo.modifierProperty = "cockMods";
			break;
		case "balls":
			statInfo.modifierProperty = "ballsMods";
            break;
        default:
            alert(stat +" not handled by getStatModifierPropertyName")
            break;
	}

	return statInfo;
};

setup.getStatValue = function(character, stat, ignoreAbility)
{
	switch(stat)
	{
		case "hp":
			return setup.getMaxHP(character, ignoreAbility);
		case "stamina":
			return setup.getMaxStamina(character, ignoreAbility);
		case "strength":
			return setup.getStrength(character, ignoreAbility);
		case "critChance":
			return setup.getCritChance(character, ignoreAbility);
		case "critDamage":
			return setup.getCritDamage(character, ignoreAbility);
		case "essenceMultiplier":
			return setup.getEssenceMultiplier(character, ignoreAbility);
		case "actionSlots":
			return setup.getActionSlots(character, ignoreAbility);
		case "comboMovesPerTurn":
			return setup.getComboMovesPerTurn(character, ignoreAbility);
		case "arousalGain":
            return setup.getArousalGain(character, ignoreAbility);
        case "minArousal":
            return setup.getMinArousal(character, ignoreAbility);
		case "growthMultiplier":
			return setup.getGrowthMultiplier(character, ignoreAbility);
		case "xpMultiplier":
			return setup.getXpMultiplier(character, ignoreAbility);
		case "corruptionPerDay":
			return setup.getCorruptionPerDay(character, ignoreAbility);
		case "bonusGrowthBalls":
			return setup.getBonusGrowth(character, "balls", ignoreAbility);
		case "bonusGrowthHeight":
			return setup.getBonusGrowth(character, "height", ignoreAbility);
		case "bonusGrowthMuscles":
			return setup.getBonusGrowth(character, "muscles", ignoreAbility);
		case "bonusGrowthCock":
			return setup.getBonusGrowth(character, "cock", ignoreAbility);
		case "staminaRecovery":
			return setup.getStaminaRecovery(character, ignoreAbility);
		case "corruption":
			return setup.getCorruption(character, ignoreAbility);
		case "muscles":
			return setup.getMuscles(character, ignoreAbility);
		case "height":
			return setup.getHeight(character, ignoreAbility);
		case "cock":
			return setup.getCock(character, ignoreAbility);
		case "balls":
			return setup.getBalls(character, ignoreAbility);
	}

	return undefined;
};

setup.setBaseStatValue = function(character, stat, value)
{
    //hook hook - Hook hook
	switch(stat)
	{
		case "hp":
        case "stamina":
        case "strength":
        case "critChance":
        case "critDamage":
        case "essenceMultiplier":
        case "actionSlots":
        case "comboMovesPerTurn":
        case "arousalGain":
        case "minArousal":
		case "growthMultiplier":
        case "staminaRecovery":
            character.fight[stat] = value;
            break;
        case "muscles":
        case "corruption":
        case "height":
        case "cock":
        case "balls":
        case "corruptionPerDay":
            character.info[stat] = value;
            break;
		case "bonusGrowthBalls":
            character.fight.bonusGrowth.balls = value;
            break;
		case "bonusGrowthHeight":
            character.fight.bonusGrowth.height = value;
            break;
		case "bonusGrowthMuscles":
            character.fight.bonusGrowth.muscles = value;
            break;
		case "bonusGrowthCock":
            character.fight.bonusGrowth.cock = value;
            break;
    }
    
    var params = 
    {
        trigger: setup.AbilityTrigger.ON_STAT_CHANGE,
        self: character,
    }
    return character.broadcastAbilityTrigger(params);
};

setup.addToBaseStatValue = function(character, stat, value)
{
	let baseValue = setup.getStatValueNoModifiers(character, stat)
	let newValue = baseValue + value;

	if(character.id == "CharacterSheet_Player")
	{
		let cap = undefined;
		switch (stat) {
			case "muscles":
				cap = setup.getStatSizeCap("muscles", character.info.limitBreaks.cap.muscles);
				break;
			case "height":
				cap = setup.getStatSizeCap("height", character.info.limitBreaks.cap.height);
				break;
			case "cock":
				cap = setup.getStatSizeCap("cock", character.info.limitBreaks.cap.cock);
				break;
			case "balls":
				cap = setup.getStatSizeCap("balls", character.info.limitBreaks.cap.balls);
				break;
			default:
				break;
		}

		if(cap != undefined)
		{
			if(cap < newValue)
			{
				//Add difference to overgrowth
				let overgrowth = newValue - cap;
				character.info.overgrowth[stat] += Math.ceil(overgrowth);
			}

			newValue = Math.min(newValue, cap);
		}
	}

	if (newValue >= 9007199254740992){
		setup.setBaseStatValue(character, stat, 9007199254740992);
	}else{
		setup.setBaseStatValue(character, stat, newValue);
	}
};

setup.getStatValueNoModifiers = function(character, stat)
{
	switch(stat)
	{
		case "hp":
		case "stamina":
		case "strength":
		case "critChance":
		case "critDamage":
		case "essenceMultiplier":
		case "actionSlots":
		case "comboMovesPerTurn":
		case "arousalGain":
		case "minArousal":
        case "growthMultiplier":
        case "staminaRecovery":
			return character.fight[stat];
		case "corruption":
        case "muscles":
		case "height":
		case "cock":
		case "balls":
		case "corruptionPerDay":
			return character.info[stat];
        case "bonusGrowthBalls":
            return character.info.bonusGrowth.balls;
        case "bonusGrowthHeight":
            return character.info.bonusGrowth.height;
        case "bonusGrowthMuscles":
            return character.info.bonusGrowth.muscles;
        case "bonusGrowthCock":
            return character.info.bonusGrowth.cock;
    }

    alert(stat +" not handled by getStatValueNoModifiers")
};

setup.getMaxHP = function(character, ignoreAbility)
{
	var maxHP = character.fight.hp;
	maxHP = setup.getValueWithModifier(character, maxHP, "maxHPMods", ignoreAbility);

	return maxHP;
};

setup.getMaxStamina = function(character, ignoreAbility)
{
	var maxStam = character.fight.stamina;
	maxStam = setup.getValueWithModifier(character, maxStam, "maxStaminaMods", ignoreAbility);
	return maxStam;
};

setup.getStrength = function(character, ignoreAbility)
{
	var strength = character.fight.strength;
	return setup.getValueWithModifier(character, strength, "strengthMods", ignoreAbility);
};

setup.getCritChance = function(character, ignoreAbility)
{
	var critChance = character.fight.critChance;
	return setup.getValueWithModifier(character, critChance, "critChanceMods", ignoreAbility);
};

setup.getCritDamage = function(character, ignoreAbility)
{
	var critDamage = character.fight.critDamage;
	return setup.getValueWithModifier(character, critDamage, "critDamageMods", ignoreAbility);
};

setup.getEssenceMultiplier = function(character, ignoreAbility)
{
	var essenceMultiplier = character.fight.essenceModifierToAdd;
	return setup.getValueWithModifier(character, essenceMultiplier, "essenceMultiplierMods", ignoreAbility);
};

setup.getActionSlots = function(character, ignoreAbility)
{
	var actionSlots = character.fight.actionSlots;
	return setup.getValueWithModifier(character, actionSlots, "actionSlotsMods", ignoreAbility);
};

setup.getComboMovesPerTurn = function(character, ignoreAbility)
{
	var comboMovesPerTurn = character.fight.comboMovesPerTurn;
	return setup.getValueWithModifier(character, comboMovesPerTurn, "comboMovesPerTurnMods", ignoreAbility);
};

setup.getArousalGain = function(character, ignoreAbility)
{
	var arousalGain = character.fight.arousalGain;
	return setup.getValueWithModifier(character, arousalGain, "arousalGainMods", ignoreAbility);
};

setup.getGrowthMultiplier = function(character, ignoreAbility)
{
    var growthMultiplier = character.fight.growthMultiplier;
    var stuff = setup.getValueWithModifier(character, growthMultiplier, "growthMods", ignoreAbility);
	return stuff
};

setup.getXpMultiplier = function(character, ignoreAbility)
{
    var xpMultiplier = character.fight.xpMultiplier;
	return setup.getValueWithModifier(character, xpMultiplier, "xpMultiplierMods", ignoreAbility);
};

setup.getCorruptionPerDay = function(character, ignoreAbility)
{
    var corruptionPerDay = character.info.corruptionPerDay;

	if(corruptionPerDay != undefined)
	{
		return setup.getValueWithModifier(character, corruptionPerDay, "corruptionPerDayMods", ignoreAbility);
	}

	return 0;
};

setup.addDays = function(value)
{
	setup.applyDailyCorruption(State.variables.CharacterSheet_Player)

	if(State.variables.CharacterSheet_MQ002_Guard.quest.movedToCastle == true)
	{
		State.variables.CharacterSheet_MQ002_Guard.quest.lustIncrease = true;
	}

    return setup.setDays(State.variables.Expedition + value)
};

setup.setDays = function(value)
{
    State.variables.Expedition = value;

	var displayString = "";
    var params = 
    {
        trigger: setup.AbilityTrigger.ON_DAY_CHANGE,
        self: State.variables.CharacterSheet_Player,
	}
    displayString += State.variables.CharacterSheet_Player.broadcastAbilityTrigger(params);

    return displayString;
}

setup.getBonusGrowth = function(character, type, ignoreAbility)
{
    switch(type)
    {
        case "balls":
            var value = character.fight.bonusGrowth.balls;
	        return setup.getValueWithModifier(character, value, "bonusGrowthBalls", ignoreAbility);
        case "cock":
            var value = character.fight.bonusGrowth.cock;
	        return setup.getValueWithModifier(character, value, "bonusGrowthCock", ignoreAbility);
        case "muscles":
            var value = character.fight.bonusGrowth.muscles;
	        return setup.getValueWithModifier(character, value, "bonusGrowthMuscles", ignoreAbility);
        case "height":
            var value = character.fight.bonusGrowth.height;
	        return setup.getValueWithModifier(character, value, "bonusGrowthHeight", ignoreAbility);
    }
};

setup.getMinArousal = function(character, ignoreAbility)
{
    var value = character.fight.minArousal;
	return setup.getValueWithModifier(character, value, "minArousalMods", ignoreAbility);
}

setup.getStaminaRecovery = function(character, ignoreAbility)
{
	var staminaRecovery = character.fight.staminaRecovery;
	return setup.getValueWithModifier(character, staminaRecovery, "staminaRecoveryMods", ignoreAbility);
};

setup.getCorruption = function(character, ignoreAbility)
{
	var corruption = character.info.corruption;
	return setup.getValueWithModifier(character, corruption, "corruptionMods", ignoreAbility);
}

setup.getMuscles = function(character, ignoreAbility)
{
	let value = setup.getValueWithModifier(character, character.info.muscles, "musclesMods", ignoreAbility);
	
	if(character.id == "CharacterSheet_Player")
	{
		let cap = setup.getStatSizeCap("muscles", character.info.limitBreaks.cap.muscles);
		
		if(cap != undefined)
		{
			value = Math.min(value, cap);
		}
	}

	return value;
}

setup.getHeight = function(character, ignoreAbility)
{
	let value = setup.getValueWithModifier(character, character.info.height, "heightMods", ignoreAbility);

	if(character.id == "CharacterSheet_Player")
	{
		let cap = setup.getStatSizeCap("height", character.info.limitBreaks.cap.height);
		
		if(cap != undefined)
		{
			value = Math.min(value, cap);
		}
	}

	return value;
}

setup.getCock = function(character, ignoreAbility)
{
	let value = setup.getValueWithModifier(character, character.info.cock, "cockMods", ignoreAbility);
	
	if(character.id == "CharacterSheet_Player")
	{
		let cap = setup.getStatSizeCap("cock", character.info.limitBreaks.cap.cock);
		
		if(cap != undefined)
		{
			value = Math.min(value, cap);
		}
	}

	return value;
}

setup.getBalls = function(character, ignoreAbility)
{
	let value = setup.getValueWithModifier(character, character.info.balls, "ballsMods", ignoreAbility);

	if(character.id == "CharacterSheet_Player")
	{
		let cap = setup.getStatSizeCap("balls", character.info.limitBreaks.cap.balls);
		
		if(cap != undefined)
		{
			value = Math.min(value, cap);
		}
	}

	return value;
}

setup.getFightMovesWithAddons = function(character, ignoreAbility)
{
	var fightMoveIDs = [...character.fight.fightMoveIDs];

	fightMoveIDs = setup.getValueWithModifier(character, fightMoveIDs, "fightMoveIDsMods", ignoreAbility);

    var fightMoveIDsNoDup = [];

    let idCount = {};
    for(let i = 0; i < fightMoveIDs.length; i++)
    {
        if(idCount[fightMoveIDs[i]] == undefined)
        {
            fightMoveIDsNoDup.push(fightMoveIDs[i])
            idCount[fightMoveIDs] = true;
        }
    }

    return fightMoveIDsNoDup;
};

setup.modifiersEqual = function(a, b) 
{
	if (a === b) return true;
	if (a == null || b == null) return false;
	if (a.length != b.length) return false;
  
	// If you don't care about the order of the elements inside
	// the array, you should sort both arrays here.
	// Please note that calling sort on an array will modify that array.
	// you might want to clone your array first.
  
	for (var i = 0; i < a.length; ++i) {
	  if (a[i].name !== b[i].name) return false;
	}
	return true;
};

setup.canLevelUp = function(level)
{
	return State.variables.Exp >= setup.getXPRequirement(level);
};

setup.canExplore = function()
{
	return State.variables.Quest_CanExplore;
};

setup.getXPRequirement = function(level)
{
	if(level <= 0)
		return 0;

	if(level <= setup.LevelUpTable.length)
	{
		return setup.LevelUpTable[level - 1];
	}
	else
	{
		var lastLevelXP =  setup.LevelUpTable[setup.LevelUpTable.length -1];
		var secondToLastLevelXP =  setup.LevelUpTable[setup.LevelUpTable.length -2];

		var endlessTier = lastLevelXP - secondToLastLevelXP;

		return lastLevelXP + endlessTier * (level - setup.LevelUpTable.length);
	}
};

setup.gainEssence= function(amount)
{
    State.variables.Essence += setup.getEssenceGain(amount); 
    
    var displayString = "";
    var params = 
    {
        trigger: setup.AbilityTrigger.ON_GAIN_ESSENCE,
        self: State.variables.CharacterSheet_Player,
    }
    displayString += State.variables.CharacterSheet_Player.broadcastAbilityTrigger(params);

    return displayString;
}

setup.getEssenceGain= function(amount)
{
	return amount + Math.ceil(amount * setup.getStatValue(State.variables.CharacterSheet_Player, "essenceMultiplier")); 
}

setup.getProportionalCockSize = function(height)
{
	return height / 3; 
}

setup.getProportionalBallsSize = function(height)
{
	return height / 9; 
}

setup.getProportionalMuscles = function(height)
{
	return height / 4.5; 
}

setup.playRealizationPackage = function(actorsList, arousalLevel)
{
	for(var characterID of actorsList)
	{
		console.log(characterID)
		var characterAudioSheet = State.variables[characterID].info.audioSheet;
		if(characterAudioSheet != null)
		{
			console.log(setup[characterAudioSheet])

			var voiceObject = setup[characterAudioSheet].voice;
			if(voiceObject != null)
			{
				console.log(voiceObject)
				var playlistObject = voiceObject.playlist;

				if(playlistObject != null)
				{
					console.log(playlistObject)
					var bestPlaylistID = setup.evaluateBestAudioTrack(characterID, playlistObject, arousalLevel);
					
					if(bestPlaylistID != null)
					{
						for(var trackProperty in playlistObject.tracks)
						{
							console.log(trackProperty)
							var aList = SimpleAudio.lists.get(playlistObject.tracks[trackProperty].track);
							if(playlistObject.tracks[trackProperty].track == bestPlaylistID)
							{
								console.log(aList)
								aList.shuffle(true);
								aList.loop(true);
								aList.volume(State.variables.VolumeControls.voices.volume);
								aList.play();
							}
							else
							{
								aList.stop();
							}
						}

						State.variables.VolumeControls.voices.list.push(bestPlaylistID);
						State.variables.PlayingAudio = true;
					}
				}
			}
		}
	}

	//todo rework that
}

setup.playSoundActionParams = function(actionParams, loop)
{
	setup.stopSoundActions();

	if(actionParams != undefined)
	{
		for(var param of actionParams)
		{
			var aList = SimpleAudio.lists.get(param);

			if(aList != null)
			{
				aList.shuffle(true);
				aList.loop(loop);
				aList.volume(State.variables.VolumeControls.sfx.volume);
				aList.play();

				State.variables.VolumeControls.sfx.list.push(param);
			}
		}
	}
}

setup.stopSoundActions = function()
{
	for(var param of setup.AllSoundActions)
	{
		var aList = SimpleAudio.lists.get(param);

		if(aList != null)
		{
			if(aList.isPlaying() && aList.volume() >= 0)
			{
				aList.fadeOut(2, aList.volume());
			}
			else
			{
				aList.stop();
			}
		}
	}

	State.variables.VolumeControls.sfx.list = [];
}

setup.stopRealizationPackages = function(actorsList)
{
	for(var characterID of actorsList)
	{
		var characterAudioSheet = State.variables[characterID].info.audioSheet;
		if(characterAudioSheet != null)
		{
			var voiceObject = setup[characterAudioSheet].voice;
			if(voiceObject != null)
			{
				console.log(voiceObject)
				var playlistObject = voiceObject.playlist;

				if(playlistObject != null)
				{
					for(var trackProperty in playlistObject.tracks)
					{
						var aList = SimpleAudio.lists.get(playlistObject.tracks[trackProperty].track);

						if(aList.isPlaying() && aList.volume() >= 0)
						{
							aList.fadeOut(2, aList.volume());
						}
						else
						{
							aList.stop();
						}

						State.variables.VolumeControls.voices.list = State.variables.VolumeControls.voices.list.filter(function(e) { return e !== playlistObject.tracks[trackProperty].track })
					}
				}
				
				State.variables.PlayingAudio = false;
			}
		}
	}
}

setup.stopAllRealizationPackages = function()
{
	setup.stopRealizationPackages(["CharacterSheet_Player", "CharacterSheet_Imp", "CharacterSheet_Torgar"]);
}

setup.evaluateBestAudioTrack = function(characterID, playlistObject, arousalLevel)
{
	var tracks = playlistObject.tracks;
	var bestScoring = -1;
	var bestPlaylistProperty = null;
	
	var size = setup.sizeNormalPersoncomparison(State.variables[characterID]);

	for(var trackProperty in tracks)
	{
		var scoring = 0;

		var tags = tracks[trackProperty].tags;

		console.log("tags")
		console.log(tags)

		if(setup.hasArousalTag(tags, arousalLevel) == true)
		{
			scoring++;
		}
	
		if(setup.hasSizeTag(tags, size))
		{
			scoring++;
		}
	
		if(setup.hasTorgarTag(tags))
		{
			scoring++;
		}

		if(scoring > bestScoring)
		{
			console.log("best scoring")
			console.log(trackProperty)

			bestScoring = scoring;
			bestPlaylistProperty = tracks[trackProperty].track;
		}
	}

	return bestPlaylistProperty;
}

setup.hasTorgarTag = function(tagsArray)
{
	let torgarState = State.variables.CharacterSheet_Torgar.quest.progress;
	let states = setup.TorgarProgress;

	if(torgarState == states.INFECTED)
	{
		torgarState = "Torgar_Infected";
	}
	else if(torgarState == states.LOST || torgarState == states.LOST_TEAMMATE || torgarState == states.ASCENDED)
	{
		torgarState = "Torgar_Lost";
	}
	else
	{
		torgarState = "Torgar_Normal";
	}

	for(var tag of tagsArray)
	{
		if(tag == torgarState)
		{
			return true;
		}
	}

	return false;
}

setup.hasSizeTag = function(tagsArray, size)
{
	let sizeTag = ""
	if(size <= setup.Comparators.SLIGHTLY_BIGGER)
	{
		sizeTag = "Size_1";
	}
	else if(size <= setup.Comparators.REACHES_WAIST)
	{
		sizeTag = "Size_2";
	}
	else if(size <= setup.Comparators.FITS_ON_HAND)
	{
		sizeTag = "Size_3";
	}
	else if(size >= setup.Comparators.FITS_ON_HAND)
	{
		sizeTag = "Size_4";
	}

	for(var tag of tagsArray)
	{
		if(tag == sizeTag)
		{
			return true;
		}
	}

	return false;
}

setup.hasArousalTag = function(tagsArray, arousalLevel)
{
	for(var tag of tagsArray)
	{
		switch(arousalLevel)
		{
			case 1:
				if(tag == "arousal_1")
				{
					return true;
				}
				break;
			case 2:
				if(tag == "arousal_2")
				{
					return true;
				}
				break;
			case 3:
				if(tag == "arousal_3")
				{
					return true;
				}
				break;
			case 4:
				if(tag == "arousal_4")
				{
					return true;
				}
				break;
		}
	}
}

setup.printActiveSound = function()
{
	console.log(SimpleAudio.volume);
	var displayString = "";
	if(SimpleAudio.volume() <= 0.02 && State.variables.PlayingAudio == true)
	{
		displayString = '<span class = "VolumeWarning"></span>'
	}

	return displayString;
}

setup.displayVoiceRadio = function(character, voiceIDs)
{
	var displayString = "";

	for(let i = 0; i < voiceIDs.length; ++i)
	{
		displayString += '<label><<radiobutton "$'+character.id+'.info.audioSheet" '+voiceIDs[i]+' checked>>'+ (i+1) +'  </label>'

		displayString += '<span class="'+setup.getCorruptBackgroundClass(character)+'">'
		displayString += '<<button "">><<run setup.playRandomVoiceClip('+i+')>><</button>>';
		displayString += '</span>'
		displayString += '\n'
	}

	return displayString;
}

setup.playRandomVoiceClip = function(index)
{
	let testVoices = setup.TestVoices;

	setup.stopTestVoices();

	var randomAList = SimpleAudio.lists.get(testVoices[index]);
	randomAList.shuffle(true);
	randomAList.loop(false);
	randomAList.volume(State.variables.VolumeControls.voices.volume);
	randomAList.play();

}

setup.stopTestVoices = function()
{
	let testVoices = setup.TestVoices;

	for(let i = 0; i < testVoices.length; ++i)
	{
		var aList = SimpleAudio.lists.get(testVoices[i]);
		aList.stop();
	}	
}

setup.getSpentLimitBreaks = function()
{
	let cap = State.variables.CharacterSheet_Player.info.limitBreaks.cap;
	let count = 0;

	for(var propertyName in cap)
	{
		count += cap[propertyName];
	}

	return count;
}

setup.applyModifyMetabolism = function(character, params)
{
	character.info.limitBreaks = params;

	//update for lowered caps
	setup.addToBaseStatValue(character, "muscles", 0);
	setup.addToBaseStatValue(character, "height", 0);
	setup.addToBaseStatValue(character, "cock", 0);
	setup.addToBaseStatValue(character, "balls", 0);
}

setup.getStatSizeCap = function(stat, limit)
{
	let musclesCap = [30, 50, 80, 120, 200, 300, 500, 1000]
	let heightCap = [12 * 7.5, 12 * 9, 12 * 12, 12 * 15.5, 12 * 20, 12 * 32, 12 * 60, 12 * 102]

	let cap = 8;
	let overCap = limit >= cap;
	let multiplierExponent = 0;

	if(overCap == true)
	{
		multiplierExponent = (limit + 1) - cap;
	}

	let value = 0;

	switch (stat) {
		case "muscles":
			value = musclesCap[Math.min(cap - 1, limit)]
			break;
		case "height":
			value = heightCap[Math.min(cap - 1, limit)]
			break;
		case "cock":
			value = heightCap[Math.min(cap - 1, limit)] / 11
			break;
		case "balls":
			value = heightCap[Math.min(cap - 1, limit)] / 11 / 3
			break;
		default:
			break;
	}

	value *= Math.pow(2, multiplierExponent);

	return value;
}

setup.onClickMetabolismChange = function(link, script)
{
	let displayString = "";

	displayString += "<<link "+link+">>";
	displayString += '<<replace "#ModifyMetabolismContent">>';
	displayString += '<<nobr>>';
	displayString += '<<run '+script+'>>';
	displayString += '<</nobr>>';
	displayString += '<<include Modify_Metabolism_LimitBreak_Show>>';
	displayString += '<</replace>>';
	displayString += '<</link>>';

	return displayString;
}

setup.applyStoryContainer = function()
{
    // `element` is the element you want to wrap
    var story = document.getElementById("story")
    var parent = story.parentNode;
    var wrapper = document.createElement('div');
    wrapper.setAttribute("id","StoryContainer");

    // set the wrapper as child (instead of the element)
    parent.replaceChild(wrapper, story);
    // set element as child of wrapper
    wrapper.appendChild(story);
}

setup.getOvergrowthToEssence = function()
{
	var overgrowth = State.variables.CharacterSheet_Player.info.overgrowth;
	let baseMultiplier = 0.3;

	let essence = 0;

	essence += Math.ceil(overgrowth.balls * baseMultiplier);
	essence += Math.ceil(overgrowth.cock * 0.3 * baseMultiplier);
	essence += Math.ceil(overgrowth.height * 0.027 * baseMultiplier);
	essence += overgrowth.muscles
5
	return essence;
}

setup.convertOvergrowthToEssence = function()
{
	State.variables.Essence += setup.getOvergrowthToEssence();

	var overgrowth = State.variables.CharacterSheet_Player.info.overgrowth;

	overgrowth.balls = 0;
	overgrowth.cock = 0;
	overgrowth.height = 0;
	overgrowth.muscles = 0;
}
/* twine-user-script #28: "abilityData.js" */
setup.AchievementState =
{
    DISABLED: 0,
    IDLE: 1,
    COMPLETE: 2,
    ACTIVATED: 3,
}

setup.AbilityDataFactory =
{
    createAbilityData : function(param)
    {
        var newAbilityData = {};
        newAbilityData.id = param.id;
        newAbilityData.index = param.index;
        newAbilityData.name = param.name;
        newAbilityData.description = param.description;
        newAbilityData.maxRank = param.maxRank;

        newAbilityData.unlockableFromLevelScreen = false;
        newAbilityData.isGlobalAbility = false;
        newAbilityData.isAchievement = false;
        newAbilityData.startBehaviourInstructions = [];
        newAbilityData.updateBehaviourInstructions = [];
        newAbilityData.endBehaviourInstructions = [];
        newAbilityData.removeBehaviourInstructions = [];
        newAbilityData.category = setup.AbilityCategory.NONE;
        newAbilityData.setCategory = function(category)
        {
            this.category = category;
        }
        newAbilityData.filter = setup.AbilityFilter.POWER;
        newAbilityData.setFilter = function(filter)
        {
            this.filter = filter;
        }

        newAbilityData.grade = setup.AbilityGrade.MEDIUM;
        newAbilityData.setGrade = function(grade)
        {
            this.grade = grade;
        }

        newAbilityData.achievementInfo = "";

        newAbilityData.upgradeDescription = "";
        newAbilityData.upgradeConditionFunction = function()
        {
            return false;
        }
        newAbilityData.unlockCondition = function()
        {
            return false;
        }
        newAbilityData.nextAbility = undefined;

        var idRegex = /(.*)_\d|(.*)\b/g;
        var match = idRegex.exec(param.id);
        
        if(match[1] != undefined)
        {
            newAbilityData.baseID = match[1];
        }
        else
        {
            newAbilityData.baseID = match[0];
        }

        newAbilityData.setUpgrade = function(upgradeConditionFunction, nextAbility, upgradeDescription = "")
        {
            this.upgradeConditionFunction = upgradeConditionFunction;
            this.upgradeDescription = upgradeDescription;

            this.nextAbilityID = nextAbility.id;
        }
    
        newAbilityData.setUnlockableFromLevelScreen = function(unlockableFromLevelScreen)
        {
            this.unlockableFromLevelScreen = unlockableFromLevelScreen;
            setup.UnlockableAbilityList.push(setup[this.baseID]);
        }
    
        newAbilityData.setAsGlobalAbility = function()
        {
            this.isGlobalAbility = true;
            setup.GlobalAbilities.push(setup[this.id]);
        }
    
        newAbilityData.setUnlockCondition = function(unlockCondition)
        {
            this.unlockCondition = unlockCondition;
        }
    
        newAbilityData.addBehaviour = function(phase, triggers, triggerFunction){
            var instruction = {};
            instruction["triggers"] = triggers;
            instruction["triggerFunction"]  = triggerFunction;
            switch(phase) {
                case "start":
                    this.startBehaviourInstructions.push(instruction);
                    break;
                case "update":
                    this.updateBehaviourInstructions.push(instruction);
                    break;
                case "end":
                    this.endBehaviourInstructions.push(instruction);
                    break;
                case "remove":
                    this.removeBehaviourInstructions.push(instruction);
                    break;
            }
        }

        if(setup.AbilityIndexCache[newAbilityData.id] == undefined)
        {
            console.log("adding cache " + newAbilityData.id)
            setup.AbilityIndexCache[newAbilityData.id] = setup.AbilityIDCache.length;
            setup.AbilityIDCache.push(newAbilityData.id);
        }

        return newAbilityData;
    }    
}
/* twine-user-script #29: "abilityHandler.js" */
setup.AbilityHandlerFactory =
{
    createAbilityHandler : function(param)
    {
        var newAbilityHandler = {};
        newAbilityHandler.abilityRuntimeDatas = [];
        newAbilityHandler.ownerID = param.ownerID;

        newAbilityHandler.broadcastAbilityTrigger = function(abilityParams)
        {
            var displayString = "";
    
            for(let i = 0; i < this.abilityRuntimeDatas.length; i++)
            {
                let ability = setup.getAbilityByIndex(this.abilityRuntimeDatas[i].abilityDataIndex);

                var handledAbilityTrigger = this.handleAbilityTrigger(this.abilityRuntimeDatas[i], abilityParams);
                if (handledAbilityTrigger != "undefined" && handledAbilityTrigger != "" && handledAbilityTrigger != undefined)
                {
                    let abilitytext = ""+State.variables[this.ownerID].info.name + ""+ability.name+"" + handledAbilityTrigger
                    displayString += abilitytext;
                    displayString += "\n";
                }
            }
    
            return displayString;
        }

        newAbilityHandler.runBehaviour = function(abilityRuntimeData, abilityParams, behaviourInstructions, phase)
        {
            var behaviourInstructionsLength = behaviourInstructions.length;
            var displayString = "";

            console.log("asddsddddddd")

            if (behaviourInstructionsLength != 0)
            {
                for (var index = 0; index < behaviourInstructionsLength; ++index) {
                    var behaviourTriggers = behaviourInstructions[index].triggers;

                    if ((behaviourTriggers & abilityParams.trigger) == abilityParams.trigger){
                        switch(phase){
                            case "start":
                                abilityRuntimeData.isActive = true;
                                abilityRuntimeData.modifier = setup.ModifierFactory.createModifier(
                                {
                                    abilityIndex: abilityRuntimeData.abilityDataIndex
                                });
                                break;
                            case "update":
                                break;
                            case "end":
                                break;
                            case "remove":
                                break;
                        }

                        var behaviourFunction = behaviourInstructions[index].triggerFunction;
                        if (behaviourFunction != undefined){
                            displayString += behaviourInstructions[index].triggerFunction(abilityRuntimeData, abilityParams);
                        }

                        switch(phase){
                            case "start":
                                break;
                            case "update":
                                break;
                            case "end":
                                abilityRuntimeData.isActive = false;
                                break;
                            case "remove":
                                abilityParams.self.removeAbilityRuntimeData(setup.getAbilityByIndex(abilityRuntimeData.abilityDataIndex))
                                break;
                        }

                        if(abilityRuntimeData.isScheduledForRemoval == true)
                        {
                            abilityRuntimeData.isScheduledForRemoval = undefined;
                            abilityParams.self.removeAbilityRuntimeData(setup.getAbilityByIndex(abilityRuntimeData.abilityDataIndex))
                        }
                        break;
                    }
                }
            }
            return displayString;
        }

        newAbilityHandler.handleAbilityTrigger = function(abilityRuntimeData, abilityParams)
        {
            var displayString = "";

            let ability = setup.getAbilityByIndex(abilityRuntimeData.abilityDataIndex);

            switch (abilityRuntimeData.isActive){
                case true:
                    displayString += this.runBehaviour(
                        abilityRuntimeData,
                        abilityParams,
                        ability.updateBehaviourInstructions,
                        "update"
                    )

                    displayString += this.runBehaviour(
                        abilityRuntimeData,
                        abilityParams,
                        ability.endBehaviourInstructions,
                        "end"
                    )
                    break;
                case false:
                    displayString += this.runBehaviour(
                        abilityRuntimeData,
                        abilityParams,
                        ability.startBehaviourInstructions,
                        "start"
                    )

                    displayString += this.runBehaviour(
                        abilityRuntimeData,
                        abilityParams,
                        ability.updateBehaviourInstructions,
                        "update"
                    )
                    break;
            }

            displayString += this.runBehaviour(
                abilityRuntimeData,
                abilityParams,
                ability.removeBehaviourInstructions,
                "remove"
            )

            return displayString;
        }

        newAbilityHandler.checkAbilityRuntimeDataExists = function(abilityID, abilityRank=undefined, includeInactive)
        {
            for(let i =0; i < this.abilityRuntimeDatas.length; ++i)
            {
                let ability = setup.getAbilityByIndex(this.abilityRuntimeDatas[i].abilityDataIndex);
                
                if(ability.id == abilityID)
                {
                    if (abilityRank != undefined)
                    {
                        if(this.abilityRuntimeDatas[i].rank == abilityRank)
                        {
                            if(includeInactive == true)
                            {
                                return true;
                            }
                            else
                            {
                                return this.abilityRuntimeDatas[i].isActive;
                            }
                            
                        } 
                        else 
                        {
                            return false;
                        }
                    } 
                    else 
                    {
                        if(includeInactive)
                        {
                            return true;
                        }
                        else
                        {
                            return this.abilityRuntimeDatas[i].isActive;
                        }
                    }
                }
            }
            return false;
        }

        newAbilityHandler.removeAbilityRuntimeData = function(abilityData)
        {
            for(let i =0; i < this.abilityRuntimeDatas.length; ++i)
            {
                let ability = setup.getAbilityByIndex(this.abilityRuntimeDatas[i].abilityDataIndex);
                
                if(ability.baseID == abilityData.baseID)
                {
                    this.abilityRuntimeDatas.splice(i,1);
                    break;
                }
            }
        }

        newAbilityHandler.applyAbilityRuntimeData = function(abilityData, blackboard)
        {
            console.log("applyAbilityRuntimeData")
            console.log(abilityData)
            
            var runtimeData;
            var character = State.variables[this.ownerID];
            let learned = false;
            let applied = false;
    
            var baseID = abilityData.baseID;
            
            //check if already learned, try to level it up in that case
            for(let i = 0; i < this.abilityRuntimeDatas.length; ++i)
            {
                let ability = setup.getAbilityByIndex(this.abilityRuntimeDatas[i].abilityDataIndex);
                if(ability.baseID == baseID)
                {
                    learned = true;
                    if(ability.upgradeConditionFunction(this.abilityRuntimeDatas[i], character))
                    {
                        if(blackboard != undefined)
                        {
                            this.abilityRuntimeDatas[i] = setup.AbilityRuntimeDataFactory.createAbilityRuntimeData({
                                abilityData: setup[ability.nextAbilityID],
                                blackboard: blackboard,
                            });
                        }
                        else
                        {
                            this.abilityRuntimeDatas[i] = setup.AbilityRuntimeDataFactory.createAbilityRuntimeData({
                                abilityData: setup[ability.nextAbilityID],
                            });
                        }

    
                        runtimeData = this.abilityRuntimeDatas[i];
                        applied = true;
                    }else if(setup.canRank(this.abilityRuntimeDatas[i])){
                        setup.addRank(this.abilityRuntimeDatas[i]);
                        runtimeData = this.abilityRuntimeDatas[i];
                        applied = true;
                    }
                }
            }
    
            if(!learned)
            {
                if(blackboard != undefined)
                {
                    runtimeData = setup.AbilityRuntimeDataFactory.createAbilityRuntimeData({
                        abilityData: abilityData,
                        blackboard: blackboard,
                    });
                }
                else
                {
                    runtimeData = setup.AbilityRuntimeDataFactory.createAbilityRuntimeData({
                        abilityData: abilityData,
                    });
                }

                this.abilityRuntimeDatas.push(runtimeData);
                applied = true;
            }
    
            if(applied)
            {
                var params = 
                {
                    trigger: setup.AbilityTrigger.ON_ACQUIRE,
                    self: character,
                }
                this.handleAbilityTrigger(runtimeData, params);
            }
        }

        newAbilityHandler.clearAllAbilityRuntimeData = function()
        {
            this.abilityRuntimeDatas = [];
        }

        newAbilityHandler.copyAllAbilityRuntimeData = function(character)
        {
            console.log("copyAllAbilityRuntimeData")

            for(let i = 0; i < character.abilityHandler.abilityRuntimeDatas.length; ++i)
            {
                let ability = setup.getAbilityByIndex(character.abilityHandler.abilityRuntimeDatas[i].abilityDataIndex);
                
                if(ability.id == "Ability_EchoForm")
                    continue;

                if(ability.id == "Ability_HostOfEcho")
                    continue;

                if(ability.id == "Ability_VampiricLust")
                    continue;

                if(ability.id == "Ability_CodexPassion")
                    continue;
                
                this.applyAbilityRuntimeData(ability);
            }
        }

        return newAbilityHandler;
    }
}
/* twine-user-script #30: "abilityRuntimeData.js" */
setup.AbilityRuntimeDataFactory =
{
    createAbilityRuntimeData : function(param)
    {
        console.log("createAbilityRuntimeData")
        console.log(setup.AbilityIndexCache[param.abilityData.id])
        var newAbilityRuntimeData = {};
        newAbilityRuntimeData.abilityDataIndex = setup.AbilityIndexCache[param.abilityData.id];

        if(param.blackboard != undefined)
        {
            newAbilityRuntimeData.blackboard = param.blackboard;
        }

        newAbilityRuntimeData.isActive = false;

        if(param.abilityData.isAchievement == true)
        {
            newAbilityRuntimeData.achivemementState = setup.AchievementState.IDLE;
        }
        
        newAbilityRuntimeData.rank = 1;
        newAbilityRuntimeData.modifier = setup.ModifierFactory.createModifier(
            {
                abilityIndex: newAbilityRuntimeData.abilityDataIndex
            });
        newAbilityRuntimeData.seen = false;

        return newAbilityRuntimeData;
    }    
}
/* twine-user-script #31: "characterClass.js" */
setup.CharacterFactory =
{
    createCharacter : function(param)
    {
        var newCharacter = {};
        newCharacter.id = param.id;
        newCharacter.info = param.info;
        newCharacter.symbiote = param.symbiote;     
        newCharacter.fight = param.fight;
        newCharacter.quest = param.quest;
        newCharacter.text = param.text;   

        if(!setup.allCharacters.includes(param.id))
        {
            setup.allCharacters.push(param.id);
        }
        
        newCharacter.createFlavourEvent = function(eventName){
            var textSheet = setup[this.text];
            if(this.text[eventName] == undefined)
            {
                this.text[eventName] = {};
            }
        }

        newCharacter.addHeightFlavourText = function(eventName, sizeLevel, flavourText)
        {
            var sizeKey = ""
            switch(sizeLevel){
                case 1:
                    sizeKey = "small";
                    break;
                case 2:
                    sizeKey = "medium";
                    break;
                case 3:
                    sizeKey = "large";
                    break;
                case 4:
                    sizeKey = "huge";
                    break;
            }

            this.createFlavourEvent(eventName)

            if(this.text[eventName]['heightFlavour'] == undefined)
            {
                var innerDict = {
                    "small": [],
                    "medium": [],
                    "large": [],
                    "huge": []
                }
                innerDict[sizeKey] = [flavourText]
                this.text[eventName]['heightFlavour'] = innerDict
            }else{
                this.text[eventName]['heightFlavour'][sizeKey].push(flavourText)
            }
        }

        newCharacter.addCorruptionFlavourText = function(eventName, corruptionLevel, flavourText)
        {
            var corruptionKey = ""
            switch(corruptionLevel){
                case 1:
                    corruptionKey = "corrupt25";
                    break;
                case 2:
                    corruptionKey = "corrupt50";
                    break;
                case 3:
                    corruptionKey = "corrupt75";
                    break;
                case 4:
                    corruptionKey = "corrupt100";
                    break;
            }

            this.createFlavourEvent(eventName)

            if(this.text[eventName]['corruptionFlavour'] == undefined)
            {
                var innerDict = {
                    "corrupt25": [],
                    "corrupt50": [],
                    "corrupt75": [],
                    "corrupt100": []
                }
                innerDict[corruptionKey] = [flavourText]
                this.text[eventName]['corruptionFlavour'] = innerDict
            }else{
                this.text[eventName]['corruptionFlavour'][corruptionKey].push(flavourText)
            }

        }

        newCharacter.hasAbility = function(abilityID, abilityRank=undefined, includeInactive)
        {
            return this.abilityHandler.checkAbilityRuntimeDataExists(abilityID, abilityRank, includeInactive)
        }

        newCharacter.broadcastAbilityTrigger = function(abilityParams)
        {
            return this.abilityHandler.broadcastAbilityTrigger(abilityParams);
        };

        newCharacter.removeAbilityRuntimeData = function(abilityData)
        {
            console.log("applyAbilityRuntimeData")
            console.log(abilityData)
            this.abilityHandler.removeAbilityRuntimeData(abilityData);
        }

        newCharacter.applyAbilityRuntimeData = function(abilityData, blackboard)
        {
            console.log("applyAbilityRuntimeData")
            console.log(abilityData)
            this.abilityHandler.applyAbilityRuntimeData(abilityData, blackboard);
        }

        //sad hack because ability handler init will read for the character variable in State.variables directly
        State.variables[param.id] = newCharacter;

        var abilityHandlerParam = 
        {
            ownerID: param.id,
        };

        newCharacter.abilityHandler = setup.AbilityHandlerFactory.createAbilityHandler(abilityHandlerParam);

        for(let i = 0; i < setup.GlobalAbilities.length; i++)
        {
            newCharacter.applyAbilityRuntimeData(setup.GlobalAbilities[i])
        }

        return newCharacter;
    },
}
/* twine-user-script #32: "modifier.js" */

setup.setModifierCorruptionMods = function(modifier, mods)
{
    modifier.corruptionMods = mods;
    
    setup.updateStaticCorruptionUI(State.variables.CharacterSheet_Player);
}

setup.ModifierFactory = 
{
    createModifier : function(param)
    {
        var newModifier = {};
        newModifier.abilityIndex = param.abilityIndex;

        return newModifier;
    }
}
/* twine-user-script #33: "DescriptionHelper.js" */

setup.autoCap = function(str)
{
	var strArr = str.split(/([\.\?\!])/);
	var retStr = "";
	strArr.forEach((sentence) => {
		// Capitalize the first letter of each sentence.
		var index = sentence.search(/[A-Za-z]/);
		if (index >= 0) {
			retStr += sentence.slice(0,index) + sentence.charAt(index).toUpperCase() + sentence.slice(index + 1);
		}
		else {
			retStr += sentence;		
		}
	});
	return retStr;
}

setup.displayStatValue = function(character, statName, asLength = false, useDoubleLineBreak = false)
{
	var statValue = setup.getStatValue(character, statName);
    var statInfo = setup.getStatModifierPropertyName(statName);
    
    var tooltipStrings = [];
    var runtimeAbilityDatas = character.abilityHandler.abilityRuntimeDatas;
    for(i = 0; i < runtimeAbilityDatas.length; i++)
	{
        if(runtimeAbilityDatas[i].modifier[statInfo.modifierProperty] != undefined)
        {
            if(!runtimeAbilityDatas[i].isActive)
                continue;
            var rankString = setup.displayRankText(runtimeAbilityDatas[i]);

			let ability = setup.getAbilityByIndex(runtimeAbilityDatas[i].abilityDataIndex);

            tooltipStrings.push(
                setup.displayModifierText(runtimeAbilityDatas[i].modifier[statInfo.modifierProperty], 
                    ability.name + rankString + ":", 
                    asLength)
                );
        }
    }

    var displayString = "";
    
    if(tooltipStrings.length > 0)
    {
        displayString +="<span class='tooltip' id=";
        if(statValue - setup.getStatValueNoModifiers(character, statName) < 0)
        {
            displayString += "'StatModifierNegative'";
        }
        else
        {
            displayString += "'StatModifierPositive'";
        }

        displayString += ">";
    }
            
    if(asLength)
    {
        displayString += setup.getLength(statValue);
    }
    else
    {
		if(statValue > 1000000000000)
		{
			displayString += (statValue / 1000000000000).toFixed(0).replace(/\.00$/, '') + "b";
		}
		else if(statValue > 1000000000)
		{
			displayString += (statValue / 1000000000).toFixed(0).replace(/\.00$/, '') + "m";
		}
		else if(statValue > 1000000)
		{
			displayString += (statValue / 1000000).toFixed(0).replace(/\.00$/, '') + "k";
		}
		else
		{
			displayString += statValue.toFixed(2).replace(/\.00$/, '');
		}
    }
            
    if(tooltipStrings.length > 0)
    {

		displayString += "<span class='tooltipContainer'>";
		displayString += "<span class='tooltiptext'>";  
    
        var i;
        for(i = 0; i < tooltipStrings.length; i++)
        {
            displayString += tooltipStrings[i];

            if(useDoubleLineBreak)
            {
                displayString += "\\n"
            }
            else
            {
                displayString += "\n"
            }
        }
        
        displayString += "</span>";
        displayString += "</span>";

        displayString += "</span>";
    }

	return displayString;
};

setup.getRaceLimbDescriptor = function(limb, name=toString(limb), namePlural=toString(limb))
{
	var displayString = "";
	if (limb)
	{
		displayString += setup.englishNumbers[limb.defaultNumber] + " " 
						 + (limb.raceTexture ? limb.raceTexture.random() + " " : "")
						 + (limb.defaultNumber > 1 ? namePlural : name);
	}
	return displayString;
}

setup.renderGraph = function()
{
	var allEncounters = setup.allCharacters

	var sizeDict = {}
	for(var encounterIndex in allEncounters)
	{
		var character = State.variables[allEncounters[encounterIndex]]
		sizeDict[character.info.name] = [
			setup.getStatValue(character, 'height'),
			setup.getCorruptBackgroundClass(character),
			setup.getLength(setup.getStatValue(character, "height")),
			character.quest.met
		]
	}

	var items = Object.keys(sizeDict).map(
		function(key) {
			return [key, sizeDict[key]];
		}
	);

	items.sort(
		function(first, second) {
			return second[1][0] - first[1][0];
		}
	);
	var max = items[0][1][0];

	var chartItems = "";

	function round2(x)
	{
		return Math.ceil(x/2)*2;
	}

	for(let i = 0; i < items.length; i++)
	{
		if (items[i][1][3] == true){
			var normalisedSize = round2((items[i][1][0]/max)*100)
			var nameText = '<span style="color:#99C8E2">' + items[i][0] + '</span><span>: (' + items[i][1][2] + ')</span>'
			chartItems += nameText + '<li class="chart-bar ' + items[i][1][1] + '" data-skill="' + normalisedSize + '"></li>'
		}
	}

	var chart = '<ul class="chart-horizontal">' + chartItems + '</ul>';
	var displayString = "<div><h2>:</h2></div>"
	displayString += '<div><section class="chart-wrapper">' + chart + '</section></div>';
	return displayString;
}

setup.getRaceDescriptor = function(race)
{
	
	var displayString = setup.autoCap(race.description) + "\n";


	/* Only describe certain anatomy if it is non-standard */
	// This is a pretty hacky way to get plural and singular names of anatomy. Need to figure out a better way.
	// Doesn't even work for "Teeths"
	const limbArr = ["heads", "eyes", "jaws", "teeths", "hands", "tongues", "arms", "pecs", "abdominals", "legs", "wings", "horns", "tails"];
	var anatomyStr = "";
	limbArr.forEach(limbStr => {
		var limb = race[limbStr];
		if (limb != undefined
			&& ( setup.RacePoolObjects.DEFAULT[limbStr] == undefined
				|| limb.defaultNumber != setup.RacePoolObjects.DEFAULT[limbStr].defaultNumber))	
		{
			var singular;
			var plural;
			if (limbStr == "teeths"){
				singular = "tooth";
				plural = "teeth";
			}
			else {
				// Trim off the "s"
				singular = limbStr.slice(0,-1)
				plural = limbStr;
			}
			anatomyStr += setup.autoCap(setup.getRaceLimbDescriptor(limb, singular, plural)) + "\n";
		}	
	});

	if (anatomyStr.length > 0)
	{
		displayString += "\n" + anatomyStr;
	}

	/* males Section */
	displayString += "\n:\n";
	displayString += setup.autoCap(setup.getRaceLimbDescriptor(race.cocks, "", "")) +"\n";
	displayString += setup.autoCap(setup.getRaceLimbDescriptor(race.balls, "", "")) + "\n";

	return displayString;
}

setup.getMusclesDescriptorForValue = function(value)
{
	var displayString = "";

	if(value >= 5000)
	{
		displayString += "";
	}
	else if(value >= 3000)
	{
		displayString += "";
	}
	else if(value >= 2000)
	{
		displayString += "";
	}
	else if(value >= 1250)
	{
		displayString += "";
	}
	else if(value >= 800)
	{
		displayString += "";
	}
	else if(value >= 500)
	{
		displayString += "";
	}
	else if(value >= 300)
	{
		displayString += "";
	}
	else if(value >= 200)
	{
		displayString += "";
	}
	else if(value >= 100)
	{
		displayString += "";
	}
	else if(value >= 70)
	{
		displayString += "";
	}
	else if(value >= 30)
	{
		displayString += "";
	}
	else if(value >= 15)
	{
		displayString += "";
	}
	else
	{
		displayString += "";
	}

	return displayString;
}

setup.getMusclesDescriptor = function(character)
{
	var displayString = "";

	var value = setup.getMuscles(character);

	displayString += setup.getMusclesDescriptorForValue(value);

	return displayString;
}

setup.getLength = function(value)
{
	var displayString = "";
	var shownUnits = 2;

	if(State.variables.Measurement == setup.Units.METRIC)
	{
		var cm = Math.floor(value * 2.54);
		if(cm / 100000 >= 1 && shownUnits != 0)
		{
			var km = Math.floor(cm / 100000);
			cm -= km * 100000;
			
			if(km > 1000000000)
			{
				displayString += (km / 1000000000).toFxied(0).replace(/\.00$/, '') + "&nbsp;";
				shownUnits = 0
			}
			else if(km > 1000000)
			{
				displayString += (km / 1000000).toFixed(0).replace(/\.00$/, '') + "&nbsp;";
				shownUnits = 0;
			}
			else
			{
				displayString += km.toFixed(2).replace(/\.00$/, '') + "&nbsp;" ;
				shownUnits--;
			}
		}

		if(cm / 100 >= 1 && shownUnits != 0)
		{
            if(cm > 0)
            {
                var m = Math.floor(cm / 100);
                cm -= m * 100;
    
                displayString += m.toFixed(2).replace(/\.00$/, '') + "&nbsp;" ;
            }

			shownUnits--;
		}

		if(cm < 100 && shownUnits != 0)
		{
            if(cm > 0)
            {
                displayString += cm.toFixed(2).replace(/\.00$/, '') % 100+"";
            }

			shownUnits--;
		}
	}
	else
	{
		if(value / 63360 >= 1 && shownUnits != 0)
		{
			var miles = Math.floor(value / 63360);
			value -= miles * 63360;

			if(miles > 1000000000)
			{
				displayString += (miles / 1000000000).toFixed(0).replace(/\.00$/, '') + "&nbsp;";
				shownUnits = 0
			}
			else if(miles > 1000000)
			{
				displayString += (miles / 1000000).toFixed(0).replace(/\.00$/, '') + "&nbsp;";
				shownUnits = 0;
			}
			else
			{
				displayString += miles.toFixed(2).replace(/\.00$/, '') + "&nbsp;" ;
				shownUnits--;
			}
		}

		if(value / 12 >= 1 && shownUnits != 0)
		{
            if(value > 0)
            {
                var ft = Math.floor(value / 12);
                value -= ft * 12;
    
                displayString += ft.toFixed(2).replace(/\.00$/, '') + "&nbsp;";
            }

			shownUnits--;
		}

		if(value < 12 && shownUnits != 0)
		{
            if(value > 0)
            {
                displayString += (value % 12).toFixed(2).replace(/\.00$/, '') +"";
            }
            
			shownUnits--;
		}
	}

	return displayString;
};

setup.getHornsSize = function(character)
{
    return setup.getLength(Math.floor(setup.getStatValue(character, "height") / 7));
}

setup.getRandomColor = function()
{
    return setup.Colors.random();
}

setup.sizeNormalPersoncomparison = function(character)
{
	return setup.sizecomparison(setup.getStatValue(character, "height"), 72);
}

setup.sizeNormalPersoncomparisonCock = function(character)
{
	return setup.cockcomparison(setup.getStatValue(character, "cock"), 8);
}

setup.sizecomparisonCock = function(charA, charB)
{
	return setup.cockcomparison(setup.getStatValue(charA, "cock"), setup.getStatValue(charB, "cock"));
}

setup.sizecomparisonBalls = function(charA, charB)
{
	return setup.cockcomparison(setup.getStatValue(charA, "balls"), setup.getStatValue(charB, "balls"));
}

setup.sizeNormalPersoncomparisonMuscle = function(character)
{
	return setup.musclecomparison(setup.getStatValue(character, "muscles"), 30);
}

setup.sizecomparisonMuscle = function(charA, charB)
{
	return setup.musclecomparison(setup.getStatValue(charA, "muscles"), setup.getStatValue(charB, "muscles"));
}

setup.sizeCharactercomparison = function(charA, charB)
{
	return setup.sizecomparison(setup.getStatValue(charA, "height"), setup.getStatValue(charB, "height"));
}

setup.getMuscleGrowthSequenceText = function(character, pronoun="", minimal)
{
	var displayString = "";
	var muscleGrowthFlavourText = setup.getFlavourBasedDescription(character, "MuscleGrowthFlavourText");
	var muscleDescriptor = setup.getMusclesDescriptor(character);
	var muscleStatValue = setup.displayStatValue(character, "muscles");

	if(minimal != true)
	{
		displayString += pronoun + " " + muscleGrowthFlavourText + " \n\n";
	}
	
	displayString += pronoun + "! " + muscleDescriptor + "(" + muscleStatValue + ")";
	return displayString;
}

setup.getFlavourBasedDescription = function(character, eventKey, minFlavourAmount=4, comparingCharacter=undefined, useSymbiote=false)
{
	var descriptorObjectArray = [];
	var specificDescriptors = undefined;
	var gender = undefined;

	var textSheet = setup[character['text']];
	if(textSheet != undefined)
	{
		var eventValue = textSheet[eventKey];
		if(eventValue != undefined)
		{
			specificDescriptors = eventValue;
		}
	}

	if(specificDescriptors != undefined)
	{
		descriptorObjectArray = specificDescriptors;
	}

	var univesalFlavourObject = setup.UniversalFlavour;

	var universalFlavourObjects = univesalFlavourObject[eventKey];

	if(universalFlavourObjects != undefined)
	{
		//fill descriptors from the universal list if we are missing some.

		for(var flavourObjectpropertyName in universalFlavourObjects)
		{
			if(descriptorObjectArray[flavourObjectpropertyName] == undefined)
			{
				descriptorObjectArray[flavourObjectpropertyName] = {};
			}

			//Overkill since we'll still parse the category we want later lmao, I'm sure this is dumb but it's 2AM.
			for(var flavourObjectCategoryName in universalFlavourObjects[flavourObjectpropertyName])
			{
				if(descriptorObjectArray[flavourObjectpropertyName][flavourObjectCategoryName] == undefined)
				{
					descriptorObjectArray[flavourObjectpropertyName][flavourObjectCategoryName] = [];
				}
				
				var universalFlavourValueCopy = [...universalFlavourObjects[flavourObjectpropertyName][flavourObjectCategoryName]];
				while(descriptorObjectArray[flavourObjectpropertyName][flavourObjectCategoryName].length < minFlavourAmount && universalFlavourValueCopy.length > 0)
				{
					var flavour = universalFlavourValueCopy.random();

					descriptorObjectArray[flavourObjectpropertyName][flavourObjectCategoryName].push(flavour);

					let spliceIndex = universalFlavourValueCopy.indexOf(flavour);
					universalFlavourValueCopy.splice(spliceIndex, 1);
				}
			}
		}
	}

	let displayString = "";

	for(var propertyName in descriptorObjectArray)
	{
		//build a sequence of randomly picked flavour text from all available types

		let flavourTextList = undefined;
		switch(propertyName)
		{
			case "heightFlavour":
				flavourTextList = setup.getEventValueHeight(character, comparingCharacter, descriptorObjectArray[propertyName]);
				break;
			case "corruptionFlavour":
				flavourTextList = setup.getEventValueCorruption(character, descriptorObjectArray[propertyName]);
				break;
			case "musclesFlavour":
				flavourTextList = setup.getEventValueMuscle(character, comparingCharacter, descriptorObjectArray[propertyName]);
				break;
			case "cockSizeFlavour":
				flavourTextList = setup.getEventValueCockSize(character, undefined, descriptorObjectArray[propertyName]);
				break;
		}

		if(flavourTextList != undefined)
		{
			var flavourPassage = Story.get(flavourTextList.random());
			if(flavourPassage != undefined)
			{
				displayString += setup.processFlavours(character, flavourPassage.text + " ", useSymbiote);
			}
		}
	}
	
	return displayString;
}

setup.getEventValueCorruption = function(character, eventValue)
{
	var arr = undefined;
	var corruptionComparitors = setup.CorruptionComparators;
	var	corruption = setup.getStatValue(character, "corruption");
	
	if(corruption <= corruptionComparitors.PURE){
		arr = eventValue['corrupt25'];
	}else if(corruption <= corruptionComparitors.NEUTRAL){
		arr = eventValue['corrupt50'];
	}else if(corruption <= corruptionComparitors.TAINTED){
		arr = eventValue['corrupt75'];
	}else if(corruption >= corruptionComparitors.TAINTED){
		arr = eventValue['corrupt100'];
	}

	return arr
}

setup.getEventValueHeight = function(character, comparingCharacter, eventValue)
{
	var arr = undefined;
	var size = undefined;
	var comparators = setup.Comparators;

	if(comparingCharacter == undefined){
		size = setup.sizeNormalPersoncomparison(character);
	}else{
		size = setup.sizeCharactercomparison(character, comparingCharacter);
    }
	
	if(size <= comparators.SLIGHTLY_BIGGER){
		arr = eventValue['small'];
	}else if(size <= comparators.REACHES_WAIST){
		arr = eventValue['medium'];
	}else if(size <= comparators.FITS_ON_HAND){
		arr = eventValue['large'];
	}else if(size >= comparators.FITS_ON_HAND){
		arr = eventValue['huge'];
	}
	return arr
}

setup.getEventValueMuscle = function(character, comparingCharacter, eventValue)
{
	var arr = undefined;
	var size = undefined;
	var muscleComparators = setup.MuscleComparators;

	if(comparingCharacter == undefined){
		size = setup.sizeNormalPersoncomparisonMuscle(character);
	}else{
		size = setup.sizecomparisonMuscle(character, comparingCharacter);
	}

	if(size <= muscleComparators.EQUAL){
		arr = eventValue['small'];
	}else if(size <= muscleComparators.DWARFING){
		arr = eventValue['medium'];
	}else if(size <= muscleComparators.MACRO){
		arr = eventValue['large'];
	}else if(size >= muscleComparators.MACRO){
		arr = eventValue['huge'];
	}
	return arr
}

setup.getEventValueCockSize = function(character, comparingCharacter, eventValue)
{
	var arr = undefined;
	var size = undefined;
	var comparators = setup.CockComparators;

	if(comparingCharacter == undefined){
		size = setup.sizeNormalPersoncomparisonCock(character);
	}else{
		size = setup.sizecomparisonCock(character, comparingCharacter);
	}

	if(size <= comparators.MUCH_BIGGER){
		arr = eventValue['small'];
	}else if(size <= comparators.MASSIVE){
		arr = eventValue['medium'];
	}else if(size <= comparators.MACRO){
		arr = eventValue['large'];
	}else if(size >= comparators.MACRO){
		arr = eventValue['huge'];
	}
	return arr
}

setup.musclecomparison = function(a, b)
{
	var sizeRatio = a / b;
	var comparators = setup.MuscleComparators;
	
	if(sizeRatio > 14)
	{
		return comparators.GIGA;
	}
	else if(sizeRatio > 8)
	{
		return comparators.MACRO;
	}
	else if(sizeRatio > 4.25)
	{
		return comparators.GIANT;
	}
	else if(sizeRatio > 1.8)
	{
		return comparators.DWARFING;
	}
	else if(sizeRatio > 1.4)
	{
		return comparators.MUCH_BIGGER;
	}
	else if(sizeRatio > 1.15)
	{
		return comparators.BIGGER;
	}
	else if(sizeRatio > 1.05)
	{
		return comparators.SLIGHTLY_BIGGER;
	}
	else if(sizeRatio > 0.95)
	{
		return comparators.EQUAL;
	}
	else if(sizeRatio > 0.85)
	{
		return comparators.SLIGHTLY_SMALLER;
	}
	else if(sizeRatio > 0.7)
	{
		return comparators.SMALLER;
	}
	else if(sizeRatio > 0.5)
	{
		return comparators.MUCH_SMALLER;
	}
	else if(sizeRatio > 0.1)
	{
		return comparators.MICRO_TO;
	}
}

setup.sizecomparison = function(a, b)
{
	var sizeRatio = a / b;
	var comparators = setup.Comparators;
	
	if(sizeRatio > 14)
	{
		return comparators.FITS_ON_FINGER;
	}
	else if(sizeRatio > 8)
	{
		return comparators.FITS_ON_HAND;
	}
	else if(sizeRatio > 4.25)
	{
		return comparators.REACHES_KNEES;
	}
	else if(sizeRatio > 1.8)
	{
		return comparators.REACHES_WAIST;
	}
	else if(sizeRatio > 1.4)
	{
		return comparators.MUCH_BIGGER;
	}
	else if(sizeRatio > 1.15)
	{
		return comparators.BIGGER;
	}
	else if(sizeRatio > 1.05)
	{
		return comparators.SLIGHTLY_BIGGER;
	}
	else if(sizeRatio > 0.95)
	{
		return comparators.EQUAL;
	}
	else if(sizeRatio > 0.85)
	{
		return comparators.SLIGHTLY_SMALLER;
	}
	else if(sizeRatio > 0.7)
	{
		return comparators.SMALLER;
	}
	else if(sizeRatio > 0.5)
	{
		return comparators.MUCH_SMALLER;
	}
	else if(sizeRatio > 0.1)
	{
		return comparators.MICRO_TO;
	}
}

setup.cockcomparison = function(a, b)
{
	var sizeRatio = a / b;
	var comparators = setup.CockComparators;
	
	if(sizeRatio > 13)
	{
		return comparators.GIGA;
	}
	else if(sizeRatio > 8)
	{
		return comparators.MACRO;
	}
	else if(sizeRatio > 4.25)
	{
		return comparators.HYPER;
	}
	else if(sizeRatio > 2.8)
	{
		return comparators.MASSIVE;
	}
	else if(sizeRatio > 1.4)
	{
		return comparators.MUCH_BIGGER;
	}
	else if(sizeRatio > 1.15)
	{
		return comparators.BIGGER;
	}
	else if(sizeRatio > 1.05)
	{
		return comparators.SLIGHTLY_BIGGER;
	}
	else if(sizeRatio > 0.95)
	{
		return comparators.EQUAL;
	}
	else if(sizeRatio > 0.85)
	{
		return comparators.SLIGHTLY_SMALLER;
	}
	else if(sizeRatio > 0.7)
	{
		return comparators.SMALLER;
	}
	else if(sizeRatio > 0.5)
	{
		return comparators.MUCH_SMALLER;
	}
	else if(sizeRatio > 0.1)
	{
		return comparators.MICRO_TO;
	}
}

setup.getcockToBodyRatio = function(character)
{
	var height = setup.getStatValue(character, 'height');
	var cock = setup.getStatValue(character, 'cock');

	return cock / height;
}

setup.getCurrentBodyVisual = function(character)
{
	var bodyVisual = setup[character.info.bodyVisual];

	for(var propertyName in bodyVisual.bodyList)
	{
		if(bodyVisual.bodyList[propertyName].condition(character) == true)
		{
			return propertyName;
		}
	}
}

setup.getCurrentCockVisual = function(character)
{
	var bodyVisual = setup[character.info.bodyVisual];
	var permittedCocks = bodyVisual.bodyList[setup.getCurrentBodyVisual(character)].permittedCocks;

	for(let i = 0; i < permittedCocks.length; ++i)
	{
		if(permittedCocks[i].condition(character) == true)
		{
			return permittedCocks[i].cock;
		}
	}
}

setup.setAndDisplayBodyVisual = function(character, emote, useCum)
{
	var bodyVisual = setup[character.info.bodyVisual];

	if(emote != undefined)
	{
		character.info.currentEmote = bodyVisual.emoteList[emote];
	}

	let currentEmote = character.info.currentEmote;
	let currentBody = "";
	let currentCock = "";
	let headClass = "";
	let cockClass = "";

	//set body by size
	if(bodyVisual != undefined)
	{
		if(bodyVisual.bodyList != undefined)
		{
			for(var bodyProperty in bodyVisual.bodyList)
			{
				if(bodyVisual.bodyList[bodyProperty].condition(character) == true)
				{
					currentBody = bodyVisual.bodyList[bodyProperty];
					headClass = bodyVisual.bodyList[bodyProperty].headClass;
					
					//get our associated limbs
					for(let i = 0; i < bodyVisual.bodyList[bodyProperty].permittedCocks.length; ++i)
					{
						if(bodyVisual.bodyList[bodyProperty].permittedCocks[i].condition(character) == true)
						{
							currentCock = bodyVisual.cockList[bodyVisual.bodyList[bodyProperty].permittedCocks[i].cock];
							cockClass = bodyVisual.bodyList[bodyProperty].permittedCocks[i].cockClass;

							break;
						}
					}

					break;
				}
			}
		}
	}

	var displayString = '<div class="BodyVisualEnemyImage '+character.id+'">';

	if(useCum == true && currentBody.cumVisual != undefined)
	{
		displayString += '<div class="BodyCumClass">';
		displayString += '<img src="'+currentBody.cumVisual+'">';
		displayString += '</div>';
	}

	if(currentEmote != undefined)
	{
		var corruption = setup.getStatValue(character, "corruption");

		displayString += '<div class="'+headClass+'">';

		if(corruption >= 150 && currentEmote.corruptedVisual != undefined)
		{
			displayString += '<img src="'+currentEmote.corruptedVisual+'">';
		}
		else
		{
			displayString += '<img src="'+currentEmote.visual+'">';
		}
		displayString += '</div>';

		
		if(useCum == true && currentEmote.cumVisual != undefined)
		{
			displayString += '<div class="'+headClass+'">';
			displayString += '<img src="'+currentEmote.cumVisual+'">';
			displayString += '</div>';
		}
	}

	if(currentCock != "")
	{
		displayString += '<div class="'+cockClass+'">';
		displayString += '<img src="'+currentCock.visual+'">';		
		displayString += '</div>';

		if(useCum == true && currentCock.cumVisual != undefined)
		{
			displayString += '<div class="'+cockClass+'">';
			displayString += '<img src="'+currentCock.cumVisual+'">';
			displayString += '</div>';
		}
	}

	console.log("dasdddddddddd")
	console.log(currentBody)
	
	displayString += '[img['+currentBody.visual+']]';

	displayString += '</div>';

    return displayString;
}

setup.displayPlaceholderImage = function(previewPath, fullCGPath, currentEmote, useBorder)
{
	var displayString = setup.displayEncounterImage(previewPath, fullCGPath, currentEmote, useBorder)

	displayString += '<div class="PlaceholderHeader">';
	displayString += 'Placeholder generated art.';
	displayString += '</div>';

    return displayString;
}

setup.displayVideo = function(path, useBorder)
{
	var displayString = '<div class="EnemyImage">';

	if(useBorder == true)
	{
		displayString += 	"<div class='ImageContainer'>";
		displayString += 		"<div class='"+setup.getCorruptionUIClassName("MobileBorder FillWidth", setup.getStatValue(State.variables.CharacterSheet_Player, "corruption"))+"'><video autoplay muted><source src='"+path+"' type='video/mp4'></video></div>";
		displayString += 	'</div>';
	}
	else
	{
		displayString += "<video autoplay muted loop><source src='"+path+"' type='video/mp4'></video>";
	}

	displayString += '</div>';

	return displayString;
}

setup.displayEncounterImage = function(previewPath, fullCGPath, currentEmote, useBorder)
{
    var displayString = '<div class="EnemyImage">';

	if(currentEmote != undefined)
	{
		displayString += '<div class="EmotePortrait">';
		displayString += '<img src="'+currentEmote+'">';
		displayString += '</div>';
	}

	if(fullCGPath != undefined)
	{
		if(useBorder == true)
		{
			displayString +="<<link \"<div class='ImageContainer'><div class='"+setup.getCorruptionUIClassName("MobileBorder FillWidth", setup.getStatValue(State.variables.CharacterSheet_Player, "corruption"))+"'></div><img src='"+previewPath+"'></div>\" >>";
		}
		else
		{
			displayString += '<<link [img['+previewPath+']]>>';
		}

		displayString +='<<run setup.showImagePopup("'+fullCGPath+'")>>';

		displayString +='<</link>>';
	}
	else
	{
		displayString += "<div class='ImageContainer'>";
		if(useBorder == true)
		{
			displayString +='<div class="'+setup.getCorruptionUIClassName("MobileBorder FillWidth", setup.getStatValue(State.variables.CharacterSheet_Player, "corruption"))+'"></div>';
		}

		displayString += '[img['+previewPath+']]';
		displayString += '</div>';
	}

    displayString += '</div>';

    return displayString;
}

setup.showImagePopup = function(path)
{
	Dialog.setup("");

	var displayString = '<div class="EnemyImage">'
    displayString += '<img src="'+path+'">'
	displayString += '</div>'
	
	Dialog.append(displayString);
	Dialog.open();
}

setup.displayAttackTimingDescription = function(character)
{
	var displayString = "";

	switch (character.fight.teammateSettings.attackTiming) {
		case setup.AttackTiming.BEFORE_PLAYER:
			displayString += character.info.name + "";
			break;
		case setup.AttackTiming.BETWEEN_PLAYER_AND_ENEMY:
			displayString += character.info.name + "";
			break;
		case setup.AttackTiming.AFTER_ENEMY:
			displayString += character.info.name + "";
			break;
	
		default:
			displayString += "";
			break;
	}

	return displayString;
}

setup.clickChoiceContainer = function(choiceIndex)
{
	var choiceElement = document.getElementById('choice' + choiceIndex);
          
	if(choiceElement)
	{
		document.getElementById('choice' + choiceIndex).querySelector('.link-internal').dispatchEvent(new MouseEvent('click'));
	}
}

setup.choice = function(text)
{
	setup.choiceCount++;
	var corruption = setup.getStatValue(State.variables.CharacterSheet_Player, "corruption");
	let _windowClass = setup.getCorruptionUIClassName("choiceWindowElement", corruption)
	let _choiceClass = setup.getCorruptionUIClassName("choiceIndex", corruption)
	
	console.log('<div class="'+_windowClass+'"></div>')

	if(State.variables.ChoicesWindow)
	{
		setup.choices += '<label id="choice'+setup.choiceCount+'" class="'+_windowClass+'"><span class="'+_choiceClass+'">'+setup.choiceCount+'</span>'+text+'</label>';
	}
	else
	{
		setup.choices += text + "<br>";
	}
}
/* twine-user-script #34: "FlavourFactory.js" */
setup.getLimbNumber = function(numberRequirement, characterLimb, keyOnly=false)
{
    var gameMaxNumber = Object.keys(setup.englishNumbers).length
    var availableLimbs = undefined; 
    var currentLimbNumber = characterLimb['number'];
    var resultantNumber = undefined;

    if(currentLimbNumber > gameMaxNumber)
    {
        return ["forest of", "cluster of", "mountain of", "egregious collection of"].random()
    }else{
        availableLimbs = currentLimbNumber
    }

    if(numberRequirement == "all")
    {
        resultantNumber = availableLimbs
    }else{
        if(numberRequirement <= availableLimbs)
        {
            resultantNumber = numberRequirement
        }else{
            resultantNumber = availableLimbs
        }
    }

    if(keyOnly){
        return resultantNumber
    }else{
        return setup.englishNumbers[resultantNumber]
    }
}

setup.compileBrew = function(brewArr)
{   
    var brewedArray = [];
    brewArr.forEach(addDefinedItemsTobrew); 
    function addDefinedItemsTobrew(item) 
    { 
        if(item != undefined){
            brewedArray.push(item)
        }
    }
    return brewedArray.join(" ");
}

setup.getAdjective = function(limb, characterAnatomy, character, customAdjectives)
{
    var comparators = setup.Comparators;
    var corruptionComparitors = setup.CorruptionComparators;

    var size = setup.sizeNormalPersoncomparison(character);
    var corruption = setup.getStatValue(character, "corruption")
    var sizeCategory = undefined;
    var corruptionCategory = undefined;

    //get the size index for the RacePool
	if(size <= comparators.SLIGHTLY_BIGGER){
		sizeCategory = 'small';
	}else if(size <= comparators.REACHES_WAIST){
		sizeCategory = 'medium';
	}else if(size <= comparators.FITS_ON_HAND){
		sizeCategory = 'large';
	}else if(size >= comparators.FITS_ON_FINGER){
		sizeCategory = 'huge';
	}

    //get the corruption index for the RacePool
	if(corruption <= corruptionComparitors.NEUTRAL){
		corruptionCategory = "pure";
	}else{
        corruptionCategory = "corrupt"
	}
    
    var limbDetails = undefined;

    var racePool = Object.keys(setup.RacePool);
    var raceProperty = racePool[characterAnatomy["race"]];
    
    let raceObject = setup.RacePoolObjects[raceProperty];
    if(raceObject[limb] != undefined)
    {
        limbDetails = raceObject[limb]
    }else{
        return "<<Error: This race does not have this limb natively>>"
    }

    var brewArr = [];
    var adjectivePool = setup.AdjectivePool[limb];

    //Add custom adjectives, if exists
    if(customAdjectives != undefined)
    {
        brewArr.push(customAdjectives.split("~").join(" "));
    }

    //Add size based description if exists
    if(adjectivePool[sizeCategory] != undefined)
    {
        if(Math.floor(Math.random() * 5) == 4){
            brewArr.push(adjectivePool[sizeCategory].random());
        }else{
            brewArr.push(undefined);
        }
    }

    //Add corruption text if exists
    if(adjectivePool.adjectives[corruptionCategory] != undefined)
    {
        if(Math.floor(Math.random() * 5) == 4){
            brewArr.push(adjectivePool.adjectives[corruptionCategory].random());
        }else{
            brewArr.push(undefined);
        }
    }

    //Add racial texture if exists
    if(limbDetails.raceTexture != undefined)
    {
        if(Array.isArray(limbDetails.raceTexture)){
            brewArr.push(limbDetails.raceTexture.random());
        }else{
            let customArray = limbDetails.raceTexture.trim();
            customArray = limbDetails.raceTexture.split(",");
            if(Math.floor(Math.random() * 5) == 4){
                brewArr.push(customArray.random());
            }else{
                brewArr.push(undefined);
            }
        }
    }

    return setup.compileBrew(brewArr);
}

setup.processVerbInstructionSet = function(verbInstructions, number, limb, colour, adjective)
{
    var vowels = ["a", "e", "i", "o", "u"];
    
    if(verbInstructions == "a~an"){
        if(colour != undefined && vowels.includes(colour.substring(0,1))){
            return "an";
        }else if(vowels.includes(adjective.substring(0,1))){
            return "an";
        }else if(vowels.includes(limb.substring(0,1))){
            return "an"
        }else{
            return "a"
        }
    }

    if(verbInstructions == "noverb"){
        return undefined;
    }else{
        let oneRegEx = /one=(.*)\b/;
        let moreRegEx = /more=(.*)\b/;
        var verbList = verbInstructions.split("~");
        var oneVerb = oneRegEx.exec(verbList[0]);
        var moreVerb = moreRegEx.exec(verbList[1]);
    
        if(number == 1){
            return oneVerb[1].split("%").join(" ");
        }else{
            return moreVerb[1].split("%").join(" ");
        }
    }
}

setup.brewFlavour = function(numberRequirement, customAdjectives, limb, verbInstructions, characterAnatomy, character)
{
    var number = setup.getLimbNumber(numberRequirement, characterAnatomy[limb], true);
    var numberText = setup.getLimbNumber(numberRequirement, characterAnatomy[limb]);
    var adjective = setup.getAdjective(limb, characterAnatomy[limb], character, customAdjectives);
    var colour = undefined;
    var verb = setup.processVerbInstructionSet(verbInstructions, number, limb, colour, adjective);

    if(Math.floor(Math.random() * 5) == 4){
        colour = setup.ColourPool[characterAnatomy[limb].colour];
    }

    if(limb == "cocks"){
        limb = ["", "", "", "", "", "", "", "", ""].random();
    }
    
    if(limb == "vaginas"){
        limb = ["", "", "", "", ""].random();
    }

    if(limb == "breasts"){
        limb = ["", "", "", "", ""].random();
    }

    if(limb == "balls"){
        limb = ["", "", "", "", "", ""].random();
    }

    if(numberText == ""){
        if(["a", "an"].includes(verb))
        {
            let result = [verb, colour, adjective, limb.substring(0, limb.length-1)];
            return setup.compileBrew(result)
        }else{
            let result = [colour, adjective, limb.substring(0, limb.length-1), verb];
            return setup.compileBrew(result)
        }
    }else if(numberText == "two"){
        let result = [colour, adjective, limb, verb];
        return setup.compileBrew(result)
    }else{
        let result = [numberText, colour, adjective, limb, verb];
        return setup.compileBrew(result)
    }s
}

setup.applyLimbFilter = function(anatomy, flavourText){
    var textToProcess = "";
    var sentenceTail = "";
    var filterRegex = /(>[\s\S]*?|^[\s\S]*?)<limbs=(.*)>([\s\S]*?)<\/limbs>([\s\S]*?)$/;
    var limbFilterMatch = filterRegex.exec(flavourText);

    if (limbFilterMatch != null)
    {
        while (limbFilterMatch != null)
        {
            var include = true;
            var limbsRequirements = limbFilterMatch[2].replace(/\s/g, "").split(',');

            if (limbFilterMatch[1] != null && limbFilterMatch[1] != "")
            {
                textToProcess += limbFilterMatch[1];
            }

            for (let i = 0; i < limbsRequirements.length; i++)
            {
                var limb = limbsRequirements[i];

                if (!setup.hasLimb(anatomy, limb))
                {
                    include = false;
                    break;
                }
            }
    
            if (include)
            {
                textToProcess += limbFilterMatch[3]
            }
    
            sentenceTail = limbFilterMatch[4];
            limbFilterMatch = filterRegex.exec(limbFilterMatch[4]);
        }
    }
    else
    {
        textToProcess = flavourText;
    }

    if (sentenceTail != null)
    {
        textToProcess += sentenceTail;
    }

    return textToProcess;
}

setup.hasLimb = function(anatomy, limb)
{
    return anatomy[limb] != undefined && anatomy[limb]["number"] != 0;
}

setup.processFlavours = function(character, flavourText, useSymbiote=false)
{

    if (character.id == "CharacterSheet_Player")
    {
        setup.gender.setPronouns(
            {
                "subjective" : "",
                "objective" : "",
                "possessive" : "",
                "determiner" : "",
                "reflexive" : "",
                "noun" : ""
            }
        )
    }else{
        setup.gender.setPronouns(character.info.gender);
    }
    
    var anatomy = undefined;
    if (useSymbiote)
    {
        anatomy = character.symbiote.anatomy;
    }   
    else 
    {
        anatomy = character.info.anatomy;
    }

    //Resolve limb requirements
    flavourText = setup.applyLimbFilter(anatomy, flavourText)
    
    var processedFlavour = flavourText;
    var flavourParameters = undefined;
    var fullFlavourtag = undefined;
    var tagRegex = /\B@\[([^\]]*)\]/g;
    var match = tagRegex.exec(flavourText);

    var numberRequirement = undefined;
    var customAdjectives = undefined;
    var limb = undefined;
    var verbInstructions = undefined;

    while (match != null) {
        fullFlavourtag = match[0];
        flavourParameters = match[1].replace(/\s/g, "").split("|");

        numberRequirement = undefined;
        customAdjectives = undefined;
        limb = undefined;
        verbInstructions = undefined;

        if(flavourParameters.length == 3)
        {
            numberRequirement = flavourParameters[0];
            limb = flavourParameters[1];
            verbInstructions = flavourParameters[2];
        }else if(flavourParameters.length == 4)
        {
            numberRequirement = flavourParameters[0];
            customAdjectives = flavourParameters[1];
            limb = flavourParameters[2];
            verbInstructions = flavourParameters[3];
        }

        let brewedFlavour = setup.brewFlavour(
            numberRequirement,
            customAdjectives,
            limb,
            verbInstructions,
            anatomy,
            character
        );

        processedFlavour = processedFlavour.replace(fullFlavourtag, brewedFlavour);
        match = tagRegex.exec(flavourText);
    }
    return processedFlavour;
}
/* twine-user-script #35: "MathHelper.js" */
/* Box-Muller transform for quick random standard deviation calculations.
https://en.wikipedia.org/wiki/Box%E2%80%93Muller_transform
Where 0 is the mean and 1 is a standard deviation
 */

/* Provide a mean and unit deviation. You can change (or remove) the min and max value sanity checks */
setup.getHeightCalc = function(meanValue, devValue, minValue=1, maxValue=null)
{
    var u = Math.random();
    var v = Math.random();
    var x = Math.sqrt(-2.0 * Math.log(u)) * Math.cos(2.0 * Math.PI * v);

    var value = meanValue + devValue*x;
    if (maxValue)
    {
        value = min(maxValue, value);
    }
    if (minValue)
    {
        value = max(minValue, value0);
    }
    return value;
}
/* twine-user-script #36: "RaceHelper.js" */
setup.changeLimb = function(anatomy, limb, newRaceIndex)
{
    var racePool = Object.keys(setup.RacePool);
    var raceProperty = racePool[newRaceIndex];

    let raceObject = setup.RacePoolObjects[raceProperty];
    if(raceObject[limb] != undefined){
        anatomy[limb].race = newRaceIndex;
    }
    return;
}

setup.colourLimb = function(anatomy, limb, newColour)
{
    anatomy[limb].colour = newColour;
    return;
}

setup.colourAllLimbs = function(anatomy, newColour)
{
    var limbList = Object.keys(anatomy);

    limbList.forEach(function(limb) 
    {
        setup.colourLimb(anatomy, limb, newColour);
    });
}

setup.changeLimbNumber = function(anatomy, limb, number, mod=false)
{
    if(mod == "add"){
        anatomy[limb].number += number;
    }else if(mod == "multiply"){
        anatomy[limb].number = anatomy[limb].number * number;
    }else{
        anatomy[limb].number = number;
    }
    return;
}

setup.alterLimbNumbers = function(anatomy, newRaceIndex)
{
    var racePool = Object.keys(setup.RacePool);
    var raceProperty = racePool[newRaceIndex];

    let raceObject = setup.RacePoolObjects[raceProperty];
    var limbList = Object.keys(anatomy)
    limbList.forEach((limb) => {
        if(raceObject[limb] != undefined)
        {
            var oldRace = setup.RacePoolObjects[anatomy[limb].race];     
            var oldRaceDefault = 0;
            if (oldRace[limb] != undefined){
                oldRaceDefault = parseInt(oldRace[limb].defaultNumber);
            }
            var newLimbNumber = parseInt(raceObject[limb].defaultNumber) - oldRaceDefault;
            setup.changeLimbNumber(anatomy, limb, newLimbNumber, "add");
        } else {
            setup.changeLimbNumber(anatomy, limb, 0);
        }
    });
}

setup.transformEntireAnatomy = function(anatomy, newRaceIndex, gender="male", changeLimbNumber=false)
{
    var limbList = Object.keys(anatomy);

    console.log("newRaceIndex")
    console.log(newRaceIndex)
    console.log("limbList")
    console.log(limbList)

    function transformLimb(anatomy, newRaceIndex, limb, changeLimbNumber){
        if (typeof anatomy[limb] != "string"){
            if (changeLimbNumber){
                setup.alterLimbNumbers(anatomy, newRaceIndex);
            }
            setup.changeLimb(anatomy, limb, newRaceIndex);
        }
    }

    limbList.forEach(changeRace); 
    function changeRace(limb) 
    { 
        switch (gender){
            case "male":
                if (limb != "vaginas" && limb != "breasts"){
                    transformLimb(anatomy, newRaceIndex, limb, changeLimbNumber)
                }
                break;
            case "female":
                if (limb != "cocks" && limb != "balls"){
                    transformLimb(anatomy, newRaceIndex, limb, changeLimbNumber)
                }
                break;
            case "herm":
                transformLimb(anatomy, newRaceIndex, limb, changeLimbNumber)
                break;
        }
    }
    return;

}
setup.getCurrentNumberOfLimbs = function(anatomy, limb)
{
    console.log("getCurrentNumberOfLimbs")

    if (anatomy[limb] != undefined)
    {
        if (anatomy[limb].number != undefined)
        {
            return anatomy[limb].number
        }
    }
    return 0;
}

setup.getDefaultNumberOfLimbs = function(anatomy, limb){
    let race = setup.RacePoolObjects[anatomy[limb].race];
    if (race != undefined){
        if (race[limb] != undefined){
            if (race[limb].defaultNumber != undefined){
                return race[limb].defaultNumber
            }
        }
    }
    return 0;
}

setup.changeGender = function(anatomy, gender)
{
    switch (gender){
        case "male":
            setup.changeLimbNumber(anatomy, "cocks", setup.getDefaultNumberOfLimbs(anatomy, "cocks"))
            setup.changeLimbNumber(anatomy, "balls", setup.getDefaultNumberOfLimbs(anatomy, "balls"))
            setup.changeLimbNumber(anatomy, "breasts", 0)
            setup.changeLimbNumber(anatomy, "vaginas", 0)
            break;
        case "female":
            setup.changeLimbNumber(anatomy, "vaginas", setup.getDefaultNumberOfLimbs(anatomy, "vaginas"))
            setup.changeLimbNumber(anatomy, "breasts", setup.getDefaultNumberOfLimbs(anatomy, "breasts"))
            setup.changeLimbNumber(anatomy, "cocks", 0)
            setup.changeLimbNumber(anatomy, "balls", 0)
            break;
        case "herm":
            setup.changeLimbNumber(anatomy, "vaginas", setup.getDefaultNumberOfLimbs(anatomy, "vaginas"))
            setup.changeLimbNumber(anatomy, "breasts", setup.getDefaultNumberOfLimbs(anatomy, "breasts"))
            setup.changeLimbNumber(anatomy, "cocks", setup.getDefaultNumberOfLimbs(anatomy, "cocks"))
            setup.changeLimbNumber(anatomy, "balls", setup.getDefaultNumberOfLimbs(anatomy, "balls"))
            break;
    }
    return;
}

setup.getRandomLimb = function(anatomy)
{
    console.log("getRandomLimb")

    let limbKeys = Object.keys(anatomy);
    let limbNumber = 0;

    var limbToChange = undefined;
    limbKeys = limbKeys.filter(e => e !== 'teeths');

    while (limbNumber == 0){
        limbToChange = limbKeys.random();
        limbNumber = setup.getCurrentNumberOfLimbs(anatomy, limbToChange);
    }

    return {limb: limbToChange, currentNumber: limbNumber}
}


setup.resetAllColours = function(anatomy)
{
    var limbList = Object.keys(anatomy);

    limbList.forEach(resetColour); 
    function resetColour(limb) 
    {
        if (typeof anatomy[limb] != "string")
        {
            setup.colourLimb(anatomy, limb, setup.ColourPool.DEFAULT) 
        }
    }
    return;  
}

setup.setDefaultLimbNumbers = function(anatomy, newRace, gender)
{
    var limbList = Object.keys(anatomy);

    function setDefaultLimb(anatomy, limb){

        let raceObject = setup.RacePoolObjects[newRace];

        if (typeof anatomy[limb] != "string")
        {
            if(raceObject[limb] != undefined)
            {
                setup.changeLimbNumber(anatomy, limb, parseInt(raceObject[limb].defaultNumber));
            }
            else
            {
                setup.changeLimbNumber(anatomy, limb, 0);
            }   
        }
    }

    limbList.forEach(changeLimbNumbers); 
    function changeLimbNumbers(limb) 
    {
        switch (gender)
        {
            case "male":
                if (limb != "vaginas" && limb != "breasts")
                {
                    setDefaultLimb(anatomy, limb);
                }
                break;
            case "female":
                if (limb != "cocks" && limb != "balls")
                {
                    setDefaultLimb(anatomy, limb);
                }
                break;
            case "herm":
                setDefaultLimb(anatomy, limb);
                break
        }
        
    }
    return;
}


setup.setRandomRace = function(anatomy)
{
    let newRaceKey = [
        setup.RacePool.DEFAULT,
        setup.RacePool.WOLF,
        setup.RacePool.MINOTAUR,
        setup.RacePool.DRAGONBORN,
        setup.RacePool.BEHEMOTH,
        setup.RacePool.HALFORC,
    ].random();

    setup.setRace(anatomy, newRaceKey);
    return;
}


setup.setRace = function(anatomy, newRaceIndex, gender="male")
{
    var racePool = Object.keys(setup.RacePool);

    setup.transformEntireAnatomy(anatomy, newRaceIndex, gender);
    setup.setDefaultLimbNumbers(anatomy, racePool[newRaceIndex], gender);
    setup.resetAllColours(anatomy);
    return;
}


setup.getRace = function(anatomy, lower=false)
{
    var limbList = Object.keys(anatomy);
    var raceLimbList = [];

    limbList.forEach(getRaceLimbs); 
    function getRaceLimbs(limb) 
    {
        var racePool = Object.keys(setup.RacePool);
        var raceProperty = racePool[anatomy[limb].race];

        raceLimbList.push(setup.RacePoolObjects[raceProperty].name);
    }

    if(raceLimbList.length == 0)
        return null;
    var modeMap = {};
    var maxEl = raceLimbList[0], maxCount = 1;
    for(var i = 0; i < raceLimbList.length; i++)
    {
        var el = raceLimbList[i];
        if(modeMap[el] == null)
            modeMap[el] = 1;
        else
            modeMap[el]++;  
        if(modeMap[el] > maxCount)
        {
            maxEl = el;
            maxCount = modeMap[el];
        }
    }
    if(lower){
        return maxEl.toLowerCase()
    }else{
        return maxEl;
    }
}
/* twine-user-script #37: "QuestHelper.js" */
setup.getVillagePassages = function()
{
    var displayString = "";
    var i;
    
    for(i = 0; i < State.variables.Quest_InProgress.length; i++)
    {
        if(State.variables.Quest_InProgress[i].villagePassage)
        {
            displayString += State.variables.Quest_InProgress[i].villagePassage + "\n";
        }
    }

    return displayString;
}

setup.getNextNarativeEventPassageListText = function(narativeEventPackage, amount)
{

    var displayString = "";
    var count = 0;
    for(var propertyName in narativeEventPackage)
    {
        if(narativeEventPackage[propertyName].available() == true &&
            narativeEventPackage[propertyName].condition() == true)
        {
            displayString += Story.get(narativeEventPackage[propertyName].passage).text +"\n";

            count++;
            if(count >= amount)
            {
                return displayString;
            }
        }
    }

    console.log("fffffffffff")

    return displayString;
}

setup.getNextNarativeEventPassage = function(narativeEventPackage)
{

    for(var propertyName in narativeEventPackage)
    {
        console.log(propertyName)
        if(narativeEventPackage[propertyName].available() == true &&
            narativeEventPackage[propertyName].condition() == true)
        {
            return narativeEventPackage[propertyName].passage;
        }
    }
    console.log("fffffffffff")
}

setup.hasAvailableNarativeEvent = function(narativeEventPackage)
{
    for(var propertyName in narativeEventPackage)
    {
        if(narativeEventPackage[propertyName].available() == true &&
            narativeEventPackage[propertyName].condition() == true)
        {
            return true;
        }
    }

    return false
}

setup.completeQuest = function(quest)
{
    quest.onComplete();

    var i;
    for(i = 0; i < State.variables.Quest_InProgress.length; i++)
    {
        if(State.variables.Quest_InProgress[i].id === quest.id)
        {
            State.variables.Quest_InProgress.splice(i, 1);
            return;
        }
    }
}

setup.removeExplorationDestination = function(quest)
{
    var i;

    for(i = 0; i < State.variables.Explore_Destinations.length; i++)
    {
        if(State.variables.Explore_Destinations[i] == quest)
        {
            State.variables.Explore_Destinations.splice(i, 1);
            break;
        }
    }
}


setup.getVillageDescriptor = function()
{
    var displayString = "";

    var i;
    for(i = 0; i < State.variables.Quest_InProgress.length; i++)
    {
        if(State.variables.Quest_InProgress[i].villageDescriptor)
        {
            displayString += State.variables.Quest_InProgress[i].villageDescriptor +"\n\n";
        }
    }

    if(State.variables.CharacterSheet_Player.quest.corruptionVillageExiled == true)
    {
        //TODO
    }
    else
    {
        displayString += setup.displayVillageCorruptionDescriptor();
    }

    return displayString;
}

setup.upgradeEthrexStats = function(level)
{
    switch(level)
    {
        case 1:
            setup.setBaseStatValue(State.variables.CharacterSheet_Ethrex, "hp", 320)
            setup.setBaseStatValue(State.variables.CharacterSheet_Ethrex, "stamina", 60)
            setup.setBaseStatValue(State.variables.CharacterSheet_Ethrex, "strength", 60)
            setup.setBaseStatValue(State.variables.CharacterSheet_Ethrex, "critChance", 20)
            setup.setBaseStatValue(State.variables.CharacterSheet_Ethrex, "staminaRecovery", 10)
            setup.setBaseStatValue(State.variables.CharacterSheet_Ethrex, "corruption", 50)
            State.variables.CharacterSheet_Ethrex.quest.minorDemon = true;
            break;

        case 2:
            setup.setBaseStatValue(State.variables.CharacterSheet_Ethrex, "hp", 500)
            setup.setBaseStatValue(State.variables.CharacterSheet_Ethrex, "stamina", 95)
            setup.setBaseStatValue(State.variables.CharacterSheet_Ethrex, "strength", 70)
            setup.setBaseStatValue(State.variables.CharacterSheet_Ethrex, "critChance", 40)
            setup.setBaseStatValue(State.variables.CharacterSheet_Ethrex, "staminaRecovery", 25)
            setup.setBaseStatValue(State.variables.CharacterSheet_Ethrex, "corruption", 70)
            State.variables.CharacterSheet_Ethrex.fight.fightReward = setup.RewardTier.HIGH;
            State.variables.CharacterSheet_Ethrex.quest.majorDemon = true;
            break;

        case 3:
            setup.setBaseStatValue(State.variables.CharacterSheet_Ethrex, "hp", 800)
            setup.setBaseStatValue(State.variables.CharacterSheet_Ethrex, "stamina", 210)
            setup.setBaseStatValue(State.variables.CharacterSheet_Ethrex, "strength", 140)
            setup.setBaseStatValue(State.variables.CharacterSheet_Ethrex, "critChance", 80)
            setup.setBaseStatValue(State.variables.CharacterSheet_Ethrex, "staminaRecovery", 50)
            setup.setBaseStatValue(State.variables.CharacterSheet_Ethrex, "corruption", 95)
            State.variables.CharacterSheet_Ethrex.fight.fightReward = setup.RewardTier.VERY_HIGH;
            State.variables.CharacterSheet_Ethrex.quest.lordOfLust = true;
            break;
    }
}

setup.displayVillageCorruptionDescriptor = function()
{
    var displayString = "";
    var corruption = setup.getStatValue(State.variables.CharacterSheet_Player, "corruption");
    //TODO upgrade with new tiers

    if(corruption >= 150)
    {
        displayString += "";
    }
    else if(corruption >= 100)
    {
        displayString += "";
    }
    else if(corruption >= 75)
    {
        displayString += "";
    }
    else if(corruption >= 50)
    {
        displayString += "";
    }
    else
    {
        displayString += "";
    }

    return displayString;
}

setup.initialJormSetup = function()
{
    var corruption = setup.getStatValue(State.variables.CharacterSheet_Player, "corruption");
    if(corruption >= setup.CorruptionComparators.NEUTRAL)
    {
        State.variables.CharacterSheet_Jorm.info.height = 5230 * 12;
        State.variables.CharacterSheet_Jorm.info.cock = setup.getProportionalCockSize(5230 * 12);
        State.variables.CharacterSheet_Jorm.info.balls = setup.getProportionalBallsSize(5230 * 12);
        State.variables.CharacterSheet_Jorm.info.muscles = setup.getProportionalMuscles(5230 * 12) * 2;
    }
    else if(corruption >= setup.CorruptionComparators.PURE)
    {
        State.variables.CharacterSheet_Jorm.info.height = 461 * 12;
        State.variables.CharacterSheet_Jorm.info.cock = setup.getProportionalCockSize(461 * 12);
        State.variables.CharacterSheet_Jorm.info.balls = setup.getProportionalBallsSize(461 * 12);
        State.variables.CharacterSheet_Jorm.info.muscles = setup.getProportionalMuscles(461 * 12) * 2;
    }
    else
    {
        State.variables.CharacterSheet_Jorm.info.height = 120 * 12;
        State.variables.CharacterSheet_Jorm.info.cock = setup.getProportionalCockSize(120 * 12);
        State.variables.CharacterSheet_Jorm.info.balls = setup.getProportionalBallsSize(120 * 12);
        State.variables.CharacterSheet_Jorm.info.muscles= setup.getProportionalMuscles(120 * 12) * 2;
    }
}

setup.getInitialJormSizeDiffPassage = function()
{
    var sizeComp = setup.sizeCharactercomparison(State.variables.CharacterSheet_Jorm, State.variables.CharacterSheet_Player);
    var comparators = setup.Comparators;

    if(sizeComp > comparators.BIGGER)
    {
        return "Jorm_JormDescriptions_LargerThanPlayer";
    }
    else if(sizeComp < comparators.SMALLER)
    {
        return "Jorm_JormDescriptions_SmallerThanPlayer";
    }
    else
    {
        return "Jorm_JormDescriptions_EvenToPlayer";
    }
}

setup.getSecondJormSizeDiffPassage = function()
{
    var sizeComp = setup.sizeCharactercomparison(State.variables.CharacterSheet_Jorm, State.variables.CharacterSheet_Player);
    var comparators = setup.Comparators;

    if(sizeComp > comparators.MUCH_BIGGER)
    {
        return "Jorm_PostNamingPrompt_PlayerSmaller";
    }
    else if(sizeComp < comparators.MUCH_SMALLER)
    {
        return "Jorm_PostNamingPrompt_PlayerBigger";
    }
    else
    {
        return "Jorm_PostNamingPrompt_PlayerEven";
    }
}

setup.getJormIntroductionPassage = function()
{
    if(State.variables.CharacterSheet_Lost_Naga.quest.hasBeenVored)
    {
        return "Jorm_NamingDialogue_VoredNaga"
    }
    else if(State.variables.CharacterSheet_Lost_Naga.quest.fuckedByPlayer)
    {
        return "Jorm_NamingDialogue_FuckedNaga"
    }
    else
    {
        return "Jorm_NamingDialogue_GotFuckedByNaga"
    }
}

setup.displayJournal = function(quest)
{
    var displayString = "";

    var i;
    for(i = 0; i < State.variables.Quest_InProgress.length; i++)
    {
        displayString += State.variables.Quest_InProgress[i].description + "\n\n";
    }

    if(displayString == "")
    {
        displayString +=""
    }

    return displayString;
}

setup.MQ002_Manor_IsMassiveInManor = function(character)
{
    let manorSize = 12 * 12;

    var isMassive = setup.sizecomparison(setup.getStatValue(character, "height"), manorSize) >= setup.Comparators.BIGGER;
    return isMassive;
}

setup.MQ002_Manor_IsCockMassiveInManor = function(character)
{
    let manorSize = 2 * 12;

    var isMassive = setup.sizecomparison(setup.getStatValue(character, "cock"), manorSize) >= setup.Comparators.BIGGER;
    return isMassive;
}

setup.MQ002_Manor_IsGiganticInManor = function(character)
{
    let giganticSize = 12 * 18;

    var isMassive = setup.sizecomparison(setup.getStatValue(character, "height"), giganticSize) >= setup.Comparators.BIGGER;
    return isMassive;
}

setup.MQ002_Manor_IsCockGiganticInManor = function(character)
{
    let giganticSize = 4 * 12;

    var isMassive = setup.sizecomparison(setup.getStatValue(character, "cock"), giganticSize) >= setup.Comparators.BIGGER;
    return isMassive;
}

setup.MQ002_Manor_IsCorruptedInManor = function(character)
{
    return setup.getStatValue(character, "corruption") > 500;
}

setup.MQ002_Manor_HasBrokenPartOfManor = function()
{
    var manorAreaState = State.variables.WorldState.cultManor;

    for(var propertyName in manorAreaState) 
    {
        if(manorAreaState[propertyName].isBroken)
        {
            return true;
        }
    }

    return false;
}

setup.MQ002_Manor_RandomEncounter = function()
{
    return random(0,100) > 10;
}

setup.MQ002_GiveNyxLightAbility = function()
{
    if(!State.variables.CharacterSheet_Player.hasAbility("Ability_TouchedByNyxsLight"))
    {
        State.variables.CharacterSheet_Player.applyAbilityRuntimeData(setup.Ability_TouchedByNyxsLight);
    }
}

setup.MQ002_AddNyxParasiteInfection = function()
{
    State.variables.CharacterSheet_Player.applyAbilityRuntimeData(setup.Ability_NyxParasiteInfection);

    ++State.variables.CharacterSheet_Player.quest.nyxParasiteInfections;
}

setup.MQ002_LeavingManor = function(character)
{
    if(character.hasAbility("Ability_TouchedByNyxsLight"))
    {
        character.removeAbilityRuntimeData(setup.Ability_TouchedByNyxsLight);
    }
}

setup.MQ002_HasBrokenSeal = function()
{
    return State.variables.CharacterSheet_MQ002_DragonMonk.quest.infected == true || 
    State.variables.CharacterSheet_Player.quest.oaths.drenth == setup.Oath.BROKEN ||
    State.variables.CharacterSheet_MQ002_DragonMonk.quest.beaten == true
}

setup.MQ002_HasIntactOath = function()
{
    return State.variables.CharacterSheet_Player.quest.oaths.drenth == setup.Oath.ACTIVE;
}

setup.breakOath = function(oath)
{
    switch(oath)
    {
        case "drenth":
            if(State.variables.CharacterSheet_Player.quest.oaths.drenth == setup.Oath.ACTIVE)
            {
                State.variables.CharacterSheet_Player.removeAbilityRuntimeData(setup.Ability_Oath_Containment);
                State.variables.CharacterSheet_Player.quest.oaths.drenth = setup.Oath.BROKEN;

                if(!State.variables.CharacterSheet_Player.hasAbility("Ability_Oathbreaker"))
                {
                    State.variables.CharacterSheet_Player.applyAbilityRuntimeData(setup.Ability_Oathbreaker);
                }
            }
            break;
    }
}

setup.triggerEnding = function(endingID)
{
    for(let i = 0; i < State.variables.EndingSheet.length; ++i)
    {
        if(State.variables.EndingSheet[i].id == endingID)
        {
            State.variables.EndingSheet[i].unlocked = true;
            State.variables.EndingSheet[i].onPreWorldReset();
        }
    }
}

setup.backupEndingAbilities = function()
{
    var abilities = State.variables.CharacterSheet_Player.abilityHandler.abilityRuntimeDatas;

    State.variables.achievementsBackup = [];

    for(let i = 0; i < abilities.length; ++i)
    {
        if(abilities[i].achivemementState == setup.AchievementState.COMPLETE || abilities[i].achivemementState == setup.AchievementState.ACTIVATED)
        {
            let ability = setup.getAbilityByIndex(abilities[i].abilityDataIndex);
            State.variables.achievementsBackup.push(ability.id)
        }
    }
}

setup.triggerEndingsPostWorldCallbacks = function()
{
    for(let i = 0; i < State.variables.EndingSheet.length; ++i)
    {
        if(State.variables.EndingSheet[i].unlocked == true)
        {
            State.variables.EndingSheet[i].onPostWorldReset();
        }
    }
    
    var abilities = State.variables.CharacterSheet_Player.abilityHandler.abilityRuntimeDatas;
    var achivementBackups = State.variables.achievementsBackup;
    for(let i = 0; i < abilities.length; ++i)
    {
        let ability = setup.getAbilityByIndex(abilities[i].abilityDataIndex);

        for(let j = 0; j < achivementBackups.length; ++j)
        {
            if(ability.id == achivementBackups[j])
            {
                abilities[i].achivemementState = setup.AchievementState.ACTIVATED;
            }
        }
    }

    var params = 
    {
        trigger: setup.AbilityTrigger.ON_NEW_GAME_PLUS,
        self: State.variables.CharacterSheet_Player,
    }
    State.variables.CharacterSheet_Player.broadcastAbilityTrigger(params);

    State.variables.achievementsBackup = null;
    
    setup.updateStaticCorruptionUI(State.variables.CharacterSheet_Player);
}

setup.displayRandomNyxGibberish  = function(amount)
{
    var displayString = "";
    for(let i = 0; i < amount; ++i)
    {
        var randomLine = setup.getRandomInt(0,2);
        var randomStyle = setup.getRandomInt(0,1);

        var style = "";

        if(randomStyle == 0)
        {
            style = " fucked"
        }

        switch(randomLine)
        {
            case 0:
                displayString += '<span class="glitch nyx'+style+'" data-text="SPREAD">[[AHHHH->Ending][State.variables.CorruptSidebar = undefined]]</span>'
            break;
            case 1:
                displayString += '<span class="glitch nyx'+style+'" data-text="GROW">[[HHHH->Ending][State.variables.CorruptSidebar = undefined]]</span>'
            break;
            case 2:
                displayString += '<span class="glitch nyx'+style+'" data-text="CORRUPT">[[HHHH->Ending][State.variables.CorruptSidebar = undefined]]</span>'
            break;
        }
    }

    return displayString;
}

setup.isWithinStoryProgress = function(range, amount)
{
    return amount >= range[0] && amount <= range[1];
}

setup.buffImpEncounter = function()
{
    setup.setBaseStatValue(State.variables.CharacterSheet_Imp, "hp", State.variables.CharacterSheet_Imp.fight.hp + 3)
    setup.setBaseStatValue(State.variables.CharacterSheet_Imp, "strength", State.variables.CharacterSheet_Imp.fight.strength + 2)

    if(State.variables.CharacterSheet_Imp.quest.relationshipScoring >= 7)
    {
        State.variables.CharacterSheet_Imp.fight.fightReward = setup.RewardTier.MEDIUM;
    }
    else if(State.variables.CharacterSheet_Imp.quest.relationshipScoring >= 4)
    {
        State.variables.CharacterSheet_Imp.fight.fightReward = setup.RewardTier.LOW;
    }
}

setup.impJoinsPlayer = function()
{
    State.variables.CharacterSheet_Imp.quest.storylineProgress = setup.StorylineProgress_Imp.MASTER;
    State.variables.CharacterSheet_Imp.fight.fightReward = setup.RewardTier.NONE;
    State.variables.CharacterSheet_Player.fight.teammate = "CharacterSheet_Imp";

    if(!State.variables.CharacterSheet_Player.fight.unlockedTeammates.includes("CharacterSheet_Imp"))
    {
        State.variables.CharacterSheet_Player.fight.unlockedTeammates.push("CharacterSheet_Imp");
    }
}

setup.torgarJoinsPlayer = function()
{
    State.variables.CharacterSheet_Player.fight.teammate = "CharacterSheet_Torgar";

    if(!State.variables.CharacterSheet_Player.fight.unlockedTeammates.includes("CharacterSheet_Torgar"))
    {
        State.variables.CharacterSheet_Player.fight.unlockedTeammates.push("CharacterSheet_Torgar");
    }
}

setup.tiadaneJoinsPlayer = function()
{
    State.variables.CharacterSheet_Player.fight.teammate = "CharacterSheet_MQ002_Guard";

    if(!State.variables.CharacterSheet_Player.fight.unlockedTeammates.includes("CharacterSheet_MQ002_Guard"))
    {
        State.variables.CharacterSheet_Player.fight.unlockedTeammates.push("CharacterSheet_MQ002_Guard");
    }
}

setup.ethrexJoinsPlayer = function()
{
    State.variables.CharacterSheet_Ethrex.fight.fightReward = setup.RewardTier.NONE;
    State.variables.CharacterSheet_Player.fight.teammate = "CharacterSheet_Ethrex";

    if(!State.variables.CharacterSheet_Player.fight.unlockedTeammates.includes("CharacterSheet_Ethrex"))
    {
        State.variables.CharacterSheet_Player.fight.unlockedTeammates.push("CharacterSheet_Ethrex");
    }
}

setup.setupDebugCastleRoom = function()
{
    State.variables.MQ002_Manor_Destinations = ["DebugMenu"];
}

setup.levelUpImp = function()
{
	var levelUpParams = {};

    levelUpParams.hp = 45;
    levelUpParams.stamina = 30;
    levelUpParams.staminaRecovery = 6;
    levelUpParams.strength = 25;
    levelUpParams.critChance = 10;
    levelUpParams.critDamage = 0.02;
    levelUpParams.growthMultiplier = 0.2;

	setup.setBaseStatValue(State.variables.CharacterSheet_Imp, "hp", State.variables.CharacterSheet_Imp.fight.hp + levelUpParams.hp)
    setup.setBaseStatValue(State.variables.CharacterSheet_Imp, "stamina", State.variables.CharacterSheet_Imp.fight.stamina + levelUpParams.stamina)
    setup.setBaseStatValue(State.variables.CharacterSheet_Imp, "staminaRecovery", State.variables.CharacterSheet_Imp.fight.staminaRecovery + levelUpParams.staminaRecovery)
    setup.setBaseStatValue(State.variables.CharacterSheet_Imp, "strength", State.variables.CharacterSheet_Imp.fight.strength + levelUpParams.strength)
    setup.setBaseStatValue(State.variables.CharacterSheet_Imp, "critChance", State.variables.CharacterSheet_Imp.fight.critChance + levelUpParams.critChance)
    setup.setBaseStatValue(State.variables.CharacterSheet_Imp, "critDamage", State.variables.CharacterSheet_Imp.fight.critDamage + levelUpParams.critDamage)
    setup.setBaseStatValue(State.variables.CharacterSheet_Imp, "growthMultiplier", State.variables.CharacterSheet_Imp.fight.growthMultiplier + levelUpParams.growthMultiplier)

	return levelUpParams; 
}

setup.growImp = function()
{
    var growParams = {};

    var growthMod = 0.25;

    growParams.height = setup.getStatValue(State.variables.CharacterSheet_Imp, "height") * growthMod;
    growParams.muscles = setup.getStatValue(State.variables.CharacterSheet_Imp, "muscles") * growthMod;
    growParams.cock = setup.getStatValue(State.variables.CharacterSheet_Imp, "cock") * growthMod;
    growParams.balls = setup.getStatValue(State.variables.CharacterSheet_Imp, "balls") * growthMod;

	var cockGrowth = setup.applyGrowth(State.variables.CharacterSheet_Imp, "cock", growParams.cock);
	var ballsGrowth = setup.applyGrowth(State.variables.CharacterSheet_Imp, "balls", growParams.balls);
	var muscleGrowth = setup.applyGrowth(State.variables.CharacterSheet_Imp, "muscles", growParams.muscles);
	var sizeGrowth = setup.applyGrowth(State.variables.CharacterSheet_Imp, "height", growParams.height);

	var displayString = "";
	
	displayString += setup.growthFlavourDescriptors(State.variables.CharacterSheet_Imp, State.variables.CharacterSheet_Player, cockGrowth, ballsGrowth, muscleGrowth, sizeGrowth, true);

	return displayString; 
}

setup.displayImpModsPassages = function()
{
    var displayString = "";

    var essenceCost = State.variables.CharacterSheet_Imp.quest.growthMultiplier * 600;

    if(State.variables.Essence < essenceCost)
    {
        displayString += "<span class = 'inactive'>";
    }

    displayString += "[[Grant him power and size ["+essenceCost+" Essence]->Village_MeetImp_GrowHim][$Essence -= "+essenceCost+"; State.variables.CharacterSheet_Imp.quest.growthMultiplier++]]";

    if(State.variables.Essence < essenceCost)
    {
        displayString += "</span>";
    }

    displayString += "\n";

    return displayString;
}

setup.displayTorgarConverse = function()
{
    var displayString = "";

    if(State.variables.CharacterSheet_Torgar.quest.available_encounterPassages_lowRelaIdle_GotBig == true)
    {
        displayString += "[[->Torgar_Low_Rela_EncounterStart_GotBig]]\n"
    }

    if(State.variables.CharacterSheet_Torgar.quest.available_encounterPassages_lowRelaIdle_Carry == true)
    {
        displayString += "[[->Torgar_Low_Rela_EncounterStart_Carry]]\n"
    }

    if(State.variables.CharacterSheet_Torgar.quest.available_encounterPassages_lowRelaIdle_Origin == true)
    {
        displayString += "[[->Torgar_Low_Rela_EncounterStart_Origin]]\n"
    }

    return displayString;
}

setup.evaluateTorgarPath = function()
{
    if(State.variables.CharacterSheet_Torgar.quest.relationshipScoring < 4)
    {
        return setup.TorgarProgress.NORMAL;
    }

    var quest = State.variables.CharacterSheet_Torgar.quest;
    if(quest.lostScoring >= quest.ascendedScoring && quest.lostScoring >= quest.pureScoring)
    {
        return setup.TorgarProgress.LOST;
    }

    if(quest.pureScoring >= quest.ascendedScoring && quest.pureScoring >= quest.lostScoring)
    {
        return setup.TorgarProgress.REDEEMED;
    }

    return setup.TorgarProgress.ASCENDED;
}

setup.debug_SetTorgarState = function(state)
{
    switch(state)
    {
        case setup.TorgarProgress.LOST:
            State.variables.CharacterSheet_Torgar.quest.progress = setup.TorgarProgress.LOST;
            State.variables.CharacterSheet_Torgar.quest.relationshipScoring = 4;
        break;
    }
    
}

setup.displaySelectTeammate = function()
{
    var displayString = "";
    var unlockedTeammates = State.variables.CharacterSheet_Player.fight.unlockedTeammates;
    for(let i = 0; i < unlockedTeammates.length; i++)
    {
        displayString += "[["+State.variables[unlockedTeammates[i]].info.name + "->Village][$CharacterSheet_Player.fight.teammate = '"+unlockedTeammates[i]+"']]\n";
    }

    displayString += "[[None->Village][$CharacterSheet_Player.fight.teammate = undefined]]";

    return displayString;
}

setup.getTorgarVersionEndMessage = function()
{
    var displayString = "";
    switch(setup.evaluateTorgarPath())
    {
        case setup.TorgarProgress.LOST:
            displayString += "\n";
        break;
        case setup.TorgarProgress.REDEEMED:
            displayString += "\n";
        break;
        case setup.TorgarProgress.ASCENDED:
            displayString += "\n";
        break;
    }

    return displayString;
}

setup.getMinoPromptPassage = function(param)
{
    param = param.toLowerCase();

    if (typeof param === 'string' || param instanceof String)
    {
        console.log("loolol")
        console.log(param)
        switch(param)
        {
            case "nyx":
                return "Quest_MQ002_Entrance_Answer_Nyx";
            case "cray":
                return "Quest_MQ002_Entrance_Answer_Cray";
            case "kanathar":
                return "Quest_MQ002_Entrance_Answer_Kanathar";
            case "tiadane":
                return "Quest_MQ002_Entrance_Answer_Tiadane";
            case "apothus":
                return "Quest_MQ002_Entrance_Answer_Apothus";
            case "sombreve":
                return "Quest_MQ002_Entrance_Answer_Sombreve";
        }
    }

    return "Quest_MQ002_Entrance_Answer_Invalid";
}

setup.getMinoTalkMenuPassage = function()
{
    if(State.variables.CharacterSheet_MQ002_Guard.quest.nyxPromise == true)
    {
        return "Quest_MQ002_Manor_MainHall_TalkMinotaur_PromisedMenu"
    }
    
    switch(State.variables.CharacterSheet_MQ002_Guard.quest.lustLevel)
    {
        case 1:
            return "Quest_MQ002_Manor_MainHall_TalkMinotaur_Lust1";
        case 2:
            return "Quest_MQ002_Manor_MainHall_TalkMinotaur_Lust2";
        case 3:
            return "Quest_MQ002_Manor_MainHall_TalkMinotaur_Lust3";
    }

    return "Quest_MQ002_Manor_MainHall_TalkMinotaur_Lust3";
}

setup.updateMinoLust = function()
{
    if(State.variables.CharacterSheet_MQ002_Guard.quest.lustIncrease == true)
    {
        State.variables.CharacterSheet_MQ002_Guard.quest.lustIncrease = false;
        State.variables.CharacterSheet_MQ002_Guard.quest.lustLevel++;
    }
}

setup.setDopplegangerStats = function()
{
    if(State.variables.CharacterSheet_Player.info.audioSheet == "AudioSheet_Voice1_Player")
    {
        State.variables.CharacterSheet_Doppleganger.info.audioSheet = "AudioSheet_Voice2_Player";
    }
    else
    {
        State.variables.CharacterSheet_Doppleganger.info.audioSheet = "AudioSheet_Voice1_Player";
    }
    
    if(setup.MQ002_Manor_IsCorruptedInManor(State.variables.CharacterSheet_Player))
    {
        State.variables.CharacterSheet_Doppleganger.info.corruption = 0;
    }
    else
    {
        State.variables.CharacterSheet_Doppleganger.info.corruption = 1500;
    }
    
    State.variables.CharacterSheet_Doppleganger.info.muscles = State.variables.CharacterSheet_Player.info.muscles;
    State.variables.CharacterSheet_Doppleganger.info.height = State.variables.CharacterSheet_Player.info.height;
    State.variables.CharacterSheet_Doppleganger.info.cock = State.variables.CharacterSheet_Player.info.cock;
    State.variables.CharacterSheet_Doppleganger.info.balls = State.variables.CharacterSheet_Player.info.balls;
    State.variables.CharacterSheet_Doppleganger.info.anatomy = State.variables.CharacterSheet_Player.info.anatomy;

    State.variables.CharacterSheet_Doppleganger.fight.hp = 300;
    State.variables.CharacterSheet_Doppleganger.fight.stamina = State.variables.CharacterSheet_Player.fight.stamina;
    State.variables.CharacterSheet_Doppleganger.fight.strength = State.variables.CharacterSheet_Player.fight.strength;
    State.variables.CharacterSheet_Doppleganger.fight.critChance = State.variables.CharacterSheet_Player.fight.critChance;
    State.variables.CharacterSheet_Doppleganger.fight.critDamage = State.variables.CharacterSheet_Player.fight.critDamage;
    State.variables.CharacterSheet_Doppleganger.fight.arousalGain = State.variables.CharacterSheet_Player.fight.arousalGain;
    State.variables.CharacterSheet_Doppleganger.fight.growthMultiplier = State.variables.CharacterSheet_Player.fight.growthMultiplier;
    State.variables.CharacterSheet_Doppleganger.fight.bonusGrowth = State.variables.CharacterSheet_Player.fight.bonusGrowth;
    State.variables.CharacterSheet_Doppleganger.fight.minArousal = State.variables.CharacterSheet_Player.fight.minArousal;
    State.variables.CharacterSheet_Doppleganger.fight.staminaRecovery = State.variables.CharacterSheet_Player.fight.staminaRecovery;
    State.variables.CharacterSheet_Doppleganger.fight.fightMoveIDs = State.variables.CharacterSheet_Player.fight.fightMoveIDs.filter(function(val) {
        if(setup[val].skillType == "demon" ||
        setup[val].skillType == "symbiote" ||
        setup[val].skillType == "offensive")
        {
            return true;
        }
        return false;
    });

    

    State.variables.CharacterSheet_Doppleganger.abilityHandler.clearAllAbilityRuntimeData();
    State.variables.CharacterSheet_Doppleganger.abilityHandler.copyAllAbilityRuntimeData(State.variables.CharacterSheet_Player);
}
/* twine-user-script #38: "RewardHelper.js" */
setup.getFightReward = function(beatenCharacter, loss)
{
    var essence = 0;
    var xp = 0;
    if(beatenCharacter.fight.fightReward == setup.RewardTier.NONE)
    {
        return "";
    }
    else 
    {
        if(beatenCharacter == undefined || loss == true)
        {
            xp = setup.getRandomInt(75, 100);
        }
        else
        {
            if(beatenCharacter.fight.fightReward == setup.RewardTier.VERY_LOW)
            {
                essence = setup.getRandomInt(15,30);
                xp = setup.getRandomInt(150, 250);
            }
            else if(beatenCharacter.fight.fightReward == setup.RewardTier.LOW)
            {
                essence = setup.getRandomInt(25,50);
                xp = setup.getRandomInt(350, 500);
            }
            else if(beatenCharacter.fight.fightReward == setup.RewardTier.MEDIUM)
            {
                essence = setup.getRandomInt(75,100);
                xp = setup.getRandomInt(750, 900);
            }
            else if(beatenCharacter.fight.fightReward == setup.RewardTier.HIGH)
            {
                essence = setup.getRandomInt(125,150);
                xp = setup.getRandomInt(1100, 1400);
            }
            else if(beatenCharacter.fight.fightReward == setup.RewardTier.VERY_HIGH)
            {
                essence = setup.getRandomInt(200,300);
                xp = setup.getRandomInt(1700, 2100);
            }
        }
    
        var essenceGain = setup.getEssenceGain(essence);
        var gainEssenceString = setup.gainEssence(essence);
        State.variables.Exp += xp * setup.getStatValue(State.variables.CharacterSheet_Player, "xpMultiplier");
    
        return gainEssenceString + "" + essenceGain + "" + xp + "!";
    }
};

setup.getRandomInt = function(min, max) {
    min = Math.ceil(min);
    max = Math.floor(max);
    return Math.floor(Math.random() * (max - min + 1)) + min;
};
/* twine-user-script #39: "0_JSInit.js" */
$('body').append('<canvas id="forceRefreshCanvas" class="steamOverlayCanvasFix"></canvas>');

function forceRefresh() {
	var canvas = document.getElementById("forceRefreshCanvas");
	var ctx = canvas.getContext("2d");
	ctx.clearRect(0, 0, canvas.width, canvas.height);
	window.requestAnimationFrame(forceRefresh);
};

function getTwineLinks() {
    var links = Array.from(document.querySelectorAll('.choiceWindowElement'));
    return links;
};

(function () {
	if (typeof(greenworks) !== 'undefined')
	{
		if(greenworks.init())
		{
			console.log('Steam API has been initalized.');
		}
        
		forceRefresh();
	}

	State.variables.SpecialBuild = $("tw-storydata")
		.attr("options")
		.splitOrEmpty(/\s+/)
		.includes("debug");
		
	UIBar.unstow();
	$('#ui-bar-toggle').remove();	

	window.screenClass = "LargeBorder";
})();

(function () {
	var debug = $("tw-storydata")
	.attr("options")
	.splitOrEmpty(/\s+/)
	.includes("debug");

	if(debug)
	{
		return;
	}

	// Duration of the splash image's fade in.
	var fadeIn  = 3000; // in milliseconds

	// Delay before the splash screen begins to fade out.
	var linger  = 4000; // in milliseconds

	// Duration of the splash screen's fade out.
	var fadeOut = 3000; // in milliseconds

	// Splash image.
	var $image  = $('<img src="https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/full_logo/full_logo_color_bg_fire_small.png">').hide();

	// Display the splash screen.
	$(document.body)
		.append('<div id="splash-screen"></div>')
		.find('#splash-screen')
			.append($image)
			.find('img')
				.fadeIn(fadeIn)
				.end()
			.delay(linger)
			.fadeOut(fadeOut);

	// Set up the removal of the splash screen.
	setTimeout(function () {
		$('#splash-screen').remove();
	}, fadeIn + linger + fadeOut + 1000);
})();

(function () {
    var vol = {};

    // options object
    var options = {
        current  : 0.1,
        rangeMax : 1,
        step     : 0.01,
        setting  : true
    };

    vol.last = options.current;
    vol.start = vol.last / options.rangeMax;

    function setVolume (val, type) {
        // fix for SugarCube 2.28 and higher
        if (typeof val !== 'number') {
            val = Number(val);
        }
        if (Number.isNaN(val) || val < 0) {
            val = 0;
        }
        if (val > 1) {
            val = 1;
        }

        console.log('setting '+ type)

        try {
            if(State.variables.VolumeControls == undefined)
            {
                console.log('no SV oh no!')
            }
            else if (SimpleAudio) 
            {
                if(type == 'master')
                {
                    console.log('doin masterrrrr')
                    if (typeof SimpleAudio.volume === 'function') 
                    {
                        SimpleAudio.volume(State.variables.VolumeControls.master.volume);
                    } 
                    else 
                    {
                        SimpleAudio.volume = State.variables.VolumeControls.master.volume;
                    }

                    //hack to fight a bug in simpleaudio
                    for(let propertyName in State.variables.VolumeControls)
                    {
                        if(propertyName != undefined && State.variables.VolumeControls[propertyName].list != undefined)
                        {
                            for(let playlist of State.variables.VolumeControls[propertyName].list)
                            {
                                var aList = SimpleAudio.lists.get(playlist);
                                if(aList != undefined)
                                {
                                    aList.volume(State.variables.VolumeControls[propertyName].volume);
                                }
                            }
                        }
                    }
                }
                else
                {
                    var control = State.variables.VolumeControls[type];

                    if(control != undefined)
                    {
                        control.volume = val;
                        for(let playlist of control.list)
                        {
                            var aList = SimpleAudio.lists.get(playlist);
                            if(aList != undefined)
                            {
                                aList.volume(val);
                            }
                        }
                    }
                }
            } 
            else 
            {
                throw new Error('Cannot access audio API.');
            }
        } catch (err) {
            // fall back to the wikifier if we have to
            console.error(err.message, err);
            $.wiki('<<masteraudio volume ' + val + '>>');
        } finally {
            return val;
        }
    }

    postdisplay['volume-task'] = function (taskName) {
        console.log('volume-task')
        delete postdisplay[taskName];
        setVolume(vol.start.toFixed(2), 'master');
    }

    $(document).on('input', 'input[name=volume]', function() {
        // grab new volume from input
        var change      = Number($('input[name=volume]').val());
        var newVol      = change / options.rangeMax;
        let current = newVol;

        // change volume; set slider position
        State.variables.VolumeControls.master.volume = current;
        vol.last = change;
        console.log('input master')
        setVolume(current, 'master');
    });

    $(document).on('input', 'input[name=volumeMusic]', function() {
        // grab new volume from input
        var change      = Number($('input[name=volumeMusic]').val());
        var newVol      = change / options.rangeMax;
        let current = newVol;

        // change volume; set slider position
        State.variables.VolumeControls.music.volume = current;
        setVolume(current, 'music');
    });

    $(document).on('input', 'input[name=volumeVoices]', function() {
        // grab new volume from input
        var change      = Number($('input[name=volumeVoices]').val());
        var newVol      = change / options.rangeMax;
        let current = newVol;

        // change volume; set slider position
        State.variables.VolumeControls.voices.volume = current;
        console.log('input voices')
        setVolume(current, 'voices');
    });

    $(document).on('input', 'input[name=volumeSFX]', function() {
        // grab new volume from input
        var change      = Number($('input[name=volumeSFX]').val());
        var newVol      = change / options.rangeMax;
        let current = newVol;

        // change volume; set slider position
        State.variables.VolumeControls.sfx.volume = current;
        setVolume(current, 'sfx');
    });

    Macro.add('volume', {
        handler : function () {
            
            // set up variables
            var $wrapper  = $(document.createElement('span'));
            var $slider   = $(document.createElement('input'));
            var className = 'macro-' + this.name;

			var corruption = setup.getStatValue(State.variables.CharacterSheet_Player, "corruption");
			var sliderClass = setup.getCorruptionUIClassName("dummy", corruption);
            
            // create range input
            $slider
                .attr({
                    id    : 'volume-control',
				    class : sliderClass,
                    type  : 'range',
                    name  : 'volume',
                    min   : '0',
                    max   : options.rangeMax,
                    step  : options.step,
                    value : vol.last
                });
            // class '.macro-volume' and id '#volume-control' for styling
                
            // output
            $wrapper
                .append($slider)
                .addClass(className)
                .appendTo(this.output);
        }
    });

    if (options.setting) 
    {
        // settings API integration, for SugarCube 2.26 and higher
        if (Setting && Setting.addRange && typeof Setting.addRange === 'function') {
            
            function settingsVol () {
                var newVol = settings.volume / options.rangeMax;
                options.current = newVol.toFixed(2);
                setVolume(options.current, 'master');
            }

            Setting.addRange('volume', {
                label : 'Volume: ',
                min : 0,
                max : options.rangeMax,
                step : options.step,
                default : options.current,
                onInit : settingsVol,
                onChange : settingsVol
            });
        } else {
            console.error('This version of SugarCube does not include the `Settings.addRange()` method; please try updating to the latest version of SugarCube.')
        }
    }
})();

//$('#story').prepend('<div id="topBorder"><img id="topBorderImage" src="https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/general/ui_borderlarge_corrupt_middle_top_0.png"></div>');
//$('#story').append('<div id="bottomBorder"><img id="bottomBorderImage" src="https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/general/ui_borderlarge_corrupt_middle_bottom_0.png"></div>');

(function () {
    setup.allCharacters = [];
    setup.corruptionTiers = [0, 50, 200, 500, 1000]

    setup.applyStoryContainer();
})();

/* twine-user-script #40: "DebugTools.js" */
setup.debug_LearnAllMoves = function()
{
	State.variables.CharacterSheet_Player.fight.fightMoveIDs = [
		setup.FightMove_Focus.id,
		setup.FightMove_Sigil_Vitality.id,
		setup.FightMove_Sigil_Pain.id,
        setup.FightMove_Basic_Attack.id, 
		setup.FightMove_Masturbate.id, 
		setup.FightMove_Sigil_Perception.id,
		setup.FightMove_Sigil_Growth.id, 
        setup.FightMove_IncubusCall.id,
		setup.FightMove_IncubusStrike.id,
		setup.FightMove_Do_Nothing.id, 
		setup.FightMove_Bash.id, 
		setup.FightMove_Slash.id, 
		setup.FightMove_SummonParasite.id, 
		setup.FightMove_Stomp.id, 
		setup.FightMove_CumDeluge.id, 
		setup.FightMove_Goo_Stun.id, 
		setup.FightMove_HeraldsDevotion.id, 
		setup.FightMove_TonicOfStillness.id, 
		setup.FightMove_FirstStrike.id, 
		setup.FightMove_EnragedPummel.id, 
        setup.FightMove_Submit_Completely.id];
};

setup.debug_SetHeight = function(character, comparator)
{	
	var comparators = setup.Comparators;
	if(comparator <= comparators.SMALLER)
	{
        setup.setBaseStatValue(character, "height", 50);
	}
	else if(comparator <= comparators.EQUAL)
	{
        setup.setBaseStatValue(character, "height", 71);
	}
	else if(comparator <= comparators.REACHES_WAIST)
	{
        setup.setBaseStatValue(character, "height", 130);
	}
	else if(comparator >= comparators.REACHES_KNEES)
	{
        setup.setBaseStatValue(character, "height", 360);
	}
};

setup.debug_GodStats = function()
{
    setup.setBaseStatValue(State.variables.CharacterSheet_Player, "strength", 99999)
    setup.setBaseStatValue(State.variables.CharacterSheet_Player, "hp", 99999)
    setup.setBaseStatValue(State.variables.CharacterSheet_Player, "stamina", 99999)
    setup.setBaseStatValue(State.variables.CharacterSheet_Player, "critChance", 100)
    setup.setBaseStatValue(State.variables.CharacterSheet_Player, "arousalGain", 20)
    setup.setBaseStatValue(State.variables.CharacterSheet_Player, "staminaRecovery", 20)
};

setup.debug_ResetSize = function()
{
    setup.setBaseStatValue(State.variables.CharacterSheet_Player, "height", 68)
    setup.setBaseStatValue(State.variables.CharacterSheet_Player, "cock", 6)
    setup.setBaseStatValue(State.variables.CharacterSheet_Player, "balls", 2)
    setup.setBaseStatValue(State.variables.CharacterSheet_Player, "muscles", 0)
};

setup.debug_GodSize = function()
{
    setup.setBaseStatValue(State.variables.CharacterSheet_Player, "height", 99999)
    setup.setBaseStatValue(State.variables.CharacterSheet_Player, "cock", 9999)
    setup.setBaseStatValue(State.variables.CharacterSheet_Player, "balls", 3333)
    setup.setBaseStatValue(State.variables.CharacterSheet_Player, "muscles", 9999)
};

setup.debug_GreatSize = function()
{
    setup.setBaseStatValue(State.variables.CharacterSheet_Player, "height", 240)
    setup.setBaseStatValue(State.variables.CharacterSheet_Player, "cock", 70)
    setup.setBaseStatValue(State.variables.CharacterSheet_Player, "balls", 24)
    setup.setBaseStatValue(State.variables.CharacterSheet_Player, "muscles", 70)
};

setup.debug_BigSize = function()
{
    setup.setBaseStatValue(State.variables.CharacterSheet_Player, "height", 96)
    setup.setBaseStatValue(State.variables.CharacterSheet_Player, "cock", 24)
    setup.setBaseStatValue(State.variables.CharacterSheet_Player, "balls", 8)
    setup.setBaseStatValue(State.variables.CharacterSheet_Player, "muscles", 25)
};

setup.debug_ApplyTinyGrowth = function()
{
	setup.applyGrowth(State.variables.CharacterSheet_Player, "cock", 0.01);
	setup.applyGrowth(State.variables.CharacterSheet_Player, "balls", 0.01);
	setup.applyGrowth(State.variables.CharacterSheet_Player, "muscles", 0.01);
	setup.applyGrowth(State.variables.CharacterSheet_Player, "height", 0.01);
};

setup.debug_ApplyMaxGrowth = function()
{
	setup.applyGrowth(State.variables.CharacterSheet_Player, "cock", 9007199254740992);
	setup.applyGrowth(State.variables.CharacterSheet_Player, "balls", 9007199254740992);
	setup.applyGrowth(State.variables.CharacterSheet_Player, "muscles", 9007199254740992);
	setup.applyGrowth(State.variables.CharacterSheet_Player, "height", 9007199254740992);
};

setup.debug_ApplyOverflowGrowth = function()
{
	setup.applyGrowth(State.variables.CharacterSheet_Player, "cock", 9007199254740992000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000 * 9007199254740992000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000);
	setup.applyGrowth(State.variables.CharacterSheet_Player, "balls", 9007199254740992000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000 * 9007199254740992000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000);
	setup.applyGrowth(State.variables.CharacterSheet_Player, "muscles", 9007199254740992000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000 * 9007199254740992000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000);
	setup.applyGrowth(State.variables.CharacterSheet_Player, "height", 9007199254740992000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000 * 9007199254740992000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000);
};

setup.debug_ApplyBunchOfAbilities = function()
{
	State.variables.CharacterSheet_Player.applyAbilityRuntimeData(setup.Ability_EchoForm);
	State.variables.CharacterSheet_Player.applyAbilityRuntimeData(setup.Ability_HostOfEcho);
	State.variables.CharacterSheet_Player.applyAbilityRuntimeData(setup.Ability_NeverendingGrowth);
	State.variables.CharacterSheet_Player.applyAbilityRuntimeData(setup.Ability_UnstoppableExpansion);
	State.variables.CharacterSheet_Player.applyAbilityRuntimeData(setup.Ability_Masochism);
	State.variables.CharacterSheet_Player.applyAbilityRuntimeData(setup.Ability_HerculeanBuild);
	State.variables.CharacterSheet_Player.applyAbilityRuntimeData(setup.Ability_AppetiteForGrowth);
	State.variables.CharacterSheet_Player.applyAbilityRuntimeData(setup.Ability_VigorOfTheEndowed);
	State.variables.CharacterSheet_Player.applyAbilityRuntimeData(setup.Ability_Oath_Containment);
	State.variables.CharacterSheet_Player.applyAbilityRuntimeData(setup.Ability_OrgasmicGrowth);
	State.variables.CharacterSheet_Player.applyAbilityRuntimeData(setup.Ability_LastStand);
	State.variables.CharacterSheet_Player.applyAbilityRuntimeData(setup.Ability_WarriorOfDuality);
	State.variables.CharacterSheet_Player.applyAbilityRuntimeData(setup.Ability_CodexPassion);
	State.variables.CharacterSheet_Player.applyAbilityRuntimeData(setup.Ability_FaithsReward);
	State.variables.CharacterSheet_Player.applyAbilityRuntimeData(setup.Ability_EssenceHoarder);
	State.variables.CharacterSheet_Player.applyAbilityRuntimeData(setup.Ability_SombrevesWhisper);
	State.variables.CharacterSheet_Player.applyAbilityRuntimeData(setup.Ability_VampiricLust);
	State.variables.CharacterSheet_Player.applyAbilityRuntimeData(setup.Ability_Tank);
	State.variables.CharacterSheet_Player.applyAbilityRuntimeData(setup.Ability_Berserking);
	State.variables.CharacterSheet_Player.applyAbilityRuntimeData(setup.Ability_DeadlyAim);
	State.variables.CharacterSheet_Player.applyAbilityRuntimeData(setup.Ability_KalethsFervour);
	State.variables.CharacterSheet_Player.applyAbilityRuntimeData(setup.Ability_PiercingPrecision);
	State.variables.CharacterSheet_Player.applyAbilityRuntimeData(setup.Ability_ChannelTheAstralSoul);
	State.variables.CharacterSheet_Player.applyAbilityRuntimeData(setup.Ability_ValiantRush);
	State.variables.CharacterSheet_Player.applyAbilityRuntimeData(setup.Ability_DracosOmnipotence);
	State.variables.CharacterSheet_Player.applyAbilityRuntimeData(setup.Ability_Momentum);
	State.variables.CharacterSheet_Player.applyAbilityRuntimeData(setup.Ability_Incorruptible);
};

setup.debug_GetEssence = function()
{
    setup.gainEssence(999999);
};

setup.debug_GetExp = function()
{
	State.variables.Exp += 99999999999;
};

setup.debug_GetLevels = function()
{
	State.variables.Level += 999;
};

setup.debug_GetLimitBreaks = function()
{
	State.variables.CharacterSheet_Player.info.limitBreaks.points = 99999;
};

setup.debug_GetCorruption = function()
{
	setup.applyCorruption(State.variables.CharacterSheet_Player, 25);
};

setup.debug_ResetCorruption = function()
{
	setup.applyCorruption(State.variables.CharacterSheet_Player, setup.getStatValue(State.variables.CharacterSheet_Player, "corruption") * -1);
	State.variables.CharacterSheet_Player.info.corruption = 0;
};

setup.debug_SetCanExplore = function()
{
	State.variables.Quest_CanExplore = true;
};

setup.debug_DebugStarter_MQ001 = function()
{
	State.variables.Quest_InProgress = [State.variables.Quest_MQ001_01];
};

setup.debug_DebugStarter_MQ002 = function()
{
	State.variables.Quest_InProgress = [State.variables.Quest_MQ002];
};


setup.debug_DebugStarter_JoinedApothus = function()
{
	State.variables.Quest_InProgress = [State.variables.Quest_MQ002];
	State.variables.CharacterSheet_Apothus.quest.askedAboutHim = true;
	State.variables.CharacterSheet_Player.quest.oaths.apothus = setup.Oath.ACTIVE;
	State.variables.CharacterSheet_Player.quest.apothusRealmFirstTime = false;
};

setup.debug_DebugStarter_MQ003 = function()
{
	State.variables.WorldState.cultManor.monolithBroken = true;
	State.variables.DeathText = setup.DeathTextEnum.POST_APOTHUS
	State.variables.CharacterSheet_Player.removeAbilityRuntimeData(setup.Ability_EmbracedByNyxsLight);
};

setup.setTorgarProgressHigh = function()
{
	State.variables.CharacterSheet_Torgar.quest.relationshipScoring = 6;
	State.variables.CharacterSheet_Torgar.quest.available_postFightPassagesLoss_lowRelaMidRelaTrigger = false;
	State.variables.CharacterSheet_Torgar.quest.available_encounterPassages_lowRelaMidRelaTrigger = false;
	State.variables.CharacterSheet_Torgar.quest.available_postFightPassagesWin_lowRelaMidRelaTrigger = false;
};

setup.setTorgarProgressVeryHigh = function()
{
	setup.setTorgarProgressHigh();
	State.variables.CharacterSheet_Torgar.quest.relationshipScoring = 13;
	State.variables.CharacterSheet_Torgar.quest.available_postFightPassagesLoss_lostPathTrigger = false;
	State.variables.CharacterSheet_Torgar.quest.available_encounterPassages_lostPathTrigger = false;
	State.variables.CharacterSheet_Torgar.quest.available_postFightPassagesWin_lostPathTrigger = false;
};

setup.toggleDebugMode = function()
{
	State.variables.Debug = !State.variables.Debug;
	state.display(state.active.title, null, "back");
};

setup.saves = function()
{
	UI.saves();
};

setup.achievements = function()
{
	Dialog.setup("Achievements");

	var displayString = '<div class="AchievementWindow">'

	var character = State.variables.CharacterSheet_Player;
	var abilities = character.abilityHandler.abilityRuntimeDatas;

	var activatedAchievements = abilities.filter(function(val) {
        if(val.achivemementState == setup.AchievementState.ACTIVATED)
        {
            return true;
        }
        return false;
    });

	if(activatedAchievements.length > 0)
	{
		displayString += '<div class="AchievementWindowContentContainer">';
		displayString += '<div class="AchievementWindowHeader"><h2 class="AchievementWindowHeaderTitle"></h2></div>'

		displayString += '<div class="AchievementCardsContainer">';
		for(let i = 0; i < activatedAchievements.length; i++)
		{
			displayString += setup.displayAchievement(activatedAchievements[i]);
		}
		displayString += '</div>';
		
		displayString += '</div>';
	}

	var completeAchievements = abilities.filter(function(val) {
        if(val.achivemementState == setup.AchievementState.COMPLETE)
        {
            return true;
        }
        return false;
    });

	if(completeAchievements.length > 0)
	{
		displayString += '<div class="AchievementWindowContentContainer">';
		displayString += '<div class="AchievementWindowHeader"><h2 class="AchievementWindowHeaderTitle"></h2></div>'

		displayString += '<div class="AchievementCardsContainer">';
		for(let i = 0; i < completeAchievements.length; i++)
		{
			displayString += setup.displayAchievement(completeAchievements[i]);
		}
		displayString += '</div>';

		displayString += '</div>';
	}

	var idleAchievements = abilities.filter(function(val) {
        if(val.achivemementState == setup.AchievementState.IDLE)
        {
            return true;
        }
        return false;
    });

	if(idleAchievements.length > 0)
	{
		displayString += '<div class="AchievementWindowContentContainer">';
		displayString += '<div class="AchievementWindowHeader"><h2 class="AchievementWindowHeaderTitle"></h2></div>'

		displayString += '<div class="AchievementCardsContainer">';
		for(let i = 0; i < idleAchievements.length; i++)
		{
			displayString += setup.displayAchievement(idleAchievements[i]);
		}
		displayString += '</div>';

		displayString += '</div>';
	}

	displayString += '</div>'
	
	Dialog.append(displayString);
	Dialog.open();
};

setup.displayAchievement = function(runtimeAbility)
{
	var character = State.variables.CharacterSheet_Player;
	var displayString = ''
	let ability = setup.getAbilityByIndex(runtimeAbility.abilityDataIndex);

	var stateClass = "";

	switch (runtimeAbility.achivemementState) {
		case setup.AchievementState.IDLE:
			stateClass = ""
			break;
		case setup.AchievementState.COMPLETE:
			stateClass = ""
			break;
		case setup.AchievementState.ACTIVATED:
			stateClass = ""
			break;
	
		default:
			stateClass = ""
			break;
	}

	displayString += "<div class='AchievementAbility "+ability.id+"'>";
	displayString += "<div class='AchievementAbilityHeader'>" + ability.name + " </div>";
	displayString += 	"<div class='AchievementAbilityBody "+stateClass+"' >";

	displayString += "<div class='AchievementAbilityBodyRow'>";
	displayString += ability.achievementInfo;
	displayString += "</div>";

	if(runtimeAbility.achivemementState != setup.AchievementState.IDLE)
	{
		if(ability.description != undefined || ability.description(character, runtimeAbility) != "")
		{
			displayString += "<div class='AchievementAbilityBodyRow'>";
			displayString += ability.description(character, runtimeAbility);
			displayString += "</div>";
		}

		if(runtimeAbility.achivemementState == setup.AchievementState.ACTIVATED)
		{
			displayString += "<div class='AchievementAbilityBodyRow'>";
			displayString += setup.displayModifiers(runtimeAbility.modifier)
			displayString += "</div>";
		}
		else
		{
			//new game lock
			displayString += "<div class='AchievementAbilityBodyNewGameLock'>";
			displayString += "";
			displayString += "</div>";
		}
	}
	else
	{
		//complete lock
		displayString += "<div class='AchievementAbilityBodyCompleteLock'>";
		displayString += "";
		displayString += "</div>";
	}


	
	displayString += 	"</div>";
	displayString += "</div>";


	return displayString;
};

setup.completeAchievement = function(abilityID)
{
	var abilities = State.variables.CharacterSheet_Player.abilityHandler.abilityRuntimeDatas;

	for(let i = 0; i < abilities.length; i++)
	{
		let ability = setup.getAbilityByIndex(abilities[i].abilityDataIndex);

		if(ability.id == abilityID)
		{
			if(abilities[i].achivemementState == setup.AchievementState.IDLE)
			{
				setup.notify(":" + setup[abilityID].name);
				abilities[i].achivemementState = setup.AchievementState.COMPLETE;
			}
		}
	}
}

setup.restart = function()
{
	Dialog.setup("");
	Dialog.wiki(Story.get("RestartScreen").processText());
	Dialog.open();
};

setup.volumeMenu = function()
{
	Dialog.setup("");

	var displayString = '<div class="VolumeMenuWindow">'

	var corruption = setup.getStatValue(State.variables.CharacterSheet_Player, "corruption");
	var sliderClass = setup.getCorruptionUIClassName("dummy", corruption);
	
	displayString += '<div class="VolumeMenu">';
	displayString += 	'<div class="VolumeMenuTitle"></div>';
	displayString += 		'<div class="VolumeMenuSlider">';
	displayString += 			'<span class="macro-volume">';
	displayString += 			'<input id="volume-control" class="'+sliderClass+'" type="range" name="volumeMusic" min="0" max="1" step="0.01" value="'+State.variables.VolumeControls.music.volume+'">';
	displayString += 		'</span>';
	displayString += 	'</div>';
	displayString += '</div>';

	displayString += '<div class="VolumeMenu">';
	displayString += 	'<div class="VolumeMenuTitle"></div>';
	displayString += 		'<div class="VolumeMenuSlider">';
	displayString += 			'<span class="macro-volume">';
	displayString += 			'<input id="volume-control" class="'+sliderClass+'" type="range" name="volumeSFX" min="0" max="1" step="0.01" value="'+State.variables.VolumeControls.sfx.volume+'">';
	displayString += 		'</span>';
	displayString += 	'</div>';
	displayString += '</div>';

	displayString += '<div class="VolumeMenu">';
	displayString += 	'<div class="VolumeMenuTitle"></div>';
	displayString += 		'<div class="VolumeMenuSlider">';
	displayString += 			'<span class="macro-volume">';
	displayString += 			'<input id="volume-control" class="'+sliderClass+'" type="range" name="volumeVoices" min="0" max="1" step="0.01" value="'+State.variables.VolumeControls.voices.volume+'">';
	displayString += 		'</span>';
	displayString += 	'</div>';
	displayString += '</div>';
	
	displayString += '</div>'
	
	Dialog.append(displayString);
	Dialog.open();
};

setup.backupAchievements = function()
{
	var abilities = State.variables.CharacterSheet_Player.abilityHandler.abilityRuntimeDatas;
	State.variables.AchievementBackup = [];

	for(var i = 0; i < abilities.length; i++)
	{
		var abilityData = setup.getAbilityByIndex(abilities[i].abilityDataIndex);

		if(abilityData.isAchievement == true && abilities[i].achivemementState > setup.AchievementState.IDLE)
		{
			var achievement = {};
			achievement.id = abilityData.id;
			State.variables.AchievementBackup.push(achievement);
		}
	}
};

setup.loadBackedUpAchievements = function()
{
	var abilities = State.variables.CharacterSheet_Player.abilityHandler.abilityRuntimeDatas;
	var backup = State.variables.AchievementBackup;

	for(var i = 0; i < abilities.length; i++)
	{
		var abilityData = setup.getAbilityByIndex(abilities[i].abilityDataIndex);

		if(abilityData.isAchievement == true)
		{
			for(var j = 0; j < backup.length; j++)
			{
				if(backup[j].id == abilityData.id)
				{
					abilities[i].achivemementState = setup.AchievementState.ACTIVATED;
				}
			}
		}
	}

	var params = 
    {
        trigger: setup.AbilityTrigger.ON_NEW_GAME_PLUS,
        self: State.variables.CharacterSheet_Player,
    }
    State.variables.CharacterSheet_Player.broadcastAbilityTrigger(params);
    
    setup.updateStaticCorruptionUI(State.variables.CharacterSheet_Player);

	State.variables.AchievementBackup = null;
};

setup.parseIntStats = function()
{
	State.variables.CharacterSheet_Player.info.muscles = parseInt(State.variables.CharacterSheet_Player.info.muscles);
	State.variables.CharacterSheet_Player.info.height = parseInt(State.variables.CharacterSheet_Player.info.height);
	State.variables.CharacterSheet_Player.info.cock = parseInt(State.variables.CharacterSheet_Player.info.cock);
	State.variables.CharacterSheet_Player.info.balls = parseInt(State.variables.CharacterSheet_Player.info.balls);
};
/* twine-user-script #41: "Gamepad.js" */
/*
 * Copyright 2012 Priit Kallas <kallaspriit@gmail.com>
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 */

(function(exports) {
	'use strict';

	/**
	 * A null function - does nothing, returns nothing
	 */
	var nullFunction = function() {};

	/**
	 * The null platform, which doesn't support anything
	 */
	var nullPlatform = {
		getType: function() {
			return 'null';
		},
		isSupported: function() {
			return false;
		},
		update: nullFunction
	};

	/**
	 * This strategy uses a timer function to call an update function.
	 * The timer (re)start function can be provided or the strategy reverts to
	 * one of the window.*requestAnimationFrame variants.
	 *
	 * @class AnimFrameUpdateStrategy
	 * @constructor
	 * @param {Function} [requestAnimationFrame] function to use for timer creation
	 * @module Gamepad
	 */
	var AnimFrameUpdateStrategy = function(requestAnimationFrame) {
		var that = this;
		var win = window;

		this.update = nullFunction;

		this.requestAnimationFrame = requestAnimationFrame || win.requestAnimationFrame ||
			win.webkitRequestAnimationFrame || win.mozRequestAnimationFrame;

		/**
		 * This method calls the (user) update and restarts itself
		 * @method tickFunction
		 */
		this.tickFunction = function() {
			that.update();
			that.startTicker();
		};

		/**
		 * (Re)Starts the ticker
		 * @method startTicker
		 */
		this.startTicker = function() {
			that.requestAnimationFrame.apply(win, [that.tickFunction]);
		};
	};

	/**
	 * Starts the update strategy using the given function
	 *
	 * @method start
	 * @param {Function} updateFunction the function to call at each update
	 */
	AnimFrameUpdateStrategy.prototype.start = function(updateFunction) {
		this.update = updateFunction || nullFunction;
		this.startTicker();
	};

	/**
	 * This strategy gives the user the ability to call the library internal
	 * update function on request. Use this strategy if you already have a
	 * timer function running by requestAnimationFrame and you need fine control
	 * over when the gamepads are updated.
	 *
	 * @class ManualUpdateStrategy
	 * @constructor
	 * @module Gamepad
	 */
	var ManualUpdateStrategy = function() {

	};

	/**
	 * Calls the update function in the started state. Does nothing otherwise.
	 * @method update
	 */
	ManualUpdateStrategy.prototype.update = nullFunction;

	/**
	 * Starts the update strategy using the given function
	 *
	 * @method start
	 * @param {Function} updateFunction the function to call at each update
	 */
	ManualUpdateStrategy.prototype.start = function(updateFunction) {
		this.update = updateFunction || nullFunction;
	};

	/**
	 * This platform is for webkit based environments that need to be polled
	 * for updates.
	 *
	 * @class WebKitPlatform
	 * @constructor
	 * @param {Object} listener the listener to provide _connect and _disconnect callbacks
	 * @param {Function} gamepadGetter the poll function to return an array of connected gamepads
	 * @module Gamepad
	 */
	var WebKitPlatform = function(listener, gamepadGetter) {
		this.listener = listener;
		this.gamepadGetter = gamepadGetter;
		this.knownGamepads = [];
	};

	/**
	 * Provides a platform object that returns true for isSupported() if valid.
	 * @method factory
	 * @static
	 * @param {Object} listener the listener to use
	 * @return {Object} a platform object
	 */
	WebKitPlatform.factory = function(listener) {
		var platform = nullPlatform;
		var navigator = window && window.navigator;

		if (navigator) {
			if (typeof(navigator.getGamepads) !== 'undefined') {
				platform = new WebKitPlatform(listener, function() {
					return navigator.getGamepads();
				});
			} else if (typeof(navigator.webkitGamepads) !== 'undefined') {
				platform = new WebKitPlatform(listener, function() {
					return navigator.webkitGamepads();
				});
			} else if (typeof(navigator.webkitGetGamepads) !== 'undefined') {
				platform = new WebKitPlatform(listener, function() {
					return navigator.webkitGetGamepads();
				});
			}
		}

		return platform;
	};

	/**
	 * @method getType()
	 * @static
	 * @return {String} 'WebKit'
	 */
	WebKitPlatform.getType = function() {
		return 'WebKit';
	},

	/**
	 * @method getType()
	 * @return {String} 'WebKit'
	 */
	WebKitPlatform.prototype.getType = function() {
		return WebKitPlatform.getType();
	},

	/**
	 * @method isSupported
	 * @return {Boolean} true
	 */
	WebKitPlatform.prototype.isSupported = function() {
		return true;
	};

	/**
	 * Queries the currently connected gamepads and reports any changes.
	 * @method update
	 */
	WebKitPlatform.prototype.update = function() {
		var that = this;
		var gamepads = Array.prototype.slice.call(this.gamepadGetter(), 0);
		var gamepad;
		var i;

		for (i = this.knownGamepads.length - 1; i >= 0; i--) {
			gamepad = this.knownGamepads[i];
			if (gamepads.indexOf(gamepad) < 0) {
				this.knownGamepads.splice(i, 1);
				this.listener._disconnect(gamepad);
			}
		}

		for (i = 0; i < gamepads.length; i++) {
			gamepad = gamepads[i];
			if (gamepad && (that.knownGamepads.indexOf(gamepad) < 0)) {
				that.knownGamepads.push(gamepad);
				that.listener._connect(gamepad);
			}
		}
	};

	/**
	 * This platform is for mozilla based environments that provide gamepad
	 * updates via events.
	 *
	 * @class FirefoxPlatform
	 * @constructor
	 * @module Gamepad
	 */
	var FirefoxPlatform = function(listener) {
		this.listener = listener;

		window.addEventListener('gamepadconnected', function(e) {
			listener._connect(e.gamepad);
		});
		window.addEventListener('gamepaddisconnected', function(e) {
			listener._disconnect(e.gamepad);
		});
	};

	/**
	 * Provides a platform object that returns true for isSupported() if valid.
	 * @method factory
	 * @static
	 * @param {Object} listener the listener to use
	 * @return {Object} a platform object
	 */
	FirefoxPlatform.factory = function(listener) {
		var platform = nullPlatform;

		if (window && (typeof(window.addEventListener) !== 'undefined')) {
			platform = new FirefoxPlatform(listener);
		}

		return platform;
	};

	/**
	 * @method getType()
	 * @static
	 * @return {String} 'Firefox'
	 */
	FirefoxPlatform.getType = function() {
		return 'Firefox';
	},

	/**
	 * @method getType()
	 * @return {String} 'Firefox'
	 */
	FirefoxPlatform.prototype.getType = function() {
		return FirefoxPlatform.getType();
	},

	/**
	 * @method isSupported
	 * @return {Boolean} true
	 */
	FirefoxPlatform.prototype.isSupported = function() {
		var navigator = window && window.navigator;
		return navigator.userAgent.indexOf('Firefox') !== -1;
	};

	/**
	 * Does nothing on the Firefox platform
	 * @method update
	 */
	FirefoxPlatform.prototype.update = nullFunction;

	/**
	 * Provides simple interface and multi-platform support for the gamepad API.
	 *
	 * You can change the deadzone and maximizeThreshold parameters to suit your
	 * taste but the defaults should generally work fine.
	 *
	 * @class Gamepad
	 * @constructor
	 * @param {Object} [updateStrategy] an update strategy, defaulting to
	 *		{{#crossLink "AnimFrameUpdateStrategy"}}{{/crossLink}}
	 * @module Gamepad
	 * @author Priit Kallas <kallaspriit@gmail.com>
	 */
	var Gamepad = function(updateStrategy) {
		this.updateStrategy = updateStrategy || new AnimFrameUpdateStrategy();
		this.gamepads = [];
		this.listeners = {};
		this.platform = nullPlatform;
		this.deadzone = 0.03;
		this.maximizeThreshold = 0.97;
	};

	/**
	 * The available update strategies
	 * @property UpdateStrategies
	 * @param {AnimFrameUpdateStrategy} AnimFrameUpdateStrategy
	 * @param {ManualUpdateStrategy} ManualUpdateStrategy
	 */
	Gamepad.UpdateStrategies = {
		AnimFrameUpdateStrategy: AnimFrameUpdateStrategy,
		ManualUpdateStrategy: ManualUpdateStrategy
	};

	/**
	 * List of factories of supported platforms. Currently available platforms:
	 * {{#crossLink "WebKitPlatform"}}{{/crossLink}},
	 * {{#crossLink "FirefoxPlatform"}}{{/crossLink}},
	 * @property PlatformFactories
	 * @type {Array}
	 */
	Gamepad.PlatformFactories = [FirefoxPlatform.factory, WebKitPlatform.factory];

	/**
	 * List of supported controller types.
	 *
	 * @property Type
	 * @param {String} Type.N64 Retrolink N64 controller
	 * @param {String} Type.PLAYSTATION Playstation controller
	 * @param {String} Type.LOGITECH Logitech controller
	 * @param {String} Type.XBOX XBOX controller
	 * @param {String} Type.UNKNOWN Unknown controller
	 */
	Gamepad.Type = {
		N64: 'n64',
		PLAYSTATION: 'playstation',
		LOGITECH: 'logitech',
		XBOX: 'xbox',
		UNKNOWN: 'unknown'
	};

	/*
	 * List of events you can expect from the library.
	 *
	 * CONNECTED, DISCONNECTED and UNSUPPORTED events include the gamepad in
	 * question and tick provides the list of all connected gamepads.
	 *
	 * BUTTON_DOWN and BUTTON_UP events provide an alternative to polling button states at each tick.
	 *
	 * AXIS_CHANGED is called if a value of some specific axis changes.
	 */
	Gamepad.Event = {
		/**
		 * Triggered when a new controller connects.
		 *
		 * @event connected
		 * @param {Object} device
		 */
		CONNECTED: 'connected',

		/**
		 * Called when an unsupported controller connects.
		 *
		 * @event unsupported
		 * @param {Object} device
		 * @deprecated not used anymore. Any controller is supported.
		 */
		UNSUPPORTED: 'unsupported',

		/**
		 * Triggered when a controller disconnects.
		 *
		 * @event disconnected
		 * @param {Object} device
		 */
		DISCONNECTED: 'disconnected',

		/**
		 * Called regularly with the latest controllers info.
		 *
		 * @event tick
		 * @param {Array} gamepads
		 */
		TICK: 'tick',

		/**
		 * Called when a gamepad button is pressed down.
		 *
		 * @event button-down
		 * @param {Object} event
		 * @param {Object} event.gamepad The gamepad object
		 * @param {String} event.control Control name
		 */
		BUTTON_DOWN: 'button-down',

		/**
		 * Called when a gamepad button is released.
		 *
		 * @event button-up
		 * @param {Object} event
		 * @param {Object} event.gamepad The gamepad object
		 * @param {String} event.control Control name
		 */
		BUTTON_UP: 'button-up',

		/**
		 * Called when gamepad axis value changed.
		 *
		 * @event axis-changed
		 * @param {Object} event
		 * @param {Object} event.gamepad The gamepad object
		 * @param {String} event.axis Axis name
		 * @param {Number} event.value New axis value
		 */
		AXIS_CHANGED: 'axis-changed'
	};

	/**
	 * List of standard button names. The index is the according standard button
	 * index as per standard.
	 *
	 * @property StandardButtons
	 */
	Gamepad.StandardButtons = [
		'FACE_1', 'FACE_2', 'FACE_3', 'FACE_4',
		'LEFT_TOP_SHOULDER', 'RIGHT_TOP_SHOULDER', 'LEFT_BOTTOM_SHOULDER', 'RIGHT_BOTTOM_SHOULDER',
		'SELECT_BACK', 'START_FORWARD', 'LEFT_STICK', 'RIGHT_STICK',
		'DPAD_UP', 'DPAD_DOWN', 'DPAD_LEFT', 'DPAD_RIGHT',
		'HOME'
	];

	/**
	 * List of standard axis names. The index is the according standard axis
	 * index as per standard.
	 *
	 * @property StandardAxes
	 */
	Gamepad.StandardAxes = ['LEFT_STICK_X', 'LEFT_STICK_Y', 'RIGHT_STICK_X', 'RIGHT_STICK_Y'];

	var getControlName = function(names, index, extraPrefix) {
		return (index < names.length) ? names[index] : extraPrefix + (index - names.length + 1);
	};

	/**
	 * The standard mapping that represents the mapping as per definition.
	 * Each button and axis map to the same index.
	 *
	 * @property StandardMapping
	 */
	Gamepad.StandardMapping = {
		env: {},
		buttons: {
			byButton: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16]
		},
		axes: {
			byAxis: [0, 1, 2, 3]
		}
	};

	/**
	 * Mapping of various gamepads that differ from the standard mapping on
	 * different platforms too unify their buttons and axes.
	 *
	 * Each mapping should have an 'env' object, which describes the environment
	 * in which the mapping is active. The more entries such an environment has,
	 * the more specific it is.
	 *
	 * Mappings are expressed for both buttons and axes. Buttons might refer to
	 * axes if they are notified as such.
	 *
	 * @property Mappings
	 */
	Gamepad.Mappings = [
		// Retrolink N64 controller on Firefox
		{
			env: {
				platform: FirefoxPlatform.getType(),
				type: Gamepad.Type.N64
			},
			buttons: {
				byButton: [
					// TODO: Figure out which buttons to map A and Z buttons to.
					2, // FACE_1 -- C-down button
					1, // FACE_2 -- C-right button
					3, // FACE_3 -- C-left button
					0, // FACE_4 -- C-down button
					4, // LEFT_TOP_SHOULDER -- L button
					5, // RIGHT_TOP_SHOULDER -- R button
					-1, // LEFT_BOTTOM_SHOULDER -- missing on controller
					-1, // RIGHT_BOTTOM_SHOULDER -- missing on controller
					8, // SELECT_BACK -- B button (is this right?)
					9, // START_FORWARD -- START button
					-1, // LEFT_STICK -- missing on controller
					-1, // RIGHT_STICK -- missing on controller
					12, // DPAD_UP -- not supported by API (but may eventually)
					13, // DPAD_DOWN -- not supported by API (but may eventually)
					14, // DPAD_LEFT -- not supported by API (but may eventually)
					15, // DPAD_RIGHT -- not supported by API (but may eventually)
					-1 // HOME -- missing on controller (could be START/B?)
				]
			},
			axes: {
				byAxis: [
					1, // LEFT_STICK_X
					2, // LEFT_STICK_Y
					-1, // RIGHT_STICK_X
					-1 // RIGHT_STICK_Y
				]
			}
		},
		// Retrolink N64 controller on WebKit
		{
			env: {
				platform: WebKitPlatform.getType(),
				type: Gamepad.Type.N64
			},
			buttons: {
				byButton: [
					// TODO: Figure out which buttons to map A and Z buttons to.
					2, // FACE_1 -- C-down button
					1, // FACE_2 -- C-right button
					3, // FACE_3 -- C-left button
					0, // FACE_4 -- C-down button
					4, // LEFT_TOP_SHOULDER -- L button
					5, // RIGHT_TOP_SHOULDER -- R button
					-1, // LEFT_BOTTOM_SHOULDER -- missing on controller
					-1, // RIGHT_BOTTOM_SHOULDER -- missing on controller
					8, // SELECT_BACK -- B button (is this right?)
					9, // START_FORWARD -- START button
					-1, // LEFT_STICK -- missing on controller
					-1, // RIGHT_STICK -- missing on controller
					12, // DPAD_UP -- D-Pad-up button
					13, // DPAD_DOWN -- D-Pad-down button
					14, // DPAD_LEFT -- D-Pad-left button
					15, // DPAD_RIGHT -- D-Pad-right button
					-1 // HOME -- missing on controller (could be START/B?)
				]
			},
			axes: {
				byAxis: [
					0, // LEFT_STICK_X
					1, // LEFT_STICK_Y
					-1, // RIGHT_STICK_X
					-1 // RIGHT_STICK_Y
				]
			}
		},
		// XBOX360 controller on Firefox
		{
			env: {
				platform: FirefoxPlatform.getType(),
				type: Gamepad.Type.XBOX
			},
			buttons: {
				byButton: [0, 1, 2, 3, 4, 5, 15, 16, 9, 8, 6, 7, 11, 12, 13, 14, 10]
			},
			axes: {
				byAxis: [0, 1, 2, 3]
			}
		},
		// PS3 controller on Firefox
		{
			env: {
				platform: FirefoxPlatform.getType(),
				type: Gamepad.Type.PLAYSTATION
			},
			buttons: {
				byButton: [14, 13, 15, 12, 10, 11, 8, 9, 0, 3, 1, 2, 4, 6, 7, 5, 16]
			},
			axes: {
				byAxis: [0, 1, 2, 3]
			}
		},
		// Logitech gamepad on WebKit
		{
			env: {
				platform: WebKitPlatform.getType(),
				type: Gamepad.Type.LOGITECH
			},
			buttons: { // TODO: This can't be right - LEFT/RIGHT_STICK have same mappings as HOME/DPAD_UP
				byButton: [1, 2, 0, 3, 4, 5, 6, 7, 8, 9, 10, 11, 11, 12, 13, 14, 10]
			},
			axes: {
				byAxis: [0, 1, 2, 3]
			}
		},
		// Logitech gamepad on Firefox
		{
			env: {
				platform: FirefoxPlatform.getType(),
				type: Gamepad.Type.LOGITECH
			},
			buttons: {
				byButton: [0, 1, 2, 3, 4, 5, -1, -1, 6, 7, 8, 9, 11, 12, 13, 14, 10],
				byAxis: [-1, -1, -1, -1, -1, -1, [2, 0, 1],
					[2, 0, -1]
				]
			},
			axes: {
				byAxis: [0, 1, 3, 4]
			}
		}
	];

	/**
	 * Initializes the gamepad.
	 *
	 * You usually want to bind to the events first and then initialize it.
	 *
	 * @method init
	 * @return {Boolean} true if a supporting platform was detected, false otherwise.
	 */
	Gamepad.prototype.init = function() {
		var platform = Gamepad.resolvePlatform(this);
		var that = this;

		this.platform = platform;
		this.updateStrategy.start(function() {
			that._update();
		});

		return platform.isSupported();
	};

	/**
	 * Binds a listener to a gamepad event.
	 *
	 * @method bind
	 * @param {String} event Event to bind to, one of Gamepad.Event..
	 * @param {Function} listener Listener to call when given event occurs
	 * @return {Gamepad} Self
	 */
	Gamepad.prototype.bind = function(event, listener) {
		if (typeof(this.listeners[event]) === 'undefined') {
			this.listeners[event] = [];
		}

		this.listeners[event].push(listener);

		return this;
	};

	/**
	 * Removes listener of given type.
	 *
	 * If no type is given, all listeners are removed. If no listener is given, all
	 * listeners of given type are removed.
	 *
	 * @method unbind
	 * @param {String} [type] Type of listener to remove
	 * @param {Function} [listener] The listener function to remove
	 * @return {Boolean} Was unbinding the listener successful
	 */
	Gamepad.prototype.unbind = function(type, listener) {
		if (typeof(type) === 'undefined') {
			this.listeners = {};

			return;
		}

		if (typeof(listener) === 'undefined') {
			this.listeners[type] = [];

			return;
		}

		if (typeof(this.listeners[type]) === 'undefined') {
			return false;
		}

		for (var i = 0; i < this.listeners[type].length; i++) {
			if (this.listeners[type][i] === listener) {
				this.listeners[type].splice(i, 1);

				return true;
			}
		}

		return false;
	};

	/**
	 * Returns the number of connected gamepads.
	 *
	 * @method count
	 * @return {Number}
	 */
	Gamepad.prototype.count = function() {
		return this.gamepads.length;
	};

	/**
	 * Fires an internal event with given data.
	 *
	 * @method _fire
	 * @param {String} event Event to fire, one of Gamepad.Event..
	 * @param {*} data Data to pass to the listener
	 * @private
	 */
	Gamepad.prototype._fire = function(event, data) {
		if (typeof(this.listeners[event]) === 'undefined') {
			return;
		}

		for (var i = 0; i < this.listeners[event].length; i++) {
			this.listeners[event][i].apply(this.listeners[event][i], [data]);
		}
	};

	/**
	 * @method getNullPlatform
	 * @static
	 * @return {Object} a platform that does not support anything
	 */
	Gamepad.getNullPlatform = function() {
		return Object.create(nullPlatform);
	};

	/**
	 * Resolves platform.
	 *
	 * @method resolvePlatform
	 * @static
	 * @param listener {Object} the listener to handle _connect() or _disconnect() calls
	 * @return {Object} A platform instance
	 */
	Gamepad.resolvePlatform = function(listener) {
		var platform = nullPlatform;
		var i;

		for (i = 0; !platform.isSupported() && (i < Gamepad.PlatformFactories.length); i++) {
			platform = Gamepad.PlatformFactories[i](listener);
		}

		return platform;
	};

	/**
	 * Registers given gamepad.
	 *
	 * @method _connect
	 * @param {Object} gamepad Gamepad to connect to
	 * @private
	 */
	Gamepad.prototype._connect = function(gamepad) {
		var mapping = this._resolveMapping(gamepad);
		var count;
		var i;

		//gamepad.mapping = this._resolveMapping(gamepad);
		gamepad.state = {};
		gamepad.lastState = {};
		gamepad.updater = [];

		count = mapping.buttons.byButton.length;
		for (i = 0; i < count; i++) {
			this._addButtonUpdater(gamepad, mapping, i);
		}

		count = mapping.axes.byAxis.length;
		for (i = 0; i < count; i++) {
			this._addAxisUpdater(gamepad, mapping, i);
		}

		this.gamepads[gamepad.index] = gamepad;

		this._fire(Gamepad.Event.CONNECTED, gamepad);
	};

	/**
	 * Adds an updater for a button control
	 *
	 * @method _addButtonUpdater
	 * @private
	 * @param {Object} gamepad the gamepad for which to create the updater
	 * @param {Object} mapping the mapping on which to work on
	 * @param {Number} index button index
	 */
	Gamepad.prototype._addButtonUpdater = function(gamepad, mapping, index) {
		var updater = nullFunction;
		var controlName = getControlName(Gamepad.StandardButtons, index, 'EXTRA_BUTTON_');
		var getter = this._createButtonGetter(gamepad, mapping.buttons, index);
		var that = this;
		var buttonEventData = {
			gamepad: gamepad,
			control: controlName
		};

		gamepad.state[controlName] = 0;
		gamepad.lastState[controlName] = 0;

		updater = function() {
			var value = getter();
			var lastValue = gamepad.lastState[controlName];
			var isDown = value > 0.5;
			var wasDown = lastValue > 0.5;

			gamepad.state[controlName] = value;

			if (isDown && !wasDown) {
				that._fire(Gamepad.Event.BUTTON_DOWN, Object.create(buttonEventData));
			} else if (!isDown && wasDown) {
				that._fire(Gamepad.Event.BUTTON_UP, Object.create(buttonEventData));
			}

			if ((value !== 0) && (value !== 1) && (value !== lastValue)) {
				that._fireAxisChangedEvent(gamepad, controlName, value);
			}

			gamepad.lastState[controlName] = value;
		};

		gamepad.updater.push(updater);
	};

	/**
	 * Adds an updater for an axis control
	 *
	 * @method _addAxisUpdater
	 * @private
	 * @param {Object} gamepad the gamepad for which to create the updater
	 * @param {Object} mapping the mapping on which to work on
	 * @param {Number} index axis index
	 */
	Gamepad.prototype._addAxisUpdater = function(gamepad, mapping, index) {
		var updater = nullFunction;
		var controlName = getControlName(Gamepad.StandardAxes, index, 'EXTRA_AXIS_');
		var getter = this._createAxisGetter(gamepad, mapping.axes, index);
		var that = this;

		gamepad.state[controlName] = 0;
		gamepad.lastState[controlName] = 0;

		updater = function() {
			var value = getter();
			var lastValue = gamepad.lastState[controlName];

			gamepad.state[controlName] = value;

			if ((value !== lastValue)) {
				that._fireAxisChangedEvent(gamepad, controlName, value);
			}

			gamepad.lastState[controlName] = value;
		};

		gamepad.updater.push(updater);
	};

	/**
	 * Fires an AXIS_CHANGED event
	 * @method _fireAxisChangedEvent
	 * @private
	 * @param {Object} gamepad the gamepad to notify for
	 * @param {String} controlName name of the control that changes its value
	 * @param {Number} value the new value
	 */
	Gamepad.prototype._fireAxisChangedEvent = function(gamepad, controlName, value) {
		var eventData = {
			gamepad: gamepad,
			axis: controlName,
			value: value
		};

		this._fire(Gamepad.Event.AXIS_CHANGED, eventData);
	};

	/**
	 * Creates a getter according to the mapping entry for the specific index.
	 * Currently supported entries:
	 *
	 * buttons.byButton[index]: Number := Index into gamepad.buttons; -1 tests byAxis
	 * buttons.byAxis[index]: Array := [Index into gamepad.axes; Zero Value, One Value]
	 *
	 * @method _createButtonGetter
	 * @private
	 * @param {Object} gamepad the gamepad for which to create a getter
	 * @param {Object} buttons the mappings entry for the buttons
	 * @param {Number} index the specific button entry
	 * @return {Function} a getter returning the value for the requested button
	 */
	Gamepad.prototype._createButtonGetter = (function() {
		var nullGetter = function() {
			return 0;
		};

		var createRangeGetter = function(valueGetter, from, to) {
			var getter = nullGetter;

			if (from < to) {
				getter = function() {
					var range = to - from;
					var value = valueGetter();

					value = (value - from) / range;

					return (value < 0) ? 0 : value;
				};
			} else if (to < from) {
				getter = function() {
					var range = from - to;
					var value = valueGetter();

					value = (value - to) / range;

					return (value > 1) ? 0 : (1 - value);
				};
			}

			return getter;
		};

		var isArray = function(thing) {
			return Object.prototype.toString.call(thing) === '[object Array]';
		};

		return function(gamepad, buttons, index) {
			var getter = nullGetter;
			var entry;
			var that = this;

			entry = buttons.byButton[index];
			if (entry !== -1) {
				if ((typeof(entry) === 'number') && (entry < gamepad.buttons.length)) {
					getter = function() {
						var value = gamepad.buttons[entry];

						if (typeof value === 'number') {
							return value;
						}

						if (typeof value.value === 'number') {
							return value.value;
						}

						return 0;
					};
				}
			} else if (buttons.byAxis && (index < buttons.byAxis.length)) {
				entry = buttons.byAxis[index];
				if (isArray(entry) && (entry.length == 3) && (entry[0] < gamepad.axes.length)) {
					getter = function() {
						var value = gamepad.axes[entry[0]];

						return that._applyDeadzoneMaximize(value);
					};

					getter = createRangeGetter(getter, entry[1], entry[2]);
				}
			}

			return getter;
		};
	})();

	/**
	 * Creates a getter according to the mapping entry for the specific index.
	 * Currently supported entries:
	 *
	 * axes.byAxis[index]: Number := Index into gamepad.axes; -1 ignored
	 *
	 * @method _createAxisGetter
	 * @private
	 * @param {Object} gamepad the gamepad for which to create a getter
	 * @param {Object} axes the mappings entry for the axes
	 * @param {Number} index the specific axis entry
	 * @return {Function} a getter returning the value for the requested axis
	 */
	Gamepad.prototype._createAxisGetter = (function() {
		var nullGetter = function() {
			return 0;
		};

		return function(gamepad, axes, index) {
			var getter = nullGetter;
			var entry;
			var that = this;

			entry = axes.byAxis[index];
			if (entry !== -1) {
				if ((typeof(entry) === 'number') && (entry < gamepad.axes.length)) {
					getter = function() {
						var value = gamepad.axes[entry];

						return that._applyDeadzoneMaximize(value);
					};
				}
			}

			return getter;
		};
	})();

	/**
	 * Disconnects from given gamepad.
	 *
	 * @method _disconnect
	 * @param {Object} gamepad Gamepad to disconnect
	 * @private
	 */
	Gamepad.prototype._disconnect = function(gamepad) {
		var newGamepads = [],
			i;

		if (typeof(this.gamepads[gamepad.index]) !== 'undefined') {
			delete this.gamepads[gamepad.index];
		}

		for (i = 0; i < this.gamepads.length; i++) {
			if (typeof(this.gamepads[i]) !== 'undefined') {
				newGamepads[i] = this.gamepads[i];
			}
		}

		this.gamepads = newGamepads;

		this._fire(Gamepad.Event.DISCONNECTED, gamepad);
	};

	/**
	 * Resolves controller type from its id.
	 *
	 * @method _resolveControllerType
	 * @param {String} id Controller id
	 * @return {String} Controller type, one of Gamepad.Type
	 * @private
	 */
	Gamepad.prototype._resolveControllerType = function(id) {
		// Lowercase and strip all extra whitespace.
		id = id.toLowerCase().replace(/\s+/g, ' ').replace(/^\s+|\s+$/g, '');

		if (id.indexOf('playstation') !== -1) {
			return Gamepad.Type.PLAYSTATION;
		} else if (
			id.indexOf('logitech') !== -1 || id.indexOf('wireless gamepad') !== -1) {
			return Gamepad.Type.LOGITECH;
		} else if (id.indexOf('xbox') !== -1 || id.indexOf('360') !== -1) {
			return Gamepad.Type.XBOX;
		} else if ((id.indexOf('79-6-generic') !== -1 && id.indexOf('joystick') !== -1) ||
			(id.indexOf('vendor: 0079 product: 0006') !== -1 &&
				id.indexOf('generic usb joystick') !== -1)) {
			return Gamepad.Type.N64;
		} else {
			return Gamepad.Type.UNKNOWN;
		}
	};

	/**
	 * @method _resolveMapping
	 * @private
	 * @param {Object} gamepad the gamepad for which to resolve the mapping
	 * @return {Object} a mapping object for the given gamepad
	 */
	Gamepad.prototype._resolveMapping = function(gamepad) {
		var mappings = Gamepad.Mappings;
		var mapping = null;
		var env = {
			platform: this.platform.getType(),
			type: this._resolveControllerType(gamepad.id)
		};
		var i;
		var test;

		for (i = 0; !mapping && (i < mappings.length); i++) {
			test = mappings[i];
			if (Gamepad.envMatchesFilter(test.env, env)) {
				mapping = test;
			}
		}

		return mapping || Gamepad.StandardMapping;
	};

	/**
	 * @method envMatchesFilter
	 * @static
	 * @param {Object} filter the filter object describing properties to match
	 * @param {Object} env the environment object that is matched against filter
	 * @return {Boolean} true if env is covered by filter
	 */
	Gamepad.envMatchesFilter = function(filter, env) {
		var result = true;
		var field;

		for (field in filter) {
			if (filter[field] !== env[field]) {
				result = false;
			}
		}

		return result;
	};

	/**
	 * Updates the controllers, triggering TICK events.
	 *
	 * @method _update
	 * @private
	 */
	Gamepad.prototype._update = function() {
		this.platform.update();

		this.gamepads.forEach(function(gamepad) {
			if (gamepad) {
				gamepad.updater.forEach(function(updater) {
					updater();
				});
			}
		});

		if (this.gamepads.length > 0) {
			this._fire(Gamepad.Event.TICK, this.gamepads);
		}
	},

	/**
	 * Applies deadzone and maximization.
	 *
	 * You can change the thresholds via deadzone and maximizeThreshold members.
	 *
	 * @method _applyDeadzoneMaximize
	 * @param {Number} value Value to modify
	 * @param {Number} [deadzone] Deadzone to apply
	 * @param {Number} [maximizeThreshold] From which value to maximize value
	 * @private
	 */
	Gamepad.prototype._applyDeadzoneMaximize = function(
		value,
		deadzone,
		maximizeThreshold) {
		deadzone = typeof(deadzone) !== 'undefined' ? deadzone : this.deadzone;
		maximizeThreshold = typeof(maximizeThreshold) !== 'undefined' ? maximizeThreshold : this.maximizeThreshold;

		if (value >= 0) {
			if (value < deadzone) {
				value = 0;
			} else if (value > maximizeThreshold) {
				value = 1;
			}
		} else {
			if (value > -deadzone) {
				value = 0;
			} else if (value < -maximizeThreshold) {
				value = -1;
			}
		}

		return value;
	};

	exports.Gamepad = Gamepad;

})(((typeof(module) !== 'undefined') && module.exports) || window);
/* twine-user-script #42: "Gamepad_Twine.js" */
(function(exports) {
    var Gamepad = window.Gamepad;
  
    // Removed until it's tested with node-webkit.
    // if ((typeof(module) !== 'undefined') && module.exports) {
    //   Gamepad = require('gamepad');
    // } else {
    //   Gamepad = window.Gamepad;
    // }
  
    var gamepad = new Gamepad();
    var axes = { LEFT_STICK_X: 0, LEFT_STICK_Y: 0 };
    var DEADZONE = 0.5;
  
    gamepad.bind(Gamepad.Event.CONNECTED, function(_device) {
      console.log('Gamepad connected.');
    });
  
    gamepad.bind(Gamepad.Event.DISCONNECTED, function(_device) {
      console.log('Gamepad disconnected.');
    });
  
    gamepad.bind(Gamepad.Event.BUTTON_DOWN, function(e) {
      switch(e.control) {
        case 'DPAD_DOWN':
        case 'DPAD_RIGHT':
          nextLink();
          break;
        case 'DPAD_UP':
        case 'DPAD_LEFT':
          prevLink();
          break;
        case 'FACE_1':
          var selected = document.querySelector('.gamepadSelected');
          if (selected) {
            removeClass(selected, 'gamepadSelected');
            selected.dispatchEvent(new MouseEvent('click'));
          }
          break;
        case 'FACE_2':
          var selected = document.querySelector('#ClearButton');
          if (selected) {
            selected.querySelector('.link-internal').dispatchEvent(new MouseEvent('click'));
          }
          break;
        case 'FACE_3':
          var selected = document.querySelector('#MulliganButton');
          if (selected) {
            selected.querySelector('.link-internal').dispatchEvent(new MouseEvent('click'));
          }
          break;
        case 'FACE_4':
          var selected = document.querySelector('#AttackButton');
          if (selected) {
            selected.querySelector('.link-internal').dispatchEvent(new MouseEvent('click'));
          }
          break;
        case 'RIGHT_BOTTOM_SHOULDER':

          break;
        case 'RIGHT_TOP_SHOULDER':
          break;
        case 'LEFT_BOTTOM_SHOULDER':
          var stat = document.getElementById('statButtonText');
          
          if(stat)
          {
            stat.querySelector('.link-internal').dispatchEvent(new MouseEvent('click'));
          }
          break;
        case 'LEFT_TOP_SHOULDER':
          var stat = document.getElementById('abilitiesButtonText');
          
          if(stat)
          {
            stat.querySelector('.link-internal').dispatchEvent(new MouseEvent('click'));
          }
          break;
      }
    });
  
    // Treat axes as buttons; register presses and releases.
    gamepad.bind(Gamepad.Event.AXIS_CHANGED, function(data) 
    {
      var newValue = 0;
      if (Math.abs(data.value) > DEADZONE) 
      {
        newValue = data.value < 0 ? -1 : 1;
        if (axes[data.axis] !== newValue) 
        {
          if (data.axis === 'LEFT_STICK_X') 
          {
            console.log("indexsdasddas")
            let index = State.variables.SelectedAbilityFilter;
            if (newValue === 1) 
            {
              index = Math.min(index + 1, 3);
            } 
            else 
            {
              index = Math.max(index - 1, 0);
            }

            console.log(index);

            let pickedClass = ".AbilityCategoryIconButton";
            
            switch (index) {
              case 0:
                pickedClass += ".Powers";
                break;
              case 1:
                pickedClass += ".Alteration";
                break;
              case 2:
                pickedClass += ".StatusEffects";
                break;
              case 3:
                pickedClass += ".Global";
                break;
            
              default:
                break;
            }

            var selected = document.querySelector(pickedClass);
            if(selected)
            {
              selected.querySelector('.link-internal').dispatchEvent(new MouseEvent('click'));
            }
          }

          if (data.axis === 'LEFT_STICK_Y') 
          {
            if (newValue === 1) 
            {
              document.getElementById('ui-bar-body').scrollBy(0, 350);
            } 
            else 
            {
              document.getElementById('ui-bar-body').scrollBy(0, -350);
            }
          }

          if (data.axis === 'RIGHT_STICK_Y') 
          {
            if (newValue === 1) 
            {
              window.scrollBy(0, 350)
            } 
            else 
            {
              window.scrollBy(0, -350)
            }
          }
        }
      }
      axes[data.axis] = newValue;
    });
  
    gamepad.init();
  
    function nextLink() {
      var links = getTwineLinks();
      if (links === null) return;
      var selectedIndex = findSelectedIndex(links);
      var newIndex = 0;
      if (selectedIndex !== null) {
        removeClass(links[selectedIndex], 'gamepadSelected');
        newIndex = (selectedIndex + 1) % links.length
      }
      addClass(links[newIndex], 'gamepadSelected');
      showLink();
    }
  
    function prevLink() {
      var links = getTwineLinks();
      if (links === null) return;
      var selectedIndex = findSelectedIndex(links);
      var newIndex = 0;
      if (selectedIndex !== null) {
        removeClass(links[selectedIndex], 'gamepadSelected');
        newIndex = selectedIndex > 0 ? selectedIndex - 1 : links.length - 1;
      }
      addClass(links[newIndex], 'gamepadSelected');
      showLink();
    }
  
    function showLink() {
      var selected = document.querySelector('.gamepadSelected');
      if (selected && !isVisible(selected)) {
        var position = isAboveViewport(selected)
        selected.scrollIntoView(position);
      }
    }
  
    function findSelectedIndex(links) {
      for (var i = 0; i < links.length; i++) {
        if (hasClass(links[i], 'gamepadSelected')) {
          return i;
        }
      }
      return null;
    }
  
    function isVisible(el) {
      var offset = el.getBoundingClientRect();
      if (offset.left < 0 || offset.top < 0){
        return false;
      }
      if (offset.left > window.innerWidth || offset.top > window.innerHeight){
        return false;
      }
      return true;
    }
  
    function isAboveViewport(el) {
      return el.getBoundingClientRect().top < 0;
    }
  
    // From youmightnotneedjquery.com
    function hasClass(el, className) {
      if (el.classList)
        return el.classList.contains(className);
      else
        return new RegExp('(^| )' + className + '( |$)', 'gi').test(el.className);
    }
  
    // From youmightnotneedjquery.com
    function removeClass(el, className) {
      if (el.classList)
        el.classList.remove(className);
      else
        el.className = el.className.replace(new RegExp('(^|\\b)' + className.split(' ').join('|') + '(\\b|$)', 'gi'), ' ');
    }
  
    // From youmightnotneedjquery.com
    function addClass(el, className) {
      if (el.classList)
        el.classList.add(className);
      else
        el.className += ' ' + className;
    }
  
  })(((typeof(module) !== 'undefined') && module.exports) || window);
/* twine-user-script #43: "KeyboardEvents.js" */
$(document).on("keydown.keygame", function(evt) {
    setup.handleExit(evt.which);
    setup.handleChoices(evt.which);
    setup.handleFightHotkeys(evt.which);
    setup.handleSecretCheats(evt.which);
});

setup.handleChoices = function(keypress)
{
    let _links = getTwineLinks();
    let hotkeys = ["1","2","3","4","5","6","7","8","9"];
    let numpad = [97,98,99,100,101,102,103,104,105];
    for(let i = 0; i < hotkeys.length && i < hotkeys.length; ++i)
    {
        console.log("jytjty")
        console.log(numpad[i])
        console.log(keypress)
        if(hotkeys[i].charCodeAt(0) == keypress || numpad[i] == keypress)
        {
            console.log("ggggg")
            if(i < setup.choiceCount)
            {
                console.log("dasdasdasds")
                console.log(i)
                console.log(_links)
                _links[i].querySelector('.link-internal').dispatchEvent(new MouseEvent('click'));
            }
        }
    }
};

setup.handleFightHotkeys = function(keypress)
{
    if(State.variables.FightSkills == undefined)
        return;

    var fightHotkeys = setup.FightHotkeys;
    for(let i = 0; i < fightHotkeys.length && i < State.variables.FightSkills.length; ++i)
    {
        if(fightHotkeys[i].charCodeAt(0) == keypress)
        {
            if(State.variables.FightSkills[i].comboCost == undefined)
            {
                setup.attackPressedLogic(i);
            }
            return;
        }
    }
};

setup.handleSecretCheats = function(keypress)
{
    if(keypress == 68)
    {
        State.variables.SecretCheat++;
    }
};

setup.handleExit = function(keypress)
{
    console.log("keypress "+keypress)
    if(keypress == 27 && !Dialog.isOpen())
    {
        Dialog.setup("");
        Dialog.wiki(Story.get("Exit_Popup").processText());
        Dialog.open();
    }
};
/* twine-user-script #44: "PassageStart.js" */
$(document).on(':passagestart', function (ev) {
    setup.onVillageEnterCallback();
    $(document.head).append('<meta name="viewport" content="width=1440", viewport-fit=cover>');
    $(document.head).append('<meta name="apple-mobile-web-app-capable" content="yes">');

    //var isWide = window.innerWidth > 1200;
    var isWide = true;
    console.log("screen")
    console.log(window.screen)

    if(isWide && window.screenClass == "MobileBorder")
    {
        console.log("wide")
        window.screenClass = "LargeBorder";

        var story = document.getElementById("story");
        story.className = setup.getCorruptionUIClassName(window.screenClass, setup.getStatValue(State.variables.CharacterSheet_Player, "corruption"));

        //var topBorder = document.getElementById("topBorder");
        //topBorder.className = "";

        //var bottomBorder = document.getElementById("bottomBorder");
        //bottomBorder.className = "";
        
    }
    else if(!isWide && window.screenClass == "LargeBorder")
    {
        console.log("smoll")
        window.screenClass = "MobileBorder";

        var story = document.getElementById("story");
        story.className = setup.getCorruptionUIClassName(window.screenClass, setup.getStatValue(State.variables.CharacterSheet_Player, "corruption"));

        //var topBorder = document.getElementById("topBorder");
        //topBorder.className = "hidden";
        
        //var bottomBorder = document.getElementById("bottomBorder");
        //bottomBorder.className = "hidden";
    }

    $('#choiceWindow').remove();
    setup.choices = "";
    setup.choiceCount = 0;
});
/* twine-user-script #45: "Pronouns.js" */
(function () {
    'use strict';
    // v1.1.0; by Chapel, for SugarCube 2 (>= v2.29.0)

    if (!Template || !Template.add || typeof Template.add !== 'function') {
        alert('Warning, this version of SugarCube does not include the Template API. Please upgrade to v2.29.0 or higher.');
        return;
    }

    // DOCUMENTATION LINK: https://twinelab.net/custom-macros-for-sugarcube-2/#/./pronoun-templates

    // CONFIGURATION

    var config = {
        name : 'gender',
        showSetting : true,
        label : 'Gender',
        desc : '',
        storyVar : '%%gender',
        default : 'female' // female, male, or other
    };

    // DATA

    // the point-replace id
    var settingID = '#setting-control-' + config.name;

    // preset pornoun map
    var genderMap = {
        subjective : ['she', 'he', 'you', 'they'],
        objective : ['her', 'him', 'you', 'them'],
        possessive : ['hers', 'his', 'yours', 'theirs'],
        determiner : ['her', 'his', 'your', 'their'],
        reflexive : ['herself', 'himself', 'yourself', 'themself'],
        noun : ['woman', 'man', 'you', 'person']
    };

    // INTERNAL FUNCTIONS

    // custom dialog function
    function createDialog (name, element, classes) {
        var reopen = false;
        if (Dialog.isOpen() && $('#ui-dialog-body').hasClass('settings')) {
            reopen = true;
        }
        Dialog.close();
        Dialog.setup(name, (reopen) ? classes + ' reopen' : classes);
        Dialog.append(element);
        Dialog.open();
    }

    function genderForm () { // create a form for users to configure their pronouns
        var $wrapper = $(document.createElement('div'));

        function createInput (label, name, def) { // create text inputs
            return $(document.createElement('label'))
                .append(label)
                .css('display', 'block')
                .append($(document.createElement('input'))
                    .attr({
                        type : 'text',
                        name : name
                    })
                    .css({
                        float : 'right',
                        'margin-left' : '0.2em'
                    })
                    .val(def)
                );
        }

        function createDropdown (label, name, list) { // create dropdowns
            var $select = $(document.createElement('select'))
                .attr('name', name)
                .css('float', 'right');
            list.forEach( function (opt, idx) {
                $(document.createElement('option'))
                    .attr('value', String(idx))
                    .append(opt)
                    .appendTo($select);
            });
            return $(document.createElement('label')).css('display', 'block').append(label, $select);
        }

        var $inputs = Object.keys(genderMap).map( function (key) {
            // create an input for each type of pronoun
            var idx = 3;
            if (config.default === 'male') {
                idx = 1;
            } else if (config.default === 'female') {
                idx = 0;
            } else if (config.default === 'you') {
                idx = 2;
            }
            var sv = State.variables;
            var def = genderMap[key][idx];
            if (sv[config.storyVar] && sv[config.storyVar][key]) {
                def = sv[config.storyVar][key];
            }
            return createInput(key.toUpperFirst() + ': ', 'gender-' + key, def);
        });

        var $presets = createDropdown('Presets: ', 'gender-preset', ['She/Her', 'He/Him', 'They/Them'])
            .on('change', function () {
                // auto-fill text inputs when the preset is changed
                var value = Number($(this).find('select').val());
                if (!Number.isNaN(value)) {
                    $inputs.forEach( function ($input) {
                        var $text = $input.find('input');
                        var type = $text.attr('name').split('-')[1];
                        $text.val(genderMap[type][value]);
                    });
                }
            });

        var $select = $presets.find('select');
        if (!State.variables[config.storyVar]) {
            // set defaults
            if (config.default === 'male') {
                $select.val('1');
            } else if (config.default === 'female') {
                $select.val('0');
            } else if (config.default === 'you'){
                $select.val('2');
            } else {
                $select.val('3');
            }
        } else {
            $select.val(''); // custom config, no preset
        }
        
        var $confirm = $(document.createElement('button'))
            .wiki('Confirm')
            .addClass('gender-confirm')
            .ariaClick({ label : 'Confirm pronoun selection.' }, function () {
                // this button saves the pronoun config settings
                var sv = State.variables;
                sv[config.storyVar] = {};
                $inputs.forEach( function ($input) {
                    var $text = $input.find('input');
                    var type = $text.attr('name').split('-')[1];
                    sv[config.storyVar][type] = $text.val().trim().toLowerCase();
                });
                // reopen the settings modal or close the modal
                if ($('#ui-dialog-body').hasClass('reopen')) {
                    UI.settings();
                }
                Dialog.close();
            });

        var $form = (function () {
            // add some line breaks to the generated form
            var $els = [$presets, '<br>'];
            $inputs.forEach( function ($input) {
                $els.push($input);
                $els.push('<br>');
            });
            $els.push($confirm);
            return $els;
        }());

        return $wrapper.append($form);

    }

    // CORE FUNCTIONS

    function handleGender () {
        // this function opens the custom modal
        createDialog('Customize Gender', genderForm(), 'custom-gender');
    }

    function getFromPreset (n) {
        // default
        if (typeof n !== "number" || Number.isNaN(n) || n > 3 || n < 0) {
            n = 0;
        }
        var ret = {};
        Object.keys(genderMap).forEach( function (key) {
            ret[key] = genderMap[key][n];
        });
        return ret;
    }

    function getGender () {
        // get the player's gender (custom or grab the default)
        // custom
        if (State.variables[config.storyVar] && State.variables[config.storyVar].subjective) {
            return State.variables[config.storyVar];
        }
        // default
        return getFromPreset(config.default === 'male' ? 1 : 0);
    }

    function setPreset (gender) {
        var pn;
        switch (gender) {
            case 'female':
                pn = getFromPreset(0);
                break;
            case 'male':
                pn = getFromPreset(1);
                break;
            case 'you':
                pn = getFromPreset(2);
                break;
            default:
                pn = getFromPreset(3);
        }
        State.variables[config.storyVar] = clone(pn);
        return pn;
    }

    function setPronouns (obj) {
        if (typeof obj !== 'object') {
            return;
        }
        State.variables[config.storyVar] = setPreset(config.default === 'male' ? 1 : 0);
        return Object.assign(State.variables[config.storyVar], obj);
    }

    // SETTINGS API

    if (config.showSetting) {
        Setting.addToggle(config.name, {
            label : config.label,
            desc : (config.desc && typeof config.desc === 'string' && config.desc.trim()) ? 
                config.desc.trim() : undefined
        });

        $(document).on(':dialogopen :dialogopened', function () {
            if ($('#ui-dialog-body').hasClass('settings')) {
                $(settingID).parent('div').empty().append( $(document.createElement('button'))
                    .append('Configure...')
                    .ariaClick( function () {
                        handleGender();
                    })
                );
            }
        });
    }

    // singular endings
    var replaceWith_are = /^is$/i; // is
    var replaceWith_were = /^was$/i; // was
    var replaceWith_have = /^has$/i; // has
    var replaceWith_o = /oes$/i; // does, goes
    var replaceWith_ie = /^[dl]ies$/i; // dies
    var replaceWith_y = /ies$/i; // dries
    var remove_es = /sses$/i; // posesses
    var remove_es2 = /hes$/i; // catches
    var remove_s = /s$/i; // surpises, plays
    // the above are tested in order; if none apply, return singular form (e.g: ran -> ran)

    // test for 'they' pronoun
    var hasThey = /they|you/i;

    function makePlural (singular) {
        if (!singular || typeof singular !== 'string') {
            return singular;
        }
        singular = singular.trim();
        if (replaceWith_are.test(singular)) {
            return singular.replace(replaceWith_are, 'are');
        }
        if (replaceWith_were.test(singular)) {
            return singular.replace(replaceWith_were, 'were');
        }
        if (replaceWith_have.test(singular)) {
            return singular.replace(replaceWith_have, 'have');
        }
        if (replaceWith_o.test(singular)) {
            return singular.replace(replaceWith_o, 'o');
        }
        if (replaceWith_ie.test(singular)) {
            // need to use replaceWith_y regex here.
            return singular.replace(replaceWith_y, 'ie');
        }
        if (replaceWith_y.test(singular)) {
            return singular.replace(replaceWith_y, 'y');
        }
        if (remove_es.test(singular)) {
            return singular.replace(remove_es, 'ss');
        }
        if (remove_es2.test(singular)) {
            return singular.replace(remove_es2, 'h');
        }
        if (remove_s.test(singular)) {
            return singular.replace(remove_s, '');
        }
        return singular;
    }

    function _getPronounsArePlural () {
        return hasThey.test(getGender().subjective.trim());
    }

    // usage: pluralize('dries', null, true) -> dry; pluralize('supresses', 'supress') -> supresses
    function pluralize (singular, plural, forcePlural) {
        if (!forcePlural) {
            return singular;
        }
        if (plural && typeof plural === 'string') {
            return plural;
        }
        return makePlural(singular);
    }

    // TEMPLATES

    function isUpper (name, string) {
        // is name is uppercase, return uppercased string
        if (name.first() === name.first().toUpperCase()) {
            return string.toUpperFirst();
        }
        return string;
    }
    
    Template.add(['he', 'she', 'you', 'they', 'He', 'She', 'You', 'They'], function () {
        return isUpper(this.name, getGender().subjective);
    });
    Template.add(['him', 'her', 'them', 'Him', 'Her', 'Them', 'you_', 'You_'], function () {
        return isUpper(this.name, getGender().objective);
    });
    Template.add(['his', 'hers', 'theirs', 'His', 'Hers', 'Theirs', 'yours', 'Yours'], function () {
        return isUpper(this.name, getGender().possessive);
    });
    Template.add(['his_', 'her_', 'their', 'His_', 'Her_', 'Their', 'your', 'Your'], function () {
        return isUpper(this.name, getGender().determiner);
    });
    Template.add(['himself', 'herself', 'themself', 'Himself', 'Herself', 'Themself', 'yourself', 'Yourself'], function () {
        return isUpper(this.name, getGender().reflexive);
    });
    Template.add(['man', 'woman', 'person', 'Man', 'Woman', 'Person', 'you__', 'You__'], function () {
        return isUpper(this.name, getGender().noun);
    });
    Template.add(['he-s', 'she-s', 'they-re', 'He-s', 'She-s', 'They-re'], function () {
        return isUpper(this.name, getGender().subjective + pluralize("&apos;s", "&apos;re", _getPronounsArePlural()));
    });

    // MACRO

    // `<<pronouns>>` -> opens the modal for pronoun configuration, probably best paired with a link
    Macro.add('pronouns', {
        skipArgs : true,
        handler : function () {
            handleGender();
        }
    });

    // <<verb singular [plural] [makePlural]>>
    Macro.add('verb', {
        handler: function () {
            var pl = _getPronounsArePlural();

            if (this.args.length < 1) {
                return this.error('Please pass at least a singular third person pronoun to this macro.');
            }

            if (this.args.includes('plural')) {
                pl = true;
            }

            this.output.append(pluralize(String(this.args[0]), (this.args[1]) ? String(this.args[1]) : null, !!pl));
        }
    });

    // JAVASCRIPT API

    setup.gender = {
        // get the pronoun object; `setup.gender.pronouns().subjective` -> get `he`, `she`, etc
        pronouns : getGender,
        // set pronouns from presets or manually
        setPronouns : function (presetOrObj) {
            if (typeof presetOrObj === 'string') {
                return setPreset(presetOrObj);
            }
            if (typeof presetOrObj === 'object') {
                return setPronouns(presetOrObj);
            }
        },
        // open the pronoun config modal from JS; `setup.gender.dialog()`
        dialog : handleGender,
        // pluralizer function
        pluralize : makePlural
    };

    window.gender = window.gender || setup.gender;

}());
/* twine-user-script #46: "SavesManager.js" */
Save.onLoad.add(function () {
    console.log("pre-save")

    prerender['update-save-file'] = function (_, taskName) {
        delete prerender[taskName];
        new Wikifier(null, Story.get('update-save').text);
    };

    console.log("post-save")

    SimpleAudio.stop();
});
/* twine-user-script #47: "StoryInit_Base_JS.js" */
(function () {
	setup.EncounterKnownState = 
    {
        UNKNOWN: 1,
        KNOWN: 2
    };

    setup.TorgarProgress = 
    {
        NORMAL: 1,
        INFECTED: 2,
        REDEEMED: 3,
        LOST: 4,
        ASCENDED: 5,
        LOST_TEAMMATE: 6,
        REDEEMED_TEAMMATE: 7,
    };
})();
/* twine-user-script #48: "VariableInitializer.js" */
setup.variableInitializer = 
{
	initializeFightVariables : function(encounterTarget)
	{
		this.initializeFightCharacter(State.variables.CharacterSheet_Player);

		let teammate = State.variables.CharacterSheet_Player.fight.teammate;
		if(teammate != undefined)
		{
			this.initializeFightCharacter(State.variables[teammate]);
		}

		this.initializeFightCharacter(encounterTarget);
        State.variables.FightTurn = 0;

		console.log("starting fight")
		var aList = SimpleAudio.lists.get(setup.getBattleTheme(encounterTarget));
		console.log(aList)

		if(aList.isPlaying() == false)
		{
			console.log('battle start')
			console.log(State.variables.VolumeControls.music.volume)

			aList.stop();
			aList.shuffle(true);
			aList.loop(true);
			aList.volume(State.variables.VolumeControls.music.volume);
			aList.play();

			State.variables.VolumeControls.music.list.push(setup.getBattleTheme(encounterTarget));
		}
	},
	initializeFightCharacter: function(character)
	{
		character.fight.variables.currentHP = 0;
		character.fight.variables.currentStamina = 0;
		character.fight.variables.currentArousal = setup.getStatValue(character, "minArousal");		
		character.fight.variables.stunnedDuration = 0;
		character.fight.variables.hypnotizedMoveIDsList = [];
		character.fight.variables.cooldowns = [];

		var onFightStartAbilityParams =
		{
			character: character,
		}
		setup.callAbilityTrigger(character, "onFightStart", onFightStartAbilityParams);

		character.fight.variables.currentHP = setup.getMaxHP(character);
		character.fight.variables.currentStamina = setup.getMaxStamina(character);
	}
};

setup.mod = 
{
	ADD: 1,
	REMOVE: 2,
	REPLACE: 3,
	CUSTOM: 4,
	IGNORE: 5,
	MULTIPLYPOS: 6,
	MULTIPLYNEG: 7,
};

::Configuration [twee2] <100,100>
Twee2::build_config.story_ifid = '76585E15-C0E7-4404-A55B-BEFC4CDF112B'

::update-save <225,100>
<<include StoryInit_UI>>
<<run console.log("started")>>

<<if $Version < 10104>>
    <<set $Version to 10104>>
    <<set $VersionStr to '0.1.4'>>
    
    <<include Ability_AppetiteForGrowth>>
    <<include Ability_DemonicCorruption>>
    <<include Ability_HerculeanBuild>>
    <<include Ability_Masochism>>
    <<include Ability_VigorOfTheEndowed>>
    <<include Ability_WideAttacks>>
    <<include StoryInit_FightMoves>>
    <<include Modifiers_Size_Diff>>
    <<include StoryInit_StateDrivenModifiers>>

    <<set $Debug = false>>

    <<set setup.Comparators = 
    {
        MICRO_TO:  1,
        MUCH_SMALLER: 2,
        SMALLER: 3,
        EQUAL: 4,
        BIGGER: 5,
        MUCH_BIGGER: 5,
        REACHES_WAIST: 6,
        REACHES_KNEES: 7,
        FITS_ON_HAND: 8,
        FITS_ON_FINGER: 9,
    }>>

    <<set $Debug = false>>

    <<set $FighterSheet_Imp =
    {
        hp: 18,
        stamina: 6,
        strength: 6,
        critChance: 45,
        arousalGain: 20,
        staminaRecovery: 2,
        variables: $FightVariables,
        fightMoves: [setup.FightMove_Basic_Attack],
        abilities: [],
        onMaxArousal: function(character)
        {
            //todo
        },
        fightReward: setup.RewardTier.LOW,
        encounterIntroText: "<<include Encounter_Intro_Imp>>",
        encounterStartText: "<<include Encounter_Start_Imp>>",
        outcomePlayerWins: "<<include Encounter_Win_Imp>>",
        outcomePlayerLoses: "<<include Encounter_Loss_Imp>>"
    }>>

    <<set $InfoSheet_Imp =
    {
        name: "",
        gender: "male",
        corruption: 0,
        muscles: 0,
        height: 50,
        cock: 10,
        alive: true
    }>>

    <<set $QuestSheet_Ethrex =
    {
        beatenOnce: false,
    }>>

    <<set $CharacterSheet_Ethrex =
    {
        id:"CharacterSheet_Ethrex",
        info: $InfoSheet_Ethrex,
        fight: $CharacterSheet_Ethrex.fight,
        quest: $QuestSheet_Ethrex,
    }>>

    <<set $QuestSheet_Lost_Werewolf =
    {
        beatenOnce: false,
    }>>

    <<set $CharacterSheet_Lost_Werewolf =
    {
        id:"CharacterSheet_Lost_Werewolf",
        info: $InfoSheet_Lost_Werewolf,
        fight: $FighterSheet_Lost_Werewolf,
        quest: $QuestSheet_Lost_Werewolf,
    }>>
<</if>>

<<if $Version < 10105>>
    <<set $Version to 10105>>
    <<set $VersionStr to '0.1.5'>>
<</if>>

<<if $Version < 10200>>
    <<set $Version to 10200>>
    <<set $VersionStr to '0.2.0'>>

    <<set setup.Comparators = 
    {
        MICRO_TO:  1,
        MUCH_SMALLER: 2,
        SMALLER: 3,
        SLIGHTLY_SMALLER: 4,
        EQUAL: 5,
        SLIGHTLY_BIGGER: 6,
        BIGGER: 7,
        MUCH_BIGGER: 8,
        REACHES_WAIST: 9,
        REACHES_KNEES: 10,
        FITS_ON_HAND: 11,
        FITS_ON_FINGER: 12,
    }>>

    <<include StoryInit_RandomEncounters>>
    <<include StoryInit_Abilities>>
    <<include StoryInit_FightMoves>>
    <<include StoryInit_FightVariables>>
    <<include Sheets_Elder>>
    
    <<include Sheets_Lost_Naga>>

    <<set $QuestSheet_Player = 
    {
        curseOfTheNagaStatDrain:
            {
                muscles: 0,
                height: 0,
                cock: 0,
            },
    }>>

    <<set $CharacterSheet_Player.quest = $QuestSheet_Player>>
<</if>>

<<if $Version < 10201>>
    <<set $Version to 10201>>
    <<set $VersionStr to '0.2.1'>>

    <<include StoryInit_Abilities>>
    <<include StoryInit_FightMoves>>
    <<include StoryInit_FightVariables>>
    <<include Modifiers_Player_Symbiote>>
    <<include Modifiers_Size_Diff>>

<<set $CharacterSheet_Player.fight.critChance = $CharacterSheet_Player.fight.accuracy>>
<<set $CharacterSheet_Player.fight.variables = $FightVariables>>

<<script>>
let i;
for(i = 0; i < State.variables.CharacterSheet_Player.fight.fightMoveIDs.length; i++)
{
    let j;
    for(j = 0; j < setup.FightMoveIDs.length; j++)
    {
        if(State.variables.CharacterSheet_Player.fight.fightMoveIDs[i].name == setup[setup.FightMoveIDs[j]].name)
        {
            State.variables.CharacterSheet_Player.fight.fightMoveIDs[i] = setup[setup.FightMoveIDs[j]];
        }
    }
}
<</script>>

    <<include Sheets_Imp>>
    <<include Sheets_Ethrex>>
    <<include Sheets_Lost_Werewolf>>
    <<include Sheets_Lost_Naga>>
    <<include Sheets_Elder>>
    <<include Sheets_MQ002_Guard>>

    <<set setup.LevelUpTable = 
[
    180,
    500,
    900,
	2200,
	4000,
	5600,
	7000,
	8300,
	10000,
	15000,
]>>
<</if>>

<<if $Version < 10202>>
    <<set $Version to 10202>>
    <<set $VersionStr to '0.2.2'>>

    <<set setup.RewardTier = 
    {
        NONE:  0,
        VERY_LOW:  1,
        LOW:  2,
        MEDIUM: 3,
        HIGH: 4,
        VERY_HIGH: 5,
    }>>

    <<include StoryInit_FightMoves>>

    <<set $CharacterSheet_Imp.fight =
{
	hp: 34,
	stamina: 6,
	strength: 6,
	critChance: 20,
	arousalGain: 20,
	staminaRecovery: 4,
	variables: $FightVariables,
	fightMoves: [setup.FightMove_Basic_Attack],
	abilities: [setup.Ability_AppetiteForGrowth_2],
	onMaxArousal: function(character)
	{
		//todo
	},
	fightReward: setup.RewardTier.LOW,
	encounterIntroText: "<<include Encounter_Intro_Imp>>",
	encounterStartText: "<<include Encounter_Start_Imp>>",
	outcomePlayerWins: "<<include Encounter_Win_Imp>>",
	outcomePlayerLoses: "<<include Encounter_Loss_Imp>>"
}>>

<<set $CharacterSheet_Tok.fight =
{
	hp: 72,
	stamina: 20,
	strength: 10,
	critChance: 20,
	arousalGain: 20,
	staminaRecovery: 4,
	variables: $FightVariables,
	fightMoves: [setup.FightMove_Lunge,setup.FightMove_Goo_Stun],
    abilities: [],
	onMaxArousal: function(character)
	{
		//todo
	},
    fightReward: setup.RewardTier.HIGH,
    encounterIntroText: "<<include Tok_Fight_Intro>>",
    encounterStartText: "\n\n"
    + "\n",
	outcomePlayerWins: 
		"<<include Tok_Fight_Won>>",
	outcomePlayerLoses: 
		"\n \n[[->Tok Fight Lost]]"
}>>

<<set $CharacterSheet_Ethrex.fight =
{
	hp: 50,
	stamina: 25,
	strength: 9,
	critChance: 20,
	arousalGain: 20,
	staminaRecovery: 14,
	variables: $FightVariables,
	fightMoves: [setup.FightMove_Basic_Attack, setup.FightMove_IncubusCall, setup.FightMove_IncubusStrike],
    abilities: [setup.Ability_VigorOfTheEndowed_2],
	onMaxArousal: function(character)
	{
		//todo
	},
	fightReward: setup.RewardTier.MEDIUM,
	encounterIntroText: "<<include Encounter_Intro_Ethrex>>",
	encounterStartText: "<<include Encounter_Start_Ethrex>>",
	outcomePlayerWins: "<<include Encounter_Win_Ethrex>>",
	outcomePlayerLoses: "<<include Encounter_Loss_Ethrex_0>>"
}>>

<<set $CharacterSheet_Lost_Werewolf.fight =
{
	hp: 30,
	stamina: 12,
	strength: 9,
	critChance: 20,
	arousalGain: 20,
	staminaRecovery: 8,
	variables: $FightVariables,
	fightMoves: [setup.FightMove_Basic_Attack, setup.FightMove_Infest],
    abilities: [setup.Ability_HerculeanBuild],
	onMaxArousal: function(character)
	{
		//todo
	},
	fightReward: setup.RewardTier.MEDIUM,
	encounterIntroText: "<<include Encounter_Intro_Lost_Werewolf>>",
	encounterStartText: "<<include Encounter_Start_Lost_Werewolf>>",
	outcomePlayerWins: "<<include Encounter_Win_Lost_Werewolf>>",
	outcomePlayerLoses: "<<include Encounter_Loss_Lost_Werewolf>>"
}>>

<<set $CharacterSheet_Lost_Naga.fight =
{
	hp: 90,
	stamina: 22,
	strength: 15,
	critChance: 20,
	arousalGain: 20,
	staminaRecovery: 14,
	variables: $FightVariables,
	fightMoves: [setup.FightMove_Basic_Attack, setup.FightMove_Infest, setup.FightMove_Hypnotize],
    abilities: [setup.Ability_AppetiteForGrowth],
	onMaxArousal: function(character)
	{
		//todo
	},
	fightReward: setup.RewardTier.HIGH,
	encounterIntroText: "<<include Encounter_Intro_Lost_Naga>>",
	encounterStartText: "<<include Encounter_Start_Lost_Naga>>",
	outcomePlayerWins: "<<include Encounter_Win_Lost_Naga>>",
	outcomePlayerLoses: "<<include Encounter_Loss_Lost_Naga_1>>"
}>>

<<set $CharacterSheet_MQ002_Guard.fight =
{
	hp: 130,
	stamina: 35,
	strength: 40,
	critChance: 0,
	arousalGain: 10,
	staminaRecovery: 8,
	variables: $FightVariables,
	fightMoves: [setup.FightMove_Basic_Attack, setup.FightMove_ChargedStrike],
	abilities: [setup.Ability_Masochism_2],
	onMaxArousal: function(character)
	{
		//todo
	},
	fightReward: setup.RewardTier.HIGH,
	encounterIntroText: "",
	encounterStartText: "",
	outcomePlayerWins: "<<include Quest_MQ002_Entrance_PlayerWins>>",
	outcomePlayerLoses: "<<include Quest_MQ002_Entrance_PlayerLoses>>"
}>>

<<script>>
    State.variables.CharacterSheet_Player.fight.fightMoveIDs.push(setup.FightMove_Inspect);
<</script>>
<</if>>

<<if $Version >= 10300 && $Version < 10301>>

<<set $Version = 10301>>
<<set $VersionStr = '0.3.1'>>

<<include FightMove_Sigil_Vitality>>
<<include FightMove_Sigil_Pain>>
<<include FightMove_Sigil_Perception>>
<<include FightMove_Sigil_Growth>>
<<include FightMove_WitheringVenom>>

<<set setup.FightHotkeys = ["1","2","3","4","5","6","7","8","9","0","Q","W","E","R","T","Y","U","I","O","P"]>>

<</if>>

<<if $Version >= 10301 && $Version < 10302>>

<<set $Version = 10302>>
<<set $VersionStr = '0.3.2\n !'>>

<</if>>

<<if $Version >= 10302 && $Version < 10303>>

<<set $Version = 10303>>
<<set $VersionStr = '0.3.3\n ! !'>>

<</if>>

<<if $Version >= 10303 && $Version < 10304>>

<<set $Version = 10304>>
<<set $VersionStr = '0.3.4\n ! !'>>

<</if>>

<<if $Version >= 10303 && $Version < 10304>>

<<set $Version = 10305>>
<<set $VersionStr = '0.3.5\n ! !'>>

<</if>>
<<if $Version >= 10304 && $Version < 10400>>

<<set $Version = 10400>>
<<set $VersionStr = '0.4.0\n ! !'>>

<</if>>
<<if $Version >= 10400 && $Version < 10401>>

<<set $Version = 10401>>
<<set $VersionStr = '0.4.1\n ! !'>>

<</if>>
<<if $Version >= 10401 && $Version < 10402>>

<<set $Version = 10402>>
<<set $VersionStr = '0.4.2\n ! !'>>
<</if>>
<<if $Version >= 10402 && $Version < 10403>>

<<set $Version = 10403>>
<<set $VersionStr = '0.4.3\n ! !'>>
<</if>>

<<if $Version >= 10403 && $Version < 10404>>
<<set $Version = 10404>>
<<set $VersionStr = '0.4.4'>>    

<<include StoryInit_Abilities>>
<<include Ending_OneWithNyx>>
<<run $EndingSheet.push($Ending_OneWithNyx)>>

<<set $DisplayStatWindow = true>>
<<set $SecretCheat = 0>>
<</if>>

<<if $Version >= 10404 && $Version < 10405>>

<<set $Version = 10405>>
<<set $VersionStr = '0.4.5'>>    

<<include StoryInit_Abilities>>
<<include StoryInit_FightMoves>>
<<set $CharacterSheet_Player.quest.exploration.villageGateEast =
{
    eastFirstTime:
    {
        available: true,
        condition: function()
        {
            return true;
        },
        passage: "Explore_EastFirstTime",
    },
    eastGrownMacro:
    {
        available: true,
        condition: function()
        {
            return setup.getStatValue(State.variables.CharacterSheet_Player, "muscles") > (50 * 12);
        },
        passage: "Explore_EastGrownMacro",
    },
    eastGrownDemonic:
    {
        available: true,
        condition: function()
        {
            return setup.getRace(State.variables.CharacterSheet_Player.info.anatomy).toUpperCase() == "";
        },
        passage: "Explore_EastGrownDemonic",
    },
    eastGrownParasites:
    {
        available: true,
        condition: function()
        {
            return State.variables.CharacterSheet_Player.quest.nyxParasiteInfections >= 10;
        },
        passage: "Explore_EastGrownParasites",
    },			
    eastGrownLordOfLust:
    {
        available: true,
        condition: function()
        {
            return setup.getRace(State.variables.CharacterSheet_Player.info.anatomy).toUpperCase() == "";
        },
        passage: "Explore_EastGrownLordOfLust",
    },
} >>

<<set $CharacterSheet_Player.quest.exploration.villageGateNorth = 
{
    northFirstTime:
    {
        available: true,
        condition: function()
        {
            return true;
        },
        passage: "Explore_NorthFirstTime",
    },
    northGrownMuscular:
    {
        available: true,
        condition: function()
        {
            return setup.getStatValue(State.variables.CharacterSheet_Player, "muscles") > 30;
        },
        passage: "Explore_NorthGrownMuscular",
    },
    northVisibleCorruption:
    {
        available: true,
        condition: function()
        {
            return setup.getStatValue(State.variables.CharacterSheet_Player, "corruption") > 25;
        },
        passage: "Explore_NorthVisibleCorruption",
    },
    northGrownHeight:
    {
        available: true,
        condition: function()
        {
            var height = setup.getStatValue(State.variables.CharacterSheet_Player, "height");
            return  height > (25 * 12) && height < (50 * 12);
        },
        passage: "Explore_NorthGrownHeight",
    },
}>>

<<set $CharacterSheet_Player.quest.exploration.easternFirstTime = undefined>>
<<run setup.updateStaticCorruptionUI(State.variables.CharacterSheet_Player)>>

<</if>>

<<if $Version >= 10405 && $Version < 10406>>

<<set $Version = 10406>>
<<set $VersionStr = '0.4.6'>>

<<set $CharacterSheet_Lost_Naga.quest.fuckedByPlayer = false>>
<<set $CharacterSheet_Lost_Naga.quest.hasBeenVored = false>>

<<set $CharacterSheet_Player.text.jormFirstMeeting = 
{
    heightFlavour: 
    {
        small: [
            "Jorm_FirstMeeting_PlayerSmall"
        ],
        medium: [
            "Jorm_FirstMeeting_PlayerSmall"
        ],
        large: [
            "Jorm_FirstMeeting_PlayerBig"
        ],
        huge: [
            "Jorm_FirstMeeting_PlayerBig"
        ],
    }
}>>

<<include Sheets_Jorm>>

<</if>>

<<if $Version >= 10406 && $Version < 10407>>
<<set $Version = 10407>>
<<set $VersionStr = '0.4.7\n ! !'>>

<</if>>

<<if $Version >= 10407 && $Version < 10408>>
<<set $Version = 10408>>
<<set $VersionStr = '0.4.8'>>

<<include Ability_MinorCorruption>>
<<include Ability_MajorCorruption>>
<<include Ability_OverwhelmingCorruption>>
<<include Ability_LordOfCorruption>>

<<include Ability_BuriedInCum>>
<<include Ability_CorruptedStrength>>
<<include Ability_Focused>>

<<include FightMove_LustfulInstincts>>
<<include FightMove_CorruptedUrges>>
<<include FightMove_InfectiousLust>>
<<include FightMove_CorruptedRemedy>>

<<set setup.FightMoveIDs = [setup.FightMove_Basic_Attack.id, 
                    setup.FightMove_Do_Nothing.id,
                    setup.FightMove_Submit_Completely.id,
                    setup.FightMove_Goo_Stun.id,
                    setup.FightMove_IncubusCall.id,
                    setup.FightMove_IncubusStrike.id,
                    setup.FightMove_Lunge.id,
                    setup.FightMove_Infest.id,
                    setup.FightMove_Inspect.id,
                    setup.FightMove_Masturbate.id,
                    setup.FightMove_Sigil_Vitality.id,
                    setup.FightMove_Sigil_Pain.id,
                    setup.FightMove_Sigil_Perception.id,
                    setup.FightMove_Sigil_Growth.id,
                    setup.FightMove_ChargedStrike.id,
                    setup.FightMove_Stomp.id,
                    setup.FightMove_Hypnotize.id,
                    setup.FightMove_Worship.id,
                    setup.FightMove_WitheringVenom.id,
                    setup.FightMove_Parry.id,
                    setup.FightMove_DragonStrike.id,
                    setup.FightMove_ParasiteLunge.id,
                    setup.FightMove_SummonParasite.id,
                    setup.FightMove_ConsumeLost.id,
                    setup.FightMove_SeedOfRuin.id,
                    setup.FightMove_SlimeLunge.id,
                    setup.FightMove_Slash.id,
                    setup.FightMove_Bash.id,
                    setup.FightMove_Focus.id,
                    setup.FightMove_CumDeluge.id,
                    setup.FightMove_LustfulInstincts.id,
                    setup.FightMove_CorruptedUrges.id,
                    setup.FightMove_InfectiousLust.id,
                    setup.FightMove_CorruptedRemedy.id,
                    ]>>

<<run $CharacterSheet_Player.applyAbilityRuntimeData(setup.Ability_MinorCorruption);>>
<<run $CharacterSheet_Player.applyAbilityRuntimeData(setup.Ability_MajorCorruption);>>
<<run $CharacterSheet_Player.applyAbilityRuntimeData(setup.Ability_OverwhelmingCorruption);>>
<<run $CharacterSheet_Player.applyAbilityRuntimeData(setup.Ability_LostInCorruption);>>
<<run $CharacterSheet_Player.applyAbilityRuntimeData(setup.Ability_LordOfCorruption);>>

<<set setup.FightMove_Stunned.skillTheme = "special">>
<<set setup.FightMove_Bash.skillTheme = "offensive">>
<<set setup.FightMove_BasicAttack.skillTheme = "offensive">>
<<set setup.FightMove_ChargedStrike.skillTheme = "offensive">>
<<set setup.FightMove_ConsumeLost.skillTheme = "offensive">>
<<set setup.FightMove_DoNothing.skillTheme = "special">>
<<set setup.FightMove_Submit_Completely.skillTheme = "special">>
<<set setup.FightMove_DragonStrike.skillTheme = "offensive">>
<<set setup.FightMove_Goo_Stun.skillTheme = "symbiote">>
<<set setup.FightMove_Hypnotize.skillTheme = "offensive">>
<<set setup.FightMove_IncubusCall.skillTheme = "demon">>
<<set setup.FightMove_IncubusStrike.skillTheme = "demon">>
<<set setup.FightMove_Infest.skillTheme = "offensive">>
<<set setup.FightMove_Inspect.skillTheme = "special">>
<<set setup.FightMove_Masturbate.skillTheme = "buff">>
<<set setup.FightMove_Parry.skillTheme = "offensive">>
<<set setup.FightMove_SeedOfRuin.skillTheme = "offensive">>
<<set setup.FightMove_Sigil_Growth.skillTheme = "sigil">>
<<set setup.FightMove_Sigil_Pain.skillTheme = "sigil">>
<<set setup.FightMove_Sigil_Perception.skillTheme = "sigil">>
<<set setup.FightMove_Sigil_Vitality.skillTheme = "sigil">>
<<set setup.FightMove_Sigil_Slash.skillTheme = "offensive">>
<<set setup.FightMove_Sigil_SlimeLunge.skillTheme = "offensive">>
<<set setup.FightMove_Sigil_Stomp.skillTheme = "offensive">>
<<set setup.FightMove_Sigil_SummonParasite.skillTheme = "demon">>
<<set setup.FightMove_Sigil_WitheringVenom.skillTheme = "offensive">>
<<set setup.FightMove_Sigil_Worship.skillTheme = "special">>

<<set setup.FightMove_Focus.skillDescription = "">>
<<set setup.FightMove_Focus.skillTheme = "buff">>

<<run setup.updateStaticCorruptionUI(State.variables.CharacterSheet_Player)>>
<</if>>

<<if $Version >= 10408 && $Version < 10409>>
<<set $Version = 10409>>
<<set $VersionStr = '0.4.9'>>

<<include Ability_Focused>>
<<include Ability_Momentum>>
<<include Ability_Incorruptible>>
<<include Ability_ServantOfKanathar>>
<<include Ability_ValiantRush>>
<<include FightMove_Focus>>

<<set setup.StorylineProgress_Imp = 
{
    FIRST_MEETING:    0,
    LOW_RELATIONSHIP: 1000,
    MID_RELATIONSHIP: 2000,
    SERVANT:          3000,
    MASTER:           4000,
}>>

<<set setup.QuestSheet_Imp =
{
    met: false,
    storylineProgress: setup.StorylineProgress_Imp.FIRST_MEETING,
    relationshipScoring: 0,
    servantScoring: 0,
    servantWins: 3,
    servantLosses: 3,
    masterScoring: 0,
    lostScoring: 0,
    encounterPassages:
    {
        servant:
        {
            available: true,
            condition: function()
            {
                return State.variables.CharacterSheet_Imp.quest.storylineProgress == setup.StorylineProgress_Imp.SERVANT;
            },
            passage: "Imp_Servant_EncounterStart",
        },
        midRela:
        {
            available: true,
            condition: function()
            {
                return State.variables.CharacterSheet_Imp.quest.relationshipScoring >= 3;
            },
            passage: "Imp_Mid_Rela_EncounterStart",
        },
        lowRela:
        {
            available: true,
            condition: function()
            {
                return State.variables.CharacterSheet_Imp.quest.relationshipScoring >= 1;
            },
            passage: "Imp_Low_Rela_EncounterStart",
        },
        firstTime:
        {
            available: true,
            condition: function()
            {
                return true;
            },
            passage: "Imp_FirstMeeting_Intro",
        },
    },
    postFightPassagesWin:
    {
        servantPath:
        {
            available: true,
            condition: function()
            {
                return State.variables.CharacterSheet_Imp.quest.storylineProgress == setup.StorylineProgress_Imp.SERVANT;
            },
            passage: "Imp_Win_ServantPath",
        },
        masterChoice:
        {
            available: true,
            condition: function()
            {
                return State.variables.CharacterSheet_Imp.quest.relationshipScoring >= 8 && State.variables.CharacterSheet_Imp.quest.masterScoring >= 3;
            },
            passage: "Imp_MasterChoice",
        },
        lowRelaEnterMidRela:
        {
            available: true,
            condition: function()
            {
                return State.variables.CharacterSheet_Imp.quest.relationshipScoring >= 3;
            },
            passage: "Imp_Low_Rela_Win_EnterMidRela",
        },
        midRelaIdle:
        {
            available: true,
            condition: function()
            {
                return State.variables.CharacterSheet_Imp.quest.relationshipScoring >= 3;
            },
            passage: "Imp_Mid_Rela_Win_Idle",
        },
        lowRelaIdle:
        {
            available: true,
            condition: function()
            {
                return true;
            },
            passage: "Imp_Low_Rela_Win_Idle",
        },
    },
    postFightPassagesLoss:
    {
        servantPath:
        {
            available: true,
            condition: function()
            {
                return State.variables.CharacterSheet_Imp.quest.storylineProgress == setup.StorylineProgress_Imp.SERVANT;
            },
            passage: "Imp_Loss_ServantPath",
        },
        servantChoice:
        {
            available: true,
            condition: function()
            {
                return State.variables.CharacterSheet_Imp.quest.relationshipScoring >= 6 && State.variables.CharacterSheet_Imp.quest.servantScoring >= 3;
            },
            passage: "Imp_Loss_ServantChoice",
        },
        midRelaIdle:
        {
            available: true,
            condition: function()
            {
                return State.variables.CharacterSheet_Imp.quest.relationshipScoring >= 3;
            },
            passage: "Imp_Mid_Rela_Loss_Idle",
        },
        lowRelaIdle:
        {
            available: true,
            condition: function()
            {
                return true;
            },
            passage: "Imp_Low_Rela_Loss_Idle",
        },
    },
}>>

<<set $CharacterSheet_Imp.quest = setup.QuestSheet_Imp>>

<</if>>

<<if $Version >= 10409 && $Version < 10409.1>>
<<set $Version = 10409.1>>
<<set $VersionStr = '0.4.9'>>

<<set $EasyRandomEncounters = ["CharacterSheet_Imp", "CharacterSheet_Slime"]>>
<</if>>

<<if $Version >= 10409.1 && $Version < 10500>>
<<set $Version = 10500>>
<<set $VersionStr = '0.5.0'>>

<<include Ability_Global_HeightSizeTier_1>>
<<include Ability_Global_HeightSizeTier_2>>
<<include Ability_Global_HeightSizeTier_3>>
<<include Ability_Global_HeightSizeTier_4>>
<<include Ability_Global_HeightSizeTier_5>>
<<include Ability_Global_HeightSizeTier_6>>

<<include FightMove_PridefulAscent>>

<<include "_imp_body_visual">>

<<set $CharacterSheet_Player.fight.teammate = undefined>>

<<set setup.FightMoveIDs = [setup.FightMove_Basic_Attack.id, 
                    setup.FightMove_Do_Nothing.id,
                    setup.FightMove_Submit_Completely.id,
                    setup.FightMove_Goo_Stun.id,
                    setup.FightMove_IncubusCall.id,
                    setup.FightMove_IncubusStrike.id,
                    setup.FightMove_Lunge.id,
                    setup.FightMove_Infest.id,
                    setup.FightMove_Inspect.id,
                    setup.FightMove_Masturbate.id,
                    setup.FightMove_Sigil_Vitality.id,
                    setup.FightMove_Sigil_Pain.id,
                    setup.FightMove_Sigil_Perception.id,
                    setup.FightMove_Sigil_Growth.id,
                    setup.FightMove_ChargedStrike.id,
                    setup.FightMove_Stomp.id,
                    setup.FightMove_Hypnotize.id,
                    setup.FightMove_Worship.id,
                    setup.FightMove_WitheringVenom.id,
                    setup.FightMove_Parry.id,
                    setup.FightMove_DragonStrike.id,
                    setup.FightMove_ParasiteLunge.id,
                    setup.FightMove_SummonParasite.id,
                    setup.FightMove_ConsumeLost.id,
                    setup.FightMove_SeedOfRuin.id,
                    setup.FightMove_SlimeLunge.id,
                    setup.FightMove_Slash.id,
                    setup.FightMove_Bash.id,
                    setup.FightMove_Focus.id,
                    setup.FightMove_CumDeluge.id,
                    setup.FightMove_LustfulInstincts.id,
                    setup.FightMove_CorruptedUrges.id,
                    setup.FightMove_InfectiousLust.id,
                    setup.FightMove_CorruptedRemedy.id,
                    setup.FightMove_PridefulAscent.id,
                    ]>>

<<set $LevelUpParams = 
{
    point : 2,
    hp: {name: "", value: $CharacterSheet_Player.fight.hp},
	stamina: {name: "", value: $CharacterSheet_Player.fight.stamina},
	strength: {name: "", value: $CharacterSheet_Player.fight.strength},
	arousalGain: {name: "", value: $CharacterSheet_Player.fight.arousalGain},
	staminaRecovery: {name: "", value: $CharacterSheet_Player.fight.staminaRecovery},
	scaling: {
		hp: 6,
		stamina: 4,
		strength: 3,
		arousalGain: 2,
		staminaRecovery: 1,
	},
}>>

<<set $CharacterSheet_Imp.fight.fightMoveIDs = [setup.FightMove_Basic_Attack.id, setup.FightMove_PridefulAscent.id]>>
<<set $CharacterSheet_Imp.info.bodyVisual = "BodyVisualSheet_Imp">>

<<set setup.QuestSheet_Imp.encounterPassages.growthBodySmallToMedium = 
        {
            available: true,
            condition: function()
            {
                return setup.getCurrentBodyVisual(State.variables.CharacterSheet_Imp) == "medium"
            },
            passage: "Imp_EncounterStart_Growth_Body_SmallToMedium",
        }>>
<<set setup.QuestSheet_Imp.encounterPassages.growthBodyMediumToLarge =
        {
            available: true,
            condition: function()
            {
                return setup.getCurrentBodyVisual(State.variables.CharacterSheet_Imp) == "big"
            },
            passage: "Imp_EncounterStart_Growth_Body_MediumToLarge",
        }>>
<<set setup.QuestSheet_Imp.encounterPassages.growthCock1to2 =
        {
            available: true,
            condition: function()
            {
                return setup.getCurrentBodyVisual(State.variables.CharacterSheet_Imp) == "small" && setup.getCurrentCockVisual(State.variables.CharacterSheet_Imp) == "small";
            },
            passage: "Imp_EncounterStart_Growth_Cock_1To2",
        }>>
<<set setup.QuestSheet_Imp.encounterPassages.growthCock2to3 =
        {
            available: true,
            condition: function()
            {
                return setup.getCurrentBodyVisual(State.variables.CharacterSheet_Imp) == "medium" && setup.getCurrentCockVisual(State.variables.CharacterSheet_Imp) == "medium";
            },
            passage: "Imp_EncounterStart_Growth_Cock_2To3",
        }>>
<<set setup.QuestSheet_Imp.encounterPassages.growthCock3to4 =
        {
            available: true,
            condition: function()
            {
                return setup.getCurrentBodyVisual(State.variables.CharacterSheet_Imp) == "medium" && setup.getCurrentCockVisual(State.variables.CharacterSheet_Imp) == "big";
            },
            passage: "Imp_EncounterStart_Growth_Cock_3To4",
        }>>
<<set setup.QuestSheet_Imp.encounterPassages.growthCock4to5 =
        {
            available: true,
            condition: function()
            {
                return setup.getCurrentBodyVisual(State.variables.CharacterSheet_Imp) == "big" && setup.getCurrentCockVisual(State.variables.CharacterSheet_Imp) == "biggest";
            },
            passage: "Imp_EncounterStart_Growth_Cock_4To5",
        }>>
<<set setup.QuestSheet_Imp.encounterPassages.growthCock5to6 =
        {
            available: true,
            condition: function()
            {
                return setup.getCurrentBodyVisual(State.variables.CharacterSheet_Imp) == "big" && setup.getCurrentCockVisual(State.variables.CharacterSheet_Imp) == "biggestHyperBalls";
            },
            passage: "Imp_EncounterStart_Growth_Cock_5To6",
        }>>
<</if>>

<<if $Version >= 10500 && $Version < 10500.1>>
<<set $Version = 10500.1>>
<<set $VersionStr = '0.5.0*'>>

<<if $CharacterSheet_Player.fight.teammate != undefined>>
<<set $EasyRandomEncounters = ["CharacterSheet_Imp", "CharacterSheet_Slime"]>>
<<else>>
<<set $EasyRandomEncounters = ["CharacterSheet_Slime"]>>
<</if>>

<</if>>

<<if $Version >= 10500.1 && $Version < 10500.2>>
    <<set $Version = 10500.2>>
    <<set $VersionStr = '0.5.0*'>>

    <<if $CharacterSheet_Player.fight.teammate == undefined>>
    <<set $EasyRandomEncounters = ["CharacterSheet_Imp", "CharacterSheet_Slime"]>>
    <<else>>
    <<set $EasyRandomEncounters = ["CharacterSheet_Slime"]>>
    <</if>>
<</if>>

<<if $Version >= 10500.2 && $Version < 10500.3>>
    <<set $Version = 10500.3>>
    <<set $VersionStr = '0.5.0*'>>
    <<run console.log("upgrading 10500.2 to 10500.3")>>

    <<if $CharacterSheet_Player.fight.teammate == undefined>>
    <<set $EasyRandomEncounters = ["CharacterSheet_Imp", "CharacterSheet_Slime"]>>
    <<else>>
    <<set $EasyRandomEncounters = ["CharacterSheet_Slime"]>>
    <</if>>
<</if>>

<<if $Version >= 10500.3 && $Version < 10500.4>>
    <<set $Version = 10500.4>>
    <<set $VersionStr = '0.5.0*'>>
    <<run console.log("upgrading 10500.3 to 10500.4")>>

    <<if $CharacterSheet_Player.fight.teammate == undefined>>
    <<set $EasyRandomEncounters = ["CharacterSheet_Imp", "CharacterSheet_Slime"]>>
    <<else>>
    <<set $EasyRandomEncounters = ["CharacterSheet_Slime"]>>
    <</if>>
<</if>>


<<if $Version >= 10500.4 && $Version < 10501>>
<<set $Version = 10501>>
<<set $VersionStr = '0.5.1'>>

<<set setup.AttackTiming = 
{
    BEFORE_PLAYER:  1,
    BETWEEN_PLAYER_AND_ENEMY:  2,
    AFTER_ENEMY:  3,
}>>

<<widget "PlayerHeight">><<print setup.getLength(setup.getStatValue($CharacterSheet_Player, "height"))>><</widget>>
<<widget "PlayerCock">><<print setup.getLength(setup.getStatValue($CharacterSheet_Player, "cock"))>><</widget>>
<<widget "PlayerBalls">><<print setup.getLength(setup.getStatValue($CharacterSheet_Player, "balls"))>><</widget>>
<<widget "PlayerRace">><<print setup.getRace(State.variables.CharacterSheet_Player.info.anatomy)>><</widget>>
<<widget "PlayerName">><<print setup.getRace(State.variables.CharacterSheet_Player.info.name)>><</widget>>

<<widget "PlayerArmsNoVerb">><<print setup.processFlavours($CharacterSheet_Player, "@[all|arms|noverb]")>> \<</widget>>
<<widget "PlayerHandsNoVerb">><<print setup.processFlavours($CharacterSheet_Player, "@[all|hands|noverb]")>> \<</widget>>
<<widget "PlayerBallsNoVerb">><<print setup.processFlavours($CharacterSheet_Player, "@[all|balls|noverb]")>> \<</widget>>

<<widget "SymbioteRace">><<print setup.getRace(State.variables.CharacterSheet_Player.symbiote.anatomy)>><</widget>>
<<widget "SymbioteColor">><<print State.variables.CharacterSheet_Player.symbiote.color>><</widget>>

<<widget "SymbioteName">><<print State.variables.CharacterSheet_Player.symbiote.name>><</widget>>

<<widget "ImpHeight">><<print setup.getLength(setup.getStatValue($CharacterSheet_Imp, "height"))>><</widget>>
<<widget "ImpCockLength">><<print setup.getLength(setup.getStatValue($CharacterSheet_Imp, "cock"))>><</widget>>
<<widget "ImpBallsSize">><<print setup.getLength(setup.getStatValue($CharacterSheet_Imp, "balls"))>><</widget>>

<<set $CharacterSheet_Imp.fight.teammateSettings = {
    attackTiming: setup.AttackTiming.BEFORE_PLAYER,
}>>

<<set $CharacterSheet_Imp.quest.encounterPassages.growthCock5to6 =
{
    available: true,
    condition: function()
    {
        return setup.getCurrentBodyVisual(State.variables.CharacterSheet_Imp) == "big" && setup.getCurrentCockVisual(State.variables.CharacterSheet_Imp) == "biggestHyperBalls";
    },
    passage: "Imp_EncounterStart_Growth_Cock_5To6",
}>>

<<set $CharacterSheet_Imp.quest.postFightPassagesWin.masterPath =
{
    available: true,
    condition: function()
    {
        return State.variables.CharacterSheet_Imp.quest.storylineProgress == setup.StorylineProgress_Imp.MASTER;
    },
    passage: "Imp_Win_MasterPath",
}>>

<<set $CharacterSheet_Imp.quest.postFightPassagesLoss.masterPath =
{
    available: true,
    condition: function()
    {
        return State.variables.CharacterSheet_Imp.quest.storylineProgress == setup.StorylineProgress_Imp.MASTER;
    },
    passage: "Imp_Loss_MasterPath",
}>>

<<set $CharacterSheet_Imp.quest.growthMultiplier = 1>>

<<set $CharacterSheet_Imp.text =
{	
	goMeetImp_Intro :{
		heightFlavour: {
			small: [
				"GoMeetImp_heightFlavour_small",
			],
			medium: [
				"GoMeetImp_heightFlavour_small",
			],
			large: [
				"GoMeetImp_heightFlavour_large",
			],
			huge: [
				"GoMeetImp_heightFlavour_huge",
			],
		},
	},
	goMeetImp_Height :{
		heightFlavour: {
			small: [
				"Village_MeetImp_Examine_Size_Small",
			],
			medium: [
				"Village_MeetImp_Examine_Size_Small",
			],
			large: [
				"Village_MeetImp_Examine_Size_Large",
			],
			huge: [
				"Village_MeetImp_Examine_Size_Huge",
			],
		},
	},
	goMeetImp_Muscles :{
		heightFlavour: {
			small: [
				"Village_MeetImp_Examine_Muscles_Small",
			],
			medium: [
				"Village_MeetImp_Examine_Muscles_Small",
			],
			large: [
				"Village_MeetImp_Examine_Muscles_Large",
			],
			huge: [
				"Village_MeetImp_Examine_Muscles_Huge",
			],
		},
	},
	goMeetImp_Genitals :{
		heightFlavour: {
			small: [
				"Village_MeetImp_Examine_Genitals_Small",
			],
			medium: [
				"Village_MeetImp_Examine_Genitals_Small",
			],
			large: [
				"Village_MeetImp_Examine_Genitals_Large",
			],
			huge: [
				"Village_MeetImp_Examine_Genitals_Huge",
			],
		},
	},
	leaveImp :{
		heightFlavour: {
			small: [
				"Village_MeetImp_Leave_Small",
			],
			medium: [
				"Village_MeetImp_Leave_Small",
			],
			large: [
				"Village_MeetImp_Leave_Large",
			],
			huge: [
				"Village_MeetImp_Leave_Huge",
			],
		},
	},
	goMeetImp_GrowImp :{
		heightFlavour: {
			small: [
				"Village_MeetImp_GrowHim_Large",
			],
			medium: [
				"Village_MeetImp_GrowHim_Large",
			],
			large: [
				"Village_MeetImp_GrowHim_Large",
			],
			huge: [
				"Village_MeetImp_GrowHim_Huge",
			],
		},
	},
	basicAttackPrepFlavour :{
		heightFlavour: {
			small: [
				"_imp_text_sheet_basicAttackPrepFlavour_heightFlavour_small_1",
				"_imp_text_sheet_basicAttackPrepFlavour_heightFlavour_small_2",
				"_imp_text_sheet_basicAttackPrepFlavour_heightFlavour_small_3",
				"_imp_text_sheet_basicAttackPrepFlavour_heightFlavour_small_4",
			],
			medium: [
				"_imp_text_sheet_basicAttackPrepFlavour_heightFlavour_medium_1",
				"_imp_text_sheet_basicAttackPrepFlavour_heightFlavour_medium_2",
				"_imp_text_sheet_basicAttackPrepFlavour_heightFlavour_medium_3",
			],
			large: [
				"_imp_text_sheet_basicAttackPrepFlavour_heightFlavour_large_1",
				"_imp_text_sheet_basicAttackPrepFlavour_heightFlavour_large_2",
				"_imp_text_sheet_basicAttackPrepFlavour_heightFlavour_large_3",
			],
			huge: [
				"_imp_text_sheet_basicAttackPrepFlavour_heightFlavour_huge_1",
				"_imp_text_sheet_basicAttackPrepFlavour_heightFlavour_huge_2",
				"_imp_text_sheet_basicAttackPrepFlavour_heightFlavour_huge_3",
			],
		},
	},
	encounterStartFlavour :{
		heightFlavour: {
			small: [
				"_imp_text_sheet_encounterStartFlavour_heightFlavour_small_1",
				"_imp_text_sheet_encounterStartFlavour_heightFlavour_small_2",
				"_imp_text_sheet_encounterStartFlavour_heightFlavour_small_3",
				"_imp_text_sheet_encounterStartFlavour_heightFlavour_small_4",
			],
			medium: [
				"_imp_text_sheet_encounterStartFlavour_heightFlavour_medium_1",
				"_imp_text_sheet_encounterStartFlavour_heightFlavour_medium_2",
				"_imp_text_sheet_encounterStartFlavour_heightFlavour_medium_3",
			],
			large: [
				"_imp_text_sheet_encounterStartFlavour_heightFlavour_large_1",
				"_imp_text_sheet_encounterStartFlavour_heightFlavour_large_2",
				"_imp_text_sheet_encounterStartFlavour_heightFlavour_large_3",
			],
			huge: [
				"_imp_text_sheet_encounterStartFlavour_heightFlavour_huge_1",
				"_imp_text_sheet_encounterStartFlavour_heightFlavour_huge_2",
				"_imp_text_sheet_encounterStartFlavour_heightFlavour_huge_3",
			],
		},
	}
}>>

<<set $CharacterSheet_Player.quest.exploration.villageGateNorth.northGrownHeightMassive =
{
    available: true,
    condition: function()
    {
        var height = setup.getStatValue(State.variables.CharacterSheet_Player, "height");
        return  height > (50 * 12);
    },
    passage: "Explore_NorthGrownHeightMassive",
}>>

<<set $CharacterSheet_Player.quest.exploration.villageGateEast.eastGrownMegaMacro =
{
    available: true,
    condition: function()
    {
        return setup.getStatValue(State.variables.CharacterSheet_Player, "muscles") > (200 * 12);
    },
    passage: "Explore_EastGrownMegaMacro",
}>>

<</if>>

<<if $Version >= 10501 && $Version < 10501.1>>
    <<run console.log("deprecate 10501")>>
    <<set $Version = 10501.1>>
    <<set $VersionStr = '0.5.1*'>>

    <<if $CharacterSheet_Player.fight.teammate == undefined>>
    <<set $EasyRandomEncounters = ["CharacterSheet_Imp", "CharacterSheet_Slime"]>>
    <<else>>
    <<set $EasyRandomEncounters = ["CharacterSheet_Slime"]>>
    <</if>>
<</if>>

<<if $Version >= 10501.1 && $Version < 10502>>
    <<run console.log("deprecate 10502")>>
    <<set $Version = 10502>>
    <<set $VersionStr = '0.5.2\n [[->Reload_Unsupported_Enter]]'>>
<</if>>

<<if $Version >= 10502 && $Version < 10503>>
    <<set $CharacterSheet_Player.info.corruptionPerDay = 0>>
    <<include Ability_Uncorrupted>>
    <<include Ability_MinorCorruption>>
    <<include Ability_MajorCorruption>>
    <<include Ability_OverwhelmingCorruption>>
    <<include Ability_LordOfCorruption>>

    <<run console.log("deprecate 10503")>>
    <<set $Version = 10503>>
    <<set $VersionStr = '0.5.3\n [[->Reload_Unsupported_Enter]]'>>
<</if>>

<<if $Version >= 10503 && $Version < 10600>>
    <<include Ending_OneWithApothus>>
    <<include Ending_OneWithNyx>>
    <<include Ending_MemoriesOfCray>>
    <<include Ending_NyxChosenAscension>>
    <<include StoryInit_Abilities>>
    <<include StoryInit_FightMoves>>

    <<include Sheets_Wounded_Lost>>

    <<run console.log("deprecate 10600")>>
    <<set $Version = 10600>>
    <<set $VersionStr = '0.6.0\n "[[->Reload_Unsupported_Enter]]'>>
<</if>>

<<if $Version >= 10600 && $Version < 10601>>
    <<run console.log("deprecate 10601")>>
    <<set $Version = 10601>>
    <<set $VersionStr = '0.6.1\n "[[->Reload_Unsupported_Enter]]'>>
<</if>>

<<if $Version >= 10601 && $Version < 10602>>
    <<run console.log("deprecate 10602")>>
    <<set $Version = 10602>>
    <<set $VersionStr = '0.6.2\n "[[->Reload_Unsupported_Enter]]'>>
<</if>>

<<if $Version >= 10602 && $Version < 10603>>
    <<run console.log("deprecate 10603")>>
    <<set $Version = 10603>>
    <<set $VersionStr = '0.6.3\n "[[->Reload_Unsupported_Enter]]'>>
<</if>>

<<if $Version >= 10603 && $Version < 10604>>
    <<run console.log("deprecate 10604")>>
    <<set $Version = 10604>>
    <<set $VersionStr = '0.6.4\n "[[->Reload_Unsupported_Enter]]'>>
<</if>>

<<if $Version >= 10604 && $Version < 10605>>
    <<run console.log("deprecate 10605")>>
    <<set $Version = 10605>>
    <<set $VersionStr = '0.6.5\n "[[->Reload_Unsupported_Enter]]'>>
<</if>>

<<if $Version >= 10605 && $Version < 10700>>
    <<run console.log("deprecate 10700")>>
    <<set $Version = 10700>>
    <<set $VersionStr = '0.7.0\n "[[->Reload_Unsupported_Enter]]'>>

    <<set $VolumeControls =
    {
        master:
        {
            volume: 0.2,
        },
        music:
        {
            volume: 0.2,
            list: [], 
        },
        voices:
        {
            volume: 0.8,
            list: [], 
        },
        sfx:
        {
            volume: 1,
            list: [], 
        },
    }>>

    <<run console.log("set controls")>>
    <<run console.log($VolumeControls)>>
<</if>>

<<if $Version >= 10700 && $Version < 10701>>
    <<run console.log("deprecate 10701")>>
    <<set $Version = 10701>>
    <<set $VersionStr = '0.7.1\n "[[->Reload_Unsupported_Enter]]'>>
<</if>>

<<if $Version >= 10701 && $Version < 10702>>
    <<run console.log("deprecate 10702")>>
    <<set $Version = 10702>>
    <<set $VersionStr = '0.7.2\n "[[->Reload_Unsupported_Enter]]'>>
<</if>>

<<if $Version >= 10702 && $Version < 10703>>
    <<run console.log("deprecate 10703")>>
    <<set $Version = 10703>>
    <<set $VersionStr = '0.7.3\n "[[->Reload_Unsupported_Enter]]'>>
<</if>>

<<if $Version >= 10703 && $Version < 10704>>
    <<run console.log("deprecate 10704")>>

    <<script>>
    for(let i = 0; i < State.variables.CharacterSheet_Player.abilityHandler.abilityRuntimeDatas.length; ++i)
    {
        State.variables.CharacterSheet_Player.abilityHandler.abilityRuntimeDatas[i].abilityDataIndex = setup.AbilityIndexCache[State.variables.CharacterSheet_Player.abilityHandler.abilityRuntimeDatas[i].abilityDataID];
    }
    
    <</script>>

    <<set $Version = 10704>>
    <<set $VersionStr = '0.7.4\n [[->Reload_Unsupported_Enter]]'>>
<</if>>

<<if $Version >= 10704 && $Version < 10704.1>>
    <<run console.log("deprecate 10704.1")>>

    <<script>>
    for(let i = 0; i < State.variables.CharacterSheet_Player.abilityHandler.abilityRuntimeDatas.length; ++i)
    {
        State.variables.CharacterSheet_Player.abilityHandler.abilityRuntimeDatas[i].abilityDataIndex = setup.AbilityIndexCache[State.variables.CharacterSheet_Player.abilityHandler.abilityRuntimeDatas[i].abilityDataID];
    }
    
    <</script>>

    <<set $Version = 10704.1>>
    <<set $VersionStr = '0.7.4.1\n [[->Reload_Unsupported_Enter]]'>>
<</if>>

<<if $Version >= 10704.1 && $Version < 10705>>
    <<run console.log("deprecate 10705")>>

    <<set $Version = 10705>>
    <<set $VersionStr = '0.7.5'>>
    
    <<script>>
    Dialog.setup("");
	Dialog.wiki(Story.get("UpgradeSave").processText());
	Dialog.open();
    <</script>>
<</if>>

::StoryInit <161,1322>
<<include StoryInit_Base>>
<<include StoryInit_Widgets>>
<<include StoryInit_UniversalFlavour>>
<<include StoryInit_FightVariables>>
<<include StoryInit_FightMoves>>
<<include Quest_MQ001_EchoFirstEncounter>>
<<include Quest_MQ002>>
<<include StoryInit_QuestVariables>>
<<include StoryInit_Abilities>>
<<include Sheets_Player>>
<<include Sheets_Imp>>
<<include Sheets_Ethrex>>
<<include Sheets_Lost_Entity>>
<<include Sheets_Lost_Harbinger>>
<<include Sheets_Swarm>>
<<include Sheets_Lost_Naga>>
<<include Sheets_town_guard>>
<<include Sheets_MQ002_Guard>>
<<include Sheets_MQ002_NyxParasite>>
<<include Sheets_MQ002_DragonMonk>>
<<include Sheets_Doppleganger>>
<<include Sheets_Apothus>>
<<include Sheets_Apothus_2nd_Form>>
<<include Sheets_God_Beast>>
<<include Sheets_Slime>>
<<include Sheets_Wounded_Lost>>
<<include Sheets_Jorm>>
<<include Sheets_Abel>>
<<include Sheets_Torgar>>
<<include Sheets_Herald>>
<<include Sheets_Shard_Ring>>
<<include StoryInit_StateDrivenModifiers>>
<<include StoryInit_WorldState>>
<<include StoryInit_EndingSheet>>
<<include StoryInit_UI>>
<<include StoryInit_Music>>

<<include StoryInit_RandomEncounters>>

::StoryInit_Abilities <475,100>
<<include StoryInit_AbilityTrigger>>

<<set setup.UnlockableAbilityList = []>>
<<set setup.GlobalAbilities = []>>

<<include Ability_Tank>>
<<include Ability_Berserking>>
<<include Ability_DeadlyAim>>

<<include Ability_Mutant_2>>
<<include Ability_Mutant>>

<<include Ability_Global_HeightSizeTier_1>>
<<include Ability_Global_HeightSizeTier_2>>
<<include Ability_Global_HeightSizeTier_3>>
<<include Ability_Global_HeightSizeTier_4>>
<<include Ability_Global_HeightSizeTier_5>>
<<include Ability_Global_HeightSizeTier_6>>

<<include Ability_Global_MuscleTier_First>>
<<include Ability_Global_MuscleTier_Second>>
<<include Ability_Global_MuscleTier_Third>>
<<include Ability_Global_MuscleTier_Fourth>>
<<include Ability_Global_MuscleTier_Fifth>>
<<include Ability_Global_MuscleTier_Sixth>>

<<include Ability_Global_CockTier_First>>
<<include Ability_Global_CockTier_Second>>
<<include Ability_Global_CockTier_Third>>
<<include Ability_Global_CockTier_Fourth>>
<<include Ability_Global_CockTier_Fifth>>
<<include Ability_Global_CockTier_Sixth>>

<<include Ability_Global_BallsTier_First>>
<<include Ability_Global_BallsTier_Second>>
<<include Ability_Global_BallsTier_Third>>
<<include Ability_Global_BallsTier_Fourth>>
<<include Ability_Global_BallsTier_Fifth>>
<<include Ability_Global_BallsTier_Sixth>>

<<include Ability_Global_Bigger_Than_Target_1>>
<<include Ability_Global_Bigger_Than_Target_2>>
<<include Ability_Global_Bigger_Than_Target_3>>

<<include Ability_Global_Overwhelming_Balls>>
<<include Ability_Global_All_Consuming_Balls>>

<<include Ability_ProcessingCorruption>>

<<include Ability_Uncorrupted>>
<<include Ability_MinorCorruption>>
<<include Ability_MajorCorruption>>
<<include Ability_OverwhelmingCorruption>>
<<include Ability_LostInCorruption>>
<<include Ability_LordOfCorruption>>

<<include Achievement_OffTheDeepEnd>>
<<include Achievement_BaptismInCorruption>>
<<include Achievement_HostOfTheSpawns>>
<<include Achievement_LordOfTheSpawns>>
<<include Achievement_SubmissiveFighter>>
<<include Achievement_MightOfAugwult>>
<<include Achievement_DamnatoryKnowledge>>
<<include Achievement_WordOfPower>>
<<include Achievement_MemoriesOfKanathar>>
<<include Achievement_MemoriesOfDemonicAscent>>
<<include Achievement_MemoriesOfTheLost>>
<<include Achievement_IncompleteMemories>>
<<include Achievement_MemoriesOfTheMinotaur>>
<<include Achievement_Resolute>>
<<include Achievement_Redemption>>
<<include Achievement_MasterOfTheBarrens>>
<<include Achievement_GodAmongstMen>>
<<include Achievement_CockRingOfTheBind>>
<<include Achievement_CollarOfTheBind>>
<<include Achievement_SafePassage>>
<<include Achievement_ExplorerOfCorruptedDepths>>
<<include Achievement_ShiftingIdeals>>

<<include Ability_GoldenStar>>
<<include Ability_GreenStar>>
<<include Ability_RedStar>>
<<include Ability_BlueStar>>

<<include Ability_EchoForm>>

<<include Ability_Masochism>>
<<include Ability_HerculeanBuild>>

<<include Ability_DemonicCorruption_3>>
<<include Ability_DemonicCorruption_2>>
<<include Ability_DemonicCorruption>>

<<include Ability_StolenMass>>
<<include Ability_CurseOfTheNaga>>

<<include Ability_VigorOfTheEndowed_2>>
<<include Ability_VigorOfTheEndowed>>

<<include Ability_AppetiteForGrowth_2>>
<<include Ability_AppetiteForGrowth>>

<<include Ability_NyxParasiteInfection_2>>
<<include Ability_NyxParasiteInfection>>

<<include Ability_TouchedByNyxsLight>>
<<include Ability_EmbracedByNyxsLight>>

<<include Ability_Oath_Containment>>
<<include Ability_Oath_Nyx>>
<<include Ability_UnstoppableExpansion>>
<<include Ability_Oathbreaker>>
<<include Ability_NeverendingGrowth>>
<<include Ability_OrgasmicGrowth>>
<<include Ability_LastStand>>
<<include Ability_ToLiveForEcho>>
<<include Ability_WarriorOfDuality>>
<<include Ability_WitheringVenom>>
<<include Ability_CodexPassion>>
<<include Ability_FaithsReward>>
<<include Ability_EssenceHoarder>>
<<include Ability_SombrevesWhisper>>
<<include Ability_VampiricLust>>
<<include Ability_KalethsFervour>>
<<include Ability_ActiveParry>>
<<include Ability_ParryEnergy>>
<<include Ability_BrinkOfMadness>>
<<include Ability_PiercingPrecision>>
<<include Ability_ChannelTheAstralSoul>>
<<include Ability_ValiantRush>>
<<include Ability_SigilOfPerception>>
<<include Ability_TaintedByTheLost>>
<<include Ability_SurvivorOfTheFirstEclipse>>
<<include Ability_MemoriesOfTheChosen>>
<<include Ability_MemoriesOfCray>>
<<include Ability_MemoriesOfApothus>>
<<include Ability_MemoriesOfNyx>>
<<include Ability_HostOfEcho>>
<<include Ability_DracosOmnipotence>>
<<include Ability_BuriedInCum>>
<<include Ability_CorruptedStrength>>
<<include Ability_Focused>>
<<include Ability_Momentum>>
<<include Ability_Incorruptible>>
<<include Ability_ServantOfKanathar>>
<<include Ability_EmpoweringDrink>>
<<include Ability_TorgarsBond>>
<<include Ability_TonicOfStillness>>
<<include Ability_EssenceSurge>>
<<include Ability_CollarOfTheBind>>
<<include Ability_CockRingOfTheBind>>
<<include Ability_PromiseOfServitude>>
<<include Ability_NyxInducedWorkout>>
<<include Ability_Disciplined>>
<<include Ability_Defiler>>
<<include Ability_LustIncarnate>>

::StoryInit_AbilityTrigger <600,100>
<<script>>
setup.AbilityTrigger = 
{
    ON_ACQUIRE: 1 << 0,
    ON_FIGHT_START: 1 << 1,
    ON_FIGHT_TURN_START: 1 << 2,
    ON_FIGHT_DAMAGING_HIT: 1 << 3,
    ON_FIGHT_PRE_RECEIVE_DAMAGE: 1 << 5,
    ON_FIGHT_POST_RECEIVE_DAMAGE: 1 << 4,
    ON_FIGHT_END: 1 << 6,
    ON_MAX_LUST: 1 << 7,
    ON_MIN_LUST: 1 << 8,
    ON_APPLY_GROWTH: 1 << 9,
    ON_ENTER_MID_HEALTH: 1 << 10,
    ON_EXIT_MID_HEALTH: 1 << 11,
    ON_ENTER_LOW_HEALTH: 1 << 12,
    ON_EXIT_LOW_HEALTH: 1 << 13,
    ON_LEVEL_UP: 1 << 14,
    ON_FIGHT_DO_DAMAGELESS_ATTACK: 1 << 15,
    ON_FIGHT_BATTLE_WON: 1 << 16,
    ON_FIGHT_BATTLE_LOST: 1 << 17,
    ON_GAIN_CORRUPTION: 1 << 18,
    ON_GAIN_ESSENCE: 1 << 19,
    ON_DAY_CHANGE: 1 << 20,
    ON_STAT_CHANGE: 1 << 21,
    ON_NEW_GAME_PLUS: 1 << 22,
}
<</script>>

::StoryInit_Base <725,100>
<<script>>
Config.history.maxStates = 1;
Config.history.controls = false;
Config.ui.stowBarInitially = false;
<</script>>

<<if $Version == undefined>>
<<set $Version = 10705>>
<<set $VersionStr = '0.7.5'>>
<<set $ChoicesWindow = true>>

<<set setup.RedrawCosts = [10,15,20,30,40,50,60]>>
<<set setup.AddSlotCosts = [10,15,20,30,40,50,60]>>
<<set setup.AbilityIDCache = []>>
<<set setup.AbilityIndexCache = {}>>
<</if>>

<<set $Volume = 0.7>>

<<set $VolumeControls =
{
	master:
	{
		volume: 0.2,
	},
	music:
	{
		volume: 0.2,
		list: [], 
	},
	voices:
	{
		volume: 0.8,
		list: [], 
	},
	sfx:
	{
		volume: 1,
		list: [], 
	},
}>>

<<set $SelectedAbilityFilter = 0>>

<<set setup.AbilityFilter = {
	POWER:  		0,
    ALTERATION:  	1,
    STATUSEFFECT: 	2,
    GLOBAL: 		3,
}>>

<<set setup.RewardTier = 
{
	VERY_LOW:  1,
    LOW:  2,
    MEDIUM: 3,
    HIGH: 4,
    VERY_HIGH: 5,
}>>

<<set setup.FightHotkeys = ["1","2","3","4","5","6","7","8","9","0","Q","W","E","R","T","Y","U","I","O","P"]>>

<<set setup.DeathTextEnum = 
{
	NORMAL:  1,
    POST_APOTHUS:  2,
}>>

<<set setup.TestVoices = ["Test_Voice1", "Test_Voice2"]>>

<<set setup.AttackTiming = 
{
	BEFORE_PLAYER:  1,
    BETWEEN_PLAYER_AND_ENEMY:  2,
    AFTER_ENEMY:  3,
}>>

<<set $SecretCheat = 0>>

<<set $DisplayStatWindow = true>>
<<set $LastExplorationEnemyEncounter = 0>>

<<set $DeathText = setup.DeathTextEnum.NORMAL>>

<<set setup.RewardTier = 
{
	VERY_LOW:  1,
    LOW:  2,
    MEDIUM: 3,
    HIGH: 4,
    VERY_HIGH: 5,
}>>

<<set setup.Units = 
{
    IMPERIAL:  1,
    METRIC: 2
}>>

<<set setup.Oath = 
{
    NONE:  1,
    ACTIVE: 2,
	BROKEN: 3,
}>>

<<set setup.Comparators = 
{
    MICRO_TO:  1,
	MUCH_SMALLER: 2,
	SMALLER: 3,
	SLIGHTLY_SMALLER: 4,
	EQUAL: 5,
	SLIGHTLY_BIGGER: 6,
	BIGGER: 7,
	MUCH_BIGGER: 8,
	REACHES_WAIST: 9,
	REACHES_KNEES: 10,
	FITS_ON_HAND: 11,
	FITS_ON_FINGER: 12,
}>>

<<set setup.CockComparators = 
{
    MICRO_TO:  1,
	MUCH_SMALLER: 2,
	SMALLER: 3,
	SLIGHTLY_SMALLER: 4,
	EQUAL: 5,
	SLIGHTLY_BIGGER: 6,
	BIGGER: 7,
	MUCH_BIGGER: 8,
	MASSIVE: 9,
	HYPER: 10,
	MACRO: 11,
	GIGA: 12,
}>>

<<set setup.CorruptionComparators = 
{
    PURE:  50,
	NEUTRAL: 200,
	TAINTED: 500,
	CORRUPT: 1000
}>>


<<set setup.ColourPool = 
{
	DEFAULT: undefined,
    RED: "",
	ORANGE: "",
	YELLOW: "",
	GREEN: "",
	BLUE: "",
	INDIGO: "",
	VIOLET: "",
	PURPLE: "",
	WHITE: "",
	GREY: "",
	BLACK: "",
	OBSIDIAN: "",
	AMBER: "",
	PINK: "",
	BROWN: "",
	TAN: "",
	BEIGE: "",
	EMERALD: "",
	SAPPHIRE: "",
	CRIMSON: "",
	GOLDEN: ""
}>>

<<set setup.MuscleComparators = 
{
    MICRO_TO:  1,
	MUCH_SMALLER: 2,
	SMALLER: 3,
	SLIGHTLY_SMALLER: 4,
	EQUAL: 5,
	SLIGHTLY_BIGGER: 6,
	BIGGER: 7,
	MUCH_BIGGER: 8,
	DWARFING: 9,
	GIANT: 10,
	MACRO: 11,
	GIGA: 12,
}>>

<<set setup.englishNumbers = 
{
	1: "",
	2: "two",
	3: "three",
	4: "four",
	5: "five",
	6: "six",
	7: "seven",
	8: "eight",
	9: "nine",
	10: "ten",
	11: "eleven",
	12: "twelve",
	13: "thirteen",
	14: "fourteen",
	15: "fifteen",
	16: "sixteen",
	17: "seventeen",
	18: "eighteen",
	19: "nineteen",
	20: "twenty",
	21: "twenty one",
	22: "twenty two",
	23: "twenty three",
	24: "twenty four",
	25: "twenty five",
	26: "twenty six",
	27: "twenty seven",
	28: "twenty eight",
	29: "twenty nine",
	30: "thirty",
	31: "thirty one",
	32: "thirty two",
	33: "thirty three",
	34: "thirty four",
	35: "thirty five",
	36: "thirty six",
	37: "thirty seven",
	38: "thirty eight",
	39: "thirty nine",
	40: "forty"
}>>

<<set $Debug = $SpecialBuild>>

<<set setup.Colors = ["orange", "blue", "grey"]>>

<<set $BoughtFightMoves = 0>>
<<set $FightTurn = 0>>

<<set setup.LevelUpTable = 
[
    180,
    500,
    1300,
	2400,
	3700,
	5600,
	7000,
	8300,
	10000,
	15000,
]>>

<<set setup.AbilityCategory =
{
    NONE: 0,
    WARRIOR: 1,
    GROWTH: 2,
    SOMBREVE: 3,
    PURITY: 4,
    LUST: 5,
}>>

/*always order from best to worst*/
<<set setup.AbilityGrade =
{
    VERYHIGH: 4,
    HIGH: 3,
    MEDIUM: 2,
    LOW: 1,
    VERYLOW: 0,
}>>

/*Stats -BEGIN*/
<<set $Expedition = 0>>

<<if $Cycle == undefined>>
<<set $Cycle = 1>>
<</if>>

<<set $Essence = 0>>

<<set $Exp = 0>>
<<set $Level = 1>>
/*Stats -END*/

/*Descriptors*/
<<set setup.Fight_HealthDescriptor = function(maxHP, curHP)
{
	if(curHP / maxHP > 0.7)
	{
		return "<span style='color:#46c546;'>" + "" + "</span>";
	}
	else if(curHP / maxHP > 0.5)
	{
		return "<span style='color:#c5bb46;'>" + "" + "</span>";
	}
	else if(curHP / maxHP > 0.3)
	{
		return "<span style='color:#ff9840;'>" + "" + "</span>";
	}
	else
	{
		return "<span style='color:#ff0000;'>" + "" + "</span>";
	}
};
>>

<<set setup.AdjectivePool =
{
	heads: {
		medium: [""],
		large: [""],
		huge: ["", ""],
		adjectives: {
			pure: ["", ""],
			corrupt: ["", ""]
		}
	},
	eyes: {
		adjectives: {
			corrupt: ["", "", "", "", ""]
		}
	},
	jaws: {
		small: [""],
		medium: [""],
		large: [""],
		huge: [""],
		adjectives: {
		}
	},
	teeths: {
		raceTexture: [""],
		adjectives: {
		}
	},
	hands: {
		small: [""],
		medium: [""],
		large: [""],
		huge: [""],
		adjectives: {
		}
	},
	horns: {
		small: [""],
		medium: ["", ""],
		large: ["", "", ""],
		huge: ["", ""],
		adjectives: {
			corrupt: ["", "", ""]
		}
	},
	wings: {
		small: [""],
		medium: [""],
		large: [""],
		huge: ["", ""],
		adjectives: {
		}
	},
	tongues: {
		small: [""],
		medium: [""],
		large: [""],
		huge: ["", ""],
		adjectives: {
			corrupt: ["", "", ""]
		}
	},
	arms: {
		small: ["", "", ""],
		medium: ["", "", ""],
		large: ["", "", "", "", ""],
		huge: ["", "", "", "", "", "", ""],
		adjectives: {
			pure: ["", "", "", ""],
			corrupt: ["", "", "", "", "", ""]
		}
	},
	pecs: {
		small: ["", "", "", ""],
		medium: ["", "", "", ""],
		large: ["", "", "", "", "", ""],
		huge: ["", "", "", ""],
		adjectives: {
			pure: ["", "", "", ""],
			corrupt: ["", "", "", "", ""]
		}
	},
	abdominals: {
		small: ["", "", "", ""],
		medium: ["", "", "", ""],
		large: ["", "", "", "", ""],
		huge: ["", "", "", "", ""],
		adjectives: {
			pure: [""],
			corrupt: ["", ""]
		}
	},
	cocks: {
		small: ["", ""],
		medium: ["", "", "", ""],
		large: ["", "", "", "", "", "", "", "", ""],
		huge: ["", "", "", "", "", "", "", ""],
		adjectives: {
			pure: ["", "", ""],
			corrupt: ["", "", "", ""]
		}
	},
	balls: {
		medium: ["", "", ""],
		large: ["", ""],
		huge: ["", "", "", ""],
		adjectives: {
			pure: ["", "", ""],
			corrupt: ["", "", "", ""]
		}
	},
	legs: {
		small: ["", "", ""],
		medium: ["", "", ""],
		large: ["", "", "", "", ""],
		huge: ["", "", "", "", "", ""],
		adjectives: {
			pure: ["", "", ""],
			corrupt: ["", ""]
		}
	},
	tails: {
		medium: [""],
		large: ["", ""],
		huge: ["", ""],
		adjectives: {
			corrupt: [""]
		}
	},
	breasts: {
		small: ["", ""],
		medium: ["", ""],
		large: ["", "", "", "", "", ""],
		huge: ["", "", ""],
		adjectives: {
			pure: ["", ""],
			corrupt: ["", "", ""]
		}
	},
	vaginas: {
		small: ["", "", ""],
		medium: ["", "", ""],
		large: ["", "", "", "", "", ""],
		huge: ["", "", "", ""],
		adjectives: {
			pure: ["", "", ""],
			corrupt: ["", "", ""]
		}
	}
}
>>

<<set setup.RacePool = 
{
	DEFAULT: 0,
	WOLF: 1,
	MINOTAUR: 2,
	BEHEMOTH: 3,
	DRAGONBORN: 4,
	HALFORC: 5,
	INCUBUS: 6,
	SYMBIOTE: 7,
	NAGA: 8,
	LORD_OF_LUST: 9,
	CUSTOM: 10,
}
>>

<<set $CustomRace = 
{
	name: undefined,
	namePlural: undefined,
	heads: {
		defaultNumber: 0,
		raceTexture: undefined
	},
	eyes: {
		defaultNumber: 0,
		raceTexture: undefined
	},
	jaws: {
		defaultNumber: 0,
		raceTexture: undefined
	},
	teeths: {
		defaultNumber: 0,
		raceTexture: undefined
	},
	hands: {
		defaultNumber: 0,
		raceTexture: undefined
	},
	horns: {
		defaultNumber: 0,
		raceTexture: undefined
	},
	wings: {
		defaultNumber: 0,
		raceTexture: undefined
	},
	tongues: {
		defaultNumber: 0,
		raceTexture: undefined
	},
	arms: {
		defaultNumber: 0,
		raceTexture: undefined
	},
	pecs: {
		defaultNumber: 0,
		raceTexture: undefined
	},
	abdominals: {
		defaultNumber: 0,
		raceTexture: undefined
	},
	cocks: {
		defaultNumber: 0,
		raceTexture: undefined
	},
	balls: {
		defaultNumber: 0,
		raceTexture: undefined
	},
	legs: {
		defaultNumber: 0,
		raceTexture: undefined
	},
	tails: {
		defaultNumber: 0,
		raceTexture: undefined
	},
	breasts: {
		defaultNumber: 2,
		raceTexture: undefined
	},
	vaginas: {
		defaultNumber: 1,
		raceTexture: undefined
	},
}
>>

<<set setup.RacePoolObjects = 
{
    DEFAULT: {
		name: "",
		namePlural: "",
		description: "",
		heads: {
			defaultNumber: 1
		},
		eyes: {
			defaultNumber: 2
		},
		jaws: {
			defaultNumber: 1
		},
		teeths: {
			defaultNumber: 1
		},
		hands: {
			defaultNumber: 2
		},
		tongues: {
			defaultNumber: 1
		},
		arms: {
			defaultNumber: 2
		},
		pecs: {
			defaultNumber: 2
		},
		abdominals: {
			defaultNumber: 8
		},
		cocks: {
			defaultNumber: 1
		},
		balls: {
			defaultNumber: 2
		},
		legs: {
			defaultNumber: 2
		},
		breasts: {
			defaultNumber: 2
		},
		vaginas: {
			defaultNumber: 1
		}
	},
	WOLF: {
		name: "",
		namePlural: "",
		description: "",
		heads: {
			defaultNumber: 1,
			raceTexture: ["", "", ""]
		},
		eyes: {
			defaultNumber: 2,
			raceTexture: ["", "", ""]
		},
		jaws: {
			defaultNumber: 1,
			raceTexture: ["", "", "", "", ""]
		},
		teeths: {
			defaultNumber: 1,
			raceTexture: [""]
		},
		hands: {
			defaultNumber: 2,
			raceTexture: ["", ""]
		},
		tongues: {
			defaultNumber: 1
		},
		arms: {
			defaultNumber: 2,
			raceTexture: ["", "", "", "", ""]
		},
		pecs: {
			defaultNumber: 2,
			raceTexture: ["", "", "", "", ""]
		},
		abdominals: {
			defaultNumber: 8,
			raceTexture: ["", "", "", "", ""]
		},
		cocks: {
			defaultNumber: 1,
			raceTexture: ["", "", "", ""]
		},
		balls: {
			defaultNumber: 2,
			raceTexture: [""]
		},
		legs: {
			defaultNumber: 2,
			raceTexture: ["", "", "", "", ""]
		},
		tails: {
			defaultNumber: 1,
			raceTexture: ["", ""]
		},
		breasts: {
			defaultNumber: 2
		},
		vaginas: {
			defaultNumber: 1
		}
	},
	MINOTAUR: {
		name: "",
		namePlural: "",
		description: "",
		heads: {
			defaultNumber: 1,
			raceTexture: ["", ""]
		},
		eyes: {
			defaultNumber: 2,
			raceTexture: [""]
		},
		jaws: {
			defaultNumber: 1,
			raceTexture: [""],
		},
		teeths: {
			defaultNumber: 1
		},
		hands: {
			defaultNumber: 2,
			raceTexture: [""]
		},
		horns: {
			defaultNumber: 2,
			raceTexture: [""]
		},
		tongues: {
			defaultNumber: 1,
			raceTexture: [""]
		},
		arms: {
			defaultNumber: 2,
			raceTexture: ["", "", ""]
		},
		pecs: {
			defaultNumber: 2,
			raceTexture: ["", "", ""]
		},
		abdominals: {
			defaultNumber: 8,
			raceTexture: ["", "", ""]
		},
		cocks: {
			defaultNumber: 1,
			raceTexture: ["", "", ""]
		},
		balls: {
			defaultNumber: 2,
			raceTexture: [""]
		},
		legs: {
			defaultNumber: 2,
			raceTexture: [""]
		},
		tails: {
			defaultNumber: 1,
			raceTexture: [""]
		},
		breasts: {
			defaultNumber: 2
		},
		vaginas: {
			defaultNumber: 1
		}
	},
	BEHEMOTH: {
		name: "",
		namePlural: "",
		description: "",
		heads: {
			defaultNumber: 1,
			raceTexture: ["", "", "", ""]
		},
		eyes: {
			defaultNumber: 2,
			raceTexture: ["", ""]
		},
		jaws: {
			defaultNumber: 1,
			raceTexture: ["", ""]
		},
		teeths: {
			defaultNumber: 1,
			raceTexture: [""]
		},
		hands: {
			defaultNumber: 2,
			raceTexture: ["", ""]
		},
		horns: {
			defaultNumber: 2,
			raceTexture: [""]
		},
		tongues: {
			defaultNumber: 1,
			raceTexture: [""]
		},
		arms: {
			defaultNumber: 2
		},
		pecs: {
			defaultNumber: 2,
			raceTexture: [""]
		},
		abdominals: {
			defaultNumber: 8
		},
		cocks: {
			defaultNumber: 2,
			raceTexture: ["", ""]
		},
		balls: {
			defaultNumber: 4,
			raceTexture: [""]
		},
		legs: {
			defaultNumber: 2,
			raceTexture: [""]
		},
		tails: {
			defaultNumber: 1,
			raceTexture: ["", ""]
		},
		breasts: {
			defaultNumber: 2
		},
		vaginas: {
			defaultNumber: 1
		}
	},
	HALFORC: {
		name: "",
		namePlural: "",
		description: "",
		heads: {
			defaultNumber: 1,
			raceTexture: ["", ""]
		},
		eyes: {
			defaultNumber: 2,
			raceTexture: ["", ""]
		},
		jaws: {
			defaultNumber: 1,
			raceTexture: ["", ""]
		},
		teeths: {
			defaultNumber: 1,
			raceTexture: [""]
		},
		hands: {
			defaultNumber: 2,
		},
		tongues: {
			defaultNumber: 1,
		},
		arms: {
			defaultNumber: 2
		},
		pecs: {
			defaultNumber: 2,
			raceTexture: [""]
		},
		abdominals: {
			defaultNumber: 6
		},
		cocks: {
			defaultNumber: 1,
		},
		balls: {
			defaultNumber: 2,
			raceTexture: [""]
		},
		legs: {
			defaultNumber: 2,
		},
		breasts: {
			defaultNumber: 2
		},
		vaginas: {
			defaultNumber: 1
		}
	},
	DRAGONBORN: {
		name: "",
		namePlural: "",
		description: "",
		heads: {
			defaultNumber: 1,
			raceTexture: [""]
		},
		eyes: {
			defaultNumber: 2,
			raceTexture: ["", ""]
		},
		jaws: {
			defaultNumber: 1,
			raceTexture: ["", ""]
		},
		teeths: {
			defaultNumber: 1,
			raceTexture: [""]
		},
		hands: {
			defaultNumber: 2,
			raceTexture: ["", ""]
		},
		horns: {
			defaultNumber: 4,
			raceTexture: [""]
		},
		wings: {
			defaultNumber: 2,
			raceTexture: [""]
		},
		tongues: {
			defaultNumber: 1,
			raceTexture: ["", ""]
		},
		arms: {
			defaultNumber: 2,
			raceTexture: [""]
		},
		pecs: {
			defaultNumber: 2,
			raceTexture: [""]
		},
		abdominals: {
			defaultNumber: 8,
			raceTexture: [""]
		},
		cocks: {
			defaultNumber: 1,
			raceTexture: ["", ""]
		},
		balls: {
			defaultNumber: 2,
			raceTexture: [""]
		},
		legs: {
			defaultNumber: 2
		},
		tails: {
			defaultNumber: 1,
			raceTexture: ["", "", ""]
		},
		breasts: {
			defaultNumber: 2,
			raceTexture: [""]
		},
		vaginas: {
			defaultNumber: 1
		}
	},
	INCUBUS: {
		name: "",
		namePlural: "",
		heads: {
			defaultNumber: 1,
			raceTexture: [""]
		},
		eyes: {
			defaultNumber: 2,
			raceTexture: ["", ""]
		},
		jaws: {
			defaultNumber: 1,
			raceTexture: ["", ""]
		},
		teeths: {
			defaultNumber: 1,
			raceTexture: [""]
		},
		hands: {
			defaultNumber: 2,
			raceTexture: ["", ""]
		},
		horns: {
			defaultNumber: 2,
			raceTexture: [""]
		},
		tongues: {
			defaultNumber: 1,
			raceTexture: ["", ""]
		},
		arms: {
			defaultNumber: 2,
			raceTexture: [""]
		},
		pecs: {
			defaultNumber: 2,
			raceTexture: [""]
		},
		abdominals: {
			defaultNumber: 6,
			raceTexture: [""]
		},
		cocks: {
			defaultNumber: 1,
			raceTexture: ["", ""]
		},
		balls: {
			defaultNumber: 2,
			raceTexture: [""]
		},
		legs: {
			defaultNumber: 2,
			raceTexture: [""]
		},
		tails: {
			defaultNumber: 1,
			raceTexture: ["", ""]
		},
		breasts: {
			defaultNumber: 2
		},
		vaginas: {
			defaultNumber: 1
		}
	},
	LORD_OF_LUST: {
		name: "",
		namePlural: "",
		heads: {
			defaultNumber: 1,
			raceTexture: [""]
		},
		eyes: {
			defaultNumber: 2,
			raceTexture: ["", ""]
		},
		jaws: {
			defaultNumber: 1,
			raceTexture: ["", "", "devilish"]
		},
		teeths: {
			defaultNumber: 1,
			raceTexture: ["", ""]
		},
		hands: {
			defaultNumber: 2,
			raceTexture: ["", ""]
		},
		horns: {
			defaultNumber: 4,
			raceTexture: ["", ""]
		},
		tongues: {
			defaultNumber: 1,
			raceTexture: ["", ""]
		},
		arms: {
			defaultNumber: 2,
			raceTexture: [""]
		},
		pecs: {
			defaultNumber: 2,
			raceTexture: [""]
		},
		abdominals: {
			defaultNumber: 6,
			raceTexture: [""]
		},
		cocks: {
			defaultNumber: 1,
			raceTexture: ["", ""]
		},
		balls: {
			defaultNumber: 2,
			raceTexture: [""]
		},
		legs: {
			defaultNumber: 2,
			raceTexture: [""]
		},
		tails: {
			defaultNumber: 1,
			raceTexture: ["", ""]
		},
		breasts: {
			defaultNumber: 2
		},
		vaginas: {
			defaultNumber: 1
		}
	},
	NAGA: {
		name: "",
		namePlural: "",
		heads: {
			defaultNumber: 1,
			raceTexture: [""]
		},
		eyes: {
			defaultNumber: 2,
			raceTexture: [""]
		},
		jaws: {
			defaultNumber: 1,
			raceTexture: [""]
		},
		teeths: {
			defaultNumber: 1,
			raceTexture: [""]
		},
		hands: {
			defaultNumber: 2,
			raceTexture: ["", ""]
		},
		tongues: {
			defaultNumber: 1,
			raceTexture: [""]
		},
		arms: {
			defaultNumber: 2,
			raceTexture: [""]
		},
		pecs: {
			defaultNumber: 2,
			raceTexture: [""]
		},
		abdominals: {
			defaultNumber: 8,
			raceTexture: [""]
		},
		cocks: {
			defaultNumber: 2,
			raceTexture: ["", ""]
		},
		balls: {
			defaultNumber: 4,
			raceTexture: [""]
		},
		tails: {
			defaultNumber: 1,
			raceTexture: ["", ""]
		},
		breasts: {
			defaultNumber: 2
		},
		vaginas: {
			defaultNumber: 1
		}
	},
	SYMBIOTE: {
		name: "",
		namePlural: "",
		heads: {
			defaultNumber: 1,
			raceTexture: [""]
		},
		eyes: {
			defaultNumber: 2,
			raceTexture: [""]
		},
		jaws: {
			defaultNumber: 1,
			raceTexture: [""]
		},
		teeths: {
			defaultNumber: 1,
			raceTexture: [""]
		},
		hands: {
			defaultNumber: 2,
			raceTexture: [""]
		},
		horns: {
			defaultNumber: 0
		},
		wings: {
			defaultNumber: 0
		},
		tongues: {
			defaultNumber: 1,
			raceTexture: ["", ""]
		},
		arms: {
			defaultNumber: 2
		},
		pecs: {
			defaultNumber: 2
		},
		abdominals: {
			defaultNumber: 8
		},
		cocks: {
			defaultNumber: 1,
			raceTexture: [""]
		},
		balls: {
			defaultNumber: 2
		},
		legs: {
			defaultNumber: 2
		},
		tails: {
			defaultNumber: 0
		},
		breasts: {
			defaultNumber: 2
		},
		vaginas: {
			defaultNumber: 1
		}
	},
	get CUSTOM() {
		return State.variables.CustomRace;
	},
}>>

<<run setup.fillDestinationArray()>>

::StoryInit_FightMoves <850,100>
<<include FightMove_BasicAttack>>
<<include FightMove_Lunge>>
<<include FightMove_Infest>>
<<include FightMove_Inspect>>
<<include FightMove_Goo_Stun>>
<<include FightMove_Masturbate>>
<<include FightMove_IncubusStrike>>
<<include FightMove_IncubusCall>>
<<include FightMove_Hypnotize>>
<<include FightMove_Worship>>
<<include FightMove_DoNothing>>
<<include FightMove_Sigil_Vitality>>
<<include FightMove_Sigil_Pain>>
<<include FightMove_Sigil_Perception>>
<<include FightMove_Sigil_Growth>>
<<include FightMove_ChargedStrike>>
<<include FightMove_Stomp>>
<<include FightMove_WitheringVenom>>
<<include FightMove_Parry>>
<<include FightMove_DragonStrike>>
<<include FightMove_ParasiteLunge>>
<<include FightMove_SummonParasite>>
<<include FightMove_ConsumeLost>>
<<include FightMove_SeedOfRuin>>
<<include FightMove_SlimeLunge>>
<<include FightMove_Slash>>
<<include FightMove_Bash>>
<<include FightMove_Focus>>
<<include FightMove_CumDeluge>>
<<include FightMove_LustfulInstincts>>
<<include FightMove_CorruptedUrges>>
<<include FightMove_InfectiousLust>>
<<include FightMove_CorruptedRemedy>>
<<include FightMove_PridefulAscent>>
<<include FightMove_Sigil_Triad>>
<<include FightMove_Tutorial1>>
<<include FightMove_Tutorial2>>
<<include FightMove_Tutorial3>>
<<include FightMove_HeraldsDevotion>>
<<include FightMove_TonicOfStillness>>
<<include FightMove_AbsorbEssence>>
<<include FightMove_FirstStrike>>
<<include FightMove_EnragedPummel>>

<<include StoryInit_SpecialMoves>>

<<set setup.FightMoveIDs = [setup.FightMove_Basic_Attack.id, 
                    setup.FightMove_Do_Nothing.id,
                    setup.FightMove_Submit_Completely.id,
                    setup.FightMove_Goo_Stun.id,
                    setup.FightMove_IncubusCall.id,
                    setup.FightMove_IncubusStrike.id,
                    setup.FightMove_Lunge.id,
                    setup.FightMove_Infest.id,
                    setup.FightMove_Inspect.id,
                    setup.FightMove_Masturbate.id,
                    setup.FightMove_Sigil_Vitality.id,
                    setup.FightMove_Sigil_Pain.id,
                    setup.FightMove_Sigil_Perception.id,
                    setup.FightMove_Sigil_Growth.id,
                    setup.FightMove_ChargedStrike.id,
                    setup.FightMove_Stomp.id,
                    setup.FightMove_Hypnotize.id,
                    setup.FightMove_Worship.id,
                    setup.FightMove_WitheringVenom.id,
                    setup.FightMove_Parry.id,
                    setup.FightMove_DragonStrike.id,
                    setup.FightMove_ParasiteLunge.id,
                    setup.FightMove_SummonParasite.id,
                    setup.FightMove_ConsumeLost.id,
                    setup.FightMove_SeedOfRuin.id,
                    setup.FightMove_SlimeLunge.id,
                    setup.FightMove_Slash.id,
                    setup.FightMove_Bash.id,
                    setup.FightMove_Focus.id,
                    setup.FightMove_CumDeluge.id,
                    setup.FightMove_LustfulInstincts.id,
                    setup.FightMove_CorruptedUrges.id,
                    setup.FightMove_InfectiousLust.id,
                    setup.FightMove_CorruptedRemedy.id,
                    setup.FightMove_PridefulAscent.id,
                    setup.FightMove_Sigil_Triad.id,
                    setup.FightMove_Tutorial1.id,
                    setup.FightMove_Tutorial2.id,
                    setup.FightMove_Tutorial3.id,
                    setup.FightMove_HeraldsDevotion.id,
                    setup.FightMove_AbsorbEssence.id,
                    setup.FightMove_FirstStrike.id,
                    setup.FightMove_EnragedPummel.id,
                    ]>>

::StoryInit_FightVariables <975,100>
<<set $FightVariables = 
{
	currentHP: undefined,
	currentStamina: undefined,
    currentArousal: undefined,
	currentFightMove: undefined,
	stunnedDuration: undefined,
	hypnotizedMoveIDsList: [],
	cooldowns: [],
	surrender: false,
	fightModifiers: [],
	currentFightMoveOutcome: undefined,
	currentTurnAbilityText: undefined,
	persistentEffects: []
}>>

::StoryInit_Music <1100,100>
<<cacheaudio "manor" "https://sombreve.github.io/Dawn-of-Corruption-Site/Music/manor_theme.mp3">>
<<cacheaudio "SFX_heartbeat" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/heartbeat.mp3">>

<<cacheaudio "village1" "https://sombreve.github.io/Dawn-of-Corruption-Site/Music/village_bgm1.mp3">>
<<cacheaudio "village2" "https://sombreve.github.io/Dawn-of-Corruption-Site/Music/village_bgm2.mp3">>
<<cacheaudio "village3" "https://sombreve.github.io/Dawn-of-Corruption-Site/Music/village_bgm3.mp3">>
<<cacheaudio "village4" "https://sombreve.github.io/Dawn-of-Corruption-Site/Music/village_bgm4.mp3">>

<<createplaylist "village_bgm1">>
    <<track "village1">>
<</createplaylist>>

<<createplaylist "village_bgm2">>
    <<track "village2">>
<</createplaylist>>

<<createplaylist "village_bgm3">>
    <<track "village3">>
<</createplaylist>>

<<createplaylist "village_bgm4">>
    <<track "village4">>
<</createplaylist>>

<<cacheaudio "battle_bgm" "https://sombreve.github.io/Dawn-of-Corruption-Site/Music/battle_bgm.mp3">>

<<createplaylist "battle_bgm">>
    <<track "battle_bgm">>
<</createplaylist>>

<<cacheaudio "battle_bgm_hard" "https://sombreve.github.io/Dawn-of-Corruption-Site/Music/battle_bgm_hard.mp3">>

<<createplaylist "battle_bgm_hard">>
    <<track "battle_bgm_hard">>
<</createplaylist>>

<<set setup.AllSoundActions = [
    "action_Suck",
]>>>

<<cacheaudio "action_Suck_1" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/Actions/Suck/Suck_01.mp3">>
<<cacheaudio "action_Suck_2" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/Actions/Suck/Suck_02.mp3">>
<<cacheaudio "action_Suck_3" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/Actions/Suck/Suck_03.mp3">>

<<createplaylist "action_Suck">>
    <<track "action_Suck_1">>
    <<track "action_Suck_2">>
    <<track "action_Suck_3">>
<</createplaylist>>


<<include StoryInit_Voice1>>
<<include StoryInit_Voice2>>
<<include StoryInit_VoiceImp>>
<<include StoryInit_VoiceTorgar>>

::StoryInit_QuestVariables <1225,100>
/*debug*/
/*<<set $Quest_CanExplore = true>>*/
<<set $Quest_CanExplore = true>>

/*debug*/
/*<<set $Quest_InProgress = [$Quest_MQ002]>>*/
<<set $Quest_InProgress = []>>

::StoryInit_RandomEncounters <100,225>
<<set $EasyRandomEncounters = ["CharacterSheet_Imp", "CharacterSheet_Slime", "CharacterSheet_Torgar", "CharacterSheet_Shard_Ring"]>>
<<set $MediumRandomEncounters = ["CharacterSheet_Ethrex", "CharacterSheet_Lost_Entity", "CharacterSheet_Lost_Naga"]>>

::StoryInit_SpecialMoves <225,225>
<<set setup.FightMove_Stunned =
{
	id: "FightMove_Stunned",
	name: "",
	preparation: function(character, target)
	{
		return character.info.name + ""
	},
	attackAttemptDesc: function(character, target)
	{
		if(character.fight.variables.stunnedDuration > 0)
		{
			return character.info.name + ""
		}
		else
		{
			return character.info.name + ""
		}
		
	},
	activationCondition: function(character, target)
	{
		return true;
	},
	dmg: function(character, target)
	{
		let damageParam = 
		{
			multiplier: 0,
			addon: 0,
		}

		return damageParam;
	},
	staminaCost: 0,
	critMod: 100,
	skillStatsToDescriptionSpacing: 1,
	skillDescription: "",
	skillType: "special",
	skillTheme: "special",
	additionalEffects: []
}>>

::StoryInit_StateDrivenModifiers <350,225>
<<set $FightStateDrivenModifiers = [$Bigger_Than_Target_1, $Bigger_Than_Target_2, $Bigger_Than_Target_3]>>

::StoryInit_UI <475,225>
<<run setup.updateStaticCorruptionUI(State.variables.CharacterSheet_Player)>>

::StoryInit_UniversalFlavour_basicAttackAttemptFlavour_heightFlavour_small <600,225>


::StoryInit_UniversalFlavour_basicAttackAttemptFlavour_heightFlavour_medium <725,225>


::StoryInit_UniversalFlavour_basicAttackAttemptFlavour_heightFlavour_large <850,225>


::StoryInit_UniversalFlavour_basicAttackAttemptFlavour_heightFlavour_huge <975,225>
@[all|huge|arms|noverb]

::StoryInit_UniversalFlavour_basicAttackAttemptFlavour_corruptionFlavour_corrupt75 <1100,225>


::StoryInit_UniversalFlavour_basicAttackAttemptFlavour_corruptionFlavour_corrupt100 <1225,225>


::StoryInit_UniversalFlavour_basicAttackPrepFlavour_heightFlavour_small_1 <100,350>


::StoryInit_UniversalFlavour_basicAttackPrepFlavour_heightFlavour_small_2 <225,350>


::StoryInit_UniversalFlavour_basicAttackPrepFlavour_heightFlavour_medium_1 <350,350>


::StoryInit_UniversalFlavour_basicAttackPrepFlavour_heightFlavour_medium_2 <475,350>


::StoryInit_UniversalFlavour_basicAttackPrepFlavour_heightFlavour_large_1 <600,350>


::StoryInit_UniversalFlavour_basicAttackPrepFlavour_heightFlavour_large_2 <725,350>


::StoryInit_UniversalFlavour_basicAttackPrepFlavour_heightFlavour_huge_1 <850,350>


::StoryInit_UniversalFlavour_basicAttackPrepFlavour_heightFlavour_huge_2 <975,350>


::StoryInit_UniversalFlavour_basicAttackPrepFlavour_heightFlavour_huge_3 <1100,350>


::StoryInit_UniversalFlavour_basicAttackPrepFlavour_corruptionFlavour_corrupt50 <1225,350>


::StoryInit_UniversalFlavour_basicAttackPrepFlavour_corruptionFlavour_corrupt75 <100,475>


::StoryInit_UniversalFlavour_basicAttackPrepFlavour_corruptionFlavour_corrupt100 <225,475>


::StoryInit_UniversalFlavour_sizeDescriptionFlavour_heightFlavour_small_1 <350,475>


::StoryInit_UniversalFlavour_sizeDescriptionFlavour_heightFlavour_small_2 <475,475>


::StoryInit_UniversalFlavour_sizeDescriptionFlavour_heightFlavour_small_3 <600,475>


::StoryInit_UniversalFlavour_sizeDescriptionFlavour_heightFlavour_small_4 <725,475>


::StoryInit_UniversalFlavour_sizeDescriptionFlavour_heightFlavour_medium_1 <850,475>


::StoryInit_UniversalFlavour_sizeDescriptionFlavour_heightFlavour_medium_2 <975,475>


::StoryInit_UniversalFlavour_sizeDescriptionFlavour_heightFlavour_medium_3 <1100,475>


::StoryInit_UniversalFlavour_sizeDescriptionFlavour_heightFlavour_medium_4 <1225,475>


::StoryInit_UniversalFlavour_sizeDescriptionFlavour_heightFlavour_large_1 <100,600>


::StoryInit_UniversalFlavour_sizeDescriptionFlavour_heightFlavour_large_2 <225,600>


::StoryInit_UniversalFlavour_sizeDescriptionFlavour_heightFlavour_large_3 <350,600>


::StoryInit_UniversalFlavour_sizeDescriptionFlavour_heightFlavour_large_4 <475,600>


::StoryInit_UniversalFlavour_sizeDescriptionFlavour_heightFlavour_huge_1 <600,600>


::StoryInit_UniversalFlavour_sizeDescriptionFlavour_heightFlavour_huge_2 <725,600>


::StoryInit_UniversalFlavour_sizeDescriptionFlavour_heightFlavour_huge_3 <850,600>


::StoryInit_UniversalFlavour_sizeDescriptionFlavour_heightFlavour_huge_4 <975,600>


::StoryInit_UniversalFlavour_MuscleGrowthFlavourText_musclesFlavour_small_1 <1100,600>




::StoryInit_UniversalFlavour_MuscleGrowthFlavourText_musclesFlavour_small_2 <1225,600>



::StoryInit_UniversalFlavour_MuscleGrowthFlavourText_musclesFlavour_small_3 <100,725>



::StoryInit_UniversalFlavour_MuscleGrowthFlavourText_musclesFlavour_small_4 <225,725>




::StoryInit_UniversalFlavour_MuscleGrowthFlavourText_musclesFlavour_medium_1 <350,725>




::StoryInit_UniversalFlavour_MuscleGrowthFlavourText_musclesFlavour_medium_2 <475,725>





::StoryInit_UniversalFlavour_MuscleGrowthFlavourText_musclesFlavour_medium_3 <600,725>



::StoryInit_UniversalFlavour_MuscleGrowthFlavourText_musclesFlavour_medium_4 <725,725>




::StoryInit_UniversalFlavour_MuscleGrowthFlavourText_musclesFlavour_large_1 <850,725>







::StoryInit_UniversalFlavour_MuscleGrowthFlavourText_musclesFlavour_large_2 <975,725>

;



::StoryInit_UniversalFlavour_MuscleGrowthFlavourText_musclesFlavour_large_3 <1100,725>






::StoryInit_UniversalFlavour_MuscleGrowthFlavourText_musclesFlavour_large_4 <1225,725>





::StoryInit_UniversalFlavour_MuscleGrowthFlavourText_musclesFlavour_huge_1 <100,850>







::StoryInit_UniversalFlavour_MuscleGrowthFlavourText_musclesFlavour_huge_2 <225,850>


 \


::StoryInit_UniversalFlavour_MuscleGrowthFlavourText_musclesFlavour_huge_3 <350,850>


, 
 

Y


::StoryInit_UniversalFlavour_CockGrowthFlavourText_cockSizeFlavour_small <475,850>
@[all|cocks|noverb]

@[all|cocks|noverb]


::StoryInit_UniversalFlavour_CockGrowthFlavourText_cockSizeFlavour_medium <600,850>
@[all|cocks|noverb]
@[all|cocks|noverb]


@[all|cocks|noverb]


::StoryInit_UniversalFlavour_CockGrowthFlavourText_cockSizeFlavour_large <725,850>
@[all|cocks|one=~more=]
;

@[all|cocks|noverb]
@[all|cocks|noverb]

@[all|cocks|noverb]

\
@[all|cocks|noverb]



::StoryInit_UniversalFlavour_CockGrowthFlavourText_cockSizeFlavour_huge <850,850>

@[all|cocks|noverb]

@[all|cocks|noverb]
@[all|cocks|noverb]

@[all|cocks|noverb]@[all|cocks|noverb]
;
@[all|cocks|one=strains~more=strain]

::StoryInit_UniversalFlavour <975,850>
<<set setup.UniversalFlavour =
{
	basicAttackAttemptFlavour: {
		heightFlavour: {
			small:[
				"StoryInit_UniversalFlavour_basicAttackAttemptFlavour_heightFlavour_small"
			],
			medium:[
				"StoryInit_UniversalFlavour_basicAttackAttemptFlavour_heightFlavour_medium"
			],
			large:[
				"StoryInit_UniversalFlavour_basicAttackAttemptFlavour_heightFlavour_large"
			],
			huge:[
				"StoryInit_UniversalFlavour_basicAttackAttemptFlavour_heightFlavour_huge"
			],
		},
		corruptionFlavour: {
			corrupt75: [
				"StoryInit_UniversalFlavour_basicAttackAttemptFlavour_corruptionFlavour_corrupt75"
			],
			corrupt100: [
				"StoryInit_UniversalFlavour_basicAttackAttemptFlavour_corruptionFlavour_corrupt100"
			],
		},
	},
	basicAttackPrepFlavour :{
		heightFlavour: 
		{
			small: [
				"StoryInit_UniversalFlavour_basicAttackPrepFlavour_heightFlavour_small_1",
				"StoryInit_UniversalFlavour_basicAttackPrepFlavour_heightFlavour_small_2",
			],
			medium: [
				"StoryInit_UniversalFlavour_basicAttackPrepFlavour_heightFlavour_medium_1",
				"StoryInit_UniversalFlavour_basicAttackPrepFlavour_heightFlavour_medium_2",
			],
			large: [
				"StoryInit_UniversalFlavour_basicAttackPrepFlavour_heightFlavour_large_1",
				"StoryInit_UniversalFlavour_basicAttackPrepFlavour_heightFlavour_large_2",
			],
			huge: [
				"StoryInit_UniversalFlavour_basicAttackPrepFlavour_heightFlavour_huge_1",
				"StoryInit_UniversalFlavour_basicAttackPrepFlavour_heightFlavour_huge_2",
				"StoryInit_UniversalFlavour_basicAttackPrepFlavour_heightFlavour_huge_3",
			],
		},
		corruptionFlavour: {
			corrupt50: [
				"StoryInit_UniversalFlavour_basicAttackPrepFlavour_corruptionFlavour_corrupt50"
			],
			corrupt75: [
				"StoryInit_UniversalFlavour_basicAttackPrepFlavour_corruptionFlavour_corrupt75"
			],
			corrupt100: [
				"StoryInit_UniversalFlavour_basicAttackPrepFlavour_corruptionFlavour_corrupt100"
			],
		},
		
	},
	sizeDescriptionFlavour :{
		heightFlavour: {
			small: [
				"StoryInit_UniversalFlavour_sizeDescriptionFlavour_heightFlavour_small_1",
				"StoryInit_UniversalFlavour_sizeDescriptionFlavour_heightFlavour_small_2",
				"StoryInit_UniversalFlavour_sizeDescriptionFlavour_heightFlavour_small_3",
				"StoryInit_UniversalFlavour_sizeDescriptionFlavour_heightFlavour_small_4"
			],
			medium: [
				"StoryInit_UniversalFlavour_sizeDescriptionFlavour_heightFlavour_medium_1",
				"StoryInit_UniversalFlavour_sizeDescriptionFlavour_heightFlavour_medium_2",
				"StoryInit_UniversalFlavour_sizeDescriptionFlavour_heightFlavour_medium_3",
				"StoryInit_UniversalFlavour_sizeDescriptionFlavour_heightFlavour_medium_4"
			],
			large: [
				"StoryInit_UniversalFlavour_sizeDescriptionFlavour_heightFlavour_large_1",
				"StoryInit_UniversalFlavour_sizeDescriptionFlavour_heightFlavour_large_2",
				"StoryInit_UniversalFlavour_sizeDescriptionFlavour_heightFlavour_large_3",
				"StoryInit_UniversalFlavour_sizeDescriptionFlavour_heightFlavour_large_4"
			],
			huge: [
				"StoryInit_UniversalFlavour_sizeDescriptionFlavour_heightFlavour_huge_1",
				"StoryInit_UniversalFlavour_sizeDescriptionFlavour_heightFlavour_huge_2",
				"StoryInit_UniversalFlavour_sizeDescriptionFlavour_heightFlavour_huge_3",
				"StoryInit_UniversalFlavour_sizeDescriptionFlavour_heightFlavour_huge_4"
			],
		},
	},
	MuscleGrowthFlavourText :{
		musclesFlavour: {
			small: [
				"StoryInit_UniversalFlavour_MuscleGrowthFlavourText_musclesFlavour_small_1",
				"StoryInit_UniversalFlavour_MuscleGrowthFlavourText_musclesFlavour_small_2",
				"StoryInit_UniversalFlavour_MuscleGrowthFlavourText_musclesFlavour_small_3",
				"StoryInit_UniversalFlavour_MuscleGrowthFlavourText_musclesFlavour_small_4",

			],
			medium: [
				"StoryInit_UniversalFlavour_MuscleGrowthFlavourText_musclesFlavour_medium_1",
				"StoryInit_UniversalFlavour_MuscleGrowthFlavourText_musclesFlavour_medium_2",
				"StoryInit_UniversalFlavour_MuscleGrowthFlavourText_musclesFlavour_medium_3",
				"StoryInit_UniversalFlavour_MuscleGrowthFlavourText_musclesFlavour_medium_4",
			],
			large: [
				"StoryInit_UniversalFlavour_MuscleGrowthFlavourText_musclesFlavour_large_1",
				"StoryInit_UniversalFlavour_MuscleGrowthFlavourText_musclesFlavour_large_2",
				"StoryInit_UniversalFlavour_MuscleGrowthFlavourText_musclesFlavour_large_3",
				"StoryInit_UniversalFlavour_MuscleGrowthFlavourText_musclesFlavour_large_4",
			],
			huge: [
				"StoryInit_UniversalFlavour_MuscleGrowthFlavourText_musclesFlavour_huge_1",
				"StoryInit_UniversalFlavour_MuscleGrowthFlavourText_musclesFlavour_huge_2",
				"StoryInit_UniversalFlavour_MuscleGrowthFlavourText_musclesFlavour_huge_3",
			],
		},
	},
	CockGrowthFlavourText :{
		cockSizeFlavour:
		{
			small: [
				"StoryInit_UniversalFlavour_CockGrowthFlavourText_cockSizeFlavour_small",
			],
			medium: [
				"StoryInit_UniversalFlavour_CockGrowthFlavourText_cockSizeFlavour_medium",
			],
			large: [
				"StoryInit_UniversalFlavour_CockGrowthFlavourText_cockSizeFlavour_large",
			],
			huge: [
				"StoryInit_UniversalFlavour_CockGrowthFlavourText_cockSizeFlavour_huge",
			]
		},
	}
}>>

::StoryInit_Widgets <1100,850>
<<widget "PlayerHeight">><<print setup.getLength(setup.getStatValue($CharacterSheet_Player, "height"))>><</widget>>
<<widget "PlayerCock">><<print setup.getLength(setup.getStatValue($CharacterSheet_Player, "cock"))>><</widget>>
<<widget "PlayerBalls">><<print setup.getLength(setup.getStatValue($CharacterSheet_Player, "balls"))>><</widget>>
<<widget "PlayerRace">><<print setup.getRace(State.variables.CharacterSheet_Player.info.anatomy)>><</widget>>
<<widget "PlayerName">><<print $CharacterSheet_Player.info.name>><</widget>>

<<widget "Arms">><<print setup.processFlavours($CharacterSheet_Player, "@[all|arms|noverb]")>> \<</widget>>
<<widget "Hands">><<print setup.processFlavours($CharacterSheet_Player, "@[all|hands|noverb]")>> \<</widget>>
<<widget "Balls">><<print setup.processFlavours($CharacterSheet_Player, "@[all|balls|noverb]")>> \<</widget>>

<<widget "SymbioteRace">><<print setup.getRace(State.variables.CharacterSheet_Player.symbiote.anatomy)>><</widget>>
<<widget "SymbioteColor">><<print State.variables.CharacterSheet_Player.symbiote.color>><</widget>>

<<widget "SymbioteName">><<print State.variables.CharacterSheet_Player.symbiote.name>><</widget>>

<<widget "ImpHeight">><<print setup.getLength(setup.getStatValue($CharacterSheet_Imp, "height"))>><</widget>>
<<widget "ImpCockLength">><<print setup.getLength(setup.getStatValue($CharacterSheet_Imp, "cock"))>><</widget>>
<<widget "ImpBallsSize">><<print setup.getLength(setup.getStatValue($CharacterSheet_Imp, "balls"))>><</widget>>

<<widget "ImageMinoClothedGateBG">><<print setup.displayEncounterImage("https://sombreve.github.io/Dawn-of-Corruption-Site/Images/characters/Minotaur/tiadane_body_clothed_gatebg_lowres.png","https://sombreve.github.io/Dawn-of-Corruption-Site/Images/characters/Minotaur/tiadane_body_clothed_gatebg.png", undefined, true)>><</widget>>
<<widget "ImageMinoClothedAura">><<print setup.displayEncounterImage("https://sombreve.github.io/Dawn-of-Corruption-Site/Images/characters/Minotaur/tiadane_body_clothed_aura_lowres.png","https://sombreve.github.io/Dawn-of-Corruption-Site/Images/characters/Minotaur/tiadane_body_clothed_aura.png", undefined, true)>><</widget>>
<<widget "ImageMinoClothedNoBG">><<print setup.displayEncounterImage("https://sombreve.github.io/Dawn-of-Corruption-Site/Images/characters/Minotaur/tiadane_body_clothed_nobg_lowres.png","https://sombreve.github.io/Dawn-of-Corruption-Site/Images/characters/Minotaur/tiadane_body_clothed_nobg.png", undefined, true)>><</widget>>
<<widget "ImageMinoNakedGateBG">><<print setup.displayEncounterImage("https://sombreve.github.io/Dawn-of-Corruption-Site/Images/characters/Minotaur/tiadane_body_naked_gatebg_lowres.png","https://sombreve.github.io/Dawn-of-Corruption-Site/Images/characters/Minotaur/tiadane_body_naked_gatebg.png", undefined, true)>><</widget>>
<<widget "ImageMinoNakedAura">><<print setup.displayEncounterImage("https://sombreve.github.io/Dawn-of-Corruption-Site/Images/characters/Minotaur/tiadane_body_naked_aura_lowres.png","https://sombreve.github.io/Dawn-of-Corruption-Site/Images/characters/Minotaur/tiadane_body_naked_aura.png", undefined, true)>><</widget>>
<<widget "ImageMinoNakedNoBG">><<print setup.displayEncounterImage("https://sombreve.github.io/Dawn-of-Corruption-Site/Images/characters/Minotaur/tiadane_body_naked_nobg_lowres.png","https://sombreve.github.io/Dawn-of-Corruption-Site/Images/characters/Minotaur/tiadane_body_naked_nobg.png", undefined, true)>><</widget>>

::StoryInit_WorldState <1225,850>
<<set $WorldState =
{
    cultManor:
    {
        mainHall:
        {
            isBroken: false,
        },
        eastWing:
        {
            isBroken: false,
        },
        westWingHallway:
        {
            isBroken: false,
        },
        dragonRoom:
        {
            isBroken: false,
        },
        monolithBroken: false,
        westWing_LastDestination: "",
        westWing_ClearedRooms: [],
    },
    apothusChosen:
    {
        essenceLevel: 0,
    },
    apothusTransformed: false,
    minoWords: "",
}>>

::StoryInit_Voice1 <100,975>
/*Voice1/Arousal1*/
<<cacheaudio "Idle_Voice1_A1_S1_C1_01" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Player/Voice1/Arousal-Idle/Level1/Size1/Corrupt1/Idle_Voice1_A1_S1_C1_01.mp3">>
<<cacheaudio "Idle_Voice1_A1_S1_C1_02" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Player/Voice1/Arousal-Idle/Level1/Size1/Corrupt1/Idle_Voice1_A1_S1_C1_02.mp3">>
<<cacheaudio "Idle_Voice1_A1_S1_C1_03" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Player/Voice1/Arousal-Idle/Level1/Size1/Corrupt1/Idle_Voice1_A1_S1_C1_03.mp3">>
<<cacheaudio "Idle_Voice1_A1_S1_C1_04" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Player/Voice1/Arousal-Idle/Level1/Size1/Corrupt1/Idle_Voice1_A1_S1_C1_04.mp3">>

<<createplaylist "Idle_Voice1_A1_S1_C1">>
    <<track "Idle_Voice1_A1_S1_C1_01">>
    <<track "Idle_Voice1_A1_S1_C1_02">>
    <<track "Idle_Voice1_A1_S1_C1_03">>
    <<track "Idle_Voice1_A1_S1_C1_04">>
<</createplaylist>>

<<cacheaudio "Idle_Voice1_A1_S2_C1_01" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Player/Voice1/Arousal-Idle/Level1/Size2/Corrupt1/Idle_Voice1_A1_S2_C1_01.mp3">>
<<cacheaudio "Idle_Voice1_A1_S2_C1_02" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Player/Voice1/Arousal-Idle/Level1/Size2/Corrupt1/Idle_Voice1_A1_S2_C1_02.mp3">>
<<cacheaudio "Idle_Voice1_A1_S2_C1_03" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Player/Voice1/Arousal-Idle/Level1/Size2/Corrupt1/Idle_Voice1_A1_S2_C1_03.mp3">>
<<cacheaudio "Idle_Voice1_A1_S2_C1_04" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Player/Voice1/Arousal-Idle/Level1/Size2/Corrupt1/Idle_Voice1_A1_S2_C1_04.mp3">>

<<createplaylist "Idle_Voice1_A1_S2_C1">>
    <<track "Idle_Voice1_A1_S2_C1_01">>
    <<track "Idle_Voice1_A1_S2_C1_02">>
    <<track "Idle_Voice1_A1_S2_C1_03">>
    <<track "Idle_Voice1_A1_S2_C1_04">>
<</createplaylist>>

<<cacheaudio "Idle_Voice1_A1_S3_C1_01" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Player/Voice1/Arousal-Idle/Level1/Size3/Corrupt1/Idle_Voice1_A1_S3_C1_01.mp3">>
<<cacheaudio "Idle_Voice1_A1_S3_C1_02" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Player/Voice1/Arousal-Idle/Level1/Size3/Corrupt1/Idle_Voice1_A1_S3_C1_02.mp3">>
<<cacheaudio "Idle_Voice1_A1_S3_C1_03" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Player/Voice1/Arousal-Idle/Level1/Size3/Corrupt1/Idle_Voice1_A1_S3_C1_03.mp3">>
<<cacheaudio "Idle_Voice1_A1_S3_C1_04" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Player/Voice1/Arousal-Idle/Level1/Size3/Corrupt1/Idle_Voice1_A1_S3_C1_04.mp3">>

<<createplaylist "Idle_Voice1_A1_S3_C1">>
    <<track "Idle_Voice1_A1_S3_C1_01">>
    <<track "Idle_Voice1_A1_S3_C1_02">>
    <<track "Idle_Voice1_A1_S3_C1_03">>
    <<track "Idle_Voice1_A1_S3_C1_04">>
<</createplaylist>>

<<cacheaudio "Idle_Voice1_A1_S4_C1_01" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Player/Voice1/Arousal-Idle/Level1/Size4/Corrupt1/Idle_Voice1_A1_S4_C1_01.mp3">>
<<cacheaudio "Idle_Voice1_A1_S4_C1_02" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Player/Voice1/Arousal-Idle/Level1/Size4/Corrupt1/Idle_Voice1_A1_S4_C1_02.mp3">>
<<cacheaudio "Idle_Voice1_A1_S4_C1_03" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Player/Voice1/Arousal-Idle/Level1/Size4/Corrupt1/Idle_Voice1_A1_S4_C1_03.mp3">>
<<cacheaudio "Idle_Voice1_A1_S4_C1_04" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Player/Voice1/Arousal-Idle/Level1/Size4/Corrupt1/Idle_Voice1_A1_S4_C1_04.mp3">>

<<createplaylist "Idle_Voice1_A1_S4_C1">>
    <<track "Idle_Voice1_A1_S4_C1_01">>
    <<track "Idle_Voice1_A1_S4_C1_02">>
    <<track "Idle_Voice1_A1_S4_C1_03">>
    <<track "Idle_Voice1_A1_S4_C1_04">>
<</createplaylist>>

/*Voice1/Arousal2*/
<<cacheaudio "Idle_Voice1_A2_S1_C1_01" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Player/Voice1/Arousal-Idle/Level2/Size1/Corrupt1/Idle_Voice1_A2_S1_C1_01.mp3">>
<<cacheaudio "Idle_Voice1_A2_S1_C1_02" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Player/Voice1/Arousal-Idle/Level2/Size1/Corrupt1/Idle_Voice1_A2_S1_C1_02.mp3">>
<<cacheaudio "Idle_Voice1_A2_S1_C1_03" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Player/Voice1/Arousal-Idle/Level2/Size1/Corrupt1/Idle_Voice1_A2_S1_C1_03.mp3">>

<<createplaylist "Idle_Voice1_A2_S1_C1">>
    <<track "Idle_Voice1_A2_S1_C1_01">>
    <<track "Idle_Voice1_A2_S1_C1_02">>
    <<track "Idle_Voice1_A2_S1_C1_03">>
<</createplaylist>>

<<cacheaudio "Idle_Voice1_A2_S2_C1_01" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Player/Voice1/Arousal-Idle/Level2/Size2/Corrupt1/Idle_Voice1_A2_S2_C1_01.mp3">>
<<cacheaudio "Idle_Voice1_A2_S2_C1_02" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Player/Voice1/Arousal-Idle/Level2/Size2/Corrupt1/Idle_Voice1_A2_S2_C1_02.mp3">>
<<cacheaudio "Idle_Voice1_A2_S2_C1_03" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Player/Voice1/Arousal-Idle/Level2/Size2/Corrupt1/Idle_Voice1_A2_S2_C1_03.mp3">>

<<createplaylist "Idle_Voice1_A2_S2_C1">>
    <<track "Idle_Voice1_A2_S2_C1_01">>
    <<track "Idle_Voice1_A2_S2_C1_02">>
    <<track "Idle_Voice1_A2_S2_C1_03">>
<</createplaylist>>

<<cacheaudio "Idle_Voice1_A2_S3_C1_01" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Player/Voice1/Arousal-Idle/Level2/Size3/Corrupt1/Idle_Voice1_A2_S3_C1_01.mp3">>
<<cacheaudio "Idle_Voice1_A2_S3_C1_02" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Player/Voice1/Arousal-Idle/Level2/Size3/Corrupt1/Idle_Voice1_A2_S3_C1_02.mp3">>
<<cacheaudio "Idle_Voice1_A2_S3_C1_03" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Player/Voice1/Arousal-Idle/Level2/Size3/Corrupt1/Idle_Voice1_A2_S3_C1_03.mp3">>

<<createplaylist "Idle_Voice1_A2_S3_C1">>
    <<track "Idle_Voice1_A2_S3_C1_01">>
    <<track "Idle_Voice1_A2_S3_C1_02">>
    <<track "Idle_Voice1_A2_S3_C1_03">>
<</createplaylist>>

<<cacheaudio "Idle_Voice1_A2_S4_C1_01" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Player/Voice1/Arousal-Idle/Level2/Size4/Corrupt1/Idle_Voice1_A2_S4_C1_01.mp3">>
<<cacheaudio "Idle_Voice1_A2_S4_C1_02" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Player/Voice1/Arousal-Idle/Level2/Size4/Corrupt1/Idle_Voice1_A2_S4_C1_02.mp3">>
<<cacheaudio "Idle_Voice1_A2_S4_C1_03" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Player/Voice1/Arousal-Idle/Level2/Size4/Corrupt1/Idle_Voice1_A2_S4_C1_03.mp3">>

<<createplaylist "Idle_Voice1_A2_S4_C1">>
    <<track "Idle_Voice1_A2_S4_C1_01">>
    <<track "Idle_Voice1_A2_S4_C1_02">>
    <<track "Idle_Voice1_A2_S4_C1_03">>
<</createplaylist>>

/*Voice1/Arousal3*/
<<cacheaudio "Idle_Voice1_A3_S1_C1_01" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Player/Voice1/Arousal-Idle/Level3/Size1/Corrupt1/Idle_Voice1_A3_S1_C1_01.mp3">>
<<cacheaudio "Idle_Voice1_A3_S1_C1_02" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Player/Voice1/Arousal-Idle/Level3/Size1/Corrupt1/Idle_Voice1_A3_S1_C1_02.mp3">>

<<createplaylist "Idle_Voice1_A3_S1_C1">>
    <<track "Idle_Voice1_A3_S1_C1_01">>
    <<track "Idle_Voice1_A3_S1_C1_02">>
<</createplaylist>>

<<cacheaudio "Idle_Voice1_A3_S2_C1_01" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Player/Voice1/Arousal-Idle/Level3/Size2/Corrupt1/Idle_Voice1_A3_S2_C1_01.mp3">>
<<cacheaudio "Idle_Voice1_A3_S2_C1_02" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Player/Voice1/Arousal-Idle/Level3/Size2/Corrupt1/Idle_Voice1_A3_S2_C1_02.mp3">>

<<createplaylist "Idle_Voice1_A3_S2_C1">>
    <<track "Idle_Voice1_A3_S2_C1_01">>
    <<track "Idle_Voice1_A3_S2_C1_02">>
<</createplaylist>>

<<cacheaudio "Idle_Voice1_A3_S3_C1_01" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Player/Voice1/Arousal-Idle/Level3/Size3/Corrupt1/Idle_Voice1_A3_S3_C1_01.mp3">>
<<cacheaudio "Idle_Voice1_A3_S3_C1_02" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Player/Voice1/Arousal-Idle/Level3/Size3/Corrupt1/Idle_Voice1_A3_S3_C1_02.mp3">>

<<createplaylist "Idle_Voice1_A3_S3_C1">>
    <<track "Idle_Voice1_A3_S3_C1_01">>
    <<track "Idle_Voice1_A3_S3_C1_02">>
<</createplaylist>>

<<cacheaudio "Idle_Voice1_A3_S4_C1_01" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Player/Voice1/Arousal-Idle/Level3/Size4/Corrupt1/Idle_Voice1_A3_S4_C1_01.mp3">>
<<cacheaudio "Idle_Voice1_A3_S4_C1_02" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Player/Voice1/Arousal-Idle/Level3/Size4/Corrupt1/Idle_Voice1_A3_S4_C1_02.mp3">>

<<createplaylist "Idle_Voice1_A3_S4_C1">>
    <<track "Idle_Voice1_A3_S4_C1_01">>
    <<track "Idle_Voice1_A3_S4_C1_02">>
<</createplaylist>>

/*Voice1/Arousal4*/
<<cacheaudio "Idle_Voice1_A4_S1_C1_01" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Player/Voice1/Arousal-Idle/Level4/Size1/Corrupt1/Idle_Voice1_A4_S1_C1_01.mp3">>
<<cacheaudio "Idle_Voice1_A4_S1_C1_02" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Player/Voice1/Arousal-Idle/Level4/Size1/Corrupt1/Idle_Voice1_A4_S1_C1_02.mp3">>

<<createplaylist "Idle_Voice1_A4_S1_C1">>
    <<track "Idle_Voice1_A4_S1_C1_01">>
    <<track "Idle_Voice1_A4_S1_C1_02">>
<</createplaylist>>

<<cacheaudio "Idle_Voice1_A4_S2_C1_01" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Player/Voice1/Arousal-Idle/Level4/Size2/Corrupt1/Idle_Voice1_A4_S2_C1_01.mp3">>
<<cacheaudio "Idle_Voice1_A4_S2_C1_02" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Player/Voice1/Arousal-Idle/Level4/Size2/Corrupt1/Idle_Voice1_A4_S2_C1_02.mp3">>

<<createplaylist "Idle_Voice1_A4_S2_C1">>
    <<track "Idle_Voice1_A4_S2_C1_01">>
    <<track "Idle_Voice1_A4_S2_C1_02">>
<</createplaylist>>

<<cacheaudio "Idle_Voice1_A4_S3_C1_01" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Player/Voice1/Arousal-Idle/Level4/Size3/Corrupt1/Idle_Voice1_A4_S3_C1_01.mp3">>
<<cacheaudio "Idle_Voice1_A4_S3_C1_02" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Player/Voice1/Arousal-Idle/Level4/Size3/Corrupt1/Idle_Voice1_A4_S3_C1_02.mp3">>

<<createplaylist "Idle_Voice1_A4_S3_C1">>
    <<track "Idle_Voice1_A4_S3_C1_01">>
    <<track "Idle_Voice1_A4_S3_C1_02">>
<</createplaylist>>

<<cacheaudio "Idle_Voice1_A4_S4_C1_01" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Player/Voice1/Arousal-Idle/Level4/Size4/Corrupt1/Idle_Voice1_A4_S4_C1_01.mp3">>
<<cacheaudio "Idle_Voice1_A4_S4_C1_02" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Player/Voice1/Arousal-Idle/Level4/Size4/Corrupt1/Idle_Voice1_A4_S4_C1_02.mp3">>

<<createplaylist "Idle_Voice1_A4_S4_C1">>
    <<track "Idle_Voice1_A4_S4_C1_01">>
    <<track "Idle_Voice1_A4_S4_C1_02">>
<</createplaylist>>

<<createplaylist "Test_Voice1">>
    <<track "Idle_Voice1_A1_S1_C1_01">>
    <<track "Idle_Voice1_A1_S1_C1_02">>
    <<track "Idle_Voice1_A1_S1_C1_03">>
    <<track "Idle_Voice1_A1_S1_C1_04">>
    <<track "Idle_Voice1_A2_S1_C1_01">>
    <<track "Idle_Voice1_A2_S1_C1_02">>
    <<track "Idle_Voice1_A2_S1_C1_03">>
    <<track "Idle_Voice1_A3_S1_C1_01">>
    <<track "Idle_Voice1_A3_S1_C1_02">>
<</createplaylist>>

::StoryInit_Voice2 <225,975>
/*Voice2/Arousal1*/
<<cacheaudio "Idle_Voice2_A1_S1_01" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Player/Voice2/Arousal-Idle/Level1/Size1/Idle_Voice2_A1_S1_01.mp3">>
<<cacheaudio "Idle_Voice2_A1_S1_02" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Player/Voice2/Arousal-Idle/Level1/Size1/Idle_Voice2_A1_S1_02.mp3">>
<<cacheaudio "Idle_Voice2_A1_S1_03" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Player/Voice2/Arousal-Idle/Level1/Size1/Idle_Voice2_A1_S1_03.mp3">>

<<createplaylist "Idle_Voice2_A1_S1">>
    <<track "Idle_Voice2_A1_S1_01">>
    <<track "Idle_Voice2_A1_S1_02">>
    <<track "Idle_Voice2_A1_S1_03">>
<</createplaylist>>

<<cacheaudio "Idle_Voice2_A1_S2_01" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Player/Voice2/Arousal-Idle/Level1/Size2/Idle_Voice2_A1_S2_01.mp3">>
<<cacheaudio "Idle_Voice2_A1_S2_02" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Player/Voice2/Arousal-Idle/Level1/Size2/Idle_Voice2_A1_S2_02.mp3">>
<<cacheaudio "Idle_Voice2_A1_S2_03" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Player/Voice2/Arousal-Idle/Level1/Size2/Idle_Voice2_A1_S2_03.mp3">>

<<createplaylist "Idle_Voice2_A1_S2">>
    <<track "Idle_Voice2_A1_S2_01">>
    <<track "Idle_Voice2_A1_S2_02">>
    <<track "Idle_Voice2_A1_S2_03">>
<</createplaylist>>

<<cacheaudio "Idle_Voice2_A1_S3_01" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Player/Voice2/Arousal-Idle/Level1/Size3/Idle_Voice2_A1_S3_01.mp3">>
<<cacheaudio "Idle_Voice2_A1_S3_02" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Player/Voice2/Arousal-Idle/Level1/Size3/Idle_Voice2_A1_S3_02.mp3">>
<<cacheaudio "Idle_Voice2_A1_S3_03" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Player/Voice2/Arousal-Idle/Level1/Size3/Idle_Voice2_A1_S3_03.mp3">>

<<createplaylist "Idle_Voice2_A1_S3">>
    <<track "Idle_Voice2_A1_S3_01">>
    <<track "Idle_Voice2_A1_S3_02">>
    <<track "Idle_Voice2_A1_S3_03">>
<</createplaylist>>

<<cacheaudio "Idle_Voice2_A1_S4_01" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Player/Voice2/Arousal-Idle/Level1/Size4/Idle_Voice2_A1_S4_01.mp3">>
<<cacheaudio "Idle_Voice2_A1_S4_02" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Player/Voice2/Arousal-Idle/Level1/Size4/Idle_Voice2_A1_S4_02.mp3">>
<<cacheaudio "Idle_Voice2_A1_S4_03" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Player/Voice2/Arousal-Idle/Level1/Size4/Idle_Voice2_A1_S4_03.mp3">>

<<createplaylist "Idle_Voice2_A1_S4">>
    <<track "Idle_Voice2_A1_S4_01">>
    <<track "Idle_Voice2_A1_S4_02">>
    <<track "Idle_Voice2_A1_S4_03">>
<</createplaylist>>

/*Voice2/Arousal2*/
<<cacheaudio "Idle_Voice2_A2_S1_01" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Player/Voice2/Arousal-Idle/Level2/Size1/Idle_Voice2_A2_S1_01.mp3">>
<<cacheaudio "Idle_Voice2_A2_S1_02" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Player/Voice2/Arousal-Idle/Level2/Size1/Idle_Voice2_A2_S1_02.mp3">>
<<cacheaudio "Idle_Voice2_A2_S1_03" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Player/Voice2/Arousal-Idle/Level2/Size1/Idle_Voice2_A2_S1_03.mp3">>

<<createplaylist "Idle_Voice2_A2_S1">>
    <<track "Idle_Voice2_A2_S1_01">>
    <<track "Idle_Voice2_A2_S1_02">>
    <<track "Idle_Voice2_A2_S1_03">>
<</createplaylist>>

<<cacheaudio "Idle_Voice2_A2_S2_01" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Player/Voice2/Arousal-Idle/Level2/Size2/Idle_Voice2_A2_S2_01.mp3">>
<<cacheaudio "Idle_Voice2_A2_S2_02" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Player/Voice2/Arousal-Idle/Level2/Size2/Idle_Voice2_A2_S2_02.mp3">>
<<cacheaudio "Idle_Voice2_A2_S2_03" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Player/Voice2/Arousal-Idle/Level2/Size2/Idle_Voice2_A2_S2_03.mp3">>

<<createplaylist "Idle_Voice2_A2_S2">>
    <<track "Idle_Voice2_A2_S2_01">>
    <<track "Idle_Voice2_A2_S2_02">>
    <<track "Idle_Voice2_A2_S2_03">>
<</createplaylist>>

<<cacheaudio "Idle_Voice2_A2_S3_01" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Player/Voice2/Arousal-Idle/Level2/Size3/Idle_Voice2_A2_S3_01.mp3">>
<<cacheaudio "Idle_Voice2_A2_S3_02" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Player/Voice2/Arousal-Idle/Level2/Size3/Idle_Voice2_A2_S3_02.mp3">>
<<cacheaudio "Idle_Voice2_A2_S3_03" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Player/Voice2/Arousal-Idle/Level2/Size3/Idle_Voice2_A2_S3_03.mp3">>

<<createplaylist "Idle_Voice2_A2_S3">>
    <<track "Idle_Voice2_A2_S3_01">>
    <<track "Idle_Voice2_A2_S3_02">>
    <<track "Idle_Voice2_A2_S3_03">>
<</createplaylist>>

<<cacheaudio "Idle_Voice2_A2_S4_01" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Player/Voice2/Arousal-Idle/Level2/Size4/Idle_Voice2_A2_S4_01.mp3">>
<<cacheaudio "Idle_Voice2_A2_S4_02" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Player/Voice2/Arousal-Idle/Level2/Size4/Idle_Voice2_A2_S4_02.mp3">>
<<cacheaudio "Idle_Voice2_A2_S4_03" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Player/Voice2/Arousal-Idle/Level2/Size4/Idle_Voice2_A2_S4_03.mp3">>

<<createplaylist "Idle_Voice2_A2_S4">>
    <<track "Idle_Voice2_A2_S4_01">>
    <<track "Idle_Voice2_A2_S4_02">>
    <<track "Idle_Voice2_A2_S4_03">>
<</createplaylist>>

/*Voice2/Arousal3*/
<<cacheaudio "Idle_Voice2_A3_S1_01" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Player/Voice2/Arousal-Idle/Level3/Size1/Idle_Voice2_A3_S1_01.mp3">>
<<cacheaudio "Idle_Voice2_A3_S1_02" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Player/Voice2/Arousal-Idle/Level3/Size1/Idle_Voice2_A3_S1_02.mp3">>
<<cacheaudio "Idle_Voice2_A3_S1_03" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Player/Voice2/Arousal-Idle/Level3/Size1/Idle_Voice2_A3_S1_03.mp3">>

<<createplaylist "Idle_Voice2_A3_S1">>
    <<track "Idle_Voice2_A3_S1_01">>
    <<track "Idle_Voice2_A3_S1_02">>
    <<track "Idle_Voice2_A3_S1_03">>
<</createplaylist>>

<<cacheaudio "Idle_Voice2_A3_S2_01" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Player/Voice2/Arousal-Idle/Level3/Size2/Idle_Voice2_A3_S2_01.mp3">>
<<cacheaudio "Idle_Voice2_A3_S2_02" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Player/Voice2/Arousal-Idle/Level3/Size2/Idle_Voice2_A3_S2_02.mp3">>
<<cacheaudio "Idle_Voice2_A3_S2_03" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Player/Voice2/Arousal-Idle/Level3/Size2/Idle_Voice2_A3_S2_03.mp3">>

<<createplaylist "Idle_Voice2_A3_S2">>
    <<track "Idle_Voice2_A3_S2_01">>
    <<track "Idle_Voice2_A3_S2_02">>
    <<track "Idle_Voice2_A3_S2_03">>
<</createplaylist>>

<<cacheaudio "Idle_Voice2_A3_S3_01" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Player/Voice2/Arousal-Idle/Level3/Size3/Idle_Voice2_A3_S3_01.mp3">>
<<cacheaudio "Idle_Voice2_A3_S3_02" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Player/Voice2/Arousal-Idle/Level3/Size3/Idle_Voice2_A3_S3_02.mp3">>
<<cacheaudio "Idle_Voice2_A3_S3_03" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Player/Voice2/Arousal-Idle/Level3/Size3/Idle_Voice2_A3_S3_03.mp3">>

<<createplaylist "Idle_Voice2_A3_S3">>
    <<track "Idle_Voice2_A3_S3_01">>
    <<track "Idle_Voice2_A3_S3_02">>
    <<track "Idle_Voice2_A3_S3_03">>
<</createplaylist>>

<<cacheaudio "Idle_Voice2_A3_S4_01" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Player/Voice2/Arousal-Idle/Level3/Size4/Idle_Voice2_A3_S4_01.mp3">>
<<cacheaudio "Idle_Voice2_A3_S4_02" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Player/Voice2/Arousal-Idle/Level3/Size4/Idle_Voice2_A3_S4_02.mp3">>
<<cacheaudio "Idle_Voice2_A3_S4_03" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Player/Voice2/Arousal-Idle/Level3/Size4/Idle_Voice2_A3_S4_03.mp3">>

<<createplaylist "Idle_Voice2_A3_S4">>
    <<track "Idle_Voice2_A3_S4_01">>
    <<track "Idle_Voice2_A3_S4_02">>
    <<track "Idle_Voice2_A3_S4_03">>
<</createplaylist>>

/*Voice2/Arousal4*/
<<cacheaudio "Idle_Voice2_A4_S1_01" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Player/Voice2/Arousal-Idle/Level4/Size1/Idle_Voice2_A4_S1_01.mp3">>
<<cacheaudio "Idle_Voice2_A4_S1_02" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Player/Voice2/Arousal-Idle/Level4/Size1/Idle_Voice2_A4_S1_02.mp3">>

<<createplaylist "Idle_Voice2_A4_S1">>
    <<track "Idle_Voice2_A4_S1_01">>
    <<track "Idle_Voice2_A4_S1_02">>
<</createplaylist>>

<<cacheaudio "Idle_Voice2_A4_S2_01" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Player/Voice2/Arousal-Idle/Level4/Size2/Idle_Voice2_A4_S2_01.mp3">>
<<cacheaudio "Idle_Voice2_A4_S2_02" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Player/Voice2/Arousal-Idle/Level4/Size2/Idle_Voice2_A4_S2_02.mp3">>

<<createplaylist "Idle_Voice2_A4_S2">>
    <<track "Idle_Voice2_A4_S2_01">>
    <<track "Idle_Voice2_A4_S2_02">>
<</createplaylist>>

<<cacheaudio "Idle_Voice2_A4_S3_01" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Player/Voice2/Arousal-Idle/Level4/Size3/Idle_Voice2_A4_S3_01.mp3">>
<<cacheaudio "Idle_Voice2_A4_S3_02" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Player/Voice2/Arousal-Idle/Level4/Size3/Idle_Voice2_A4_S3_02.mp3">>

<<createplaylist "Idle_Voice2_A4_S3">>
    <<track "Idle_Voice2_A4_S3_01">>
    <<track "Idle_Voice2_A4_S3_02">>
<</createplaylist>>

<<cacheaudio "Idle_Voice2_A4_S4_01" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Player/Voice2/Arousal-Idle/Level4/Size4/Idle_Voice2_A4_S4_01.mp3">>
<<cacheaudio "Idle_Voice2_A4_S4_02" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Player/Voice2/Arousal-Idle/Level4/Size4/Idle_Voice2_A4_S4_02.mp3">>

<<createplaylist "Idle_Voice2_A4_S4">>
    <<track "Idle_Voice2_A4_S4_01">>
    <<track "Idle_Voice2_A4_S4_02">>
<</createplaylist>>

/*Voice2/Arousal5*/
<<cacheaudio "Idle_Voice2_A5_S1_01" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Player/Voice2/Arousal-Idle/Level5/Size1/Idle_Voice2_A5_S1_01.mp3">>
<<cacheaudio "Idle_Voice2_A5_S1_02" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Player/Voice2/Arousal-Idle/Level5/Size1/Idle_Voice2_A5_S1_02.mp3">>

<<createplaylist "Idle_Voice2_A5_S1">>
    <<track "Idle_Voice2_A5_S1_01">>
    <<track "Idle_Voice2_A5_S1_02">>
<</createplaylist>>

<<cacheaudio "Idle_Voice2_A5_S2_01" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Player/Voice2/Arousal-Idle/Level5/Size2/Idle_Voice2_A5_S2_01.mp3">>
<<cacheaudio "Idle_Voice2_A5_S2_02" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Player/Voice2/Arousal-Idle/Level5/Size2/Idle_Voice2_A5_S2_02.mp3">>

<<createplaylist "Idle_Voice2_A5_S2">>
    <<track "Idle_Voice2_A5_S2_01">>
    <<track "Idle_Voice2_A5_S2_02">>
<</createplaylist>>

<<cacheaudio "Idle_Voice2_A5_S3_01" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Player/Voice2/Arousal-Idle/Level5/Size3/Idle_Voice2_A5_S3_01.mp3">>
<<cacheaudio "Idle_Voice2_A5_S3_02" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Player/Voice2/Arousal-Idle/Level5/Size3/Idle_Voice2_A5_S3_02.mp3">>

<<createplaylist "Idle_Voice2_A5_S3">>
    <<track "Idle_Voice2_A5_S3_01">>
    <<track "Idle_Voice2_A5_S3_02">>
<</createplaylist>>

<<cacheaudio "Idle_Voice2_A5_S4_01" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Player/Voice2/Arousal-Idle/Level5/Size4/Idle_Voice2_A5_S4_01.mp3">>
<<cacheaudio "Idle_Voice2_A5_S4_02" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Player/Voice2/Arousal-Idle/Level5/Size4/Idle_Voice2_A5_S4_02.mp3">>

<<createplaylist "Idle_Voice2_A5_S4">>
    <<track "Idle_Voice2_A5_S4_01">>
    <<track "Idle_Voice2_A5_S4_02">>
<</createplaylist>>

<<createplaylist "Test_Voice2">>
    <<track "Idle_Voice2_A1_S1_01">>
    <<track "Idle_Voice2_A1_S1_02">>
    <<track "Idle_Voice2_A1_S1_03">>
    <<track "Idle_Voice2_A2_S1_01">>
    <<track "Idle_Voice2_A2_S1_02">>
    <<track "Idle_Voice2_A2_S1_03">>
    <<track "Idle_Voice2_A3_S1_01">>
    <<track "Idle_Voice2_A3_S1_02">>
    <<track "Idle_Voice2_A3_S1_03">>
<</createplaylist>>

::StoryInit_VoiceImp <350,975>
/*Voice2/Arousal1*/
<<cacheaudio "Idle_Imp_A1_S1_01" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Imp/Arousal-Idle/Level1/Size1/Idle_Imp_A1_S1_01.mp3">>
<<cacheaudio "Idle_Imp_A1_S1_02" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Imp/Arousal-Idle/Level1/Size1/Idle_Imp_A1_S1_02.mp3">>
<<cacheaudio "Idle_Imp_A1_S1_03" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Imp/Arousal-Idle/Level1/Size1/Idle_Imp_A1_S1_03.mp3">>

<<createplaylist "Idle_Imp_A1_S1">>
    <<track "Idle_Imp_A1_S1_01">>
    <<track "Idle_Imp_A1_S1_02">>
    <<track "Idle_Imp_A1_S1_03">>
<</createplaylist>>

<<cacheaudio "Idle_Imp_A1_S2_01" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Imp/Arousal-Idle/Level1/Size2/Idle_Imp_A1_S2_01.mp3">>
<<cacheaudio "Idle_Imp_A1_S2_02" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Imp/Arousal-Idle/Level1/Size2/Idle_Imp_A1_S2_02.mp3">>
<<cacheaudio "Idle_Imp_A1_S2_03" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Imp/Arousal-Idle/Level1/Size2/Idle_Imp_A1_S2_03.mp3">>

<<createplaylist "Idle_Imp_A1_S2">>
    <<track "Idle_Imp_A1_S2_01">>
    <<track "Idle_Imp_A1_S2_02">>
    <<track "Idle_Imp_A1_S2_03">>
<</createplaylist>>

<<cacheaudio "Idle_Imp_A1_S3_01" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Imp/Arousal-Idle/Level1/Size3/Idle_Imp_A1_S3_01.mp3">>
<<cacheaudio "Idle_Imp_A1_S3_02" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Imp/Arousal-Idle/Level1/Size3/Idle_Imp_A1_S3_02.mp3">>
<<cacheaudio "Idle_Imp_A1_S3_03" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Imp/Arousal-Idle/Level1/Size3/Idle_Imp_A1_S3_03.mp3">>

<<createplaylist "Idle_Imp_A1_S3">>
    <<track "Idle_Imp_A1_S3_01">>
    <<track "Idle_Imp_A1_S3_02">>
    <<track "Idle_Imp_A1_S3_03">>
<</createplaylist>>

/*Voice2/Arousal2*/
<<cacheaudio "Idle_Imp_A2_S1_01" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Imp/Arousal-Idle/Level2/Size1/Idle_Imp_A2_S1_01.mp3">>
<<cacheaudio "Idle_Imp_A2_S1_02" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Imp/Arousal-Idle/Level2/Size1/Idle_Imp_A2_S1_02.mp3">>
<<cacheaudio "Idle_Imp_A2_S1_03" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Imp/Arousal-Idle/Level2/Size1/Idle_Imp_A2_S1_03.mp3">>

<<createplaylist "Idle_Imp_A2_S1">>
    <<track "Idle_Imp_A2_S1_01">>
    <<track "Idle_Imp_A2_S1_02">>
    <<track "Idle_Imp_A2_S1_03">>
<</createplaylist>>

<<cacheaudio "Idle_Imp_A2_S2_01" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Imp/Arousal-Idle/Level2/Size2/Idle_Imp_A2_S2_01.mp3">>
<<cacheaudio "Idle_Imp_A2_S2_02" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Imp/Arousal-Idle/Level2/Size2/Idle_Imp_A2_S2_02.mp3">>
<<cacheaudio "Idle_Imp_A2_S2_03" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Imp/Arousal-Idle/Level2/Size2/Idle_Imp_A2_S2_03.mp3">>

<<createplaylist "Idle_Imp_A2_S2">>
    <<track "Idle_Imp_A2_S2_01">>
    <<track "Idle_Imp_A2_S2_02">>
    <<track "Idle_Imp_A2_S2_03">>
<</createplaylist>>

<<cacheaudio "Idle_Imp_A2_S3_01" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Imp/Arousal-Idle/Level2/Size3/Idle_Imp_A2_S3_01.mp3">>
<<cacheaudio "Idle_Imp_A2_S3_02" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Imp/Arousal-Idle/Level2/Size3/Idle_Imp_A2_S3_02.mp3">>
<<cacheaudio "Idle_Imp_A2_S3_03" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Imp/Arousal-Idle/Level2/Size3/Idle_Imp_A2_S3_03.mp3">>

<<createplaylist "Idle_Imp_A2_S3">>
    <<track "Idle_Imp_A2_S3_01">>
    <<track "Idle_Imp_A2_S3_02">>
    <<track "Idle_Imp_A2_S3_03">>
<</createplaylist>>

/*Voice2/Arousal3*/
<<cacheaudio "Idle_Imp_A3_S1_01" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Imp/Arousal-Idle/Level3/Size1/Idle_Imp_A3_S1_01.mp3">>
<<cacheaudio "Idle_Imp_A3_S1_02" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Imp/Arousal-Idle/Level3/Size1/Idle_Imp_A3_S1_02.mp3">>
<<cacheaudio "Idle_Imp_A3_S1_03" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Imp/Arousal-Idle/Level3/Size1/Idle_Imp_A3_S1_03.mp3">>

<<createplaylist "Idle_Imp_A3_S1">>
    <<track "Idle_Imp_A3_S1_01">>
    <<track "Idle_Imp_A3_S1_02">>
    <<track "Idle_Imp_A3_S1_03">>
<</createplaylist>>

<<cacheaudio "Idle_Imp_A3_S2_01" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Imp/Arousal-Idle/Level3/Size2/Idle_Imp_A3_S2_01.mp3">>
<<cacheaudio "Idle_Imp_A3_S2_02" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Imp/Arousal-Idle/Level3/Size2/Idle_Imp_A3_S2_02.mp3">>
<<cacheaudio "Idle_Imp_A3_S2_03" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Imp/Arousal-Idle/Level3/Size2/Idle_Imp_A3_S2_03.mp3">>

<<createplaylist "Idle_Imp_A3_S2">>
    <<track "Idle_Imp_A3_S2_01">>
    <<track "Idle_Imp_A3_S2_02">>
    <<track "Idle_Imp_A3_S2_03">>
<</createplaylist>>

<<cacheaudio "Idle_Imp_A3_S3_01" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Imp/Arousal-Idle/Level3/Size3/Idle_Imp_A3_S3_01.mp3">>
<<cacheaudio "Idle_Imp_A3_S3_02" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Imp/Arousal-Idle/Level3/Size3/Idle_Imp_A3_S3_02.mp3">>
<<cacheaudio "Idle_Imp_A3_S3_03" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Imp/Arousal-Idle/Level3/Size3/Idle_Imp_A3_S3_03.mp3">>

<<createplaylist "Idle_Imp_A3_S3">>
    <<track "Idle_Imp_A3_S3_01">>
    <<track "Idle_Imp_A3_S3_02">>
    <<track "Idle_Imp_A3_S3_03">>
<</createplaylist>>

/*Voice2/Arousal4*/
<<cacheaudio "Idle_Imp_A4_S1_01" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Imp/Arousal-Idle/Level4/Size1/Idle_Imp_A4_S1_01.mp3">>
<<cacheaudio "Idle_Imp_A4_S1_02" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Imp/Arousal-Idle/Level4/Size1/Idle_Imp_A4_S1_02.mp3">>

<<createplaylist "Idle_Imp_A4_S1">>
    <<track "Idle_Imp_A4_S1_01">>
    <<track "Idle_Imp_A4_S1_02">>
<</createplaylist>>

<<cacheaudio "Idle_Imp_A4_S2_01" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Imp/Arousal-Idle/Level4/Size2/Idle_Imp_A4_S2_01.mp3">>
<<cacheaudio "Idle_Imp_A4_S2_02" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Imp/Arousal-Idle/Level4/Size2/Idle_Imp_A4_S2_02.mp3">>

<<createplaylist "Idle_Imp_A4_S2">>
    <<track "Idle_Imp_A4_S2_01">>
    <<track "Idle_Imp_A4_S2_02">>
<</createplaylist>>

<<cacheaudio "Idle_Imp_A4_S3_01" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Imp/Arousal-Idle/Level4/Size3/Idle_Imp_A4_S3_01.mp3">>
<<cacheaudio "Idle_Imp_A4_S3_02" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Imp/Arousal-Idle/Level4/Size3/Idle_Imp_A4_S3_02.mp3">>

<<createplaylist "Idle_Imp_A4_S3">>
    <<track "Idle_Imp_A4_S3_01">>
    <<track "Idle_Imp_A4_S3_02">>
<</createplaylist>>

/*Voice2/Arousal5*/
<<cacheaudio "Idle_Imp_A5_S1_01" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Imp/Arousal-Idle/Level5/Size1/Idle_Imp_A5_S1_01.mp3">>

<<createplaylist "Idle_Imp_A5_S1">>
    <<track "Idle_Imp_A5_S1_01">>
<</createplaylist>>

<<cacheaudio "Idle_Imp_A5_S2_01" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Imp/Arousal-Idle/Level5/Size2/Idle_Imp_A5_S2_01.mp3">>

<<createplaylist "Idle_Imp_A5_S2">>
    <<track "Idle_Imp_A5_S2_01">>
<</createplaylist>>

<<cacheaudio "Idle_Imp_A5_S3_01" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Imp/Arousal-Idle/Level5/Size3/Idle_Imp_A5_S3_01.mp3">>

<<createplaylist "Idle_Imp_A5_S3">>
    <<track "Idle_Imp_A5_S3_01">>
<</createplaylist>>

::StoryInit_VoiceTorgar <475,975>
/*Voice2/Arousal1*/
<<cacheaudio "Torgar_Idle_S1_A1_01" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Torgar/Arousal-Idle/Size1/Level1/Torgar_Idle_S1_A1_1.mp3">>
<<cacheaudio "Torgar_Idle_S1_A1_02" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Torgar/Arousal-Idle/Size1/Level1/Torgar_Idle_S1_A1_2.mp3">>
<<cacheaudio "Torgar_Idle_S1_A1_03" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Torgar/Arousal-Idle/Size1/Level1/Torgar_Idle_S1_A1_3.mp3">>

<<createplaylist "Torgar_Idle_S1_A1">>
    <<track "Torgar_Idle_S1_A1_01">>
    <<track "Torgar_Idle_S1_A1_02">>
    <<track "Torgar_Idle_S1_A1_03">>
<</createplaylist>>

<<cacheaudio "Torgar_Idle_S2_A1_01" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Torgar/Arousal-Idle/Size2/Level1/Torgar_Idle_S2_A1_1.mp3">>
<<cacheaudio "Torgar_Idle_S2_A1_02" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Torgar/Arousal-Idle/Size2/Level1/Torgar_Idle_S2_A1_2.mp3">>
<<cacheaudio "Torgar_Idle_S2_A1_03" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Torgar/Arousal-Idle/Size2/Level1/Torgar_Idle_S2_A1_3.mp3">>

<<createplaylist "Torgar_Idle_S2_A1">>
    <<track "Torgar_Idle_S2_A1_01">>
    <<track "Torgar_Idle_S2_A1_02">>
    <<track "Torgar_Idle_S2_A1_03">>
<</createplaylist>>

<<cacheaudio "Torgar_Idle_S3_A1_01" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Torgar/Arousal-Idle/Size3/Level1/Torgar_Idle_S3_A1_1.mp3">>
<<cacheaudio "Torgar_Idle_S3_A1_02" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Torgar/Arousal-Idle/Size3/Level1/Torgar_Idle_S3_A1_2.mp3">>
<<cacheaudio "Torgar_Idle_S3_A1_03" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Torgar/Arousal-Idle/Size3/Level1/Torgar_Idle_S3_A1_3.mp3">>

<<createplaylist "Torgar_Idle_S3_A1">>
    <<track "Torgar_Idle_S3_A1_01">>
    <<track "Torgar_Idle_S3_A1_02">>
    <<track "Torgar_Idle_S3_A1_03">>
<</createplaylist>>

/*Voice2/Arousal2*/
<<cacheaudio "Torgar_Idle_S1_A2_01" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Torgar/Arousal-Idle/Size1/Level2/Torgar_Idle_S1_A2_1.mp3">>
<<cacheaudio "Torgar_Idle_S1_A2_02" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Torgar/Arousal-Idle/Size1/Level2/Torgar_Idle_S1_A2_2.mp3">>
<<cacheaudio "Torgar_Idle_S1_A2_03" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Torgar/Arousal-Idle/Size1/Level2/Torgar_Idle_S1_A2_3.mp3">>

<<createplaylist "Torgar_Idle_S1_A2">>
    <<track "Torgar_Idle_S1_A2_01">>
    <<track "Torgar_Idle_S1_A2_02">>
    <<track "Torgar_Idle_S1_A2_03">>
<</createplaylist>>

<<cacheaudio "Torgar_Idle_S2_A2_01" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Torgar/Arousal-Idle/Size2/Level2/Torgar_Idle_S2_A2_1.mp3">>
<<cacheaudio "Torgar_Idle_S2_A2_02" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Torgar/Arousal-Idle/Size2/Level2/Torgar_Idle_S2_A2_2.mp3">>
<<cacheaudio "Torgar_Idle_S2_A2_03" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Torgar/Arousal-Idle/Size2/Level2/Torgar_Idle_S2_A2_3.mp3">>

<<createplaylist "Torgar_Idle_S2_A2">>
    <<track "Torgar_Idle_S2_A2_01">>
    <<track "Torgar_Idle_S2_A2_02">>
    <<track "Torgar_Idle_S2_A2_03">>
<</createplaylist>>

<<cacheaudio "Torgar_Idle_S3_A2_01" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Torgar/Arousal-Idle/Size3/Level2/Torgar_Idle_S3_A2_1.mp3">>
<<cacheaudio "Torgar_Idle_S3_A2_02" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Torgar/Arousal-Idle/Size3/Level2/Torgar_Idle_S3_A2_2.mp3">>
<<cacheaudio "Torgar_Idle_S3_A2_03" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Torgar/Arousal-Idle/Size3/Level2/Torgar_Idle_S3_A2_3.mp3">>

<<createplaylist "Torgar_Idle_S3_A2">>
    <<track "Torgar_Idle_S3_A2_01">>
    <<track "Torgar_Idle_S3_A2_02">>
    <<track "Torgar_Idle_S3_A2_03">>
<</createplaylist>>

/*Voice2/Arousal3*/
<<cacheaudio "Torgar_Idle_S1_A3_01" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Torgar/Arousal-Idle/Size1/Level3/Torgar_Idle_S1_A3_1.mp3">>
<<cacheaudio "Torgar_Idle_S1_A3_02" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Torgar/Arousal-Idle/Size1/Level3/Torgar_Idle_S1_A3_2.mp3">>
<<cacheaudio "Torgar_Idle_S1_A3_03" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Torgar/Arousal-Idle/Size1/Level3/Torgar_Idle_S1_A3_3.mp3">>

<<createplaylist "Torgar_Idle_S1_A3">>
    <<track "Torgar_Idle_S1_A3_01">>
    <<track "Torgar_Idle_S1_A3_02">>
    <<track "Torgar_Idle_S1_A3_03">>
<</createplaylist>>

<<cacheaudio "Torgar_Idle_S2_A3_01" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Torgar/Arousal-Idle/Size2/Level3/Torgar_Idle_S2_A3_1.mp3">>
<<cacheaudio "Torgar_Idle_S2_A3_02" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Torgar/Arousal-Idle/Size2/Level3/Torgar_Idle_S2_A3_2.mp3">>
<<cacheaudio "Torgar_Idle_S2_A3_03" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Torgar/Arousal-Idle/Size2/Level3/Torgar_Idle_S2_A3_3.mp3">>

<<createplaylist "Torgar_Idle_S2_A3">>
    <<track "Torgar_Idle_S2_A3_01">>
    <<track "Torgar_Idle_S2_A3_02">>
    <<track "Torgar_Idle_S2_A3_03">>
<</createplaylist>>

<<cacheaudio "Torgar_Idle_S3_A3_01" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Torgar/Arousal-Idle/Size3/Level3/Torgar_Idle_S3_A3_1.mp3">>
<<cacheaudio "Torgar_Idle_S3_A3_02" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Torgar/Arousal-Idle/Size3/Level3/Torgar_Idle_S3_A3_2.mp3">>
<<cacheaudio "Torgar_Idle_S3_A3_03" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Torgar/Arousal-Idle/Size3/Level3/Torgar_Idle_S3_A3_3.mp3">>

<<createplaylist "Torgar_Idle_S3_A3">>
    <<track "Torgar_Idle_S3_A3_01">>
    <<track "Torgar_Idle_S3_A3_02">>
    <<track "Torgar_Idle_S3_A3_03">>
<</createplaylist>>

/*Voice2/Arousal4*/
<<cacheaudio "Torgar_Idle_S1_A4_01" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Torgar/Arousal-Idle/Size1/Level4/Torgar_Idle_S1_A4_1.mp3">>
<<cacheaudio "Torgar_Idle_S1_A4_02" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Torgar/Arousal-Idle/Size1/Level4/Torgar_Idle_S1_A4_2.mp3">>
<<cacheaudio "Torgar_Idle_S1_A4_03" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Torgar/Arousal-Idle/Size1/Level4/Torgar_Idle_S1_A4_3.mp3">>

<<createplaylist "Torgar_Idle_S1_A4">>
    <<track "Torgar_Idle_S1_A4_01">>
    <<track "Torgar_Idle_S1_A4_02">>
    <<track "Torgar_Idle_S1_A4_03">>
<</createplaylist>>

<<cacheaudio "Torgar_Idle_S2_A4_01" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Torgar/Arousal-Idle/Size2/Level4/Torgar_Idle_S2_A4_1.mp3">>
<<cacheaudio "Torgar_Idle_S2_A4_02" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Torgar/Arousal-Idle/Size2/Level4/Torgar_Idle_S2_A4_2.mp3">>
<<cacheaudio "Torgar_Idle_S2_A4_03" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Torgar/Arousal-Idle/Size2/Level4/Torgar_Idle_S2_A4_3.mp3">>

<<createplaylist "Torgar_Idle_S2_A4">>
    <<track "Torgar_Idle_S2_A4_01">>
    <<track "Torgar_Idle_S2_A4_02">>
    <<track "Torgar_Idle_S2_A4_03">>
<</createplaylist>>

<<cacheaudio "Torgar_Idle_S3_A4_01" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Torgar/Arousal-Idle/Size3/Level4/Torgar_Idle_S3_A4_1.mp3">>
<<cacheaudio "Torgar_Idle_S3_A4_02" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Torgar/Arousal-Idle/Size3/Level4/Torgar_Idle_S3_A4_2.mp3">>
<<cacheaudio "Torgar_Idle_S3_A4_03" "https://sombreve.github.io/Dawn-of-Corruption-Site/Sounds/voices/Torgar/Arousal-Idle/Size3/Level4/Torgar_Idle_S3_A4_3.mp3">>

<<createplaylist "Torgar_Idle_S3_A4">>
    <<track "Torgar_Idle_S3_A4_01">>
    <<track "Torgar_Idle_S3_A4_02">>
    <<track "Torgar_Idle_S3_A4_03">>
<</createplaylist>>

::_abel_body_visual <600,975>
<<set setup.BodyVisualSheet_Abel =
{
    emoteList:
    {
        normal: 
        {
            visual: "https://sombreve.github.io/Dawn-of-Corruption-Site/Images/characters/Abel/portrait_abel_head_normal.png",
        },
        angry: 
        {
            visual: "https://sombreve.github.io/Dawn-of-Corruption-Site/Images/characters/Abel/portrait_abel_head_angry.png",
        },
        blushing: 
        {
            visual: "https://sombreve.github.io/Dawn-of-Corruption-Site/Images/characters/Abel/portrait_abel_head_embarrassed.png",
        },
        corrupted: 
        {
            visual: "https://sombreve.github.io/Dawn-of-Corruption-Site/Images/characters/Abel/portrait_abel_head_corrupted.png",
        },
        worried: 
        {
            visual: "https://sombreve.github.io/Dawn-of-Corruption-Site/Images/characters/Abel/portrait_abel_head_sad.png",
        },
    },
    cockList :
    {
    },
    bodyList :
    {
        apprentice:
        {
            visual: "https://sombreve.github.io/Dawn-of-Corruption-Site/Images/characters/Abel/portrait_abel_body_herald_apprentice.png",
            condition: function(character)
            {
                return State.variables.CharacterSheet_Abel.quest.corrupted == false;
            },
            headClass: "AbelHead",
            permittedCocks: [],
        },
        apprentice_corrupted:
        {
            visual: "https://sombreve.github.io/Dawn-of-Corruption-Site/Images/characters/Abel/portrait_abel_body_herald_apprentice_corrupted.png",
            condition: function(character)
            {
                return State.variables.CharacterSheet_Abel.quest.corrupted == true;
            },
            headClass: "AbelHead",
            permittedCocks: [],
        },
    },
}>>

::_abel_fight_sheet <725,975>
<<set setup.FighterSheet_Abel =
{
	hp: 60,
	stamina: 15,
	strength: 10,
	critChance: 70,
    critDamage: 2.50,
	arousalGain: 0,
	minArousal: 0,
    growthMultiplier: 1,
	bonusGrowth: {
        height: 0,
        cock: 0,
        muscles: 0,
        balls: 0,
    },
	staminaRecovery: 12,
	variables: $FightVariables,
	fightMoveIDs: [setup.FightMove_Basic_Attack.id],
	fightReward: setup.RewardTier.VERY_HIGH,
	encounterIntroText: "",
	encounterStartText: "",
	outcomePlayerWins: "",
	outcomePlayerLoses: ""
}>>

::_abel_info_sheet <850,975>
<<set setup.InfoSheet_Abel =
{
	name: "Abel",
	gender: "male",
	bodyVisual: "BodyVisualSheet_Abel",
	corruption: 0,
	muscles: 20,
	height: 74,
	cock: 6,
	balls: 2,
	known: setup.EncounterKnownState.UNKNOWN,
	anatomy: {
		heads: {
			number: 1,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.DEFAULT
		},
		eyes: {
			number: 2,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.PURPLE
		},
		jaws: {
			number: 1,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.DEFAULT
		},
		teeths: {
			number: 1,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.DEFAULT
		},
		hands: {
			number: 1,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.DEFAULT
		},
		horns: {
			number: 0,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.DEFAULT
		},
		wings: {
			number: 0,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.DEFAULT
		},
		tongues:{
			number: 1,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.RED
		},
		arms: {
			number: 2,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.DEFAULT
		},
		pecs: {
			number: 2,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.DEFAULT
		},
		abdominals: {
			number: 6,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.DEFAULT
		},
		cocks: {
			number: 1,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.DEFAULT
		},
		balls: {
			number: 2,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.DEFAULT
		},
		legs: {
			number: 2,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.DEFAULT
		},
		tails: {
			number: 0,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.DEFAULT
		},
		breasts: {
			number: 0,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.DEFAULT
		},
		vaginas: {
			number: 0,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.DEFAULT
		}
	},
	alive: true
}>>

::Sheets_Abel <975,975>
<<include "_abel_body_visual">>
<<include "_abel_text_sheet">>
<<include "_abel_fight_sheet">>
<<include "_abel_info_sheet">>
<<include "_abel_quest_sheet">>
<<include "_abel_story_sheet">>

<<set $CharacterSheet_Abel = setup.CharacterFactory.createCharacter({id: "CharacterSheet_Abel", 
                                                              info: setup.InfoSheet_Abel, 
                                                              fight: setup.FighterSheet_Abel, 
                                                              quest: setup.QuestSheet_Abel, 
                                                              text: "TextSheet_Abel"})>>

::_abel_quest_sheet <1100,975>
<<set setup.QuestSheet_Abel =
{
    playedHouseIntro: false,
    corrupted: false,
    available_houseIntro_attackGuard: true,
    available_houseIntro_baseFirstDialogue: true,
    available_flavourDialogue_introTellAll: true,
    available_flavourDialogue_talkAboutCray: true,
    available_flavourDialogue_talkAboutEldest: true,
    available_flavourDialogue_talkAboutTheBind: true,
    available_crayDialogue_dayLeft: true,
    available_crayDialogue_whereabouts: true,
    available_crayDialogue_motives: true,
    available_crayDialogue_villageLife: true,
    available_crayDialogue_achievements: true,
    available_crayDialogue_scavengerLife: true,
    available_heraldDialogue_duty: true,
    available_heraldDialogue_eldest: true,
}>>

::_abel_story_sheet <1225,975>
<<set setup.StorySheet_Abel =
{	
    houseIntro:
	{
        attackGuard:
        {
            available: function()
			{
				return State.variables.CharacterSheet_Abel.quest.available_houseIntro_attackGuard;
			},
            condition: function()
            {
                return State.variables.CharacterSheet_town_guard.quest.beatenOnce && !State.variables.CharacterSheet_Abel.quest.playedHouseIntro;
            },
            passage: "abelHouseIntro_firstDialogueAttackedGuard_link",
        },
        baseFirstDialogue:
        {
            available: function()
			{
				return State.variables.CharacterSheet_Abel.quest.available_houseIntro_baseFirstDialogue;
			},
            condition: function()
            {
                return !State.variables.CharacterSheet_Abel.quest.playedHouseIntro;
            },
            passage: "abelHouseIntro_firstDialogue_link",
        },
	},
    flavourDialogue:
	{
        introTellAll:
        {
            available: function()
			{
				return State.variables.CharacterSheet_Abel.quest.available_flavourDialogue_introTellAll;
			},
            condition: function()
            {
                return State.variables.CharacterSheet_Abel.quest.playedHouseIntro;
            },
            passage: "abelHouseIntro_tellAll_link",
        },
        talkAboutCray:
        {
            available: function()
			{
				return State.variables.CharacterSheet_Abel.quest.available_flavourDialogue_talkAboutCray;
			},
            condition: function()
            {
                return setup.hasAvailableNarativeEvent(setup.StorySheet_Abel.crayDialogue);
            },
            passage: "abelHouseDialogue_aboutCray_link",
        },
		talkAboutEldest:
        {
            available: function()
			{
				return State.variables.CharacterSheet_Abel.quest.available_flavourDialogue_talkAboutEldest;
			},
            condition: function()
            {
                return setup.hasAvailableNarativeEvent(setup.StorySheet_Abel.heraldDialogue);
            },
            passage: "abelHouseDialogue_Herald_link",
        },
        talkAboutTheBind:
        {
            available: function()
			{
				return State.variables.CharacterSheet_Abel.quest.available_flavourDialogue_talkAboutTheBind;
			},
            condition: function()
            {
                return State.variables.CharacterSheet_Shard_Ring.quest.met == true;
            },
            passage: "abelHouseDialogue_aboutTheBind_link",
        },
	},
    crayDialogue:
	{
        whereabouts:
        {
            available: function()
			{
				return State.variables.CharacterSheet_Abel.quest.available_crayDialogue_whereabouts;
			},
            condition: function()
            {
                return true;
            },
            passage: "abelHouseDialogue_aboutCray_whereabouts_link",
        },
		dayLeft:
        {
            available: function()
			{
				return State.variables.CharacterSheet_Abel.quest.available_crayDialogue_dayLeft;
			},
            condition: function()
            {
                return true;
            },
            passage: "abelHouseDialogue_aboutCray_dayLeft_link",
        },
		motives:
        {
            available: function()
			{
				return State.variables.CharacterSheet_Abel.quest.available_crayDialogue_motives;
			},
            condition: function()
            {
                return true;
            },
            passage: "abelHouseDialogue_aboutCray_motives_link",
        },
		villageLife:
        {
            available: function()
			{
				return State.variables.CharacterSheet_Abel.quest.available_crayDialogue_villageLife;
			},
            condition: function()
            {
                return true;
            },
            passage: "abelHouseDialogue_aboutCray_villageLife_link",
        },
		achievements:
        {
            available: function()
			{
				return State.variables.CharacterSheet_Abel.quest.available_crayDialogue_achievements;
			},
            condition: function()
            {
                return true;
            },
            passage: "abelHouseDialogue_aboutCray_achievements_link",
        },
		scavengerLife:
        {
            available: function()
			{
				return State.variables.CharacterSheet_Abel.quest.available_crayDialogue_scavengerLife;
			},
            condition: function()
            {
                return true;
            },
            passage: "abelHouseDialogue_aboutCray_scavengerLife_link",
        },
	},
    heraldDialogue:
	{
		duty:
        {
            available: function()
			{
				return State.variables.CharacterSheet_Abel.quest.available_heraldDialogue_duty;
			},
            condition: function()
            {
                return true;
            },
            passage: "abelHouseDialogue_Herald_duty_link",
        },
		eldest:
        {
            available: function()
			{
				return State.variables.CharacterSheet_Abel.quest.available_heraldDialogue_eldest;
			},
            condition: function()
            {
                return true;
            },
            passage: "abelHouseDialogue_Herald_eldest_link",
        },
	},
}>>

::_abel_text_sheet <100,1100>
<<set setup.TextSheet_Abel =
{	

}>>

::_apothus_body_visual <225,1100>
<<set setup.BodyVisualSheet_Apothus =
{
    emoteList:
    {
        normal: 
        {
            visual: "https://sombreve.github.io/Dawn-of-Corruption-Site/Images/characters/Apothus/HeadSmile.png",
        },
        blushing: 
        {
            visual: "https://sombreve.github.io/Dawn-of-Corruption-Site/Images/characters/Apothus/HeadAnimeBlush.png",
        },
        angry: 
        {
            visual: "https://sombreve.github.io/Dawn-of-Corruption-Site/Images/characters/Apothus/HeadAnger.png",
        },
        grumpy: 
        {
            visual: "https://sombreve.github.io/Dawn-of-Corruption-Site/Images/characters/Apothus/HeadGrumpy.png",
        },
        licky: 
        {
            visual: "https://sombreve.github.io/Dawn-of-Corruption-Site/Images/characters/Apothus/HeadTongue.png",
        },
        mischievious: 
        {
            visual: "https://sombreve.github.io/Dawn-of-Corruption-Site/Images/characters/Apothus/HeadMischief.png",
        },
    },
    cockList :
    {
        robed:
        {
            visual: "https://sombreve.github.io/Dawn-of-Corruption-Site/Images/characters/Apothus/ApophusRobesSFW.png",
        },
        robedOpen:
        {
            visual: "https://sombreve.github.io/Dawn-of-Corruption-Site/Images/characters/Apothus/ApophusRobesNSFW.png",
        },
        naked:
        {
            visual: "https://sombreve.github.io/Dawn-of-Corruption-Site/Images/characters/Apothus/ApophusPenis.png",
        },
    },
    bodyList :
    {
        normal:
        {
            visual: "https://sombreve.github.io/Dawn-of-Corruption-Site/Images/characters/Apothus/ApophusBase.png",
            condition: function(character)
            {
                return true;
            },
            headClass: "ApothusHead",
            permittedCocks: [
                {
                    cock: "robed",
                    cockClass: "ApothusBody",
                    condition: function(character)
                    {
                        return character.quest.arousalProgress == setup.Apothus_Arousal.NORMAL;
                    },
                },
                {
                    cock: "robedOpen",
                    cockClass: "ApothusBody",
                    condition: function(character)
                    {
                        return character.quest.arousalProgress == setup.Apothus_Arousal.REVEALING;
                    },
                },
                {
                    cock: "naked",
                    cockClass: "ApothusBody",
                    condition: function(character)
                    {
                        return character.quest.arousalProgress == setup.Apothus_Arousal.NAKED;
                    },
                },
            ],
        },
    },
}>>

::_apothus_fight_sheet <350,1100>
<<set setup.FighterSheet_Apothus =
{
	hp: 700,
	stamina: 15,
	strength: 100,
	critChance: 40,
    critDamage: 1.50,
	arousalGain: 60,
	minArousal: 0,
    growthMultiplier: 1,
	bonusGrowth: {
        height: 0,
        cock: 0,
        muscles: 0,
        balls: 0,
    },
	staminaRecovery: 12,
	variables: $FightVariables,
	fightMoveIDs: [setup.FightMove_Basic_Attack.id, setup.FightMove_SummonParasite.id],
	fightReward: setup.RewardTier.VERY_HIGH,
	encounterIntroText: "<<include Quest_MQ002_ApothusEncounter_FightIntro>>",
	encounterStartText: "<<include Quest_MQ002_ApothusEncounter_FightStart>>",
	outcomePlayerWins: "<<include Quest_MQ002_ApothusEncounter_PlayerWins>>",
	outcomePlayerLoses: "<<include Quest_MQ002_ApothusEncounter_PlayerLoses>>"
}>>

::_apothus_info_sheet <475,1100>
<<set setup.InfoSheet_Apothus =
{
	name: "",
	gender: "male",
	bodyVisual: "BodyVisualSheet_Apothus",
	corruption: 700,
	muscles: 80,
	height: 156,
	cock: 19,
	balls: 7,
	known: setup.EncounterKnownState.UNKNOWN,
	anatomy: {
		heads: {
			number: 1,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.DEFAULT
		},
		eyes: {
			number: 2,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.PURPLE
		},
		jaws: {
			number: 1,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.DEFAULT
		},
		teeths: {
			number: 1,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.DEFAULT
		},
		hands: {
			number: 1,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.DEFAULT
		},
		horns: {
			number: 2,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.DEFAULT
		},
		wings: {
			number: 0,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.DEFAULT
		},
		tongues:{
			number: 1,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.RED
		},
		arms: {
			number: 2,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.DEFAULT
		},
		pecs: {
			number: 2,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.DEFAULT
		},
		abdominals: {
			number: 6,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.DEFAULT
		},
		cocks: {
			number: 1,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.DEFAULT
		},
		balls: {
			number: 2,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.DEFAULT
		},
		legs: {
			number: 2,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.DEFAULT
		},
		tails: {
			number: 0,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.DEFAULT
		},
		breasts: {
			number: 0,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.DEFAULT
			
		},
		vaginas: {
			number: 0,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.DEFAULT
		}
	},
	alive: true
}>>

::Sheets_Apothus <600,1100>
<<include "_apothus_text_sheet">>
<<include "_apothus_body_visual">>
<<include "_apothus_fight_sheet">>
<<include "_apothus_info_sheet">>
<<include "_apothus_quest_sheet">>

<<set $CharacterSheet_Apothus = setup.CharacterFactory.createCharacter({id: "CharacterSheet_Apothus", 
                                                              info: setup.InfoSheet_Apothus, 
                                                              fight: setup.FighterSheet_Apothus, 
                                                              quest: setup.QuestSheet_Apothus, 
                                                              text: "TextSheet_Apothus"})>>

<<run $CharacterSheet_Apothus.applyAbilityRuntimeData(setup.Ability_Masochism)>>
<<run $CharacterSheet_Apothus.applyAbilityRuntimeData(setup.Ability_AppetiteForGrowth_2)>>
<<run $CharacterSheet_Apothus.applyAbilityRuntimeData(setup.Ability_BrinkOfMadness)>>

::_apothus_quest_sheet <725,1100>
<<set setup.Apothus_Arousal =
{
    NORMAL: 0,
    REVEALING: 1,
    NAKED: 1,
}>>

<<set setup.QuestSheet_Apothus =
{
    met: false,
    askedAboutHim: false,
    arousalProgress: setup.Apothus_Arousal.NORMAL,
}>>

::_apothus_text_sheet <850,1100>
<<set setup.TextSheet_Apothus =
{	
}>>

::_apothus_2nd_form_fight_sheet <975,1100>
<<set setup.FighterSheet_Apothus_2nd_Form =
{
	hp: 1200,
	stamina: 30,
	strength: 100,
	critChance: 0,
    critDamage: 1.50,
	arousalGain: 60,
	minArousal: 0,
    growthMultiplier: 1,
	bonusGrowth: {
        height: 0,
        cock: 0,
        muscles: 0,
        balls: 0,
    },
	staminaRecovery: 30,
	variables: $FightVariables,
	fightMoveIDs: [setup.FightMove_Infest.id, setup.FightMove_ConsumeLost.id, setup.FightMove_SeedOfRuin.id],
	fightReward: setup.RewardTier.VERY_HIGH,
	encounterIntroText: "<<include Quest_MQ002_Apothus_2nd_Form_Encounter_FightIntro>>",
	encounterStartText: "<<include Quest_MQ002_Apothus_2nd_Form_Encounter_FightStart>>",
	outcomePlayerWins: "<<include Quest_MQ002_Apothus_2nd_Form_Encounter_PlayerWins>>",
	outcomePlayerLoses: "<<include Quest_MQ002_Apothus_2nd_Form_Encounter_PlayerLoses>>"
}>>

::_apothus_2nd_form_info_sheet <1100,1100>
<<set setup.InfoSheet_Apothus_2nd_Form =
{
	name: "",
	gender: "male",
	picture:  "https://sombreve.github.io/Dawn-of-Corruption-Site/Images/characters/apothus_2nd_form.png",
	corruption: 1200,
	muscles: 80,
	height: 156,
	cock: 19,
	balls: 7,
	anatomy: {
		heads: {
			number: 1,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.DEFAULT
		},
		eyes: {
			number: 2,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.PURPLE
		},
		jaws: {
			number: 1,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.DEFAULT
		},
		teeths: {
			number: 1,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.DEFAULT
		},
		hands: {
			number: 1,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.DEFAULT
		},
		horns: {
			number: 2,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.DEFAULT
		},
		wings: {
			number: 0,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.DEFAULT
		},
		tongues:{
			number: 1,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.RED
		},
		arms: {
			number: 2,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.DEFAULT
		},
		pecs: {
			number: 2,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.DEFAULT
		},
		abdominals: {
			number: 6,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.DEFAULT
		},
		cocks: {
			number: 1,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.DEFAULT
		},
		balls: {
			number: 2,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.DEFAULT
		},
		legs: {
			number: 2,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.DEFAULT
		},
		tails: {
			number: 0,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.DEFAULT
		},
		breasts: {
			number: 0,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.DEFAULT
		},
		vaginas: {
			number: 0,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.DEFAULT
		}
	},
	alive: true
}>>

::Sheets_Apothus_2nd_Form <1225,1100>
<<include "_apothus_2nd_form_text_sheet">>
<<include "_apothus_2nd_form_fight_sheet">>
<<include "_apothus_2nd_form_info_sheet">>
<<include "_apothus_2nd_form_quest_sheet">>

<<set $CharacterSheet_Apothus_2nd_Form = setup.CharacterFactory.createCharacter({id: "CharacterSheet_Apothus_2nd_Form", 
                                                              info: setup.InfoSheet_Apothus_2nd_Form, 
                                                              fight: setup.FighterSheet_Apothus_2nd_Form, 
                                                              quest: setup.QuestSheet_Apothus_2nd_Form, 
                                                              text: "TextSheet_Apothus_2nd_Form"})>>

<<run $CharacterSheet_Apothus_2nd_Form.applyAbilityRuntimeData(setup.Ability_AppetiteForGrowth_2)>>
<<run $CharacterSheet_Apothus_2nd_Form.applyAbilityRuntimeData(setup.Ability_HerculeanBuild)>>
<<run $CharacterSheet_Apothus_2nd_Form.applyAbilityRuntimeData(setup.Ability_NeverendingGrowth)>>
<<run $CharacterSheet_Apothus_2nd_Form.applyAbilityRuntimeData(setup.Ability_VigorOfTheEndowed_2)>>
<<run $CharacterSheet_Apothus_2nd_Form.applyAbilityRuntimeData(setup.Ability_KalethsFervour)>>
<<run $CharacterSheet_Apothus_2nd_Form.applyAbilityRuntimeData(setup.Ability_LastStand)>>
<<run $CharacterSheet_Apothus_2nd_Form.applyAbilityRuntimeData(setup.Ability_SombrevesWhisper)>>
<<run $CharacterSheet_Apothus_2nd_Form.applyAbilityRuntimeData(setup.Ability_Masochism)>>
<<run $CharacterSheet_Apothus_2nd_Form.applyAbilityRuntimeData(setup.Ability_UnstoppableExpansion)>>

::_apothus_2nd_form_quest_sheet <100,1225>
<<set setup.QuestSheet_Apothus_2nd_Form =
{
    met: false,
    askedAboutHim: false,
}>>

::_apothus_2nd_form_text_sheet <225,1225>
<<set setup.TextSheet_Apothus_2nd_Form =
{	
}>>

::_doppleganger_audio <350,1225>
<<set setup.AudioSheet_Doppleganger =
{
    
}>>

::_doppleganger_fight_sheet <475,1225>
<<set setup.FighterSheet_Doppleganger =
{
	hp: 64,
	stamina: 8,
	strength: 10,
	critChance: 0,
    critDamage: 1.50,
	arousalGain: 20,
    growthMultiplier: 1,
	bonusGrowth: {
        height: 0,
        cock: 0,
        muscles: 0,
        balls: 0,
    },
	minArousal: 0,
	staminaRecovery: 4,
	variables: $FightVariables,
	fightMoveIDs: [],
	fightReward: setup.RewardTier.VERY_HIGH,
	encounterIntroText: "<<include Encounter_Intro_Doppleganger>>",
	encounterStartText: "<<include Encounter_Start_Doppleganger>>",
	outcomePlayerWins: "<<include Encounter_Win_Doppleganger>>",
	outcomePlayerLoses: "<<include Encounter_Loss_Doppleganger>>",
}>>

::_doppleganger_info_sheet <600,1225>
<<set setup.InfoSheet_Doppleganger =
{
	name: "",
	gender: "male",
	audioSheet: "AudioSheet_Doppleganger",
	corruption: 50,
	muscles: 0,
	height: 48,
	cock: 10,
	balls: 3,
	alive: true,
	known: setup.EncounterKnownState.UNKNOWN,
	anatomy: {
		heads: {
			number: 1,
			race: setup.RacePool.INCUBUS,
			colour: setup.ColourPool.DEFAULT
		},
		eyes: {
			number: 2,
			race: setup.RacePool.INCUBUS,
			colour: setup.ColourPool.DEFAULT
		},
		jaws: {
			number: 1,
			race: setup.RacePool.INCUBUS,
			colour: setup.ColourPool.DEFAULT
		},
		teeths: {
			number: 1,
			race: setup.RacePool.INCUBUS,
			colour: setup.ColourPool.DEFAULT
		},
		hands: {
			number: 2,
			race: setup.RacePool.INCUBUS,
			colour: setup.ColourPool.DEFAULT
		},
		horns: {
			number: 2,
			race: setup.RacePool.INCUBUS,
			colour: setup.ColourPool.DEFAULT
		},
		wings: {
			number: 2,
			race: setup.RacePool.INCUBUS,
			colour: setup.ColourPool.DEFAULT
		},
		tongues:{
			number: 1,
			race: setup.RacePool.INCUBUS,
			colour: setup.ColourPool.DEFAULT
		},
		arms: {
			number: 2,
			race: setup.RacePool.INCUBUS,
			colour: setup.ColourPool.DEFAULT
		},
		pecs: {
			number: 2,
			race: setup.RacePool.INCUBUS,
			colour: setup.ColourPool.DEFAULT
		},
		abdominals: {
			number: 6,
			race: setup.RacePool.INCUBUS,
			colour: setup.ColourPool.DEFAULT
		},
		cocks: {
			number: 1,
			race: setup.RacePool.INCUBUS,
			colour: setup.ColourPool.DEFAULT
		},
		balls: {
			number: 2,
			race: setup.RacePool.INCUBUS,
			colour: setup.ColourPool.DEFAULT
		},
		legs: {
			number: 2,
			race: setup.RacePool.INCUBUS,
			colour: setup.ColourPool.DEFAULT
		},
		tails: {
			number: 1,
			race: setup.RacePool.INCUBUS,
			colour: setup.ColourPool.DEFAULT
		},
		breasts: {
			number: 0,
			race: setup.RacePool.INCUBUS,
			colour: setup.ColourPool.DEFAULT
		},
		vaginas: {
			number: 0,
			race: setup.RacePool.INCUBUS,
			colour: setup.ColourPool.DEFAULT
		}
	}
}>>

::Sheets_Doppleganger <725,1225>
<<include "_doppleganger_audio">>
<<include "_doppleganger_text_sheet">>
<<include "_doppleganger_fight_sheet">>
<<include "_doppleganger_info_sheet">>
<<include "_doppleganger_quest_sheet">>
<<include "_doppleganger_story_sheet">>


<<set $CharacterSheet_Doppleganger = setup.CharacterFactory.createCharacter({id: "CharacterSheet_Doppleganger", 
                                                 info: setup.InfoSheet_Doppleganger, 
                                                 fight: setup.FighterSheet_Doppleganger, 
                                                 quest: setup.QuestSheet_Doppleganger, 
                                                 text: "TextSheet_Doppleganger"})>>

::_doppleganger_quest_sheet <850,1225>
<<set setup.Doppleganger_CorruptionState =
{
    PURE: 0,
    CORRUPTED: 1,
}>>

<<set setup.QuestSheet_Doppleganger =
{
    met: false,
    corruptionState: setup.Doppleganger_CorruptionState.PURE,
    available_encounterPassages_pure: true,
    available_encounterPassages_corrupted: true,
    available_postFightPassagesWin_pure: true,
    available_postFightPassagesWin_corrupted: true,
    available_postFightPassagesLoss_pure: true,
    available_postFightPassagesLoss_corrupted: true,
}>>

::_doppleganger_story_sheet <975,1225>
<<set setup.StorySheet_Doppleganger = 
{
    encounterPassages:
    {
        pure:
        {
            available: function()
			{
				return State.variables.CharacterSheet_Doppleganger.quest.available_encounterPassages_pure;
			},
            condition: function()
            {
                return State.variables.CharacterSheet_Doppleganger.quest.corruptionState == setup.Doppleganger_CorruptionState.PURE;
            },
            passage: "Doppleganger_Intro_Pure",
        },
        corrupted:
        {
            available: function()
			{
				return State.variables.CharacterSheet_Doppleganger.quest.available_encounterPassages_corrupted;
			},
            condition: function()
            {
                return State.variables.CharacterSheet_Doppleganger.quest.corruptionState == setup.Doppleganger_CorruptionState.CORRUPTED;
            },
            passage: "Doppleganger_Intro_Corrupted",
        },
    },
    postFightPassagesWin:
    {
        pure:
        {
            available: function()
			{
				return State.variables.CharacterSheet_Doppleganger.quest.available_postFightPassagesWin_pure;
			},
            condition: function()
            {
                return State.variables.CharacterSheet_Doppleganger.quest.corruptionState == setup.Doppleganger_CorruptionState.PURE;
            },
            passage: "Doppleganger_Win_Pure",
        },
        corrupted:
        {
            available: function()
			{
				return State.variables.CharacterSheet_Doppleganger.quest.available_postFightPassagesWin_corrupted;
			},
            condition: function()
            {
                return State.variables.CharacterSheet_Doppleganger.quest.corruptionState == setup.Doppleganger_CorruptionState.CORRUPTED;
            },
            passage: "Doppleganger_Win_Corrupted",
        },
    },
    postFightPassagesLoss:
    {
        pure:
        {
            available: function()
			{
				return State.variables.CharacterSheet_Doppleganger.quest.available_postFightPassagesLoss_pure;
			},
            condition: function()
            {
                return State.variables.CharacterSheet_Doppleganger.quest.corruptionState == setup.Doppleganger_CorruptionState.PURE;
            },
            passage: "Doppleganger_Loss_Pure",
        },
        corrupted:
        {
            available: function()
			{
				return State.variables.CharacterSheet_Doppleganger.quest.available_postFightPassagesLoss_corrupted;
			},
            condition: function()
            {
                return State.variables.CharacterSheet_Doppleganger.quest.corruptionState == setup.Doppleganger_CorruptionState.CORRUPTED;
            },
            passage: "Doppleganger_Loss_Corrupted",
        },
    },
}>>

::_doppleganger_text_sheet <1100,1225>
<<set setup.TextSheet_Doppleganger =
{	
}>>

::_dragon_monk_fight_sheet <1225,1225>
<<set setup.FighterSheet_MQ002_DragonMonk =
{
	hp: 700,
	stamina: 17,
	strength: 70,
	critChance: 10,
    critDamage: 1.50,
	arousalGain: 60,
	minArousal: 20,
    growthMultiplier: 1,
	bonusGrowth: {
        height: 0,
        cock: 0,
        muscles: 0,
        balls: 0,
    },
	staminaRecovery: 12,
	variables: $FightVariables,
	fightMoveIDs: [setup.FightMove_Basic_Attack.id, setup.FightMove_Parry.id, setup.FightMove_DragonStrike.id],
	fightReward: setup.RewardTier.VERY_HIGH,
	encounterIntroText: "<<include Quest_MQ002_DragonMonkEncounter_FightIntro>>",
	encounterStartText: "<<include Quest_MQ002_DragonMonkEncounter_FightStart>>",
	outcomePlayerWins: "<<include Quest_MQ002_DragonMonkEncounter_PlayerWins>>",
	outcomePlayerLoses: "<<include Quest_MQ002_DragonMonkEncounter_PlayerLoses>>"
}>>

::_dragon_monk_info_sheet <100,1350>
<<set setup.InfoSheet_MQ002_DragonMonk =
{
	name: "",
	gender: "male",
	picture: "https://sombreve.github.io/Dawn-of-Corruption-Site/Images/characters/drenth.png",
	pictureCorrupt: "https://sombreve.github.io/Dawn-of-Corruption-Site/Images/characters/drenth_corrupt.png",
	pictureFriend: "https://sombreve.github.io/Dawn-of-Corruption-Site/Images/characters/drenth_friend.png",
	corruption: 300,
	muscles: 60,
	height: 96,
	cock: 13,
	balls: 5,
	anatomy: {
		heads: {
			number: 1,
			race: setup.RacePool.DRAGONBORN,
			colour: setup.ColourPool.BLUE
		},
		eyes: {
			number: 2,
			race: setup.RacePool.DRAGONBORN,
			colour: setup.ColourPool.GREEN
		},
		jaws: {
			number: 1,
			race: setup.RacePool.DRAGONBORN,
			colour: setup.ColourPool.DEFAULT
		},
		teeths: {
			number: 1,
			race: setup.RacePool.DRAGONBORN,
			colour: setup.ColourPool.DEFAULT
		},
		hands: {
			number: 1,
			race: setup.RacePool.DRAGONBORN,
			colour: setup.ColourPool.BLUE
		},
		horns: {
			number: 2,
			race: setup.RacePool.DRAGONBORN,
			colour: setup.ColourPool.DEFAULT
		},
		wings: {
			number: 2,
			race: setup.RacePool.DRAGONBORN,
			colour: setup.ColourPool.BLUE
		},
		tongues:{
			number: 1,
			race: setup.RacePool.DRAGONBORN,
			colour: setup.ColourPool.RED
		},
		arms: {
			number: 2,
			race: setup.RacePool.DRAGONBORN,
			colour: setup.ColourPool.BLUE
		},
		pecs: {
			number: 2,
			race: setup.RacePool.DRAGONBORN,
			colour: setup.ColourPool.BLUE
		},
		abdominals: {
			number: 6,
			race: setup.RacePool.DRAGONBORN,
			colour: setup.ColourPool.BLUE
		},
		cocks: {
			number: 1,
			race: setup.RacePool.DRAGONBORN,
			colour: setup.ColourPool.DEFAULT
		},
		balls: {
			number: 2,
			race: setup.RacePool.DRAGONBORN,
			colour: setup.ColourPool.BLUE
		},
		legs: {
			number: 2,
			race: setup.RacePool.DRAGONBORN,
			colour: setup.ColourPool.BLUE
		},
		tails: {
			number: 1,
			race: setup.RacePool.DRAGONBORN,
			colour: setup.ColourPool.BLUE
		},
		breasts: {
			number: 0,
			race: setup.RacePool.DRAGONBORN,
			colour: setup.ColourPool.DEFAULT
		},
		vaginas: {
			number: 0,
			race: setup.RacePool.DRAGONBORN,
			colour: setup.ColourPool.DEFAULT
		}
	},
	alive: true
}>>

::Sheets_MQ002_DragonMonk <225,1350>
<<include "_dragon_monk_text_sheet">>
<<include "_dragon_monk_fight_sheet">>
<<include "_dragon_monk_info_sheet">>
<<include "_dragon_monk_quest_sheet">>
<<include "_dragon_monk_story_sheet">>

<<set $CharacterSheet_MQ002_DragonMonk = setup.CharacterFactory.createCharacter({id: "CharacterSheet_MQ002_DragonMonk", 
                                                              info: setup.InfoSheet_MQ002_DragonMonk, 
                                                              fight: setup.FighterSheet_MQ002_DragonMonk, 
                                                              quest: setup.QuestSheet_MQ002_DragonMonk, 
                                                              text: "TextSheet_MQ002_DragonMonk"})>>

::_dragon_monk_quest_sheet <350,1350>
<<set setup.QuestSheet_MQ002_DragonMonk =
{
    met: false,
    threatened: false,
    askedWhoAreYou: false,
    askedWhyAreYouHere: false,
	askedLookingForSomeone: false,
	infected: false,
	infected_GloryRoom: false,
	came_GloryRoom: false,
	beaten: false,
	beatenCycle: 0,
    available_encounterPassages_firstTime: true,
    available_encounterPassages_main: true,
}>>

::_dragon_monk_story_sheet <475,1350>
<<set setup.StorySheet_MQ002_DragonMonk = 
{
    encounterPassages:
    {
        firstTime_infected:
        {
            available: function()
			{
				return State.variables.CharacterSheet_MQ002_DragonMonk.quest.available_encounterPassages_firstTime;
			},
            condition: function()
            {
                return State.variables.CharacterSheet_MQ002_DragonMonk.quest.infected_GloryRoom;
            },
            passage: "WestWing_DrenthRoom_FirstTime_Infected",
        },
        firstTime_came:
        {
            available: function()
			{
				return State.variables.CharacterSheet_MQ002_DragonMonk.quest.available_encounterPassages_firstTime;
			},
            condition: function()
            {
                return State.variables.CharacterSheet_MQ002_DragonMonk.quest.came_GloryRoom;
            },
            passage: "WestWing_DrenthRoom_FirstTime_Came",
        },
        firstTime:
        {
            available: function()
			{
				return State.variables.CharacterSheet_MQ002_DragonMonk.quest.available_encounterPassages_firstTime;
			},
            condition: function()
            {
                return true;
            },
            passage: "WestWing_DrenthRoom_FirstTime",
        },
        main:
        {
            available: function()
			{
				return State.variables.CharacterSheet_MQ002_DragonMonk.quest.available_encounterPassages_main;
			},
            condition: function()
            {
                return true;
            },
            passage: "Quest_MQ002_Manor_DragonRoom_Enter",
        },
    },
    gloryHoleStartPassage:
    {
        absent:
        {
            available: function()
			{
				return true;
			},
            condition: function()
            {
                return State.variables.CharacterSheet_MQ002_DragonMonk.quest.beaten == true || State.variables.CharacterSheet_MQ002_DragonMonk.quest.infected == true;
            },
            passage: "WestWing_GloryHole_Absent",
        },
        present:
        {
            available: function()
			{
				return true;
			},
            condition: function()
            {
                return true;
            },
            passage: "WestWing_GloryHole_Present",
        },
    },
    gloryHoleCumPassages:
    {
        infest:
        {
            available: function()
			{
				return true;
			},
            condition: function()
            {
                return State.variables.CharacterSheet_Player.quest.nyxParasiteInfections > 0;
            },
            passage: "WestWing_GloryHole_Infect",
        },
        clean_gigantic:
        {
            available: function()
			{
				return true;
			},
            condition: function()
            {
                return setup.MQ002_Manor_IsCockGiganticInManor(State.variables.CharacterSheet_Player);
            },
            passage: "WestWing_GloryHole_11_Gigantic_Cum",
        },
        clean_massive:
        {
            available: function()
			{
				return true;
			},
            condition: function()
            {
                return setup.MQ002_Manor_IsCockMassiveInManor(State.variables.CharacterSheet_Player);
            },
            passage: "WestWing_GloryHole_11_Massive_Cum",
        },
        clean_normal:
        {
            available: function()
			{
				return true;
			},
            condition: function()
            {
                return true;
            },
            passage: "WestWing_GloryHole_11_Normal_Cum",
        },
    },
}>>

::_dragon_monk_text_sheet <600,1350>
<<set setup.TextSheet_MQ002_DragonMonk =
{	
}>>

::_ethrex_fight_sheet <725,1350>
<<set setup.FighterSheet_Ethrex =
{
	hp: 200,
	stamina: 25,
	strength: 50,
	critChance: 20,
    critDamage: 1.50,
	arousalGain: 20,
	minArousal: 0,
    growthMultiplier: 1,
	bonusGrowth: {
        height: 0,
        cock: 0,
        muscles: 0,
        balls: 0,
    },
	staminaRecovery: 14,
	variables: $FightVariables,
	fightMoveIDs: [setup.FightMove_Basic_Attack.id, setup.FightMove_IncubusCall.id, setup.FightMove_IncubusStrike.id],
	fightReward: setup.RewardTier.MEDIUM,
	encounterIntroText: "<<include Encounter_Intro_Ethrex_Container>>",
	encounterStartText: "<<include Encounter_Start_Ethrex>>",
	outcomePlayerWins: "<<include Encounter_Win_Ethrex_Container>>",
	outcomePlayerLoses: "<<include Encounter_Loss_Ethrex_Container>>",
	teammateSettings:
	{
		attackTiming: setup.AttackTiming.BEFORE_PLAYER,
	},
}>>

::_ethrex_info_sheet <850,1350>
<<set setup.InfoSheet_Ethrex =
{
	name: "",
	gender: "male",
    corruption: 400,
	muscles: 0,
	height: 68,
	cock: 9,
	balls: 4,
	alive: true,
	known: setup.EncounterKnownState.UNKNOWN,
    anatomy: {
		heads: {
			number: 1,
			race: setup.RacePool.INCUBUS,
			colour: setup.ColourPool.DEFAULT
		},
		eyes: {
			number: 2,
			race: setup.RacePool.INCUBUS,
			colour: setup.ColourPool.DEFAULT
		},
		jaws: {
			number: 1,
			race: setup.RacePool.INCUBUS,
			colour: setup.ColourPool.DEFAULT
		},
		teeths: {
			number: 1,
			race: setup.RacePool.INCUBUS,
			colour: setup.ColourPool.DEFAULT
		},
		hands: {
			number: 2,
			race: setup.RacePool.INCUBUS,
			colour: setup.ColourPool.DEFAULT
		},
		horns: {
			number: 2,
			race: setup.RacePool.INCUBUS,
			colour: setup.ColourPool.DEFAULT
		},
		wings: {
			number: 2,
			race: setup.RacePool.INCUBUS,
			colour: setup.ColourPool.DEFAULT
		},
		tongues:{
			number: 1,
			race: setup.RacePool.INCUBUS,
			colour: setup.ColourPool.DEFAULT
		},
		arms: {
			number: 2,
			race: setup.RacePool.INCUBUS,
			colour: setup.ColourPool.DEFAULT
		},
		pecs: {
			number: 2,
			race: setup.RacePool.INCUBUS,
			colour: setup.ColourPool.DEFAULT
		},
		abdominals: {
			number: 6,
			race: setup.RacePool.INCUBUS,
			colour: setup.ColourPool.DEFAULT
		},
		cocks: {
			number: 1,
			race: setup.RacePool.INCUBUS,
			colour: setup.ColourPool.DEFAULT
		},
		balls: {
			number: 2,
			race: setup.RacePool.INCUBUS,
			colour: setup.ColourPool.DEFAULT
		},
		legs: {
			number: 2,
			race: setup.RacePool.INCUBUS,
			colour: setup.ColourPool.DEFAULT
		},
		tails: {
			number: 1,
			race: setup.RacePool.INCUBUS,
			colour: setup.ColourPool.DEFAULT
		},
		breasts: {
			number: 0,
			race: setup.RacePool.INCUBUS,
			colour: setup.ColourPool.DEFAULT
		},
		vaginas: {
			number: 0,
			race: setup.RacePool.INCUBUS,
			colour: setup.ColourPool.DEFAULT
		}
	}
}>>

::Sheets_Ethrex <975,1350>
<<include "_ethrex_fight_sheet">>
<<include "_ethrex_info_sheet">>
<<include "_ethrex_quest_sheet">>
<<include "_ethrex_story_sheet">>

<<set $CharacterSheet_Ethrex = setup.CharacterFactory.createCharacter({id: "CharacterSheet_Ethrex", 
                                                    info: setup.InfoSheet_Ethrex, 
                                                    fight: setup.FighterSheet_Ethrex, 
                                                    quest: setup.QuestSheet_Ethrex, 
                                                    text: undefined})>>
                                        
<<run $CharacterSheet_Ethrex.applyAbilityRuntimeData(setup.Ability_VigorOfTheEndowed_2)>>

::_ethrex_quest_sheet <1100,1350>
<<set setup.QuestSheet_Ethrex =
{
	met: false,
	beatenOnce: false,
	minorDemon: false,
	majorDemon: false,
	lordOfLust: false,
	joinedTeam: false,
}>>

::_ethrex_story_sheet <1225,1350>
<<set setup.StorySheet_Ethrex =
{
    encounterPassages:
    {
        joinedTeam:
        {
            available: function()
			{
				return true;
			},
            condition: function()
            {
                return State.variables.CharacterSheet_Ethrex.quest.joinedTeam == true;
            },
            passage: "Encounter_Intro_Ethrex_Teammate",
        },
        lordOfLust:
        {
            available: function()
			{
				return true;
			},
            condition: function()
            {
                return State.variables.CharacterSheet_Ethrex.quest.lordOfLust == true;
            },
            passage: "Encounter_Intro_Ethrex_FinalRela",
        },
        majorDemon:
        {
            available: function()
			{
				return true;
			},
            condition: function()
            {
                return State.variables.CharacterSheet_Ethrex.quest.majorDemon == true;
            },
            passage: "Encounter_Intro_Ethrex_HighRela",
        },
        minorDemon:
        {
            available: function()
			{
				return true;
			},
            condition: function()
            {
                return State.variables.CharacterSheet_Ethrex.quest.minorDemon == true;
            },
            passage: "Encounter_Intro_Ethrex_MidRela",
        },
        lowRela:
        {
            available: function()
			{
				return true;
			},
            condition: function()
            {
                return State.variables.CharacterSheet_Ethrex.quest.met == true;
            },
            passage: "Encounter_Intro_Ethrex_LowRela",
        },
        firstTime:
        {
            available: function()
			{
				return true;
			},
            condition: function()
            {
                return State.variables.CharacterSheet_Ethrex.quest.met == false;
            },
            passage: "Encounter_Intro_Ethrex",
        },
    },
    postFightPassagesWin:
    {
        joinedTeam:
        {
            available: function()
			{
				return true;
			},
            condition: function()
            {
                return State.variables.CharacterSheet_Ethrex.quest.joinedTeam == true;
            },
            passage: "Encounter_Ethrex_FinalRela_Win_Teammate",
        },
        lordOfLust:
        {
            available: function()
			{
				return true;
			},
            condition: function()
            {
                return State.variables.CharacterSheet_Ethrex.quest.lordOfLust == true;
            },
            passage: "Encounter_Ethrex_FinalRela_Win",
        },
        majorDemon:
        {
            available: function()
			{
				return true;
			},
            condition: function()
            {
                return State.variables.CharacterSheet_Ethrex.quest.majorDemon == true;
            },
            passage: "Encounter_Ethrex_HighRela_Win",
        },
        minorDemon:
        {
            available: function()
			{
				return true;
			},
            condition: function()
            {
                return State.variables.CharacterSheet_Ethrex.quest.minorDemon == true;
            },
            passage: "Encounter_Ethrex_MidRela_Win",
        },
        lowRela:
        {
            available: function()
			{
				return true;
			},
            condition: function()
            {
                return true;
            },
            passage: "Encounter_Intro_Ethrex_LowRela_Win",
        },
    },
    postFightPassagesLoss:
    {
        lowRela:
        {
            available: function()
			{
				return true;
			},
            condition: function()
            {
                return true;
            },
            passage: "Encounter_Loss_Ethrex_0",
        },
    },
    encounterLossFlavour:
    {
		lordOfLust:
        {
            available: function()
			{
				return true;
			},
            condition: function()
            {
                return State.variables.CharacterSheet_Ethrex.quest.lordOfLust == true;
            },
            passage: "Encounter_Loss_Ethrex_0_Flavour_LordOfLust",
        },
		majorDemon:
        {
            available: function()
			{
				return true;
			},
            condition: function()
            {
                return State.variables.CharacterSheet_Ethrex.quest.majorDemon == true;
            },
            passage: "Encounter_Loss_Ethrex_0_Flavour_MajorDemon",
        },
		minorDemon:
        {
            available: function()
			{
				return true;
			},
            condition: function()
            {
                return State.variables.CharacterSheet_Ethrex.quest.minorDemon == true;
            },
            passage: "Encounter_Loss_Ethrex_0_Flavour_MinorDemon",
        },
		lowRela:
        {
            available: function()
			{
				return true;
			},
            condition: function()
            {
                return true;
            },
            passage: "Encounter_Loss_Ethrex_0_Flavour_LowRela",
        },
	},
	encounterIntroFirstTimeFlavour:
    {
		giant:
        {
            available: function()
			{
				return true;
			},
            condition: function()
            {
                return setup.getStatValue(State.variables.CharacterSheet_Player, "height") > 12 * 12;
            },
            passage: "Encounter_Intro_Ethrex_Giant",
        },
		corrupt:
        {
            available: function()
			{
				return true;
			},
            condition: function()
            {
                return (setup.getStatValue(State.variables.CharacterSheet_Player, "corruption") >= 75);
            },
            passage: "Encounter_Intro_Ethrex_Corrupt",
        },
		normal:
        {
            available: function()
			{
				return true;
			},
            condition: function()
            {
                return true;
            },
            passage: "Encounter_Intro_Ethrex_Default",
        },
	},
    encounterFinalTeammateJoin:
    {
		solo:
        {
            available: function()
			{
				return true;
			},
            condition: function()
            {
                return State.variables.CharacterSheet_Ethrex.quest.joinedTeam == false;
            },
            passage: "Encounter_Ethrex_FinalRela_Win_Solo",
        },
		teammate:
        {
            available: function()
			{
				return true;
			},
            condition: function()
            {
                return State.variables.CharacterSheet_Ethrex.quest.joinedTeam == true;
            },
            passage: "Encounter_Ethrex_FinalRela_Win_Teammate",
        },
	},
}>>

::_god_beast_fight_sheet <100,1475>
<<set setup.FighterSheet_God_Beast =
{
	hp: 50000,
	stamina: 420,
	strength: 34000,
	critChance: 69,
    critDamage: 3,
	arousalGain: 40,
	minArousal: 50,
    growthMultiplier: 99,
	bonusGrowth: {
        height: 0,
        cock: 0,
        muscles: 0,
        balls: 0,
    },
	staminaRecovery: 80,
	variables: $FightVariables,
	fightMoveIDs: [setup.FightMove_Basic_Attack.id, setup.FightMove_DragonStrike.id],
	fightReward: setup.RewardTier.VERY_HIGH,
	encounterIntroText: "<<include Encounter_Intro_God_Beast>>",
	encounterStartText: "<<include Encounter_Start_God_Beast>>",
	outcomePlayerWins: "<<include Encounter_Win_God_Beast>>",
	outcomePlayerLoses: "<<include Encounter_Loss_God_Beast>>"
}>>

::_god_beast_info_sheet <225,1475>
<<set setup.InfoSheet_God_Beast =
{
	name: "",
	gender: "male",
    corruption: 0,
	muscles: 35000,
	height: 680000000,
	cock: 90000000,
	balls: 40000000,
	alive: true,
	known: setup.EncounterKnownState.UNKNOWN,
    anatomy: {
		heads: {
			number: 1,
			race: setup.RacePool.BEHEMOTH,
			colour: setup.ColourPool.DEFAULT
		},
		eyes: {
			number: 2,
			race: setup.RacePool.BEHEMOTH,
			colour: setup.ColourPool.DEFAULT
		},
		jaws: {
			number: 1,
			race: setup.RacePool.BEHEMOTH,
			colour: setup.ColourPool.DEFAULT
		},
		teeths: {
			number: 1,
			race: setup.RacePool.BEHEMOTH,
			colour: setup.ColourPool.DEFAULT
		},
		hands: {
			number: 4,
			race: setup.RacePool.BEHEMOTH,
			colour: setup.ColourPool.DEFAULT
		},
		horns: {
			number: 4,
			race: setup.RacePool.BEHEMOTH,
			colour: setup.ColourPool.DEFAULT
		},
		wings: {
			number: 0,
			race: setup.RacePool.BEHEMOTH,
			colour: setup.ColourPool.DEFAULT
		},
		tongues:{
			number: 1,
			race: setup.RacePool.BEHEMOTH,
			colour: setup.ColourPool.DEFAULT
		},
		arms: {
			number: 4,
			race: setup.RacePool.BEHEMOTH,
			colour: setup.ColourPool.DEFAULT
		},
		pecs: {
			number: 4,
			race: setup.RacePool.BEHEMOTH,
			colour: setup.ColourPool.DEFAULT
		},
		abdominals: {
			number: 6,
			race: setup.RacePool.BEHEMOTH,
			colour: setup.ColourPool.DEFAULT
		},
		cocks: {
			number: 3,
			race: setup.RacePool.BEHEMOTH,
			colour: setup.ColourPool.DEFAULT
		},
		balls: {
			number: 2,
			race: setup.RacePool.BEHEMOTH,
			colour: setup.ColourPool.DEFAULT
		},
		legs: {
			number: 2,
			race: setup.RacePool.BEHEMOTH,
			colour: setup.ColourPool.DEFAULT
		},
		tails: {
			number: 1,
			race: setup.RacePool.BEHEMOTH,
			colour: setup.ColourPool.DEFAULT
		},
		breasts: {
			number: 0,
			race: setup.RacePool.BEHEMOTH,
			colour: setup.ColourPool.DEFAULT
		},
		vaginas: {
			number: 0,
			race: setup.RacePool.BEHEMOTH,
			colour: setup.ColourPool.DEFAULT
		}
	}
}>>

::Sheets_God_Beast <350,1475>
<<include "_god_beast_fight_sheet">>
<<include "_god_beast_info_sheet">>
<<include "_god_beast_quest_sheet">>

<<set $CharacterSheet_God_Beast = setup.CharacterFactory.createCharacter({id: "CharacterSheet_God_Beast", 
                                                    info: setup.InfoSheet_God_Beast, 
                                                    fight: setup.FighterSheet_God_Beast, 
                                                    quest: setup.QuestSheet_God_Beast, 
                                                    text: undefined})>>
                                        
<<run $CharacterSheet_God_Beast.applyAbilityRuntimeData(setup.Ability_VigorOfTheEndowed_2)>>
<<run $CharacterSheet_God_Beast.applyAbilityRuntimeData(setup.Ability_AppetiteForGrowth_2)>>
<<run $CharacterSheet_God_Beast.applyAbilityRuntimeData(setup.Ability_CodexPassion)>>
<<run $CharacterSheet_God_Beast.applyAbilityRuntimeData(setup.Ability_UnstoppableExpansion)>>
<<run $CharacterSheet_God_Beast.applyAbilityRuntimeData(setup.Ability_FaithsReward)>>
<<run $CharacterSheet_God_Beast.applyAbilityRuntimeData(setup.Ability_OrgasmicGrowth)>>
<<run $CharacterSheet_God_Beast.applyAbilityRuntimeData(setup.Ability_Oath_Containment)>>
<<run $CharacterSheet_God_Beast.applyAbilityRuntimeData(setup.Ability_NeverendingGrowth)>>
<<run $CharacterSheet_God_Beast.applyAbilityRuntimeData(setup.Ability_LastStand)>>
<<run $CharacterSheet_God_Beast.applyAbilityRuntimeData(setup.Ability_HerculeanBuild)>>

::_god_beast_quest_sheet <475,1475>
<<set setup.QuestSheet_God_Beast =
{
	beatenOnce: false,
}>>

::_herald_fight_sheet <600,1475>
<<set setup.FighterSheet_Herald =
{
	hp: 500,
	stamina: 30,
	strength: 90,
	critChance: 0,
    critDamage: 1.50,
	arousalGain: 0,
    growthMultiplier: 1,
	bonusGrowth: {
        height: 0,
        cock: 0,
        muscles: 0,
        balls: 0,
    },
	minArousal: 0,
	staminaRecovery: 20,
	variables: $FightVariables,
	fightMoveIDs: [setup.FightMove_DragonStrike.id, setup.FightMove_Basic_Attack.id, setup.FightMove_HeraldsDevotion.id],
	fightReward: setup.RewardTier.VERY_LOW,
	encounterIntroText: "",
	encounterStartText: "",
	outcomePlayerWins: "<<include Village_Herald_Win>>",
	outcomePlayerLoses: "<<include Village_Herald_Loss>>",
	teammateSettings:
	{
		attackTiming: setup.AttackTiming.BEFORE_PLAYER,
	},
}>>

::_herald_info_sheet <725,1475>
<<set setup.InfoSheet_Herald =
{
	name: "",
	gender: "male",
	corruption: 0,
	muscles: 60,
	height: 98,
	cock: 12,
	balls: 6,
	alive: true,
	known: setup.EncounterKnownState.UNKNOWN,
	anatomy: {
		heads: {
			number: 1,
			race: setup.RacePool.WEREWOLF,
			colour: setup.ColourPool.DEFAULT
		},
		eyes: {
			number: 2,
			race: setup.RacePool.WEREWOLF,
			colour: setup.ColourPool.DEFAULT
		},
		jaws: {
			number: 1,
			race: setup.RacePool.WEREWOLF,
			colour: setup.ColourPool.DEFAULT
		},
		teeths: {
			number: 1,
			race: setup.RacePool.WEREWOLF,
			colour: setup.ColourPool.DEFAULT
		},
		hands: {
			number: 2,
			race: setup.RacePool.WEREWOLF,
			colour: setup.ColourPool.DEFAULT
		},
		tongues:{
			number: 1,
			race: setup.RacePool.WEREWOLF,
			colour: setup.ColourPool.DEFAULT
		},
		arms: {
			number: 2,
			race: setup.RacePool.WEREWOLF,
			colour: setup.ColourPool.DEFAULT
		},
		pecs: {
			number: 2,
			race: setup.RacePool.WEREWOLF,
			colour: setup.ColourPool.DEFAULT
		},
		abdominals: {
			number: 6,
			race: setup.RacePool.WEREWOLF,
			colour: setup.ColourPool.DEFAULT
		},
		cocks: {
			number: 1,
			race: setup.RacePool.WEREWOLF,
			colour: setup.ColourPool.DEFAULT
		},
		balls: {
			number: 2,
			race: setup.RacePool.WEREWOLF,
			colour: setup.ColourPool.DEFAULT
		},
		legs: {
			number: 2,
			race: setup.RacePool.WEREWOLF,
			colour: setup.ColourPool.DEFAULT
		},
		tails: {
			number: 1,
			race: setup.RacePool.WEREWOLF,
			colour: setup.ColourPool.DEFAULT
		},
		breasts: {
			number: 0,
			race: setup.RacePool.WEREWOLF,
			colour: setup.ColourPool.DEFAULT
		},
		vaginas: {
			number: 0,
			race: setup.RacePool.WEREWOLF,
			colour: setup.ColourPool.DEFAULT
		}
	}
}>>

::Sheets_Herald <850,1475>
<<include "_herald_text_sheet">>
<<include "_herald_fight_sheet">>
<<include "_herald_info_sheet">>
<<include "_herald_quest_sheet">>


<<set $CharacterSheet_Herald = setup.CharacterFactory.createCharacter({id: "CharacterSheet_Herald", 
                                                 info: setup.InfoSheet_Herald, 
                                                 fight: setup.FighterSheet_Herald, 
                                                 quest: setup.QuestSheet_Herald, 
                                                 text: "TextSheet_Herald"})>>

::_herald_quest_sheet <975,1475>
<<set setup.QuestSheet_Herald =
{
    met: false,
}>>

::_herald_text_sheet <1100,1475>
<<set setup.TextSheet_Herald =
{	
}>>

::_imp_audio <1225,1475>
<<set setup.AudioSheet_Imp =
{
    voice:
    {
        playlist:
        {
            title: "characterVoice_Imp",
            tracks:
            {
                arousal_1_Size_1:
                {
                    tags: ["arousal_1", "Size_1"],
                    track: "Idle_Imp_A1_S1"
                },
                arousal_2_Size_1:
                {
                    tags: ["arousal_2", "Size_1"],
                    track: "Idle_Imp_A2_S1"
                },
                arousal_3_Size_1:
                {
                    tags: ["arousal_3", "Size_1"],
                    track: "Idle_Imp_A3_S1"
                },
                arousal_4_Size_1:
                {
                    tags: ["arousal_4", "Size_1"],
                    track: "Idle_Imp_A4_S1"
                },
                arousal_5_Size_1:
                {
                    tags: ["arousal_5", "Size_1"],
                    track: "Idle_Imp_A5_S1"
                },
                arousal_1_Size_2:
                {
                    tags: ["arousal_1", "Size_2"],
                    track: "Idle_Imp_A1_S2"
                },
                arousal_2_Size_2:
                {
                    tags: ["arousal_2", "Size_2"],
                    track: "Idle_Imp_A2_S2"
                },
                arousal_3_Size_2:
                {
                    tags: ["arousal_3", "Size_2"],
                    track: "Idle_Imp_A3_S2"
                },
                arousal_4_Size_2:
                {
                    tags: ["arousal_4", "Size_2"],
                    track: "Idle_Imp_A4_S2"
                },
                arousal_5_Size_2:
                {
                    tags: ["arousal_5", "Size_2"],
                    track: "Idle_Imp_A5_S2"
                },
                arousal_1_Size_3:
                {
                    tags: ["arousal_1", "Size_3", "Size_4"],
                    track: "Idle_Imp_A1_S3"
                },
                arousal_2_Size_3:
                {
                    tags: ["arousal_2", "Size_3", "Size_4"],
                    track: "Idle_Imp_A2_S3"
                },
                arousal_3_Size_3:
                {
                    tags: ["arousal_3", "Size_3", "Size_4"],
                    track: "Idle_Imp_A3_S3"
                },
                arousal_4_Size_3:
                {
                    tags: ["arousal_4", "Size_3", "Size_4"],
                    track: "Idle_Imp_A4_S3"
                },
                arousal_5_Size_3:
                {
                    tags: ["arousal_5", "Size_3", "Size_4"],
                    track: "Idle_Imp_A5_S3"
                },
            },
        },
    },
}>>

::_imp_body_visual <100,1600>
<<set setup.BodyVisualSheet_Imp =
{
    emoteList:
    {
        normal: 
        {
            visual: "https://sombreve.github.io/Dawn-of-Corruption-Site/Images/characters/Imp/portrait_imp_head_cocky.png",
            corruptedVisual: "https://sombreve.github.io/Dawn-of-Corruption-Site/Images/characters/Imp/portrait_imp_head_cocky_corrupted.png",
        },
        blushing: 
        {
            visual: "https://sombreve.github.io/Dawn-of-Corruption-Site/Images/characters/Imp/portrait_imp_head_blushing.png",
            corruptedVisual: "https://sombreve.github.io/Dawn-of-Corruption-Site/Images/characters/Imp/portrait_imp_head_blushing_corrupted.png",
        },
        cumming: 
        {
            visual: "https://sombreve.github.io/Dawn-of-Corruption-Site/Images/characters/Imp/portrait_imp_head_cumming.png",
            corruptedVisual: "https://sombreve.github.io/Dawn-of-Corruption-Site/Images/characters/Imp/portrait_imp_head_cumming_corrupted.png",
            cumVisual: "https://sombreve.github.io/Dawn-of-Corruption-Site/Images/characters/Imp/portrait_imp_head_cumming_cum.png",
        },
    },
    cockList :
    {
        smallest:
        {
            visual: "https://sombreve.github.io/Dawn-of-Corruption-Site/Images/characters/Imp/portrait_imp_dick_1.png",
            cumVisual: "https://sombreve.github.io/Dawn-of-Corruption-Site/Images/characters/Imp/portrait_imp_dick_1_cum.png",
        },
        small:
        {
            visual: "https://sombreve.github.io/Dawn-of-Corruption-Site/Images/characters/Imp/portrait_imp_dick_2.png",
            cumVisual: "https://sombreve.github.io/Dawn-of-Corruption-Site/Images/characters/Imp/portrait_imp_dick_2_cum.png",
        },
        medium:
        {
            visual: "https://sombreve.github.io/Dawn-of-Corruption-Site/Images/characters/Imp/portrait_imp_dick_3.png",
            cumVisual: "https://sombreve.github.io/Dawn-of-Corruption-Site/Images/characters/Imp/portrait_imp_dick_3_cum.png",
        },
        big:
        {
            visual: "https://sombreve.github.io/Dawn-of-Corruption-Site/Images/characters/Imp/portrait_imp_dick_4.png",
            cumVisual: "https://sombreve.github.io/Dawn-of-Corruption-Site/Images/characters/Imp/portrait_imp_dick_4_cum.png",
        },
        biggest:
        {
            visual: "https://sombreve.github.io/Dawn-of-Corruption-Site/Images/characters/Imp/portrait_imp_dick_5.png",
            cumVisual: "https://sombreve.github.io/Dawn-of-Corruption-Site/Images/characters/Imp/portrait_imp_dick_5_cum.png",
        },
        biggestHyperBalls:
        {
            visual: "https://sombreve.github.io/Dawn-of-Corruption-Site/Images/characters/Imp/portrait_imp_dick_6.png",
            cumVisual: "https://sombreve.github.io/Dawn-of-Corruption-Site/Images/characters/Imp/portrait_imp_dick_6_cum.png",
        },
    },
    bodyList :
    {
        small:
        {
            visual: "https://sombreve.github.io/Dawn-of-Corruption-Site/Images/characters/Imp/portrait_imp_body_1.png",
            cumVisual: "https://sombreve.github.io/Dawn-of-Corruption-Site/Images/characters/Imp/portrait_imp_body_1_cum.png",
            condition: function(character)
            {
                var size = setup.getStatValue(character, "height");
                return size < 12 * 7;
            },
            headClass: "ImpSmallBodyHead",
            permittedCocks: [
                {
                    cock: "smallest",
                    cockClass: "ImpSmallBody1Cock",
                    condition: function(character)
                    {
                        let ratio = setup.getcockToBodyRatio(character);
                        return ratio < 0.55;
                    },
                },
                {
                    cock: "small",
                    cockClass: "ImpSmallBody2Cock",
                    condition: function(character)
                    {
                        let ratio = setup.getcockToBodyRatio(character);
                        return ratio >= 0.55;
                    },
                },
            ],
        },
        medium:
        {
            visual: "https://sombreve.github.io/Dawn-of-Corruption-Site/Images/characters/Imp/portrait_imp_body_2.png",
            cumVisual: "https://sombreve.github.io/Dawn-of-Corruption-Site/Images/characters/Imp/portrait_imp_body_2_cum.png",
            condition: function(character)
            {
                var size = setup.getStatValue(character, "height");
                return size >= 12 * 7 && size < 12 * 11;
            },
            headClass: "ImpMediumBodyHead",
            permittedCocks: [
                {
                    cock: "small",
                    cockClass: "ImpMediumBody2Cock",
                    condition: function(character)
                    {
                        let ratio = setup.getcockToBodyRatio(character);
                        return ratio < 0.6;
                    },
                },
                {
                    cock: "medium",
                    cockClass: "ImpMediumBody3Cock",
                    condition: function(character)
                    {
                        let ratio = setup.getcockToBodyRatio(character);
                        return ratio >= 0.6 && ratio < 0.9;
                    },
                },
                {
                    cock: "big",
                    cockClass: "ImpMediumBody4Cock",
                    condition: function(character)
                    {
                        let ratio = setup.getcockToBodyRatio(character);
                        return ratio >= 0.9;
                    },
                },
            ],
        },
        large:
        {
            visual: "https://sombreve.github.io/Dawn-of-Corruption-Site/Images/characters/Imp/portrait_imp_body_3.png",
            cumVisual: "https://sombreve.github.io/Dawn-of-Corruption-Site/Images/characters/Imp/portrait_imp_body_3_cum.png",
            condition: function(character)
            {
                var size = setup.getStatValue(character, "height");
                return size >= 12 * 11;
            },
            headClass: "ImpBigBodyHead",
            permittedCocks: [
                {
                    cock: "big",
                    cockClass: "ImpBigBody4Cock",
                    condition: function(character)
                    {
                        let ratio = setup.getcockToBodyRatio(character);
                        return ratio <= 0.6;
                    },
                },
                {
                    cock: "biggest",
                    cockClass: "ImpBigBody5Cock",
                    condition: function(character)
                    {
                        let ratio = setup.getcockToBodyRatio(character);
                        return ratio >= 0.6 && ratio < 0.9;
                    },
                },
                {
                    cock: "biggestHyperBalls",
                    cockClass: "ImpBigBody6Cock",
                    condition: function(character)
                    {
                        let ratio = setup.getcockToBodyRatio(character);
                        return ratio >= 0.9;
                    },
                },
            ],
        },
    },
}>>

::_imp_fight_sheet <225,1600>
<<set setup.FighterSheet_Imp =
{
	hp: 64,
	stamina: 8,
	strength: 20,
	critChance: 0,
    critDamage: 1.50,
	arousalGain: 20,
    growthMultiplier: 1,
	bonusGrowth: {
        height: 0,
        cock: 0,
        muscles: 0,
        balls: 0,
    },
	minArousal: 0,
	staminaRecovery: 4,
	variables: $FightVariables,
	fightMoveIDs: [setup.FightMove_Basic_Attack.id, setup.FightMove_PridefulAscent.id],
	fightReward: setup.RewardTier.VERY_LOW,
	encounterIntroText: "<<include Encounter_Intro_Imp>>",
	encounterStartText: "<<include Encounter_Start_Imp>>",
	outcomePlayerWins: "<<include Encounter_Win_Imp>>",
	outcomePlayerLoses: "<<include Encounter_Loss_Imp>>",
	teammateSettings:
	{
		attackTiming: setup.AttackTiming.BEFORE_PLAYER,
	},
}>>

::_imp_info_sheet <350,1600>
<<set setup.InfoSheet_Imp =
{
	name: "",
	gender: "male",
	bodyVisual: "BodyVisualSheet_Imp",
	audioSheet: "AudioSheet_Imp",
	corruption: 100,
	muscles: 0,
	height: 48,
	cock: 10,
	balls: 3,
	alive: true,
	known: setup.EncounterKnownState.UNKNOWN,
	anatomy: {
		heads: {
			number: 1,
			race: setup.RacePool.INCUBUS,
			colour: setup.ColourPool.DEFAULT
		},
		eyes: {
			number: 2,
			race: setup.RacePool.INCUBUS,
			colour: setup.ColourPool.DEFAULT
		},
		jaws: {
			number: 1,
			race: setup.RacePool.INCUBUS,
			colour: setup.ColourPool.DEFAULT
		},
		teeths: {
			number: 1,
			race: setup.RacePool.INCUBUS,
			colour: setup.ColourPool.DEFAULT
		},
		hands: {
			number: 2,
			race: setup.RacePool.INCUBUS,
			colour: setup.ColourPool.DEFAULT
		},
		horns: {
			number: 2,
			race: setup.RacePool.INCUBUS,
			colour: setup.ColourPool.DEFAULT
		},
		wings: {
			number: 2,
			race: setup.RacePool.INCUBUS,
			colour: setup.ColourPool.DEFAULT
		},
		tongues:{
			number: 1,
			race: setup.RacePool.INCUBUS,
			colour: setup.ColourPool.DEFAULT
		},
		arms: {
			number: 2,
			race: setup.RacePool.INCUBUS,
			colour: setup.ColourPool.DEFAULT
		},
		pecs: {
			number: 2,
			race: setup.RacePool.INCUBUS,
			colour: setup.ColourPool.DEFAULT
		},
		abdominals: {
			number: 6,
			race: setup.RacePool.INCUBUS,
			colour: setup.ColourPool.DEFAULT
		},
		cocks: {
			number: 1,
			race: setup.RacePool.INCUBUS,
			colour: setup.ColourPool.DEFAULT
		},
		balls: {
			number: 2,
			race: setup.RacePool.INCUBUS,
			colour: setup.ColourPool.DEFAULT
		},
		legs: {
			number: 2,
			race: setup.RacePool.INCUBUS,
			colour: setup.ColourPool.DEFAULT
		},
		tails: {
			number: 1,
			race: setup.RacePool.INCUBUS,
			colour: setup.ColourPool.DEFAULT
		},
		breasts: {
			number: 0,
			race: setup.RacePool.INCUBUS,
			colour: setup.ColourPool.DEFAULT
		},
		vaginas: {
			number: 0,
			race: setup.RacePool.INCUBUS,
			colour: setup.ColourPool.DEFAULT
		}
	}
}>>

::Sheets_Imp <475,1600>
<<include "_imp_body_visual">>
<<include "_imp_audio">>
<<include "_imp_text_sheet">>
<<include "_imp_fight_sheet">>
<<include "_imp_info_sheet">>
<<include "_imp_quest_sheet">>
<<include "_imp_story_sheet">>


<<set $CharacterSheet_Imp = setup.CharacterFactory.createCharacter({id: "CharacterSheet_Imp", 
                                                 info: setup.InfoSheet_Imp, 
                                                 fight: setup.FighterSheet_Imp, 
                                                 quest: setup.QuestSheet_Imp, 
                                                 text: "TextSheet_Imp"})>>

::_imp_quest_sheet <600,1600>
<<set setup.StorylineProgress_Imp = 
{
    FIRST_MEETING:    0,
    LOW_RELATIONSHIP: 1000,
    MID_RELATIONSHIP: 2000,
    SERVANT:          3000,
    MASTER:           4000,
}>>

<<set setup.QuestSheet_Imp =
{
    met: false,
    storylineProgress: setup.StorylineProgress_Imp.FIRST_MEETING,
    relationshipScoring: 0,
    servantScoring: 0,
    servantWins: 3,
    servantLosses: 3,
    masterScoring: 0,
    lostScoring: 0,
    growthMultiplier: 1,
    knowsAboutNyx: false,
    ascended: false,
    available_encounterPassages_teammate: true,
    available_encounterPassages_nyxHint: true,
    available_encounterPassages_servant: true,
    available_encounterPassages_growthBodyMediumToLarge: true,
    available_encounterPassages_growthCock1to2: true,
    available_encounterPassages_growthCock2to3: true,
    available_encounterPassages_growthCock3to4: true,
    available_encounterPassages_growthCock4to5: true,
    available_encounterPassages_growthCock5to6: true,
    available_encounterPassages_midRela: true,
    available_encounterPassages_lowRela: true,
    available_encounterPassages_firstTime: true,
    available_postFightPassagesLoss_lowRelaIdle: true,
    available_postFightPassagesLoss_midRelaIdle: true,
    available_postFightPassagesLoss_servantChoice: true,
    available_postFightPassagesLoss_masterPath: true,
    available_postFightPassagesLoss_servantPath: true,
    available_postFightPassagesLoss_ascended: true,
    available_postFightPassagesWin_lowRelaIdle: true,
    available_postFightPassagesWin_midRelaIdle: true,
    available_postFightPassagesWin_lowRelaEnterMidRela: true,
    available_postFightPassagesWin_masterChoice: true,
    available_postFightPassagesWin_masterPath: true,
    available_postFightPassagesWin_servantPath: true,
    available_postFightPassagesWin_ascended: true,
}>>

::_imp_story_sheet <725,1600>
<<set setup.StorySheet_Imp = 
{
    encounterPassages:
    {
        teammate:
        {
            available: function()
			{
				return State.variables.CharacterSheet_Imp.quest.available_encounterPassages_teammate;
			},
            condition: function()
            {
                return State.variables.CharacterSheet_Player.fight.unlockedTeammates.includes("CharacterSheet_Imp");
            },
            passage: "Village_GoMeetImp",
        },
        nyxHint:
        {
            available: function()
			{
				return State.variables.CharacterSheet_Imp.quest.available_encounterPassages_nyxHint;
			},
            condition: function()
            {
                return State.variables.CharacterSheet_Imp.quest.knowsAboutNyx && !State.variables.CharacterSheet_Imp.quest.knowsAboutNyx && State.variables.CharacterSheet_Imp.quest.storylineProgress == setup.StorylineProgress_Imp.SERVANT;
            },
            passage: "Imp_ServantPath_NyxHint",
        },
        servant:
        {
            available: function()
			{
				return State.variables.CharacterSheet_Imp.quest.available_encounterPassages_servant;
			},
            condition: function()
            {
                return State.variables.CharacterSheet_Imp.quest.storylineProgress == setup.StorylineProgress_Imp.SERVANT;
            },
            passage: "Imp_Servant_EncounterStart",
        },
        growthBodyMediumToLarge:
        {
            available: function()
			{
				return State.variables.CharacterSheet_Imp.quest.available_encounterPassages_growthBodyMediumToLarge;
			},
            condition: function()
            {
                return setup.getCurrentBodyVisual(State.variables.CharacterSheet_Imp) == "large"
            },
            passage: "Imp_EncounterStart_Growth_Body_MediumToLarge",
        },
        growthCock1to2:
        {
            available: function()
			{
				return State.variables.CharacterSheet_Imp.quest.available_encounterPassages_growthCock1to2;
			},
            condition: function()
            {
                return setup.getCurrentBodyVisual(State.variables.CharacterSheet_Imp) == "small" && setup.getCurrentCockVisual(State.variables.CharacterSheet_Imp) == "small";
            },
            passage: "Imp_EncounterStart_Growth_Cock_1To2",
        },
        growthCock2to3:
        {
            available: function()
			{
				return State.variables.CharacterSheet_Imp.quest.available_encounterPassages_growthCock2to3;
			},
            condition: function()
            {
                return setup.getCurrentBodyVisual(State.variables.CharacterSheet_Imp) == "medium" && setup.getCurrentCockVisual(State.variables.CharacterSheet_Imp) == "medium";
            },
            passage: "Imp_EncounterStart_Growth_Cock_2To3",
        },
        growthCock3to4:
        {
            available: function()
			{
				return State.variables.CharacterSheet_Imp.quest.available_encounterPassages_growthCock3to4;
			},
            condition: function()
            {
                return setup.getCurrentBodyVisual(State.variables.CharacterSheet_Imp) == "medium" && setup.getCurrentCockVisual(State.variables.CharacterSheet_Imp) == "big";
            },
            passage: "Imp_EncounterStart_Growth_Cock_3To4",
        },
        growthCock4to5:
        {
            available: function()
			{
				return State.variables.CharacterSheet_Imp.quest.available_encounterPassages_growthCock4to5;
			},
            condition: function()
            {
                return setup.getCurrentBodyVisual(State.variables.CharacterSheet_Imp) == "large" && setup.getCurrentCockVisual(State.variables.CharacterSheet_Imp) == "biggest";
            },
            passage: "Imp_EncounterStart_Growth_Cock_4To5",
        },
        growthCock5to6:
        {
            available: function()
			{
				return State.variables.CharacterSheet_Imp.quest.available_encounterPassages_growthCock5to6;
			},
            condition: function()
            {
                return setup.getCurrentBodyVisual(State.variables.CharacterSheet_Imp) == "large" && setup.getCurrentCockVisual(State.variables.CharacterSheet_Imp) == "biggestHyperBalls";
            },
            passage: "Imp_EncounterStart_Growth_Cock_5To6",
        },
        midRela:
        {
            available: function()
			{
				return State.variables.CharacterSheet_Imp.quest.available_encounterPassages_midRela;
			},
            condition: function()
            {
                return State.variables.CharacterSheet_Imp.quest.relationshipScoring >= 3;
            },
            passage: "Imp_Mid_Rela_EncounterStart",
        },
        lowRela:
        {
            available: function()
			{
				return State.variables.CharacterSheet_Imp.quest.available_encounterPassages_lowRela;
			},
            condition: function()
            {
                return State.variables.CharacterSheet_Imp.quest.relationshipScoring >= 1;
            },
            passage: "Imp_Low_Rela_EncounterStart",
        },
        firstTime:
        {
            available: function()
			{
				return State.variables.CharacterSheet_Imp.quest.available_encounterPassages_firstTime;
			},
            condition: function()
            {
                return true;
            },
            passage: "Imp_FirstMeeting_Intro",
        },
    },
    postFightPassagesWin:
    {
        ascended:
        {
            available: function()
			{
				return State.variables.CharacterSheet_Imp.quest.available_postFightPassagesWin_ascended;
			},
            condition: function()
            {
                return State.variables.CharacterSheet_Imp.quest.ascended == true;
            },
            passage: "Quest_MQ002_ApothusRealm_ImpInvasion_Win",
        },
        servantPath:
        {
            available: function()
			{
				return State.variables.CharacterSheet_Imp.quest.available_postFightPassagesWin_servantPath;
			},
            condition: function()
            {
                return State.variables.CharacterSheet_Imp.quest.storylineProgress == setup.StorylineProgress_Imp.SERVANT;
            },
            passage: "Imp_Win_ServantPath",
        },
        masterPath:
        {
            available: function()
			{
				return State.variables.CharacterSheet_Imp.quest.available_postFightPassagesWin_masterPath;
			},
            condition: function()
            {
                return State.variables.CharacterSheet_Imp.quest.storylineProgress == setup.StorylineProgress_Imp.MASTER;
            },
            passage: "Imp_Win_MasterPath",
        },
        masterChoice:
        {
            available: function()
			{
				return State.variables.CharacterSheet_Imp.quest.available_postFightPassagesWin_masterChoice;
			},
            condition: function()
            {
                return State.variables.CharacterSheet_Imp.quest.relationshipScoring >= 8 && (State.variables.CharacterSheet_Imp.quest.servantScoring >= 3 || State.variables.CharacterSheet_Imp.quest.masterScoring >= 3);
            },
            passage: "Imp_MasterChoice",
        },
        lowRelaEnterMidRela:
        {
            available: function()
			{
				return State.variables.CharacterSheet_Imp.quest.available_postFightPassagesWin_lowRelaEnterMidRela;
			},
            condition: function()
            {
                return State.variables.CharacterSheet_Imp.quest.relationshipScoring >= 3;
            },
            passage: "Imp_Low_Rela_Win_EnterMidRela",
        },
        midRelaIdle:
        {
            available: function()
			{
				return State.variables.CharacterSheet_Imp.quest.available_postFightPassagesWin_midRelaIdle;
			},
            condition: function()
            {
                return State.variables.CharacterSheet_Imp.quest.relationshipScoring >= 3;
            },
            passage: "Imp_Mid_Rela_Win_Idle",
        },
        lowRelaIdle:
        {
            available: function()
			{
				return State.variables.CharacterSheet_Imp.quest.available_postFightPassagesWin_lowRelaIdle;
			},
            condition: function()
            {
                return true;
            },
            passage: "Imp_Low_Rela_Win_Idle",
        },
    },
    postFightPassagesLoss:
    {
        ascended:
        {
            available: function()
			{
				return State.variables.CharacterSheet_Imp.quest.available_postFightPassagesLoss_ascended;
			},
            condition: function()
            {
                return State.variables.CharacterSheet_Imp.quest.ascended == true;
            },
            passage: "Quest_MQ002_ApothusRealm_ImpInvasion_Loss",
        },
        servantPath:
        {
            available: function()
			{
				return State.variables.CharacterSheet_Imp.quest.available_postFightPassagesLoss_servantPath;
			},
            condition: function()
            {
                return State.variables.CharacterSheet_Imp.quest.storylineProgress == setup.StorylineProgress_Imp.SERVANT;
            },
            passage: "Imp_Loss_ServantPath",
        },
        masterPath:
        {
            available: function()
			{
				return State.variables.CharacterSheet_Imp.quest.available_postFightPassagesLoss_masterPath;
			},
            condition: function()
            {
                return State.variables.CharacterSheet_Imp.quest.storylineProgress == setup.StorylineProgress_Imp.MASTER;
            },
            passage: "Imp_Loss_MasterPath",
        },
        servantChoice:
        {
            available: function()
			{
				return State.variables.CharacterSheet_Imp.quest.available_postFightPassagesLoss_servantChoice;
			},
            condition: function()
            {
                return State.variables.CharacterSheet_Imp.quest.relationshipScoring >= 6 && (State.variables.CharacterSheet_Imp.quest.servantScoring >= 3 || State.variables.CharacterSheet_Imp.quest.masterScoring >= 3);
            },
            passage: "Imp_Loss_ServantChoice",
        },
        midRelaIdle:
        {
            available: function()
			{
				return State.variables.CharacterSheet_Imp.quest.available_postFightPassagesLoss_midRelaIdle;
			},
            condition: function()
            {
                return State.variables.CharacterSheet_Imp.quest.relationshipScoring >= 3;
            },
            passage: "Imp_Mid_Rela_Loss_Idle",
        },
        lowRelaIdle:
        {
            available: function()
			{
				return State.variables.CharacterSheet_Imp.quest.available_postFightPassagesLoss_lowRelaIdle;
			},
            condition: function()
            {
                return true;
            },
            passage: "Imp_Low_Rela_Loss_Idle",
        },
    },
}>>

::_imp_text_sheet_basicAttackPrepFlavour_heightFlavour_small_1 <850,1600>


::_imp_text_sheet_basicAttackPrepFlavour_heightFlavour_small_2 <975,1600>


::_imp_text_sheet_basicAttackPrepFlavour_heightFlavour_small_3 <1100,1600>


::_imp_text_sheet_basicAttackPrepFlavour_heightFlavour_small_4 <1225,1600>


::_imp_text_sheet_basicAttackPrepFlavour_heightFlavour_medium_1 <100,1725>


::_imp_text_sheet_basicAttackPrepFlavour_heightFlavour_medium_2 <225,1725>


::_imp_text_sheet_basicAttackPrepFlavour_heightFlavour_medium_3 <350,1725>


::_imp_text_sheet_basicAttackPrepFlavour_heightFlavour_large_1 <475,1725>


::_imp_text_sheet_basicAttackPrepFlavour_heightFlavour_large_2 <600,1725>


::_imp_text_sheet_basicAttackPrepFlavour_heightFlavour_large_3 <725,1725>


::_imp_text_sheet_basicAttackPrepFlavour_heightFlavour_huge_1 <850,1725>


::_imp_text_sheet_basicAttackPrepFlavour_heightFlavour_huge_2 <975,1725>


::_imp_text_sheet_basicAttackPrepFlavour_heightFlavour_huge_3 <1100,1725>


::_imp_text_sheet_encounterStartFlavour_heightFlavour_small_1 <1225,1725>


::_imp_text_sheet_encounterStartFlavour_heightFlavour_small_2 <100,1850>


::_imp_text_sheet_encounterStartFlavour_heightFlavour_small_3 <225,1850>


::_imp_text_sheet_encounterStartFlavour_heightFlavour_small_4 <350,1850>


::_imp_text_sheet_encounterStartFlavour_heightFlavour_medium_1 <475,1850>


::_imp_text_sheet_encounterStartFlavour_heightFlavour_medium_2 <600,1850>


::_imp_text_sheet_encounterStartFlavour_heightFlavour_medium_3 <725,1850>


::_imp_text_sheet_encounterStartFlavour_heightFlavour_large_1 <850,1850>


::_imp_text_sheet_encounterStartFlavour_heightFlavour_large_2 <975,1850>


::_imp_text_sheet_encounterStartFlavour_heightFlavour_large_3 <1100,1850>


::_imp_text_sheet_encounterStartFlavour_heightFlavour_huge_1 <1225,1850>


::_imp_text_sheet_encounterStartFlavour_heightFlavour_huge_2 <100,1975>


::_imp_text_sheet_encounterStartFlavour_heightFlavour_huge_3 <225,1975>


::_imp_text_sheet <350,1975>
<<set setup.TextSheet_Imp =
{	
	goMeetImp_Intro :{
		heightFlavour: {
			small: [
				"GoMeetImp_heightFlavour_small",
			],
			medium: [
				"GoMeetImp_heightFlavour_small",
			],
			large: [
				"GoMeetImp_heightFlavour_large",
			],
			huge: [
				"GoMeetImp_heightFlavour_huge",
			],
		},
	},
	goMeetImp_Height :{
		heightFlavour: {
			small: [
				"Village_MeetImp_Examine_Size_Small",
			],
			medium: [
				"Village_MeetImp_Examine_Size_Small",
			],
			large: [
				"Village_MeetImp_Examine_Size_Large",
			],
			huge: [
				"Village_MeetImp_Examine_Size_Huge",
			],
		},
	},
	goMeetImp_Muscles :{
		heightFlavour: {
			small: [
				"Village_MeetImp_Examine_Muscles_Small",
			],
			medium: [
				"Village_MeetImp_Examine_Muscles_Small",
			],
			large: [
				"Village_MeetImp_Examine_Muscles_Large",
			],
			huge: [
				"Village_MeetImp_Examine_Muscles_Huge",
			],
		},
	},
	goMeetImp_Genitals :{
		heightFlavour: {
			small: [
				"Village_MeetImp_Examine_Genitals_Small",
			],
			medium: [
				"Village_MeetImp_Examine_Genitals_Small",
			],
			large: [
				"Village_MeetImp_Examine_Genitals_Large",
			],
			huge: [
				"Village_MeetImp_Examine_Genitals_Huge",
			],
		},
	},
	leaveImp :{
		heightFlavour: {
			small: [
				"Village_MeetImp_Leave_Small",
			],
			medium: [
				"Village_MeetImp_Leave_Small",
			],
			large: [
				"Village_MeetImp_Leave_Large",
			],
			huge: [
				"Village_MeetImp_Leave_Huge",
			],
		},
	},
	goMeetImp_GrowImp :{
		heightFlavour: {
			small: [
				"Village_MeetImp_GrowHim_Large",
			],
			medium: [
				"Village_MeetImp_GrowHim_Large",
			],
			large: [
				"Village_MeetImp_GrowHim_Large",
			],
			huge: [
				"Village_MeetImp_GrowHim_Huge",
			],
		},
	},
	basicAttackPrepFlavour :{
		heightFlavour: {
			small: [
				"_imp_text_sheet_basicAttackPrepFlavour_heightFlavour_small_1",
				"_imp_text_sheet_basicAttackPrepFlavour_heightFlavour_small_2",
				"_imp_text_sheet_basicAttackPrepFlavour_heightFlavour_small_3",
				"_imp_text_sheet_basicAttackPrepFlavour_heightFlavour_small_4",
			],
			medium: [
				"_imp_text_sheet_basicAttackPrepFlavour_heightFlavour_medium_1",
				"_imp_text_sheet_basicAttackPrepFlavour_heightFlavour_medium_2",
				"_imp_text_sheet_basicAttackPrepFlavour_heightFlavour_medium_3",
			],
			large: [
				"_imp_text_sheet_basicAttackPrepFlavour_heightFlavour_large_1",
				"_imp_text_sheet_basicAttackPrepFlavour_heightFlavour_large_2",
				"_imp_text_sheet_basicAttackPrepFlavour_heightFlavour_large_3",
			],
			huge: [
				"_imp_text_sheet_basicAttackPrepFlavour_heightFlavour_huge_1",
				"_imp_text_sheet_basicAttackPrepFlavour_heightFlavour_huge_2",
				"_imp_text_sheet_basicAttackPrepFlavour_heightFlavour_huge_3",
			],
		},
	},
	encounterStartFlavour :{
		heightFlavour: {
			small: [
				"_imp_text_sheet_encounterStartFlavour_heightFlavour_small_1",
				"_imp_text_sheet_encounterStartFlavour_heightFlavour_small_2",
				"_imp_text_sheet_encounterStartFlavour_heightFlavour_small_3",
				"_imp_text_sheet_encounterStartFlavour_heightFlavour_small_4",
			],
			medium: [
				"_imp_text_sheet_encounterStartFlavour_heightFlavour_medium_1",
				"_imp_text_sheet_encounterStartFlavour_heightFlavour_medium_2",
				"_imp_text_sheet_encounterStartFlavour_heightFlavour_medium_3",
			],
			large: [
				"_imp_text_sheet_encounterStartFlavour_heightFlavour_large_1",
				"_imp_text_sheet_encounterStartFlavour_heightFlavour_large_2",
				"_imp_text_sheet_encounterStartFlavour_heightFlavour_large_3",
			],
			huge: [
				"_imp_text_sheet_encounterStartFlavour_heightFlavour_huge_1",
				"_imp_text_sheet_encounterStartFlavour_heightFlavour_huge_2",
				"_imp_text_sheet_encounterStartFlavour_heightFlavour_huge_3",
			],
		},
	}
}>>

::_jorm_fight_sheet <475,1975>
<<set setup.FightSheet_Jorm =
{	
    hp: 180,
	stamina: 22,
	strength: 45,
	critChance: 20,
    critDamage: 1.50,
	arousalGain: 20,
	minArousal: 0,
    growthMultiplier: 1,
	bonusGrowth: {
        height: 0,
        cock: 0,
        muscles: 0,
        balls: 0,
    },
	staminaRecovery: 14,
	variables: $FightVariables,
	fightMoveIDs: [setup.FightMove_Basic_Attack.id],
	fightReward: setup.RewardTier.HIGH,
	encounterIntroText: "<<include Encounter_Jorm>>",
	encounterStartText: "<<include Encounter_Start_Lost_Naga>>",
	outcomePlayerWins: "<<include Encounter_Win_Lost_Naga>>",
	outcomePlayerLoses: "<<include Encounter_Loss_Lost_Naga_1>>"
}>>

::_jorm_info_sheet <600,1975>
<<set setup.InfoSheet_Jorm =
{	
    name: "",
	gender: "male",
    corruption: 1000,
	muscles: 80,
	height: 1260,
	cock: 300,
	balls: 100,
	known: setup.EncounterKnownState.UNKNOWN,
	anatomy: {
		heads: {
			number: 1,
			race: setup.RacePool.NAGA,
			colour: setup.ColourPool.DEFAULT
		},
		eyes: {
			number: 2,
			race: setup.RacePool.NAGA,
			colour: setup.ColourPool.DEFAULT
		},
		jaws: {
			number: 1,
			race: setup.RacePool.NAGA,
			colour: setup.ColourPool.DEFAULT
		},
		teeths: {
			number: 1,
			race: setup.RacePool.NAGA,
			colour: setup.ColourPool.DEFAULT
		},
		hands: {
			number: 2,
			race: setup.RacePool.NAGA,
			colour: setup.ColourPool.DEFAULT
		},
		horns: {
			number: 0,
			race: setup.RacePool.NAGA,
			colour: setup.ColourPool.DEFAULT
		},
		wings: {
			number: 0,
			race: setup.RacePool.NAGA,
			colour: setup.ColourPool.DEFAULT
		},
		tongues:{
			number: 1,
			race: setup.RacePool.NAGA,
			colour: setup.ColourPool.DEFAULT
		},
		arms: {
			number: 2,
			race: setup.RacePool.NAGA,
			colour: setup.ColourPool.DEFAULT
		},
		pecs: {
			number: 2,
			race: setup.RacePool.NAGA,
			colour: setup.ColourPool.DEFAULT
		},
		abdominals: {
			number: 8,
			race: setup.RacePool.NAGA,
			colour: setup.ColourPool.DEFAULT
		},
		cocks: {
			number: 2,
			race: setup.RacePool.NAGA,
			colour: setup.ColourPool.DEFAULT
		},
		balls: {
			number: 2,
			race: setup.RacePool.NAGA,
			colour: setup.ColourPool.DEFAULT
		},
		legs: {
			number: 0,
			race: setup.RacePool.NAGA,
			colour: setup.ColourPool.DEFAULT
		},
		tails: {
			number: 1,
			race: setup.RacePool.NAGA,
			colour: setup.ColourPool.DEFAULT
		},
		breasts: {
			number: 0,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.DEFAULT
		},
		vaginas: {
			number: 0,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.DEFAULT
		}
	},
	alive: true
}>>

::Sheets_Jorm <725,1975>
<<include "_jorm_text_sheet">>
<<include "_jorm_fight_sheet">>
<<include "_jorm_info_sheet">>
<<include "_jorm_quest_sheet">>
<<include "_jorm_story_sheet">>


<<set $CharacterSheet_Jorm = setup.CharacterFactory.createCharacter({id: "CharacterSheet_Jorm", 
                                                 info: setup.InfoSheet_Jorm, 
                                                 fight: setup.FightSheet_Jorm, 
                                                 quest: setup.QuestSheet_Jorm, 
                                                 text: "TextSheet_Jorm"})>>

::_jorm_quest_sheet <850,1975>
<<set setup.QuestSheet_Jorm =
{	
    available_encounterPassages_firstTime: true,
    available_encounterPassages_jormPostNameSetup: true,
}>>

::_jorm_story_sheet <975,1975>
<<set setup.StorySheet_Jorm =
{	
    encounterPassages:
    {
        firstTime:
        {
            available: function()
			{
				return State.variables.CharacterSheet_Jorm.quest.available_encounterPassages_firstTime;
			},
            condition: function()
            {
                return true;
            },
            passage: "Jorm_FirstMeeting_Intro",
        },
        jormPostNameSetup:
        {
            available: function()
			{
				return State.variables.CharacterSheet_Jorm.quest.available_encounterPassages_jormPostNameSetup;
			},
            condition: function()
            {
                return true;
            },
            passage: "Jorm_PostNamingPrompt",
        },
    }
}>>

::_jorm_text_sheet <1100,1975>
<<set setup.TextSheet_Jorm =
{	
    
}>>

::_lost_entity_fight_sheet <1225,1975>
<<set setup.FighterSheet_Lost_Entity =
{
	hp: 164,
	stamina: 16,
	strength: 35,
	critChance: 20,
    critDamage: 1.50,
	arousalGain: 20,
	minArousal: 0,
    growthMultiplier: 1,
	bonusGrowth: {
        height: 0,
        cock: 0,
        muscles: 0,
        balls: 0,
    },
	staminaRecovery: 8,
	variables: $FightVariables,
	fightMoveIDs: [setup.FightMove_Basic_Attack.id, setup.FightMove_Infest.id],
	fightReward: setup.RewardTier.HIGH,
	encounterIntroText: "<<include Encounter_Intro_Lost_Entity>>",
	encounterStartText: "<<include Encounter_Start_Lost_Entity>>",
	outcomePlayerWins: "<<include Encounter_Win_Lost_Entity>>",
	outcomePlayerLoses: "<<include Encounter_Loss_Lost_Entity>>"
}>>

::_lost_entity_info_sheet <100,2100>
<<set setup.InfoSheet_Lost_Entity =
{
	name: "",
	gender: "male",
    corruption: 700,
	muscles: 30,
	height: 90,
	cock: 23,
	balls: 8,
	alive: true,
	known: setup.EncounterKnownState.UNKNOWN,
	anatomy: {
		heads: {
			number: 1,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.DEFAULT
		},
		eyes: {
			number: 2,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.DEFAULT
		},
		jaws: {
			number: 1,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.DEFAULT
		},
		teeths: {
			number: 1,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.DEFAULT
		},
		hands: {
			number: 1,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.DEFAULT
		},
		horns: {
			number: 0,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.DEFAULT
		},
		wings: {
			number: 0,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.DEFAULT
		},
		tongues:{
			number: 1,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.VIOLET
		},
		arms: {
			number: 2,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.DEFAULT
		},
		pecs: {
			number: 2,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.DEFAULT
		},
		abdominals: {
			number: 6,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.DEFAULT
		},
		cocks: {
			number: 1,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.DEFAULT
		},
		balls: {
			number: 2,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.DEFAULT
		},
		legs: {
			number: 2,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.DEFAULT
		},
		tails: {
			number: 0,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.DEFAULT
		},
		breasts: {
			number: 0,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.DEFAULT
		},
		vaginas: {
			number: 0,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.DEFAULT
		}
	}
}>>

::Sheets_Lost_Entity <225,2100>
<<include "_lost_entity_text_sheet">>
<<include "_lost_entity_fight_sheet">>
<<include "_lost_entity_info_sheet">>
<<include "_lost_entity_quest_sheet">>

<<set $CharacterSheet_Lost_Entity = setup.CharacterFactory.createCharacter({id: "CharacterSheet_Lost_Entity", 
                                                         info: setup.InfoSheet_Lost_Entity, 
                                                         fight: setup.FighterSheet_Lost_Entity, 
                                                         quest: setup.QuestSheet_Lost_Entity, 
                                                         text: "TextSheet_Lost_Entity"})>>

<<run $CharacterSheet_Lost_Entity.applyAbilityRuntimeData(setup.Ability_HerculeanBuild)>>
<<run $CharacterSheet_Lost_Entity.applyAbilityRuntimeData(setup.Ability_NeverendingGrowth)>>

::_lost_entity_quest_sheet <350,2100>
<<set setup.QuestSheet_Lost_Entity =
{
	met: false,
	beatenOnce: false
}>>

::_lost_entity_text_sheet <475,2100>
<<set setup.TextSheet_Lost_Entity =
{	
}>>

::_lost_harbinger_fight_sheet <600,2100>
<<set setup.FightSheet_Lost_Harbinger =
{
	hp: 80,
	stamina: 20,
	strength: 10,
	critChance: 30,
    critDamage: 1.50,
	arousalGain: 10,
	minArousal: 0,
    growthMultiplier: 1,
	bonusGrowth: {
        height: 0,
        cock: 0,
        muscles: 0,
        balls: 0,
    },
	staminaRecovery: 2,
	variables: $FightVariables,
	fightMoveIDs: [setup.FightMove_Basic_Attack.id, setup.FightMove_Infest.id],
	encounterIntroText: "<<include Encounter_Intro_Harbinger>>"
}>>

::_lost_harbinger_info_sheet <725,2100>
<<set setup.InfoSheet_Lost_Harbinger =
{
	name: "",
	gender: "male",
	corruption: 1000,
	muscles: 30,
	height: 90,
	cock: 23,
	alive: false,
	anatomy: {
		heads: {
			number: 1,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.DEFAULT
		},
		tongues:{
			number: 2,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.VIOLET
		},
		arms: {
			number: 4,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.DEFAULT
		},
		pecs: {
			number: 1,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.DEFAULT
		},
		abdominals: {
			number: 10,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.DEFAULT
		},
		cocks: {
			number: 2,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.DEFAULT
		},
		balls: {
			number: 4,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.DEFAULT
		},
		legs: {
			number: 2,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.DEFAULT
		},
		tails: {
			number: 2,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.DEFAULT
		},
		breasts: {
			number: 0,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.DEFAULT
		},
		vaginas: {
			number: 0,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.DEFAULT
		}
	}
}>>

::Sheets_Lost_Harbinger <850,2100>
<<include "_lost_harbinger_fight_sheet">>
<<include "_lost_harbinger_text_sheet">>
<<include "_lost_harbinger_info_sheet">>
<<include "_lost_harbinger_quest_sheet">>

<<set $CharacterSheet_Lost_Harbinger = setup.CharacterFactory.createCharacter({id: "CharacterSheet_Lost_Harbinger", 
                                                            info: setup.InfoSheet_Lost_Harbinger,
                                                            fight: setup.FightSheet_Lost_Harbinger,
                                                            quest: setup.QuestSheet_Lost_Harbinger,
                                                            text: "TextSheet_Lost_Harbinger"})>>

::_lost_harbinger_quest_sheet <975,2100>
<<set setup.QuestSheet_Lost_Harbinger =
{
	met: false,
	harbingerName: undefined,
	harbingerRace: undefined
}>>

::_lost_harbinger_text_sheet <1100,2100>
<<set setup.TextSheet_Lost_Harbinger =
{	
}>>

::_lost_naga_fight_sheet <1225,2100>
<<set setup.FighterSheet_Lost_Naga =
{
	hp: 500,
	stamina: 22,
	strength: 70,
	critChance: 20,
    critDamage: 1.50,
	arousalGain: 20,
	minArousal: 0,
    growthMultiplier: 1,
	bonusGrowth: {
        height: 0,
        cock: 0,
        muscles: 0,
        balls: 0,
    },
	staminaRecovery: 14,
	variables: $FightVariables,
	fightMoveIDs: [setup.FightMove_Basic_Attack.id, setup.FightMove_Infest.id, setup.FightMove_Hypnotize.id],
	fightReward: setup.RewardTier.HIGH,
	encounterIntroText: "<<include Encounter_Intro_Lost_Naga>>",
	encounterStartText: "<<include Encounter_Start_Lost_Naga>>",
	outcomePlayerWins: "<<include Encounter_Win_Lost_Naga>>",
	outcomePlayerLoses: "<<include Encounter_Loss_Lost_Naga_1>>"
}>>

::_lost_naga_info_sheet <100,2225>
<<set setup.InfoSheet_Lost_Naga =
{
	name: "",
	gender: "male",
    picture: "https://sombreve.github.io/Dawn-of-Corruption-Site/Images/characters/lost_naga.png",
    corruption: 800,
	muscles: 30,
	height: 126,
	cock: 30,
	balls: 10,
	known: setup.EncounterKnownState.UNKNOWN,
	anatomy: {
		heads: {
			number: 1,
			race: setup.RacePool.NAGA,
			colour: setup.ColourPool.DEFAULT
		},
		eyes: {
			number: 2,
			race: setup.RacePool.NAGA,
			colour: setup.ColourPool.DEFAULT
		},
		jaws: {
			number: 1,
			race: setup.RacePool.NAGA,
			colour: setup.ColourPool.DEFAULT
		},
		teeths: {
			number: 1,
			race: setup.RacePool.NAGA,
			colour: setup.ColourPool.DEFAULT
		},
		hands: {
			number: 2,
			race: setup.RacePool.NAGA,
			colour: setup.ColourPool.DEFAULT
		},
		horns: {
			number: 0,
			race: setup.RacePool.NAGA,
			colour: setup.ColourPool.DEFAULT
		},
		wings: {
			number: 0,
			race: setup.RacePool.NAGA,
			colour: setup.ColourPool.DEFAULT
		},
		tongues:{
			number: 1,
			race: setup.RacePool.NAGA,
			colour: setup.ColourPool.DEFAULT
		},
		arms: {
			number: 2,
			race: setup.RacePool.NAGA,
			colour: setup.ColourPool.DEFAULT
		},
		pecs: {
			number: 2,
			race: setup.RacePool.NAGA,
			colour: setup.ColourPool.DEFAULT
		},
		abdominals: {
			number: 8,
			race: setup.RacePool.NAGA,
			colour: setup.ColourPool.DEFAULT
		},
		cocks: {
			number: 2,
			race: setup.RacePool.NAGA,
			colour: setup.ColourPool.DEFAULT
		},
		balls: {
			number: 2,
			race: setup.RacePool.NAGA,
			colour: setup.ColourPool.DEFAULT
		},
		legs: {
			number: 0,
			race: setup.RacePool.NAGA,
			colour: setup.ColourPool.DEFAULT
		},
		tails: {
			number: 1,
			race: setup.RacePool.NAGA,
			colour: setup.ColourPool.DEFAULT
		},
		breasts: {
			number: 0,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.DEFAULT
		},
		vaginas: {
			number: 0,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.DEFAULT
		}
	},
	alive: true
}>>

::Sheets_Lost_Naga <225,2225>
<<include "_lost_naga_fight_sheet">>
<<include "_lost_naga_info_sheet">>
<<include "_lost_naga_quest_sheet">>

<<set $CharacterSheet_Lost_Naga = setup.CharacterFactory.createCharacter({id: "CharacterSheet_Lost_Naga", 
                                                       info:  setup.InfoSheet_Lost_Naga, 
                                                       fight: setup.FighterSheet_Lost_Naga, 
                                                       quest: setup.QuestSheet_Lost_Naga, 
                                                       text:  undefined})>>

<<run $CharacterSheet_Lost_Naga.applyAbilityRuntimeData(setup.Ability_AppetiteForGrowth)>>

::_lost_naga_quest_sheet <350,2225>
<<set setup.QuestSheet_Lost_Naga =
{
	met: false,
	beatenOnce: false,
	fuckedByPlayer: false,
	hasBeenVored: false,
}>>

::_lost_swarm_fight_sheet <475,2225>
<<set setup.FightSheet_Swarm =
{
	hp: 80,
	stamina: 20,
	strength: 10,
	critChance: 30,
    critDamage: 1.50,
	arousalGain: 10,
	minArousal: 0,
    growthMultiplier: 1,
	bonusGrowth: {
        height: 0,
        cock: 0,
        muscles: 0,
        balls: 0,
    },
	staminaRecovery: 2,
	variables: $FightVariables,
	fightMoveIDs: [setup.FightMove_Basic_Attack.id, setup.FightMove_Infest.id],
	encounterIntroText: "<<include Encounter_Intro_Swarm>>"
}>>

::_lost_swarm_info_sheet <600,2225>
<<set setup.InfoSheet_Swarm =
{
	name: "",
	gender: "male",
	numberInSwarm: undefined,
	corruption: 1000,
	muscles: 30,
	height: 90,
	cock: 23,
	balls: 8,
	alive: false,
	anatomy: {
		heads: {
			number: 1,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.DEFAULT
		},
		tongues:{
			number: 2,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.VIOLET
		},
		arms: {
			number: 4,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.DEFAULT
		},
		pecs: {
			number: 1,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.DEFAULT
		},
		abdominals: {
			number: 10,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.DEFAULT
		},
		cocks: {
			number: 2,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.DEFAULT
		},
		balls: {
			number: 4,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.DEFAULT
		},
		legs: {
			number: 2,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.DEFAULT
		},
		tails: {
			number: 2,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.DEFAULT
		},
		breasts: {
			number: 0,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.DEFAULT
		},
		vaginas: {
			number: 0,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.DEFAULT
		}
	}
}>>

::Sheets_Swarm <725,2225>
<<include "_lost_swarm_fight_sheet">>
<<include "_lost_swarm_text_sheet">>
<<include "_lost_swarm_info_sheet">>
<<include "_lost_swarm_quest_sheet">>

<<set $CharacterSheet_Swarm = setup.CharacterFactory.createCharacter({id: "CharacterSheet_Swarm", 
                                                   info:  setup.InfoSheet_Swarm, 
                                                   fight: setup.FightSheet_Swarm, 
                                                   quest: setup.QuestSheet_Swarm, 
                                                   text:  "TextSheet_Swarm"})>>

::_lost_swarm_quest_sheet <850,2225>
<<set setup.QuestSheet_Swarm =
{
	met: false,
	firstSwarm: true
}>>

::_lost_swarm_text_sheet <975,2225>
<<set setup.TextSheet_Swarm =
{	
}>>

::_minotaur_guard_fight_sheet <1100,2225>
<<set setup.FighterSheet_MQ002_Guard =
{
	hp: 250,
	stamina: 35,
	strength: 85,
	critChance: 0,
    critDamage: 1.50,
	arousalGain: 10,
	minArousal: 0,
    growthMultiplier: 1,
	bonusGrowth: {
        height: 0,
        cock: 0,
        muscles: 0,
        balls: 0,
    },
	staminaRecovery: 8,
	variables: $FightVariables,
	fightMoveIDs: [setup.FightMove_Basic_Attack.id, setup.FightMove_ChargedStrike.id],
	fightReward: setup.RewardTier.HIGH,
	encounterIntroText: "",
	encounterStartText: "",
	outcomePlayerWins: "<<include Quest_MQ002_Entrance_PlayerWins>>",
	outcomePlayerLoses: "<<include Quest_MQ002_Entrance_PlayerLoses>>",
	teammateSettings:
	{
		attackTiming: setup.AttackTiming.BEFORE_PLAYER,
	},
}>>

::_minotaur_guard_info_sheet <1225,2225>
<<set setup.InfoSheet_MQ002_Guard =
{
	name: "",
	gender: "male",
	corruption: 0,
	muscles: 80,
	height: 164,
	cock: 18,
	balls: 6,
	anatomy: {
		heads: {
			number: 1,
			race: setup.RacePool.MINOTAUR,
			colour: setup.ColourPool.DEFAULT
		},
		eyes: {
			number: 2,
			race: setup.RacePool.MINOTAUR,
			colour: setup.ColourPool.DEFAULT
		},
		jaws: {
			number: 1,
			race: setup.RacePool.MINOTAUR,
			colour: setup.ColourPool.DEFAULT
		},
		teeths: {
			number: 1,
			race: setup.RacePool.MINOTAUR,
			colour: setup.ColourPool.DEFAULT
		},
		hands: {
			number: 2,
			race: setup.RacePool.MINOTAUR,
			colour: setup.ColourPool.DEFAULT
		},
		horns: {
			number: 2,
			race: setup.RacePool.MINOTAUR,
			colour: setup.ColourPool.DEFAULT
		},
		wings: {
			number: 0,
			race: setup.RacePool.MINOTAUR,
			colour: setup.ColourPool.DEFAULT
		},
		tongues:{
			number: 1,
			race: setup.RacePool.MINOTAUR,
			colour: setup.ColourPool.DEFAULT
		},
		arms: {
			number: 2,
			race: setup.RacePool.MINOTAUR,
			colour: setup.ColourPool.DEFAULT
		},
		pecs: {
			number: 2,
			race: setup.RacePool.MINOTAUR,
			colour: setup.ColourPool.DEFAULT
		},
		abdominals: {
			number: 8,
			race: setup.RacePool.MINOTAUR,
			colour: setup.ColourPool.DEFAULT
		},
		cocks: {
			number: 1,
			race: setup.RacePool.MINOTAUR,
			colour: setup.ColourPool.DEFAULT
		},
		balls: {
			number: 2,
			race: setup.RacePool.MINOTAUR,
			colour: setup.ColourPool.DEFAULT
		},
		legs: {
			number: 2,
			race: setup.RacePool.MINOTAUR,
			colour: setup.ColourPool.DEFAULT
		},
		tails: {
			number: 1,
			race: setup.RacePool.MINOTAUR,
			colour: setup.ColourPool.DEFAULT
		},
		breasts: {
			number: 0,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.DEFAULT
		},
		vaginas: {
			number: 0,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.DEFAULT
		}
	},
	alive: true,
}>>

::Sheets_MQ002_Guard <100,2350>
<<include "_minotaur_guard_fight_sheet">>
<<include "_minotaur_guard_info_sheet">>
<<include "_minotaur_guard_quest_sheet">>

<<set $CharacterSheet_MQ002_Guard = setup.CharacterFactory.createCharacter({id: "CharacterSheet_MQ002_Guard", 
                                                         info: setup.InfoSheet_MQ002_Guard, 
                                                         fight: setup.FighterSheet_MQ002_Guard, 
                                                         quest: setup.QuestSheet_MQ002_Guard, 
                                                         text: undefined})>>
                                                
<<run $CharacterSheet_MQ002_Guard.applyAbilityRuntimeData(setup.Ability_Masochism)>>
<<run $CharacterSheet_MQ002_Guard.applyAbilityRuntimeData(setup.Ability_Masochism)>>
<<run $CharacterSheet_MQ002_Guard.applyAbilityRuntimeData(setup.Ability_Masochism)>>

::_minotaur_guard_quest_sheet <225,2350>
<<set setup.QuestSheet_MQ002_Guard =
{
	met: false,
	movedToCastle: false,
    beaten: false,
    nyxPromise: false,
    lustLevel: 1,
    lustIncrease: false,
}>>

::_nyx_parasite_fight_sheet <350,2350>
<<set setup.FighterSheet_MQ002_NyxParasite =
{
	hp: 210,
	stamina: 35,
	strength: 85,
	critChance: 30,
    critDamage: 1.50,
	arousalGain: 10,
	minArousal: 0,
    growthMultiplier: 1,
	bonusGrowth: {
        height: 0,
        cock: 0,
        muscles: 0,
        balls: 0,
    },
	staminaRecovery: 12,
	variables: $FightVariables,
	fightMoveIDs: [setup.FightMove_WitheringVenom.id],
	fightReward: setup.RewardTier.HIGH,
	encounterIntroText: "<<include Quest_MQ002_NyxParasiteEncounter_FightIntro>>",
	encounterStartText: "",
	outcomePlayerWins: "<<include Quest_MQ002_NyxParasiteEncounter_PlayerWins>>",
	outcomePlayerLoses: "<<include Quest_MQ002_NyxParasiteEncounter_PlayerLoses>>"
}>>

::_nyx_parasite_info_sheet <475,2350>
<<set setup.InfoSheet_MQ002_NyxParasite =
{
	name: "",
	gender: "male",
    picture: "https://sombreve.github.io/Dawn-of-Corruption-Site/Images/characters/nyx_parasite.png",
	corruption: 9000,
	muscles: 10,
	height: 80,
	cock: 2,
	balls: 1,
	alive: true,
	anatomy: {
		heads: {
			number: 1,
			race: setup.RacePool.INCUBUS,
			colour: setup.ColourPool.DEFAULT
		},
		eyes: {
			number: 1,
			race: setup.RacePool.INCUBUS,
			colour: setup.ColourPool.DEFAULT
		},
		jaws: {
			number: 1,
			race: setup.RacePool.INCUBUS,
			colour: setup.ColourPool.DEFAULT
		},
		teeths: {
			number: 1,
			race: setup.RacePool.INCUBUS,
			colour: setup.ColourPool.DEFAULT
		},
		hands: {
			number: 0,
			race: setup.RacePool.INCUBUS,
			colour: setup.ColourPool.DEFAULT
		},
		horns: {
			number: 0,
			race: setup.RacePool.INCUBUS,
			colour: setup.ColourPool.DEFAULT
		},
		wings: {
			number: 0,
			race: setup.RacePool.INCUBUS,
			colour: setup.ColourPool.DEFAULT
		},
		tongues:{
			number: 0,
			race: setup.RacePool.INCUBUS,
			colour: setup.ColourPool.DEFAULT
		},
		arms: {
			number: 0,
			race: setup.RacePool.INCUBUS,
			colour: setup.ColourPool.DEFAULT
		},
		pecs: {
			number: 0,
			race: setup.RacePool.INCUBUS,
			colour: setup.ColourPool.DEFAULT
		},
		abdominals: {
			number: 0,
			race: setup.RacePool.INCUBUS,
			colour: setup.ColourPool.DEFAULT
		},
		cocks: {
			number: 0,
			race: setup.RacePool.INCUBUS,
			colour: setup.ColourPool.DEFAULT
		},
		balls: {
			number: 0,
			race: setup.RacePool.INCUBUS,
			colour: setup.ColourPool.DEFAULT
		},
		legs: {
			number: 0,
			race: setup.RacePool.INCUBUS,
			colour: setup.ColourPool.DEFAULT
		},
		tails: {
			number: 1,
			race: setup.RacePool.INCUBUS,
			colour: setup.ColourPool.DEFAULT
		},
		breasts: {
			number: 0,
			race: setup.RacePool.INCUBUS,
			colour: setup.ColourPool.DEFAULT
		},
		vaginas: {
			number: 0,
			race: setup.RacePool.INCUBUS,
			colour: setup.ColourPool.DEFAULT
		}
	}
}>>

::Sheets_MQ002_NyxParasite <600,2350>
<<include "_nyx_parasite_fight_sheet">>
<<include "_nyx_parasite_info_sheet">>
<<include "_nyx_parasite_quest_sheet">>

<<set $CharacterSheet_MQ002_NyxParasite = setup.CharacterFactory.createCharacter({id: "CharacterSheet_MQ002_NyxParasite", 
                                                               info:  setup.InfoSheet_MQ002_NyxParasite, 
                                                               fight: setup.FighterSheet_MQ002_NyxParasite, 
                                                               quest: setup.QuestSheet_MQ002_NyxParasite, 
                                                               text:  undefined})>>

::_nyx_parasite_quest_sheet <725,2350>
<<set setup.QuestSheet_MQ002_NyxParasite =
{
	met: false
}>>

::_player_audio_voice1 <850,2350>
<<set setup.AudioSheet_Voice1_Player =
{
    voice:
    {
        playlist:
        {
            title: "characterVoice_Voice1_Player",
            tracks:
            {
                arousal_1_Size_1_Corrupt_1:
                {
                    tags: ["arousal_1", "Size_1"],
                    track: "Idle_Voice1_A1_S1_C1"
                },
                arousal_2_Size_1_Corrupt_1:
                {
                    tags: ["arousal_2", "Size_1"],
                    track: "Idle_Voice1_A2_S1_C1"
                },
                arousal_3_Size_1_Corrupt_1:
                {
                    tags: ["arousal_3", "Size_1"],
                    track: "Idle_Voice1_A3_S1_C1"
                },
                arousal_4_Size_1_Corrupt_1:
                {
                    tags: ["arousal_4", "Size_1"],
                    track: "Idle_Voice1_A4_S1_C1"
                },
                arousal_1_Size_2_Corrupt_1:
                {
                    tags: ["arousal_1", "Size_2"],
                    track: "Idle_Voice1_A1_S2_C1"
                },
                arousal_2_Size_2_Corrupt_1:
                {
                    tags: ["arousal_2", "Size_2"],
                    track: "Idle_Voice1_A2_S2_C1"
                },
                arousal_3_Size_2_Corrupt_1:
                {
                    tags: ["arousal_3", "Size_2"],
                    track: "Idle_Voice1_A3_S2_C1"
                },
                arousal_4_Size_2_Corrupt_1:
                {
                    tags: ["arousal_4", "Size_2"],
                    track: "Idle_Voice1_A4_S2_C1"
                },
                arousal_1_Size_3_Corrupt_1:
                {
                    tags: ["arousal_1", "Size_3"],
                    track: "Idle_Voice1_A1_S3_C1"
                },
                arousal_2_Size_3_Corrupt_1:
                {
                    tags: ["arousal_2", "Size_3"],
                    track: "Idle_Voice1_A2_S3_C1"
                },
                arousal_3_Size_3_Corrupt_1:
                {
                    tags: ["arousal_3", "Size_3"],
                    track: "Idle_Voice1_A3_S3_C1"
                },
                arousal_4_Size_3_Corrupt_1:
                {
                    tags: ["arousal_4", "Size_3"],
                    track: "Idle_Voice1_A4_S3_C1"
                },
                arousal_1_Size_4_Corrupt_1:
                {
                    tags: ["arousal_1", "Size_4"],
                    track: "Idle_Voice1_A1_S4_C1"
                },
                arousal_2_Size_4_Corrupt_1:
                {
                    tags: ["arousal_2", "Size_4"],
                    track: "Idle_Voice1_A2_S4_C1"
                },
                arousal_3_Size_4_Corrupt_1:
                {
                    tags: ["arousal_3", "Size_4"],
                    track: "Idle_Voice1_A3_S4_C1"
                },
                arousal_4_Size_4_Corrupt_1:
                {
                    tags: ["arousal_4", "Size_4"],
                    track: "Idle_Voice1_A4_S4_C1"
                },
            },
        },
    },
}>>

::_player_audio_voice2 <975,2350>
<<set setup.AudioSheet_Voice2_Player =
{
    voice:
    {
        playlist:
        {
            title: "characterVoice_Voice2_Player",
            tracks:
            {
                arousal_1_Size_1_Corrupt_1:
                {
                    tags: ["arousal_1", "Size_1"],
                    track: "Idle_Voice2_A1_S1"
                },
                arousal_2_Size_1_Corrupt_1:
                {
                    tags: ["arousal_2", "Size_1"],
                    track: "Idle_Voice2_A2_S1"
                },
                arousal_3_Size_1_Corrupt_1:
                {
                    tags: ["arousal_3", "Size_1"],
                    track: "Idle_Voice2_A3_S1"
                },
                arousal_4_Size_1_Corrupt_1:
                {
                    tags: ["arousal_4", "Size_1"],
                    track: "Idle_Voice2_A4_S1"
                },
                arousal_5_Size_1_Corrupt_1:
                {
                    tags: ["arousal_5", "Size_1"],
                    track: "Idle_Voice2_A5_S1"
                },
                arousal_1_Size_2_Corrupt_1:
                {
                    tags: ["arousal_1", "Size_2"],
                    track: "Idle_Voice2_A1_S2"
                },
                arousal_2_Size_2_Corrupt_1:
                {
                    tags: ["arousal_2", "Size_2"],
                    track: "Idle_Voice2_A2_S2"
                },
                arousal_3_Size_2_Corrupt_1:
                {
                    tags: ["arousal_3", "Size_2"],
                    track: "Idle_Voice2_A3_S2"
                },
                arousal_4_Size_2_Corrupt_1:
                {
                    tags: ["arousal_4", "Size_2"],
                    track: "Idle_Voice2_A4_S2"
                },
                arousal_5_Size_2_Corrupt_1:
                {
                    tags: ["arousal_5", "Size_2"],
                    track: "Idle_Voice2_A5_S2"
                },
                arousal_1_Size_3_Corrupt_1:
                {
                    tags: ["arousal_1", "Size_3"],
                    track: "Idle_Voice2_A1_S3"
                },
                arousal_2_Size_3_Corrupt_1:
                {
                    tags: ["arousal_2", "Size_3"],
                    track: "Idle_Voice2_A2_S3"
                },
                arousal_3_Size_3_Corrupt_1:
                {
                    tags: ["arousal_3", "Size_3"],
                    track: "Idle_Voice2_A3_S3"
                },
                arousal_4_Size_3_Corrupt_1:
                {
                    tags: ["arousal_4", "Size_3"],
                    track: "Idle_Voice2_A4_S3"
                },
                arousal_5_Size_3_Corrupt_1:
                {
                    tags: ["arousal_5", "Size_3"],
                    track: "Idle_Voice2_A5_S3"
                },
                arousal_1_Size_4_Corrupt_1:
                {
                    tags: ["arousal_1", "Size_4"],
                    track: "Idle_Voice2_A1_S4"
                },
                arousal_2_Size_4_Corrupt_1:
                {
                    tags: ["arousal_2", "Size_4"],
                    track: "Idle_Voice2_A2_S4"
                },
                arousal_3_Size_4_Corrupt_1:
                {
                    tags: ["arousal_3", "Size_4"],
                    track: "Idle_Voice2_A3_S4"
                },
                arousal_4_Size_4_Corrupt_1:
                {
                    tags: ["arousal_4", "Size_4"],
                    track: "Idle_Voice2_A4_S4"
                },
                arousal_5_Size_4_Corrupt_1:
                {
                    tags: ["arousal_5", "Size_4"],
                    track: "Idle_Voice2_A5_S4"
                },
            },
        },
    },
}>>

::_player_fight_sheet <1100,2350>
<<set setup.FighterSheet_Player =
{
	hp: 40,
	stamina: 30,
	strength: 5,
	critChance: 10,
	critDamage: 1.50,
	arousalGain: 20,
	actionSlots: 3,
	comboMovesPerTurn: 4,
    essenceModifierToAdd: 0,
	growthMultiplier: 0.15,
	xpMultiplier: 1,
	bonusGrowth: {
        height: 0,
        cock: 0,
        muscles: 0,
        balls: 0,
    },
	minArousal: 0,
	staminaRecovery: 4,
	variables: $FightVariables,
	fightMoveIDs: [setup.FightMove_Basic_Attack.id, setup.FightMove_Slash.id, setup.FightMove_Bash.id, setup.FightMove_Sigil_Perception.id, setup.FightMove_Focus.id, setup.FightMove_Do_Nothing.id, setup.FightMove_Submit_Completely.id],
	abilities: [],
	teammate: undefined,
	unlockedTeammates: [],
	outcomePlayerWins: "",
	outcomePlayerLoses: ""
}>>

<<set $EquippedFightMoveIDs = setup.FighterSheet_Player.fightMoveIDs>>

::_player_info_sheet <1225,2350>
<<include "_player_audio_voice1">>
<<include "_player_audio_voice2">>

<<set setup.InfoSheet_Player =
{
	name: "",
	gender: "male",
	audioSheet: "AudioSheet_Voice2_Player",
	corruption: 0,
	corruptionPerDay: 0,
	accumulatedCorruption: 0,
	muscles: 0,
	height: 68,
	cock: 6,
	balls: 2,
	overgrowth:
	{
		height: 0,
		cock: 0,
		balls: 0,
		muscles: 0,
	},
	limitBreaks: {
		points: 0,
		cap:
		{
			height: 0,
			cock: 0,
			balls: 0,
			muscles: 0,
		},
	},
	anatomy: {
		heads: {
			number: 1,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.DEFAULT
		},
		eyes: {
			number: 2,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.DEFAULT
		},
		jaws: {
			number: 1,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.DEFAULT
		},
		teeths: {
			number: 1,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.DEFAULT
		},
		hands: {
			number: 2,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.DEFAULT
		},
		horns: {
			number: 0,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.DEFAULT
		},
		wings: {
			number: 0,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.DEFAULT
		},
		tongues:{
			number: 1,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.DEFAULT
		},
		arms: {
			number: 2,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.DEFAULT
		},
		pecs: {
			number: 2,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.DEFAULT
		},
		abdominals: {
			number: 6,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.DEFAULT
		},
		cocks: {
			number: 1,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.DEFAULT
		},
		balls: {
			number: 2,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.DEFAULT
		},
		legs: {
			number: 2,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.DEFAULT
		},
		tails: {
			number: 0,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.DEFAULT
		},
		breasts: {
			number: 0,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.DEFAULT
		},
		vaginas: {
			number: 0,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.DEFAULT
		}
	}
}>>

::Sheets_Player <100,2475>
<<include "_player_text_sheet">>
<<include "_player_fight_sheet">>
<<include "_player_info_sheet">>
<<include "_symbiote_info_sheet">>
<<include "_player_quest_sheet">>
<<include "_player_story_sheet">>

<<set $CharacterSheet_Player = setup.CharacterFactory.createCharacter({id: "CharacterSheet_Player",
                                                    info: setup.InfoSheet_Player,
                                                    symbiote: setup.InfoSheet_Symbiote,  
                                                    fight: setup.FighterSheet_Player, 
                                                    quest: setup.QuestSheet_Player, 
                                                    text: "TextSheet_Player"}
)>>

<<run setup.setRace($CharacterSheet_Player.symbiote.anatomy, setup.RacePool.SYMBIOTE)>>
<<set $CharacterSheet_Player.symbiote.color = setup.ColourPool.WHITE>>
<<set $CharacterSheet_Player.symbiote.name = "Echo">>

\<<run $CharacterSheet_Player.applyAbilityRuntimeData(setup.Ability_Uncorrupted);>>
\<<run $CharacterSheet_Player.applyAbilityRuntimeData(setup.Ability_MinorCorruption);>>
\<<run $CharacterSheet_Player.applyAbilityRuntimeData(setup.Ability_MajorCorruption);>>
\<<run $CharacterSheet_Player.applyAbilityRuntimeData(setup.Ability_OverwhelmingCorruption);>>
\<<run $CharacterSheet_Player.applyAbilityRuntimeData(setup.Ability_LostInCorruption);>>
\<<run $CharacterSheet_Player.applyAbilityRuntimeData(setup.Ability_LordOfCorruption);>>
\<<run $CharacterSheet_Player.applyAbilityRuntimeData(setup.Ability_ProcessingCorruption);>>

\<<run $CharacterSheet_Player.applyAbilityRuntimeData(setup.Achievement_OffTheDeepEnd);>>
\<<run $CharacterSheet_Player.applyAbilityRuntimeData(setup.Achievement_BaptismInCorruption);>>
\<<run $CharacterSheet_Player.applyAbilityRuntimeData(setup.Achievement_HostOfTheSpawns);>>
\<<run $CharacterSheet_Player.applyAbilityRuntimeData(setup.Achievement_LordOfTheSpawns);>>
\<<run $CharacterSheet_Player.applyAbilityRuntimeData(setup.Achievement_SubmissiveFighter);>>
\<<run $CharacterSheet_Player.applyAbilityRuntimeData(setup.Achievement_MightOfAugwult);>>
\<<run $CharacterSheet_Player.applyAbilityRuntimeData(setup.Achievement_DamnatoryKnowledge);>>
\<<run $CharacterSheet_Player.applyAbilityRuntimeData(setup.Achievement_WordOfPower);>>
\<<run $CharacterSheet_Player.applyAbilityRuntimeData(setup.Achievement_Resolute);>>
\<<run $CharacterSheet_Player.applyAbilityRuntimeData(setup.Achievement_Redemption);>>
\<<run $CharacterSheet_Player.applyAbilityRuntimeData(setup.Achievement_MasterOfTheBarrens);>>
\<<run $CharacterSheet_Player.applyAbilityRuntimeData(setup.Achievement_GodAmongstMen);>>
\<<run $CharacterSheet_Player.applyAbilityRuntimeData(setup.Achievement_CockRingOfTheBind);>>
\<<run $CharacterSheet_Player.applyAbilityRuntimeData(setup.Achievement_CollarOfTheBind);>>
\<<run $CharacterSheet_Player.applyAbilityRuntimeData(setup.Achievement_SafePassage);>>
\<<run $CharacterSheet_Player.applyAbilityRuntimeData(setup.Achievement_ExplorerOfCorruptedDepths);>>
\<<run $CharacterSheet_Player.applyAbilityRuntimeData(setup.Achievement_ShiftingIdeals);>>

\<<run $CharacterSheet_Player.applyAbilityRuntimeData(setup.Achievement_MemoriesOfKanathar);>>
\<<run $CharacterSheet_Player.applyAbilityRuntimeData(setup.Achievement_MemoriesOfDemonicAscent);>>
\<<run $CharacterSheet_Player.applyAbilityRuntimeData(setup.Achievement_MemoriesOfTheLost);>>
\<<run $CharacterSheet_Player.applyAbilityRuntimeData(setup.Achievement_IncompleteMemories);>>
\<<run $CharacterSheet_Player.applyAbilityRuntimeData(setup.Achievement_MemoriesOfTheMinotaur);>>
\<<run $CharacterSheet_Player.applyAbilityRuntimeData(setup.Ability_MemoriesOfNyx);>>
\<<run $CharacterSheet_Player.applyAbilityRuntimeData(setup.Ability_MemoriesOfCray);>>
\<<run $CharacterSheet_Player.applyAbilityRuntimeData(setup.Ability_MemoriesOfApothus);>>

::_player_quest_sheet <225,2475>
<<set setup.QuestSheet_Player = 
{
	met: true,
	knowsAboutNyx: false,
	curseOfTheNagaStatDrain:
	{
		muscles: 0,
		height: 0,
		cock: 0,
		balls: 0,
	},
	nyxParasiteInfections: 0,
	corruptionVillageExiled: false,
	oaths:
	{
		drenth: setup.Oath.NONE,
        apothus: setup.Oath.NONE,
	},
	apothusRealmFirstTime: true,
	available_enterVillage_corruption_FirstWarning: true,
	available_enterVillage_exiled: true,
	available_enterVillage_normal: true,
	available_exploration_villageGateNorth_northFirstTime: true,
	available_exploration_villageGateNorth_northGrownMuscular: true,
	available_exploration_villageGateNorth_northVisibleCorruption: true,
	available_exploration_villageGateNorth_northGrownHeight: true,
	available_exploration_villageGateNorth_northGrownHeightMassive: true,
	available_exploration_villageGateEast_eastFirstTime: true,
	available_exploration_villageGateEast_eastGrownMacro: true,
	available_exploration_villageGateEast_eastGrownDemonic: true,
	available_exploration_villageGateEast_eastGrownParasites: true,
	available_exploration_villageGateEast_eastGrownLordOfLust: true,
	available_exploration_villageGateEast_eastGrownMegaMacro: true,
}>>

::_player_story_sheet <350,2475>
<<set setup.StorySheet_Player = 
{
	enterVillage:
	{		
		corruption_FirstWarning:
		{
			available: function()
			{
				return State.variables.CharacterSheet_Player.quest.available_enterVillage_corruption_FirstWarning;
			},
			condition: function()
			{
				return setup.getStatValue(State.variables.CharacterSheet_Player, "corruption") > setup.CorruptionComparators.NEUTRAL && State.variables.CharacterSheet_Player.quest.corruptionVillageExiled == false;
			},
			passage: "Village_Corruption_FirstWarning",
		},
		exiled:
		{
			available: function()
			{
				return State.variables.CharacterSheet_Player.quest.available_enterVillage_exiled;
			},
			condition: function()
			{
				return State.variables.CharacterSheet_Player.quest.corruptionVillageExiled == true;
			},
			passage: "Village_Exiled",
		},
		normal:
		{
			available: function()
			{
				return State.variables.CharacterSheet_Player.quest.available_enterVillage_normal;
			},
			condition: function()
			{
				return true;
			},
			passage: "Village_Normal",
		},
	},
	exploration:
	{
		villageGateNorth:
		{
			northFirstTime:
			{
				available: function()
				{
					return State.variables.CharacterSheet_Player.quest.available_exploration_villageGateNorth_northFirstTime;
				},
				condition: function()
				{
					return true;
				},
				passage: "Explore_NorthFirstTime",
			},
			northGrownMuscular:
			{
				available: function()
				{
					return State.variables.CharacterSheet_Player.quest.available_exploration_villageGateNorth_northGrownMuscular;
				},
				condition: function()
				{
					return setup.getStatValue(State.variables.CharacterSheet_Player, "muscles") > 30;
				},
				passage: "Explore_NorthGrownMuscular",
			},
			northVisibleCorruption:
			{
				available: function()
				{
					return State.variables.CharacterSheet_Player.quest.available_exploration_villageGateNorth_northVisibleCorruption;
				},
				condition: function()
				{
					return setup.getStatValue(State.variables.CharacterSheet_Player, "corruption") > 25;
				},
				passage: "Explore_NorthVisibleCorruption",
			},
			northGrownHeight:
			{
				available: function()
				{
					return State.variables.CharacterSheet_Player.quest.available_exploration_villageGateNorth_northGrownHeight;
				},
				condition: function()
				{
					var height = setup.getStatValue(State.variables.CharacterSheet_Player, "height");
					return  height > (25 * 12) && height < (50 * 12);
				},
				passage: "Explore_NorthGrownHeight",
			},
			northGrownHeightMassive:
			{
				available: function()
				{
					return State.variables.CharacterSheet_Player.quest.available_exploration_villageGateNorth_northGrownHeightMassive;
				},
				condition: function()
				{
					var height = setup.getStatValue(State.variables.CharacterSheet_Player, "height");
					return  height > (50 * 12);
				},
				passage: "Explore_NorthGrownHeightMassive",
			},
		},
		villageGateEast:
		{
			eastFirstTime:
			{
				available: function()
				{
					return State.variables.CharacterSheet_Player.quest.available_exploration_villageGateEast_eastFirstTime;
				},
				condition: function()
				{
					return true;
				},
				passage: "Explore_EastFirstTime",
			},
			eastGrownMacro:
			{
				available: function()
				{
					return State.variables.CharacterSheet_Player.quest.available_exploration_villageGateEast_eastGrownMacro;
				},
				condition: function()
				{
					return setup.getStatValue(State.variables.CharacterSheet_Player, "height") > (50 * 12);
				},
				passage: "Explore_EastGrownMacro",
			},
			eastGrownDemonic:
			{
				available: function()
				{
					return State.variables.CharacterSheet_Player.quest.available_exploration_villageGateEast_eastGrownDemonic;
				},
				condition: function()
				{
					return setup.getRace(State.variables.CharacterSheet_Player.info.anatomy).toUpperCase() == "DEMON";
				},
				passage: "Explore_EastGrownDemonic",
			},
			eastGrownParasites:
			{
				available: function()
				{
					return State.variables.CharacterSheet_Player.quest.available_exploration_villageGateEast_eastGrownParasites;
				},
				condition: function()
				{
					return State.variables.CharacterSheet_Player.quest.nyxParasiteInfections >= 10;
				},
				passage: "Explore_EastGrownParasites",
			},			
			eastGrownLordOfLust:
			{
				available: function()
				{
					return State.variables.CharacterSheet_Player.quest.available_exploration_villageGateEast_eastGrownLordOfLust;
				},
				condition: function()
				{
					return setup.getRace(State.variables.CharacterSheet_Player.info.anatomy).toUpperCase() == "LORD OF LUST";
				},
				passage: "Explore_EastGrownLordOfLust",
			},
			eastGrownMegaMacro:
			{
				available: function()
				{
					return State.variables.CharacterSheet_Player.quest.available_exploration_villageGateEast_eastGrownMegaMacro;
				},
				condition: function()
				{
					return setup.getStatValue(State.variables.CharacterSheet_Player, "height") > (200 * 12);
				},
				passage: "Explore_EastGrownMegaMacro",
			},
		},
	}
}>>

::_player_text_sheet_mergeLost1_heightFlavour_small <475,2475>
\
@[1|cocks|noverb]



""

\
@[all|tongues|noverb]

""

@[all|tongues|noverb]

@[all|cocks|noverb]

::_player_text_sheet_mergeLost1_heightFlavour_medium <600,2475>
\
@[1|cocks|noverb]



""

\
@[all|tongues|noverb]

""

@[all|tongues|noverb]

@[all|cocks|noverb]

::_player_text_sheet_mergeLost1_heightFlavour_large <725,2475>
\
@[1|cocks|noverb] \
@[1|cocks|noverb]



""

\


""

@[all|balls|noverb]

@[all|cocks|noverb]

@[all|balls|noverb]


::_player_text_sheet_mergeLost1_heightFlavour_huge <850,2475>
\
@[1|cocks|noverb]\


\


@[all|cocks|noverb]\
\


""

\


""

@[all|cocks|noverb]\


;
				


::_player_text_sheet_lostKiss_heightFlavour_small <975,2475>
@[2|hands|noverb]

@[all|tongues|noverb]\
@[all|cocks|noverb]

::_player_text_sheet_lostKiss_heightFlavour_medium <1100,2475>
@[2|hands|noverb]

@[all|tongues|noverb]\
@[all|cocks|noverb]

::_player_text_sheet_lostKiss_heightFlavour_large <1225,2475>
@[1|cocks|noverb]

@[all|tongues|noverb]\
@[all|pecs|noverb]

::_player_text_sheet_lostKiss_heightFlavour_huge <100,2600>
@[all|cocks|noverb]

@[all|tongues|noverb]\
@[all|pecs|noverb]

::_player_text_sheet_lostFuck2_heightFlavour_small <225,2600>
\








@[all|cock|noverb]\
\
@[all|balls|noverb]



""

@[all|balls|noverb]\


""

@[all|cocks|noverb]

\


::_player_text_sheet_lostFuck2_heightFlavour_medium <350,2600>
\








@[all|cock|noverb]

\
@[all|balls|noverb]



""

@[all|balls|noverb]\


""

@[all|cocks|noverb]





::_player_text_sheet_lostFuck2_heightFlavour_large <475,2600>








\
@[all|cocks|noverb]

\
@[all|balls|noverb]



""





""

\


\




::_player_text_sheet_lostFuck2_heightFlavour_huge <600,2600>








@[all|balls|noverb]\
@[all|cocks|noverb]\


\
\
@[1|cocks|noverb]



""

\
@[all|balls|noverb]\


"" 





\


@[1|cocks|noverb]



::_player_text_sheet_lostFuck1_heightFlavour_small <725,2600>
\


@[2|cocks|noverb]





""





@[all| arms|noverb]\
\


""









""

::_player_text_sheet_lostFuck1_heightFlavour_medium <850,2600>
\


@[2|cocks|noverb]





""





@[all| arms|noverb]\
\


""









""

::_player_text_sheet_lostFuck1_heightFlavour_large <975,2600>
\


@[2|cocks|noverb]





""

\






""

[1|hands|noverb]\










"" @[1|cocks|noverb]

::_player_text_sheet_lostFuck1_heightFlavour_huge <1100,2600>
\
\


@[1|hands|noverb]@[all|pre-leaking|cocks| noverb]





\
\


""

\
\






""

@[all|cocks|noverb]\










""

::_player_text_sheet_lostWin1_heightFlavour_small <1225,2600>
\
@[all|cocks|noverb]\




::_player_text_sheet_lostWin1_heightFlavour_medium <100,2725>
@[1|hands|noverb]\
@[all|cocks|noverb]\




::_player_text_sheet_lostWin1_heightFlavour_large <225,2725>
@[1|hands|noverb]@[all|cocks|noverb]\
\


@[1|hands|noverb]

::_player_text_sheet_lostWin1_heightFlavour_huge <350,2725>
@[1|hands|noverb]@[all|cocks|noverb]\


\
\



::_player_text_sheet_mirror_player_CrotchFlavour_heightFlavour_small <475,2725>
@[all| cocks| noverb]\
\
@[all| balls| noverb]

::_player_text_sheet_mirror_player_CrotchFlavour_heightFlavour_medium <600,2725>
@[all| cocks| noverb]\
\


@[all| balls| noverb]

::_player_text_sheet_mirror_player_CrotchFlavour_heightFlavour_large <725,2725>
@[all| cocks| noverb]

\


\
\
@[all| balls| noverb]

::_player_text_sheet_mirror_player_CrotchFlavour_heightFlavour_huge <850,2725>
@[all| cocks| noverb]

\


\
@[all| balls| noverb]\


::_player_text_sheet_mirror_player_CrotchFlavour_corruptionFlavour_corrupt50 <975,2725>


::_player_text_sheet_mirror_player_CrotchFlavour_corruptionFlavour_corrupt75 <1100,2725>
@[all|cocks|noverb]

::_player_text_sheet_mirror_player_CrotchFlavour_corruptionFlavour_corrupt100 <1225,2725>
@[all|cocks|noverb]

\


::_player_text_sheet_mirror_player_mirror_symbiote_CrotchFlavour_heightFlavour_small <100,2850>
<<SymbioteColor>>@[all| cocks| noverb]\


@[all| cocks| noverb]\
@[all| balls| noverb]

::_player_text_sheet_mirror_player_mirror_symbiote_CrotchFlavour_heightFlavour_medium <225,2850>
@[all| cocks| noverb]<<SymbioteName>>\


@[all| cocks| noverb]\
@[all| balls| noverb]<<SymbioteName>>

::_player_text_sheet_mirror_player_mirror_symbiote_CrotchFlavour_heightFlavour_large <350,2850>
@[all| cocks| noverb]<<SymbioteName>>\


\


@[all| balls| noverb]\


::_player_text_sheet_mirror_player_mirror_symbiote_CrotchFlavour_heightFlavour_huge <475,2850>
@[all| cocks| noverb]<<SymbioteName>>\
<<SymbioteName>>

\
\
@[all| balls| noverb]\


::_player_text_sheet_mirror_player_mirror_symbiote_CrotchFlavour_corruptionFlavour_corrupt50 <600,2850>


::_player_text_sheet_mirror_player_mirror_symbiote_CrotchFlavour_corruptionFlavour_corrupt75 <725,2850>
@[all|cocks|noverb]

::_player_text_sheet_mirror_player_mirror_symbiote_CrotchFlavour_corruptionFlavour_corrupt100 <850,2850>
@[all|cocks|noverb]

::_player_text_sheet_mirror_player_TailFlavour_heightFlavour_small <975,2850>
@[all| tails|noverb]\


::_player_text_sheet_mirror_player_TailFlavour_heightFlavour_medium <1100,2850>
@[all|tails|noverb]\


::_player_text_sheet_mirror_player_TailFlavour_heightFlavour_large <1225,2850>
@[all| tails|noverb]\
\


::_player_text_sheet_mirror_player_TailFlavour_heightFlavour_huge <100,2975>
@[all| tails|noverb]\
\
\


::_player_text_sheet_mirror_player_TailFlavour_corruptionFlavour_corrupt50 <225,2975>


::_player_text_sheet_mirror_player_TailFlavour_corruptionFlavour_corrupt75 <350,2975>


::_player_text_sheet_mirror_player_TailFlavour_corruptionFlavour_corrupt100 <475,2975>
\


::_player_text_sheet_mirror_symbiote_TailFlavour_heightFlavour_small <600,2975>
@[all| tails| noverb]

::_player_text_sheet_mirror_symbiote_TailFlavour_heightFlavour_medium <725,2975>
@[all| tails| noverb]

::_player_text_sheet_mirror_symbiote_TailFlavour_heightFlavour_large <850,2975>
@[all| tails|noverb]\
"

::_player_text_sheet_mirror_symbiote_TailFlavour_heightFlavour_huge <975,2975>
@[all|tails|noverb]\
<<SymbioteColor>>

::_player_text_sheet_mirror_symbiote_TailFlavour_corruptionFlavour_corrupt25 <1100,2975>
<<SymbioteName>><<SymbioteName>>

::_player_text_sheet_mirror_symbiote_TailFlavour_corruptionFlavour_corrupt50 <1225,2975>
@[none| tails| noverb]<<SymbioteName>>

::_player_text_sheet_mirror_symbiote_TailFlavour_corruptionFlavour_corrupt75 <100,3100>
\
<<SymbioteName>><<SymbioteColor>>

::_player_text_sheet_mirror_symbiote_TailFlavour_corruptionFlavour_corrupt100 <225,3100>
@[none| tails| noverb]\
<<SymbioteName>><<SymbioteColor>>

::_player_text_sheet_mirror_symbiote_TailFlavour_LiveForEcho_heightFlavour_small <350,3100>
<<SymbioteName>>

::_player_text_sheet_mirror_symbiote_TailFlavour_LiveForEcho_heightFlavour_medium <475,3100>
<<<<SymbioteName>>

::_player_text_sheet_mirror_symbiote_TailFlavour_LiveForEcho_heightFlavour_large <600,3100>
<<SymbioteName>>

::_player_text_sheet_mirror_symbiote_TailFlavour_LiveForEcho_heightFlavour_huge <725,3100>
<<SymbioteName>>

::_player_text_sheet_mirror_player_WingsFlavour_heightFlavour_small <850,3100>
@[all| wings|noverb]\


::_player_text_sheet_mirror_player_WingsFlavour_heightFlavour_medium <975,3100>
@[all| wings|noverb]\
\


::_player_text_sheet_mirror_player_WingsFlavour_heightFlavour_large <1100,3100>
@[all| wings|noverb]\
\


::_player_text_sheet_mirror_player_WingsFlavour_heightFlavour_huge <1225,3100>
@@[all| wings|noverb]\


\


::_player_text_sheet_mirror_player_WingsFlavour_corruptionFlavour_corrupt50 <100,3225>


::_player_text_sheet_mirror_player_WingsFlavour_corruptionFlavour_corrupt75 <225,3225>


::_player_text_sheet_mirror_player_WingsFlavour_corruptionFlavour_corrupt100 <350,3225>


::_player_text_sheet_mirror_symbiote_WingsFlavour_heightFlavour_small <475,3225>
@[all| wings|noverb]\


::_player_text_sheet_mirror_symbiote_WingsFlavour_heightFlavour_medium <600,3225>
@[all| wings| noverb]<<SymbioteName>>\


\
\


::_player_text_sheet_mirror_symbiote_WingsFlavour_heightFlavour_large <725,3225>
@[all| wings| noverb]\


::_player_text_sheet_mirror_symbiote_WingsFlavour_heightFlavour_huge <850,3225>
@[all| wings| noverb]\
\


::_player_text_sheet_mirror_symbiote_WingsFlavour_corruptionFlavour_corrupt25 <975,3225>
<<SymbioteName>>

::_player_text_sheet_mirror_symbiote_WingsFlavour_corruptionFlavour_corrupt50 <1100,3225>
<<SymbioteName>>

::_player_text_sheet_mirror_symbiote_WingsFlavour_corruptionFlavour_corrupt75 <1225,3225>


::_player_text_sheet_mirror_symbiote_WingsFlavour_corruptionFlavour_corrupt100 <100,3350>
\


::_player_text_sheet_mirror_symbiote_WingsFlavour_LiveForEcho_heightFlavour_small <225,3350>
<<SymbioteName>>

::_player_text_sheet_mirror_symbiote_WingsFlavour_LiveForEcho_heightFlavour_medium <350,3350>
<<SymbioteName>>

::_player_text_sheet_mirror_symbiote_WingsFlavour_LiveForEcho_heightFlavour_large <475,3350>
<<SymbioteName>>

::_player_text_sheet_mirror_symbiote_WingsFlavour_LiveForEcho_heightFlavour_huge <600,3350>
<<SymbioteName>>

::_player_text_sheet_mirror_player_HornsFlavour_heightFlavour_small <725,3350>
@[all| horns| noverb]\


::_player_text_sheet_mirror_player_HornsFlavour_heightFlavour_medium <850,3350>
@[all| horns| noverb]\


::_player_text_sheet_mirror_player_HornsFlavour_heightFlavour_large <975,3350>
@[all| horns| noverb]\


::_player_text_sheet_mirror_player_HornsFlavour_heightFlavour_huge <1100,3350>
@[all| horns| noverb]\





::_player_text_sheet_mirror_player_HornsFlavour_corruptionFlavour_corrupt50 <1225,3350>



::_player_text_sheet_mirror_player_HornsFlavour_corruptionFlavour_corrupt75 <100,3475>


::_player_text_sheet_mirror_player_HornsFlavour_corruptionFlavour_corrupt100 <225,3475>
\


::_player_text_sheet_mirror_symbiote_HornsFlavour_heightFlavour_small <350,3475>
<<SymbioteName>>@[all| horns| noverb]

\


::_player_text_sheet_mirror_symbiote_HornsFlavour_heightFlavour_medium <475,3475>
<<SymbioteName>>@[all| horns| noverb]\




::_player_text_sheet_mirror_symbiote_HornsFlavour_heightFlavour_large <600,3475>
<<SymbioteName>>@[all| horns| noverb]



::_player_text_sheet_mirror_symbiote_HornsFlavour_heightFlavour_huge <725,3475>
<<SymbioteName>>@[all| horns| noverb]



::_player_text_sheet_mirror_symbiote_HornsFlavour_corruptionFlavour_corrupt25 <850,3475>


::_player_text_sheet_mirror_symbiote_HornsFlavour_corruptionFlavour_corrupt50 <975,3475>


::_player_text_sheet_mirror_symbiote_HornsFlavour_corruptionFlavour_corrupt75 <1100,3475>


::_player_text_sheet_mirror_symbiote_HornsFlavour_corruptionFlavour_corrupt100 <1225,3475>


::_player_text_sheet_mirror_player_HeadFlavour_heightFlavour_small <100,3600>
@[all| heads| noverb]\


@[all|eyes|noverb]@[all| jaws | noverb]\
@[all| tongues| noverb]@[all| teeths| noverb]

::_player_text_sheet_mirror_player_HeadFlavour_heightFlavour_medium <225,3600>
@[all| heads| noverb]\
 

@[all|eyes|noverb]@[all| jaws | noverb]\
@[all| tongues| noverb]@[all| teeths| noverb]

::_player_text_sheet_mirror_player_HeadFlavour_heightFlavour_large <350,3600>
@[all| heads| noverb]\
@[all|eyes|noverb]@[all| jaws | noverb]\
@[all| tongues| noverb]@[all| teeths| noverb]

::_player_text_sheet_mirror_player_HeadFlavour_heightFlavour_huge <475,3600>
@[all| heads| noverb]\
@[all|eyes|noverb]@[all| jaws | noverb]\
@[all| tongues| noverb]@[all| teeths| noverb]

::_player_text_sheet_mirror_player_HeadFlavour_corruptionFlavour_corrupt25 <600,3600>
@[2|jaws|noverb]

::_player_text_sheet_mirror_player_HeadFlavour_corruptionFlavour_corrupt50 <725,3600>
\


::_player_text_sheet_mirror_player_HeadFlavour_corruptionFlavour_corrupt75 <850,3600>
\


::_player_text_sheet_mirror_player_HeadFlavour_corruptionFlavour_corrupt100 <975,3600>


\




::_player_text_sheet_mirror_symbiote_HeadFlavour_corruptionFlavour_corrupt25 <1100,3600>
<<SymbioteName>><<SymbioteName>>

"

::_player_text_sheet_mirror_symbiote_HeadFlavour_corruptionFlavour_corrupt50 <1225,3600>
<<SymbioteName>>\


<<SymbioteName>>

::_player_text_sheet_mirror_symbiote_HeadFlavour_corruptionFlavour_corrupt75 <100,3725>
<<SymbioteName>>\
<<SymbioteName>>\
<<SymbioteName>>

::_player_text_sheet_mirror_symbiote_HeadFlavour_corruptionFlavour_corrupt100 <225,3725>
<<SymbioteName>>\
<<SymbioteName>><<SymbioteName>>

::_player_text_sheet_mirror_player_LowerBodyFlavour_heightFlavour_small <350,3725>
@[all| legs| noverb]\




::_player_text_sheet_mirror_player_LowerBodyFlavour_heightFlavour_medium <475,3725>
@[all| legs| noverb]\




::_player_text_sheet_mirror_player_LowerBodyFlavour_heightFlavour_large <600,3725>
@[all| legs| noverb]

\


\


::_player_text_sheet_mirror_player_LowerBodyFlavour_heightFlavour_huge <725,3725>
@[all| legs| noverb]

\


\


\


::_player_text_sheet_mirror_symbiote_LowerBodyFlavour_heightFlavour_small <850,3725>
<<SymbioteName>>@[all| legs| noverb]

\
<<SymbioteName>>

<<SymbioteName>>

::_player_text_sheet_mirror_symbiote_LowerBodyFlavour_heightFlavour_medium <975,3725>
<<SymbioteName>>@[all| legs| noverb]

\
<<SymbioteName>>

\


::_player_text_sheet_mirror_symbiote_LowerBodyFlavour_heightFlavour_large <1100,3725>
<<SymbioteName>>@[all| legs| noverb]

\


<<SymbioteName>>\
<<SymbioteName>>

::_player_text_sheet_mirror_symbiote_LowerBodyFlavour_heightFlavour_huge <1225,3725>
<<SymbioteName>>@[all| legs| noverb]

<<SymbioteName>>\


<<SymbioteName>><<SymbioteName>>\
\
<<SymbioteName>>

::_player_text_sheet_mirror_symbiote_LowerBodyFlavour_corruptionFlavour_corrupt25 <100,3850>
<<SymbioteName>>

::_player_text_sheet_mirror_symbiote_LowerBodyFlavour_corruptionFlavour_corrupt50 <225,3850>
<<SymbioteName>>

::_player_text_sheet_mirror_symbiote_LowerBodyFlavour_corruptionFlavour_corrupt75 <350,3850>
\
<<SymbioteName>>



::_player_text_sheet_mirror_symbiote_LowerBodyFlavour_corruptionFlavour_corrupt100 <475,3850>


<<SymbioteName>>\
<<SymbioteName>>

::_player_text_sheet_mirror_symbiote_LowerBodyFlavour_LiveForEcho_heightFlavour_small <600,3850>
<<SymbioteName>>@[all| legs| noverb]

\
<<SymbioteName>>

<<SymbioteName>>\


::_player_text_sheet_mirror_symbiote_LowerBodyFlavour_LiveForEcho_heightFlavour_medium <725,3850>
<<SymbioteName>>@[all| legs| noverb]\
\


<<SymbioteName>>\
<<SymbioteName>>

\
<<SymbioteName>>

::_player_text_sheet_mirror_symbiote_LowerBodyFlavour_LiveForEcho_heightFlavour_large <850,3850>
<<SymbioteName>>@[all| legs| noverb]\


<<SymbioteName>>\
<<SymbioteName>>

\
<<SymbioteName>>

::_player_text_sheet_mirror_symbiote_LowerBodyFlavour_LiveForEcho_heightFlavour_huge <975,3850>
<<SymbioteName>>@[all| legs| noverb]\
 \
<<SymbioteName>><<SymbioteName>>\
 

<<SymbioteName>>
<<SymbioteName>>\
<<SymbioteName>> \
<<SymbioteName>>

::_player_text_sheet_mirror_player_UpperBodyFlavour_heightFlavour_small <1100,3850>
@[all| pecs| noverb]\
@[all| arms| noverb]@[2| hands| noverb]\


@[all| abdominals| noverb]

::_player_text_sheet_mirror_player_UpperBodyFlavour_heightFlavour_medium <1225,3850>
@[all| pecs| noverb]\
!

@[all| arms| noverb]@[2| hands| noverb]\
\


@[all| abdominals| noverb] \


::_player_text_sheet_mirror_player_UpperBodyFlavour_heightFlavour_large <100,3975>
@[all| pecs| noverb]\
!

@[all| arms| noverb]@[2| hands| noverb]\
\
\


@[all| abdominals| noverb] \
Y

::_player_text_sheet_mirror_player_UpperBodyFlavour_heightFlavour_huge <225,3975>
@[all| pecs| noverb]\


@[all| arms| noverb]@[2| hands| noverb]\
\


\


@[all| abdominals| noverb] \
,

::_player_text_sheet_mirror_symbiote_UpperBodyFlavour_heightFlavour_small <350,3975>
<<SymbioteName>>\
<<SymbioteName>>@[all| pecs| noverb]

@[all| arms| noverb]@[2| hands| noverb]\


@[all| abdominals| noverb]

::_player_text_sheet_mirror_symbiote_UpperBodyFlavour_heightFlavour_medium <475,3975>
<<SymbioteName>>\
<<SymbioteName>>@[all| pecs| noverb]\
pec

@[all| arms| noverb]@[2| hands| noverb]\
\
<<SymbioteName>>

@[all| abdominals| noverb]\


::_player_text_sheet_mirror_symbiote_UpperBodyFlavour_heightFlavour_large <600,3975>
<<SymbioteName>>'\
@[all| pecs| noverb]\


@[all| arms| noverb]@[2| hands| noverb]\


\
@[all| abdominals| noverb]

<<SymbioteName>>Y

::_player_text_sheet_mirror_symbiote_UpperBodyFlavour_heightFlavour_huge <725,3975>
<<SymbioteName>>@[all| pecs| noverb]\


@[all| arms| noverb]@[2| hands| noverb]\


\


@[all| abdominals| noverb]\


::_player_text_sheet_mirror_symbiote_UpperBodyFlavour_corruptionFlavour_corrupt25 <850,3975>
<<SymbioteName>>

::_player_text_sheet_mirror_symbiote_UpperBodyFlavour_corruptionFlavour_corrupt50 <975,3975>
\
<<SymbioteName>>

::_player_text_sheet_mirror_symbiote_UpperBodyFlavour_corruptionFlavour_corrupt75 <1100,3975>
\
<<SymbioteName>>

::_player_text_sheet_mirror_symbiote_UpperBodyFlavour_corruptionFlavour_corrupt100 <1225,3975>
<<SymbioteName>>\
<<SymbioteName>>

::_player_text_sheet_mirror_symbiote_UpperBodyFlavour_LiveForEcho_heightFlavour_small <100,4100>
<<SymbioteName>><<SymbioteName>>\
@[all| pecs| noverb]

<<SymbioteName>>@[all| arms| noverb]@[2| hands| noverb]\
<<SymbioteName>>\
<<SymbioteName>>

@[all| abdominals| noverb]

::_player_text_sheet_mirror_symbiote_UpperBodyFlavour_LiveForEcho_heightFlavour_medium <225,4100>
<<SymbioteName>><<SymbioteName>>\
<<SymbioteName>>@[all| pecs| noverb]

\
<<SymbioteName>>@[all| arms| noverb]@[2| hands| noverb]

<<SymbioteName>>\
\
<<SymbioteName>>@[all| abdominals| noverb]

<<SymbioteName>>

::_player_text_sheet_mirror_symbiote_UpperBodyFlavour_LiveForEcho_heightFlavour_large <350,4100>
<<SymbioteName>><<SymbioteName>>\
@[all| pecs| noverb]

\
<<SymbioteName>>@[all| arms| noverb]@[2| hands| noverb]

\
<<SymbioteName>><<SymbioteName>>\
@[all| abdominals| noverb]

\
<<SymbioteName>>Y

::_player_text_sheet_mirror_symbiote_UpperBodyFlavour_LiveForEcho_heightFlavour_huge <475,4100>
<<SymbioteName>><<SymbioteName>>\
@[all| pecs| noverb]\
\
<<SymbioteName>>@[all| arms| noverb]@[2| hands| noverb]

\
<<SymbioteName>>\
\
<<SymbioteName>>\
<<SymbioteName>>@[all| abdominals| noverb]
<<SymbioteName>>\
<<SymbioteName>>

::_player_text_sheet_mirror_symbiote_UpperBodyFlavour_LiveForEcho_corruptionFlavour_corrupt25 <600,4100>
<<SymbioteName>>

::_player_text_sheet_mirror_symbiote_UpperBodyFlavour_LiveForEcho_corruptionFlavour_corrupt50 <725,4100>
<<SymbioteName>>

::_player_text_sheet_mirror_symbiote_UpperBodyFlavour_LiveForEcho_corruptionFlavour_corrupt75 <850,4100>
<<SymbioteName>>

::_player_text_sheet_mirror_symbiote_UpperBodyFlavour_LiveForEcho_corruptionFlavour_corrupt100 <975,4100>
<<SymbioteName>>

::_player_text_sheet_mirror_player_Flavour_heightFlavour_small <1100,4100>


::_player_text_sheet_mirror_player_Flavour_heightFlavour_medium <1225,4100>


::_player_text_sheet_mirror_player_Flavour_heightFlavour_large <100,4225>


::_player_text_sheet_mirror_player_Flavour_heightFlavour_huge <225,4225>


::_player_text_sheet_mirror_symbiote_Flavour_heightFlavour_small <350,4225>


::_player_text_sheet_mirror_symbiote_Flavour_heightFlavour_medium <475,4225>


::_player_text_sheet_mirror_symbiote_Flavour_heightFlavour_large <600,4225>


::_player_text_sheet_mirror_symbiote_Flavour_heightFlavour_huge <725,4225>


::_player_text_sheet_homeFlavour_heightFlavour_small <850,4225>



\







::_player_text_sheet_homeFlavour_heightFlavour_medium <975,4225>



\




\
@[all|hands|noverb]



::_player_text_sheet_homeFlavour_heightFlavour_large <1100,4225>
!





@[1|hands|noverb]



::_player_text_sheet_homeFlavour_heightFlavour_huge <1225,4225>






::_player_text_sheet_basicAttackAttemptFlavour_heightFlavour_small <100,4350>


::_player_text_sheet_basicAttackAttemptFlavour_heightFlavour_medium <225,4350>


::_player_text_sheet_basicAttackAttemptFlavour_heightFlavour_large <350,4350>


::_player_text_sheet_basicAttackAttemptFlavour_heightFlavour_huge <475,4350>
@[all|arms|noverb]

::_player_text_sheet_basicAttackAttemptFlavour_corruptionFlavour_corrupt75 <600,4350>


::_player_text_sheet_basicAttackAttemptFlavour_corruptionFlavour_corrupt100 <725,4350>


::_player_text_sheet_bashAttackAttemptFlavour_heightFlavour_small <850,4350>


::_player_text_sheet_bashAttackAttemptFlavour_heightFlavour_medium <975,4350>


::_player_text_sheet_bashAttackAttemptFlavour_heightFlavour_large <1100,4350>


::_player_text_sheet_bashAttackAttemptFlavour_heightFlavour_huge <1225,4350>
@[1| arms| noverb]

::_player_text_sheet_bashAttackAttemptFlavour_corruptionFlavour_corrupt75 <100,4475>


::_player_text_sheet_bashAttackAttemptFlavour_corruptionFlavour_corrupt100 <225,4475>


::_player_text_sheet_slashAttackAttemptFlavour_heightFlavour_small <350,4475>


::_player_text_sheet_slashAttackAttemptFlavour_heightFlavour_medium <475,4475>


::_player_text_sheet_slashAttackAttemptFlavour_heightFlavour_large <600,4475>


::_player_text_sheet_slashAttackAttemptFlavour_heightFlavour_huge <725,4475>
@[all|arms|noverb]

::_player_text_sheet_slashAttackAttemptFlavour_corruptionFlavour_corrupt75 <850,4475>


::_player_text_sheet_slashAttackAttemptFlavour_corruptionFlavour_corrupt100 <975,4475>


::_player_text_sheet_MuscleGrowthFlavourText_heightFlavour_small_1 <1100,4475>
\
@[all|pecs|noverb]\
@[all|abdominals|noverb]

::_player_text_sheet_MuscleGrowthFlavourText_heightFlavour_small_2 <1225,4475>
\


::_player_text_sheet_MuscleGrowthFlavourText_heightFlavour_small_3 <100,4600>
\


::_player_text_sheet_MuscleGrowthFlavourText_heightFlavour_small_4 <225,4600>
\
@[all|arms|noverb]@[all|pecs|noverb]\
@[all|cocks|noverb]

::_player_text_sheet_MuscleGrowthFlavourText_heightFlavour_medium_1 <350,4600>
\


@[all|arms|noverb]@[all|pecs|noverb]\
@[all|abdominals|noverb]

::_player_text_sheet_MuscleGrowthFlavourText_heightFlavour_medium_2 <475,4600>
@[2|eyes|noverb]




::_player_text_sheet_MuscleGrowthFlavourText_heightFlavour_medium_3 <600,4600>
@[all|arms|noverb]@[all|pecs|noverb]\
\
@[all|legs|noverb]

::_player_text_sheet_MuscleGrowthFlavourText_heightFlavour_medium_4 <725,4600>
@[all|heads|noverb]\
@[all|pecs|noverb]@[all|abdominals|noverb]\


::_player_text_sheet_MuscleGrowthFlavourText_heightFlavour_large_1 <850,4600>
\
\
\



::_player_text_sheet_MuscleGrowthFlavourText_heightFlavour_large_2 <975,4600>
\
 \




::_player_text_sheet_MuscleGrowthFlavourText_heightFlavour_large_3 <1100,4600>
\


@[all|pecs|noverb]\
@[all|legs|noverb]@[all|cocks|noverb]\


::_player_text_sheet_MuscleGrowthFlavourText_heightFlavour_large_4 <1225,4600>
\
\
\
@[all|hands|noverb]

::_player_text_sheet_MuscleGrowthFlavourText_heightFlavour_huge_1 <100,4725>
\
@[all|abdominals|noverb]\
\
@[all|cocks|noverb]\
\
@[all|balls|noverb]

::_player_text_sheet_MuscleGrowthFlavourText_heightFlavour_huge_2 <225,4725>
@[all|arms|noverb]\
\


\
\


::_player_text_sheet_MuscleGrowthFlavourText_heightFlavour_huge_3 <350,4725>
@[all|cocks|noverb]@[all|cocks|noverb]\
\
@[all|heads|noverb]\


Y\
@[all|legs|noverb]

::_player_text_sheet_MuscleGrowthFlavourText_heightFlavour_huge_4 <475,4725>
! ! \
 --

\
--\




::_player_text_sheet_CockGrowthFlavourText_cockSizeFlavour_small <600,4725>
@[all|cocks|noverb]\


@[all|cocks|noverb]\


::_player_text_sheet_CockGrowthFlavourText_cockSizeFlavour_medium <725,4725>
@[all|cocks|noverb]\


@[all|cocks|noverb]\
\
@[all|cocks|noverb]\


::_player_text_sheet_CockGrowthFlavourText_cockSizeFlavour_large <850,4725>
@[all|cocks|noverb]\
\
@[all|cocks|noverb]\
@[all|cocks|noverb]

@[all|cocks|noverb]\
\
@[all|cocks|noverb]\


::_player_text_sheet_CockGrowthFlavourText_cockSizeFlavour_huge <975,4725>
\
@[all|cocks|noverb]\


@[all|cocks|noverb]\
@[all|cocks|noverb]\
@[all|cocks|noverb]@[all|cocks|noverb]\
@[all|cocks|noverb]\
$CharacterSheet_Player.symbiote.color

::_player_text_sheet <1100,4725>
<<set setup.TextSheet_Player = 
{
	jormFirstMeeting :{
		heightFlavour: {
			small: [
				"Jorm_FirstMeeting_PlayerSmall"
			],
			medium: [
				"Jorm_FirstMeeting_PlayerSmall"
			],
			large: [
				"Jorm_FirstMeeting_PlayerBig"
			],
			huge: [
				"Jorm_FirstMeeting_PlayerBig"
			],
		}
	},
	mergeLost1 :{
		heightFlavour: {
			small: [
				"_player_text_sheet_mergeLost1_heightFlavour_small"
			],
			medium: [
				"_player_text_sheet_mergeLost1_heightFlavour_medium"
			],
			large: [
				"_player_text_sheet_mergeLost1_heightFlavour_large"
			],
			huge: [
				"_player_text_sheet_mergeLost1_heightFlavour_huge"
			],
		}
	},
	lostKiss :{
		heightFlavour: {
			small: [
				"_player_text_sheet_lostKiss_heightFlavour_small"
			],
			medium: [
				"_player_text_sheet_lostKiss_heightFlavour_medium"
			],
			large: [
				"_player_text_sheet_lostKiss_heightFlavour_large"
			],
			huge: [
				"_player_text_sheet_lostKiss_heightFlavour_huge"
			],
		}
	},
	lostFuck2 :{
		heightFlavour: {
			small: [
				"_player_text_sheet_lostFuck2_heightFlavour_small"
			],
			medium: [
				"_player_text_sheet_lostFuck2_heightFlavour_medium"
			],
			large: [
				"_player_text_sheet_lostFuck2_heightFlavour_large"
			],
			huge: [
				"_player_text_sheet_lostFuck2_heightFlavour_huge"
			]
		}
	},
	lostFuck1 :{
		heightFlavour: {
			small: [
				"_player_text_sheet_lostFuck1_heightFlavour_small"
			],
			medium: [
				"_player_text_sheet_lostFuck1_heightFlavour_medium"
			],
			large: [
				"_player_text_sheet_lostFuck1_heightFlavour_large"
			],
			huge: [
				"_player_text_sheet_lostFuck1_heightFlavour_huge"
			]
		}
	},
	lostWin1 :{
		heightFlavour: {
			small: [
				"_player_text_sheet_lostWin1_heightFlavour_small"
			],
			medium: [
				"_player_text_sheet_lostWin1_heightFlavour_medium"
			],
			large: [
				"_player_text_sheet_lostWin1_heightFlavour_large"
			],
			huge: [
				"_player_text_sheet_lostWin1_heightFlavour_huge"
			],
		},
	},
	mirror_player_CrotchFlavour: {
		heightFlavour: {
			small: 
			[
				"_player_text_sheet_mirror_player_CrotchFlavour_heightFlavour_small"
			],
			medium: 
			[
				"_player_text_sheet_mirror_player_CrotchFlavour_heightFlavour_medium"
			],
			large: 
			[
				"_player_text_sheet_mirror_player_CrotchFlavour_heightFlavour_large"
			],
			huge: 
			[
				"_player_text_sheet_mirror_player_CrotchFlavour_heightFlavour_huge"
			]
		},
		corruptionFlavour:
		{
			corrupt50:
			[
				"_player_text_sheet_mirror_player_CrotchFlavour_corruptionFlavour_corrupt50"
			],
			corrupt75:
			[
				"_player_text_sheet_mirror_player_CrotchFlavour_corruptionFlavour_corrupt75"
			],
			corrupt100:
			[
				"_player_text_sheet_mirror_player_CrotchFlavour_corruptionFlavour_corrupt100"
			]
		}
	},
	mirror_symbiote_CrotchFlavour: {
		heightFlavour: {
			small:
			[
				"_player_text_sheet_mirror_player_mirror_symbiote_CrotchFlavour_heightFlavour_small"
			],
			medium:
			[
				"_player_text_sheet_mirror_player_mirror_symbiote_CrotchFlavour_heightFlavour_medium"
			],
			large:
			[
				"_player_text_sheet_mirror_player_mirror_symbiote_CrotchFlavour_heightFlavour_large" 
			],
			huge:
			[
				"_player_text_sheet_mirror_player_mirror_symbiote_CrotchFlavour_heightFlavour_huge"
			]
		},
		corruptionFlavour:
		{
			corrupt50:
			[
				"_player_text_sheet_mirror_player_mirror_symbiote_CrotchFlavour_corruptionFlavour_corrupt50"
			],
			corrupt75:
			[
				"_player_text_sheet_mirror_player_mirror_symbiote_CrotchFlavour_corruptionFlavour_corrupt75"
			],
			corrupt100:
			[
				"_player_text_sheet_mirror_player_mirror_symbiote_CrotchFlavour_corruptionFlavour_corrupt100"
			]
		}
	},
	mirror_player_TailFlavour: {
		heightFlavour: {
			small: 
			[
				"_player_text_sheet_mirror_player_TailFlavour_heightFlavour_small"
			],
			medium: 
			[
				"_player_text_sheet_mirror_player_TailFlavour_heightFlavour_medium"
			],
			large: 
			[
				"_player_text_sheet_mirror_player_TailFlavour_heightFlavour_large"
			],
			huge: 
			[
				"_player_text_sheet_mirror_player_TailFlavour_heightFlavour_huge"
			]
		},
		corruptionFlavour:
		{
			corrupt50:
			[
				"_player_text_sheet_mirror_player_TailFlavour_corruptionFlavour_corrupt50"
			],
			corrupt75:
			[
				"_player_text_sheet_mirror_player_TailFlavour_corruptionFlavour_corrupt75"
			],
			corrupt100:
			[
				"_player_text_sheet_mirror_player_TailFlavour_corruptionFlavour_corrupt100"
			]
		}
	},
	mirror_symbiote_TailFlavour: {
		heightFlavour: {
			small:
			[
				"_player_text_sheet_mirror_symbiote_TailFlavour_heightFlavour_small"
			],
			medium:
			[
				"_player_text_sheet_mirror_symbiote_TailFlavour_heightFlavour_medium"
			],
			large:
			[
				"_player_text_sheet_mirror_symbiote_TailFlavour_heightFlavour_large"
			],
			huge:
			[
				"_player_text_sheet_mirror_symbiote_TailFlavour_heightFlavour_huge"
			]
		},
		corruptionFlavour:
		{
			corrupt25:
			[
				"_player_text_sheet_mirror_symbiote_TailFlavour_corruptionFlavour_corrupt25"
			],
			corrupt50:
			[
				"_player_text_sheet_mirror_symbiote_TailFlavour_corruptionFlavour_corrupt50"
			],
			corrupt75:
			[
				"_player_text_sheet_mirror_symbiote_TailFlavour_corruptionFlavour_corrupt75"
			],
			corrupt100:
			[
				"_player_text_sheet_mirror_symbiote_TailFlavour_corruptionFlavour_corrupt100"
			]
		}
	},
	mirror_symbiote_TailFlavour_LiveForEcho: {
		heightFlavour: {
			small:
			[
				"_player_text_sheet_mirror_symbiote_TailFlavour_LiveForEcho_heightFlavour_small"
			],
			medium:
			[
				"_player_text_sheet_mirror_symbiote_TailFlavour_LiveForEcho_heightFlavour_medium"
			],
			large:
			[
				"_player_text_sheet_mirror_symbiote_TailFlavour_LiveForEcho_heightFlavour_large"
			],
			huge:
			[
				"_player_text_sheet_mirror_symbiote_TailFlavour_LiveForEcho_heightFlavour_huge"
			]
		}
	},
	mirror_player_WingsFlavour: {
		heightFlavour: {
			small: 
			[
				"_player_text_sheet_mirror_player_WingsFlavour_heightFlavour_small"
			],
			medium: 
			[
				"_player_text_sheet_mirror_player_WingsFlavour_heightFlavour_medium"
			],
			large: 
			[
				"_player_text_sheet_mirror_player_WingsFlavour_heightFlavour_large"
			],
			huge: 
			[
				"_player_text_sheet_mirror_player_WingsFlavour_heightFlavour_huge"
			]
			
		},
		corruptionFlavour:
		{
			corrupt50:
			[
				"_player_text_sheet_mirror_player_WingsFlavour_corruptionFlavour_corrupt50",
			],
			corrupt75:
			[
				"_player_text_sheet_mirror_player_WingsFlavour_corruptionFlavour_corrupt75",
			],
			corrupt100:
			[
				"_player_text_sheet_mirror_player_WingsFlavour_corruptionFlavour_corrupt100",
			]
		}
	},
	mirror_symbiote_WingsFlavour: {
		heightFlavour: {
			small:
			[
				"_player_text_sheet_mirror_symbiote_WingsFlavour_heightFlavour_small"
			],
			medium:
			[
				"_player_text_sheet_mirror_symbiote_WingsFlavour_heightFlavour_medium"
			],
			large:
			[
				"_player_text_sheet_mirror_symbiote_WingsFlavour_heightFlavour_large"
			],
			huge:
			[
				"_player_text_sheet_mirror_symbiote_WingsFlavour_heightFlavour_huge"
			]
		},
		corruptionFlavour:
		{
			corrupt25:
			[
				"_player_text_sheet_mirror_symbiote_WingsFlavour_corruptionFlavour_corrupt25"
			],
			corrupt50:
			[
				"_player_text_sheet_mirror_symbiote_WingsFlavour_corruptionFlavour_corrupt50"
			],
			corrupt75:
			[
				"_player_text_sheet_mirror_symbiote_WingsFlavour_corruptionFlavour_corrupt75"
			],
			corrupt100:
			[
				"_player_text_sheet_mirror_symbiote_WingsFlavour_corruptionFlavour_corrupt100"
			]
		}
	},
	mirror_symbiote_WingsFlavour_LiveForEcho: {
		heightFlavour: {
			small:
			[
				"_player_text_sheet_mirror_symbiote_WingsFlavour_LiveForEcho_heightFlavour_small"
			],
			medium:
			[
				"_player_text_sheet_mirror_symbiote_WingsFlavour_LiveForEcho_heightFlavour_medium"
			],
			large:
			[
				"_player_text_sheet_mirror_symbiote_WingsFlavour_LiveForEcho_heightFlavour_large"
			],
			huge:
			[
				"_player_text_sheet_mirror_symbiote_WingsFlavour_LiveForEcho_heightFlavour_huge"
			]
		}
	},
	mirror_player_HornsFlavour: {
		heightFlavour: {
			small: 
			[
				"_player_text_sheet_mirror_player_HornsFlavour_heightFlavour_small"
			],
			medium: 
			[
				"_player_text_sheet_mirror_player_HornsFlavour_heightFlavour_medium"

			],
			large: 
			[
				"_player_text_sheet_mirror_player_HornsFlavour_heightFlavour_large"

			],
			huge: 
			[
				"_player_text_sheet_mirror_player_HornsFlavour_heightFlavour_huge"
			]
		},
		corruptionFlavour:
		{
			corrupt50:
			[
				"_player_text_sheet_mirror_player_HornsFlavour_corruptionFlavour_corrupt50"
			],
			corrupt75:
			[
				"_player_text_sheet_mirror_player_HornsFlavour_corruptionFlavour_corrupt75"
			],
			corrupt100:
			[
				"_player_text_sheet_mirror_player_HornsFlavour_corruptionFlavour_corrupt100"
			]
		}
	},
	mirror_symbiote_HornsFlavour: {
		heightFlavour: {
			small: 
			[
				"_player_text_sheet_mirror_symbiote_HornsFlavour_heightFlavour_small"
			],
			medium: 
			[
				"_player_text_sheet_mirror_symbiote_HornsFlavour_heightFlavour_medium"
			],
			large: 
			[
				"_player_text_sheet_mirror_symbiote_HornsFlavour_heightFlavour_large"
			],
			huge: 
			[
				"_player_text_sheet_mirror_symbiote_HornsFlavour_heightFlavour_huge"
			]
		},
		corruptionFlavour:
		{
			corrupt25:
			[
				"_player_text_sheet_mirror_symbiote_HornsFlavour_corruptionFlavour_corrupt25"
			],
			corrupt50:
			[
				"_player_text_sheet_mirror_symbiote_HornsFlavour_corruptionFlavour_corrupt50"
			],
			corrupt75:
			[
				"_player_text_sheet_mirror_symbiote_HornsFlavour_corruptionFlavour_corrupt75"
			],
			corrupt100:
			[
				"_player_text_sheet_mirror_symbiote_HornsFlavour_corruptionFlavour_corrupt100"
			]
		}
	},
	mirror_player_HeadFlavour: {
		heightFlavour: {
			small: 
			[
				"_player_text_sheet_mirror_player_HeadFlavour_heightFlavour_small"
			],
			medium: 
			[
				"_player_text_sheet_mirror_player_HeadFlavour_heightFlavour_medium"

			],
			large: 
			[
				"_player_text_sheet_mirror_player_HeadFlavour_heightFlavour_large"

			],
			huge: 
			[
				"_player_text_sheet_mirror_player_HeadFlavour_heightFlavour_huge"

			]
		},
		corruptionFlavour:
		{
			corrupt25:
			[
				"_player_text_sheet_mirror_player_HeadFlavour_corruptionFlavour_corrupt25"
			],
			corrupt50:
			[
				"_player_text_sheet_mirror_player_HeadFlavour_corruptionFlavour_corrupt50"

			],
			corrupt75:
			[
				"_player_text_sheet_mirror_player_HeadFlavour_corruptionFlavour_corrupt75"

			],
			corrupt100:
			[
				"_player_text_sheet_mirror_player_HeadFlavour_corruptionFlavour_corrupt100"
			]
		}
	},
	mirror_symbiote_HeadFlavour: {
		corruptionFlavour: {
			corrupt25: 
			[
				"_player_text_sheet_mirror_symbiote_HeadFlavour_corruptionFlavour_corrupt25"
			],
			corrupt50: 
			[
				"_player_text_sheet_mirror_symbiote_HeadFlavour_corruptionFlavour_corrupt50"
			],
			corrupt75: 
			[
				"_player_text_sheet_mirror_symbiote_HeadFlavour_corruptionFlavour_corrupt75"
			],
			corrupt100: 
			[
				"_player_text_sheet_mirror_symbiote_HeadFlavour_corruptionFlavour_corrupt100"
			]
		},
	},
	mirror_player_LowerBodyFlavour: {
		heightFlavour: {
			small: 
			[
				"_player_text_sheet_mirror_player_LowerBodyFlavour_heightFlavour_small"
			],
			medium: 
			[
				"_player_text_sheet_mirror_player_LowerBodyFlavour_heightFlavour_medium"

			],
			large: 
			[
				"_player_text_sheet_mirror_player_LowerBodyFlavour_heightFlavour_large"

			],
			huge: 
			[
				"_player_text_sheet_mirror_player_LowerBodyFlavour_heightFlavour_huge"
			]
		}
	},
	mirror_symbiote_LowerBodyFlavour: {
		heightFlavour: {
			small:
			[
				"_player_text_sheet_mirror_symbiote_LowerBodyFlavour_heightFlavour_small"
			],
			medium:
			[
				"_player_text_sheet_mirror_symbiote_LowerBodyFlavour_heightFlavour_medium"			
			],
			large:
			[
				"_player_text_sheet_mirror_symbiote_LowerBodyFlavour_heightFlavour_large"			
			],
			huge:
			[
				"_player_text_sheet_mirror_symbiote_LowerBodyFlavour_heightFlavour_huge"			
			]
		},
		corruptionFlavour:
		{
			corrupt25:
			[
				"_player_text_sheet_mirror_symbiote_LowerBodyFlavour_corruptionFlavour_corrupt25"
			],
			corrupt50:
			[
				"_player_text_sheet_mirror_symbiote_LowerBodyFlavour_corruptionFlavour_corrupt50"
			],
			corrupt75:
			[
				"_player_text_sheet_mirror_symbiote_LowerBodyFlavour_corruptionFlavour_corrupt75"
			],
			corrupt100:
			[
				"_player_text_sheet_mirror_symbiote_LowerBodyFlavour_corruptionFlavour_corrupt100"
			]
		}
	},
	mirror_symbiote_LowerBodyFlavour_LiveForEcho: {
		heightFlavour: {
			small: 
			[
				"_player_text_sheet_mirror_symbiote_LowerBodyFlavour_LiveForEcho_heightFlavour_small"
			],
			medium: 
			[
				"_player_text_sheet_mirror_symbiote_LowerBodyFlavour_LiveForEcho_heightFlavour_medium"
			],
			large: 
			[
				"_player_text_sheet_mirror_symbiote_LowerBodyFlavour_LiveForEcho_heightFlavour_large"
			],
			huge: 
			[
				"_player_text_sheet_mirror_symbiote_LowerBodyFlavour_LiveForEcho_heightFlavour_huge"
			]
		}
	},
	mirror_player_UpperBodyFlavour: {
		heightFlavour: {
			small: 
			[
				"_player_text_sheet_mirror_player_UpperBodyFlavour_heightFlavour_small"
			],
			medium: 
			[
				"_player_text_sheet_mirror_player_UpperBodyFlavour_heightFlavour_medium"
			],
			large: 
			[
				"_player_text_sheet_mirror_player_UpperBodyFlavour_heightFlavour_large"
			],
			huge: 
			[
				"_player_text_sheet_mirror_player_UpperBodyFlavour_heightFlavour_huge"
			]
		}
	},
	mirror_symbiote_UpperBodyFlavour: {
		heightFlavour: {
			small: 
			[
				"_player_text_sheet_mirror_symbiote_UpperBodyFlavour_heightFlavour_small"
			],
			medium: 
			[
				"_player_text_sheet_mirror_symbiote_UpperBodyFlavour_heightFlavour_medium"
			],
			large: 
			[
				"_player_text_sheet_mirror_symbiote_UpperBodyFlavour_heightFlavour_large"
			],
			huge: 
			[
				"_player_text_sheet_mirror_symbiote_UpperBodyFlavour_heightFlavour_huge"
			]
		},
		corruptionFlavour:
		{
			corrupt25:
			[
				"_player_text_sheet_mirror_symbiote_UpperBodyFlavour_corruptionFlavour_corrupt25"
			],
			corrupt50:
			[
				"_player_text_sheet_mirror_symbiote_UpperBodyFlavour_corruptionFlavour_corrupt50"
			],
			corrupt75:
			[
				"_player_text_sheet_mirror_symbiote_UpperBodyFlavour_corruptionFlavour_corrupt75"
			],
			corrupt100:
			[
				"_player_text_sheet_mirror_symbiote_UpperBodyFlavour_corruptionFlavour_corrupt100"
			]
		}
	},
	mirror_symbiote_UpperBodyFlavour_LiveForEcho: {
		heightFlavour: {
			small: 
			[
				"_player_text_sheet_mirror_symbiote_UpperBodyFlavour_LiveForEcho_heightFlavour_small"
			],
			medium: 
			[
				"_player_text_sheet_mirror_symbiote_UpperBodyFlavour_LiveForEcho_heightFlavour_medium"
			],
			large: 
			[
				"_player_text_sheet_mirror_symbiote_UpperBodyFlavour_LiveForEcho_heightFlavour_large"
			],
			huge: 
			[
				"_player_text_sheet_mirror_symbiote_UpperBodyFlavour_LiveForEcho_heightFlavour_huge"
			]
		},
		corruptionFlavour:
		{
			corrupt25:
			[
				"_player_text_sheet_mirror_symbiote_UpperBodyFlavour_LiveForEcho_corruptionFlavour_corrupt25"
			],
			corrupt50:
			[
				"_player_text_sheet_mirror_symbiote_UpperBodyFlavour_LiveForEcho_corruptionFlavour_corrupt50"
			],
			corrupt75:
			[
				"_player_text_sheet_mirror_symbiote_UpperBodyFlavour_LiveForEcho_corruptionFlavour_corrupt75"
			],
			corrupt100:
			[
				"_player_text_sheet_mirror_symbiote_UpperBodyFlavour_LiveForEcho_corruptionFlavour_corrupt100"
			]
		}
	},
	mirror_player_Flavour: {
		heightFlavour: {
			small: 
			[
				"_player_text_sheet_mirror_player_Flavour_heightFlavour_small"
			],
			medium: 
			[
				"_player_text_sheet_mirror_player_Flavour_heightFlavour_medium"
			],
			large: 
			[
				"_player_text_sheet_mirror_player_Flavour_heightFlavour_large"
			],
			huge: 
			[
				"_player_text_sheet_mirror_player_Flavour_heightFlavour_huge"
			]
		}
	},
	mirror_symbiote_Flavour: {
		heightFlavour: {
			small:
			[
				"_player_text_sheet_mirror_symbiote_Flavour_heightFlavour_small"
			],
			medium:
			[
				"_player_text_sheet_mirror_symbiote_Flavour_heightFlavour_medium"
			],
			large:
			[
				"_player_text_sheet_mirror_symbiote_Flavour_heightFlavour_large"
			],
			huge:
			[
				"_player_text_sheet_mirror_symbiote_Flavour_heightFlavour_huge"
			]
		}
	},
	homeFlavour: {
		heightFlavour: {
			small: 
			[
				"_player_text_sheet_homeFlavour_heightFlavour_small" 
			],
			medium: 
			[
				"_player_text_sheet_homeFlavour_heightFlavour_medium" 

			],
			large: 
			[
				"_player_text_sheet_homeFlavour_heightFlavour_large" 

			],
			huge: 
			[
				"_player_text_sheet_homeFlavour_heightFlavour_huge" 

			]
		}
	},
	visitHouse: {
		heightFlavour: {
			small: 
			[
				"player_visitHouse_heightFlavour_small" 
			],
			medium: 
			[
				"player_visitHouse_heightFlavour_medium" 

			],
			large: 
			[
				"player_visitHouse_heightFlavour_large" 

			],
			huge: 
			[
				"player_visitHouse_heightFlavour_huge" 

			]
		}
	},
	abelHouseMenu: {
		heightFlavour: {
			small: 
			[
				"player_abelHouseMenu_heightFlavour_small" 
			],
			medium: 
			[
				"player_abelHouseMenu_heightFlavour_medium" 

			],
			large: 
			[
				"player_abelHouseMenu_heightFlavour_large" 

			],
			huge: 
			[
				"player_abelHouseMenu_heightFlavour_huge" 

			]
		}
	},
	basicAttackAttemptFlavour: {
		heightFlavour:
		{
			small: 
			[
				"_player_text_sheet_basicAttackAttemptFlavour_heightFlavour_small"
			],
			medium: 
			[
				"_player_text_sheet_basicAttackAttemptFlavour_heightFlavour_medium"
			],
			large: 
			[
				"_player_text_sheet_basicAttackAttemptFlavour_heightFlavour_large"
			],
			huge: 
			[
				"_player_text_sheet_basicAttackAttemptFlavour_heightFlavour_huge"
			]
		},
		corruptionFlavour:
		{
			corrupt75:
			[
				"_player_text_sheet_basicAttackAttemptFlavour_corruptionFlavour_corrupt75",
			],
			corrupt100:
			[
				"_player_text_sheet_basicAttackAttemptFlavour_corruptionFlavour_corrupt100",
			]
		}
	},
    bashAttackAttemptFlavour: {
		heightFlavour:
		{
			small: 
			[
				"_player_text_sheet_bashAttackAttemptFlavour_heightFlavour_small"
			],
			medium: 
			[
				"_player_text_sheet_bashAttackAttemptFlavour_heightFlavour_medium"
			],
			large: 
			[
				"_player_text_sheet_bashAttackAttemptFlavour_heightFlavour_large"
			],
			huge: 
			[
				"_player_text_sheet_bashAttackAttemptFlavour_heightFlavour_huge"
			]
		},
		corruptionFlavour:
		{
			corrupt75:
			[
				"_player_text_sheet_bashAttackAttemptFlavour_corruptionFlavour_corrupt75",
			],
			corrupt100:
			[
				"_player_text_sheet_bashAttackAttemptFlavour_corruptionFlavour_corrupt100",
			]
		}
	},
    slashAttackAttemptFlavour: {
		heightFlavour:
		{
			small: 
			[
				"_player_text_sheet_slashAttackAttemptFlavour_heightFlavour_small"
			],
			medium: 
			[
				"_player_text_sheet_slashAttackAttemptFlavour_heightFlavour_medium"
			],
			large: 
			[
				"_player_text_sheet_slashAttackAttemptFlavour_heightFlavour_large"
			],
			huge: 
			[
				"_player_text_sheet_slashAttackAttemptFlavour_heightFlavour_huge"
			]
		},
		corruptionFlavour:
		{
			corrupt75:
			[
				"_player_text_sheet_slashAttackAttemptFlavour_corruptionFlavour_corrupt75",
			],
			corrupt100:
			[
				"_player_text_sheet_slashAttackAttemptFlavour_corruptionFlavour_corrupt100",
			]
		}
	},
	MuscleGrowthFlavourText :{
		musclesFlavour: {
			small: [
				"_player_text_sheet_MuscleGrowthFlavourText_heightFlavour_small_1",
				
				"_player_text_sheet_MuscleGrowthFlavourText_heightFlavour_small_2",

				"_player_text_sheet_MuscleGrowthFlavourText_heightFlavour_small_3",

				"_player_text_sheet_MuscleGrowthFlavourText_heightFlavour_small_4",
			],
			medium: [
				"_player_text_sheet_MuscleGrowthFlavourText_heightFlavour_medium_1",

				"_player_text_sheet_MuscleGrowthFlavourText_heightFlavour_medium_2",

				"_player_text_sheet_MuscleGrowthFlavourText_heightFlavour_medium_3",

				"_player_text_sheet_MuscleGrowthFlavourText_heightFlavour_medium_4",
			],
			large: [
				"_player_text_sheet_MuscleGrowthFlavourText_heightFlavour_large_1",

				"_player_text_sheet_MuscleGrowthFlavourText_heightFlavour_large_2",

				"_player_text_sheet_MuscleGrowthFlavourText_heightFlavour_large_3",

				"_player_text_sheet_MuscleGrowthFlavourText_heightFlavour_large_4",

			],
			huge: [
				"_player_text_sheet_MuscleGrowthFlavourText_heightFlavour_huge_1",

				"_player_text_sheet_MuscleGrowthFlavourText_heightFlavour_huge_2",

				"_player_text_sheet_MuscleGrowthFlavourText_heightFlavour_huge_3",

				"_player_text_sheet_MuscleGrowthFlavourText_heightFlavour_huge_4",
			]
		}
	},
	CockGrowthFlavourText :{
		cockSizeFlavour:
		{
			small: [
				"_player_text_sheet_CockGrowthFlavourText_cockSizeFlavour_small",
			],
			medium: [
				"_player_text_sheet_CockGrowthFlavourText_cockSizeFlavour_medium",
			],
			large: [
				"_player_text_sheet_CockGrowthFlavourText_cockSizeFlavour_large",
			],
			huge: [
				"_player_text_sheet_CockGrowthFlavourText_cockSizeFlavour_huge",
			]
		},
	},
	village_exiled_menu :{
		corruptionFlavour:
		{
			corrupt25:
			[
				"Village_Exiled_Menu_Corruption_Header_Under_Threshold"
			],
			corrupt50:
			[
				"Village_Exiled_Menu_Corruption_Header_Under_Threshold"
			],
			corrupt75:
			[
				"Village_Exiled_Menu_Corruption_Header_Over_Threshold"
			],
			corrupt100:
			[
				"Village_Exiled_Menu_Corruption_Header_Max_Corruption"
			],
		},
	},	
	village_exiled_menu_underThreshold :{
		heightFlavour:
		{
			large:			
			[
				"Village_Exiled_Menu_Corruption_Header_Under_Threshold_Large"
			],
			huge: 			
			[
				"Village_Exiled_Menu_Corruption_Header_Under_Threshold_Huge"
			],
		},
	},
}>>

::_symbiote_info_sheet <1225,4725>
<<set setup.InfoSheet_Symbiote =
{
	name: "",
	gender: "male",
    boost: "height",
    color: "Blue",
	anatomy: {
		heads: {
			number: 1,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.DEFAULT
		},
		eyes: {
			number: 2,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.DEFAULT
		},
		jaws: {
			number: 1,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.DEFAULT
		},
		teeths: {
			number: 1,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.DEFAULT
		},
		hands: {
			number: 2,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.DEFAULT
		},
		horns: {
			number: 0,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.DEFAULT
		},
		wings: {
			number: 0,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.DEFAULT
		},
		tongues:{
			number: 1,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.DEFAULT
		},
		arms: {
			number: 2,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.DEFAULT
		},
		pecs: {
			number: 2,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.DEFAULT
		},
		abdominals: {
			number: 6,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.DEFAULT
		},
		cocks: {
			number: 1,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.DEFAULT
		},
		balls: {
			number: 2,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.DEFAULT
		},
		legs: {
			number: 2,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.DEFAULT
		},
		tails: {
			number: 0,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.DEFAULT
		},
		breasts: {
			number: 0,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.DEFAULT
		},
		vaginas: {
			number: 0,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.DEFAULT
		}
	}
}>>

::_shard_ring_body_visual <100,4850>
<<set setup.BodyVisualSheet_Shard_Ring =
{
    emoteList:
    {
        normal: 
        {
            visual: "https://sombreve.github.io/Dawn-of-Corruption-Site/Images/characters/Bind/BindNeutralHelm.png",
        },
    },
    cockList :
    {
        normal:
        {
            visual: "https://sombreve.github.io/Dawn-of-Corruption-Site/Images/characters/Bind/BindCockRegular.png",
        },
    },
    bodyList :
    {
        normal:
        {
            visual: "https://sombreve.github.io/Dawn-of-Corruption-Site/Images/characters/Bind/BindNeutralBody.png",
            condition: function(character)
            {
                return true;
            },
            headClass: "BindHead",
            permittedCocks: [
                {
                    cock: "normal",
                    cockClass: "BindBody",
                    condition: function(character)
                    {
                        return true;
                    },
                },
            ],
        },
    },
}>>

::_shard_ring_fight_sheet <225,4850>
<<set setup.FighterSheet_Shard_Ring =
{
	hp: 140,
	stamina: 25,
	strength: 10,
	critChance: 0,
    critDamage: 1.50,
	arousalGain: 10,
    growthMultiplier: 1,
	bonusGrowth: {
        height: 0,
        cock: 0,
        muscles: 0,
        balls: 0,
    },
	minArousal: 0,
	staminaRecovery: 4,
	variables: $FightVariables,
	fightMoveIDs: [setup.FightMove_Basic_Attack.id, setup.FightMove_AbsorbEssence.id],
	fightReward: setup.RewardTier.LOW,
	encounterIntroText: "<<include Encounter_Intro_Shard_Ring>>",
	encounterStartText: "<<include Encounter_Start_Shard_Ring>>",
	outcomePlayerWins: "<<include Encounter_Win_Shard_Ring>>",
	outcomePlayerLoses: "<<include Encounter_Loss_Shard_Ring>>",
}>>

::_shard_ring_info_sheet <350,4850>
<<set setup.InfoSheet_Shard_Ring =
{
	name: "",
	gender: "male",
	bodyVisual: "BodyVisualSheet_Shard_Ring",
	corruption: 100,
	muscles: 20,
	height: 75,
	cock: 7,
	balls: 3,
	alive: true,
	known: setup.EncounterKnownState.UNKNOWN,
	anatomy: {
		heads: {
			number: 1,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.DEFAULT
		},
		eyes: {
			number: 2,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.GREEN
		},
		jaws: {
			number: 1,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.DEFAULT
		},
		teeths: {
			number: 1,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.DEFAULT
		},
		hands: {
			number: 2,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.DEFAULT
		},
		tongues:{
			number: 1,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.DEFAULT
		},
		arms: {
			number: 2,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.DEFAULT
		},
		pecs: {
			number: 2,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.DEFAULT
		},
		abdominals: {
			number: 6,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.DEFAULT
		},
		cocks: {
			number: 1,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.DEFAULT
		},
		balls: {
			number: 2,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.DEFAULT
		},
		legs: {
			number: 2,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.DEFAULT
		},
		tails: {
			number: 1,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.DEFAULT
		},
		breasts: {
			number: 0,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.DEFAULT
		},
		vaginas: {
			number: 0,
			race: setup.RacePool.DEFAULT,
			colour: setup.ColourPool.DEFAULT
		}
	}
}>>

::Sheets_Shard_Ring <475,4850>
<<include "_shard_ring_body_visual">>
<<include "_shard_ring_text_sheet">>
<<include "_shard_ring_fight_sheet">>
<<include "_shard_ring_info_sheet">>
<<include "_shard_ring_quest_sheet">>
<<include "_shard_ring_story_sheet">>


<<set $CharacterSheet_Shard_Ring = setup.CharacterFactory.createCharacter({id: "CharacterSheet_Shard_Ring", 
                                                 info: setup.InfoSheet_Shard_Ring, 
                                                 fight: setup.FighterSheet_Shard_Ring, 
                                                 quest: setup.QuestSheet_Shard_Ring, 
                                                 text: "TextSheet_Shard_Ring"})>>

::_shard_ring_quest_sheet <600,4850>
<<set setup.QuestSheet_Shard_Ring =
{
    met: false,
    relationshipScoring: 0,
    fullDom: false,
    fullSub: false,
    available_encounterPassages_common: true,
    available_encounterIntro_firstTime: true,
    available_encounterIntro_dom: true,
    available_encounterIntro_sub: true,
    available_encounterIntro_lowRela: true,
    available_postFightPassagesWin_domIdle: true,
    available_postFightPassagesWin_subIdle: true,
    available_postFightPassagesWin_lowRelaIdle: true,
    available_postFightPassagesLoss_sub: true,
    available_postFightPassagesLoss_dom: true,
    available_postFightPassagesLoss_lowRelaIdle: true,
    available_dominantExit_normal: true,
    available_dominantExit_final: true,
    available_dominantExit_domIdle: true,
    available_subExit_subIdle: true,
    available_subExit_normal: true,
    available_subExit_final: true,
}>>

::_shard_ring_story_sheet <725,4850>
<<set setup.StorySheet_Shard_Ring =
{
    encounterPassages:
    {
        common:
        {
            available: function()
			{
				return State.variables.CharacterSheet_Shard_Ring.quest.available_encounterPassages_common;
			},
            condition: function()
            {
                return true;
            },
            passage: "Shard_Ring_Shared_Intro",
        },
    },
    encounterIntro:
    {
        firstTime:
        {
            available: function()
			{
				return State.variables.CharacterSheet_Shard_Ring.quest.available_encounterIntro_firstTime;
			},
            condition: function()
            {
                return State.variables.CharacterSheet_Shard_Ring.quest.met == false;
            },
            passage: "Shard_Ring_FirstMeeting_Intro",
        },
        dom:
        {
            available: function()
			{
				return State.variables.CharacterSheet_Shard_Ring.quest.available_encounterIntro_dom;
			},
            condition: function()
            {
                return State.variables.CharacterSheet_Shard_Ring.quest.fullDom == true;
            },
            passage: "Shard_Ring_FullDom_Intro",
        },
        sub:
        {
            available: function()
			{
				return State.variables.CharacterSheet_Shard_Ring.quest.available_encounterIntro_sub;
			},
            condition: function()
            {
                return State.variables.CharacterSheet_Shard_Ring.quest.fullSub == true;
            },
            passage: "Shard_Ring_FullSub_Intro",
        },
        lowRela:
        {
            available: function()
			{
				return State.variables.CharacterSheet_Shard_Ring.quest.available_encounterIntro_lowRela;
			},
            condition: function()
            {
                return true;
            },
            passage: "Shard_Ring_LowScoring_Intro",
        },
    },
    postFightPassagesWin:
    {
        domIdle:
        {
            available: function()
			{
				return State.variables.CharacterSheet_Shard_Ring.quest.available_postFightPassagesWin_domIdle;
			},
            condition: function()
            {
                return State.variables.CharacterSheet_Shard_Ring.quest.fullDom == true;
            },
            passage: "Shard_Ring_Win_Dominant_Idle",
        },
        subIdle:
        {
            available: function()
			{
				return State.variables.CharacterSheet_Shard_Ring.quest.available_postFightPassagesWin_subIdle;
			},
            condition: function()
            {
                return State.variables.CharacterSheet_Shard_Ring.quest.fullSub == true;
            },
            passage: "ShardRing_Win_Sub_Idle",
        },
        lowRelaIdle:
        {
            available: function()
			{
				return State.variables.CharacterSheet_Shard_Ring.quest.available_postFightPassagesWin_lowRelaIdle;
			},
            condition: function()
            {
                return true;
            },
            passage: "Shard_Ring_Low_Rela_Win_Idle",
        },
    },
    postFightPassagesLoss:
    {
        lowRelaIdle:
        {
            available: function()
			{
				return State.variables.CharacterSheet_Shard_Ring.quest.available_postFightPassagesLoss_lowRelaIdle;
			},
            condition: function()
            {
                return true;
            },
            passage: "Shard_Ring_Low_Rela_Loss",
        },
        sub:
        {
            available: function()
			{
				return State.variables.CharacterSheet_Shard_Ring.quest.available_postFightPassagesLoss_sub;
			},
            condition: function()
            {
                return State.variables.CharacterSheet_Shard_Ring.quest.fullSub == true;
            },
            passage: "Shard_Ring_Sub_Loss",
        },
        dom:
        {
            available: function()
			{
				return State.variables.CharacterSheet_Shard_Ring.quest.available_postFightPassagesLoss_dom;
			},
            condition: function()
            {
                return State.variables.CharacterSheet_Shard_Ring.quest.fullDom == true;
            },
            passage: "Shard_Ring_Dom_Loss",
        },
    },
    dominantExit:
    {
        normal:
        {
            available: function()
			{
				return State.variables.CharacterSheet_Shard_Ring.quest.available_dominantExit_normal;
			},
            condition: function()
            {
                return State.variables.CharacterSheet_Shard_Ring.quest.relationshipScoring <= 2 && State.variables.CharacterSheet_Shard_Ring.quest.relationshipScoring >= -2;
            },
            passage: "Shard_Ring_Low_Rela_Win_Dominant_NormalExit",
        },
        final:
        {
            available: function()
			{
				return State.variables.CharacterSheet_Shard_Ring.quest.available_dominantExit_final;
			},
            condition: function()
            {
                return State.variables.CharacterSheet_Shard_Ring.quest.relationshipScoring > 2 && State.variables.CharacterSheet_Shard_Ring.quest.fullDom == false;
            },
            passage: "Shard_Ring_Low_Rela_Win_Dominant_Final",
        },
        domIdle:
        {
            available: function()
			{
				return State.variables.CharacterSheet_Shard_Ring.quest.available_dominantExit_domIdle;
			},
            condition: function()
            {
                return State.variables.CharacterSheet_Shard_Ring.quest.fullDom == true;
            },
            passage: "Shard_Ring_Low_Rela_Win_Dominant_Idle",
        },
    },
    subExit:
    {
        normal:
        {
            available: function()
			{
				return State.variables.CharacterSheet_Shard_Ring.quest.available_subExit_normal;
			},
            condition: function()
            {
                return State.variables.CharacterSheet_Shard_Ring.quest.relationshipScoring <= 2 && State.variables.CharacterSheet_Shard_Ring.quest.relationshipScoring >= -2;
            },
            passage: "Shard_Ring_Low_Rela_Win_Sub_NormalExitChoice",
        },
        final:
        {
            available: function()
			{
				return State.variables.CharacterSheet_Shard_Ring.quest.available_subExit_final;
			},
            condition: function()
            {
                return State.variables.CharacterSheet_Shard_Ring.quest.relationshipScoring < -2 && State.variables.CharacterSheet_Shard_Ring.quest.fullSub == false;
            },
            passage: "Shard_Ring_Low_Rela_Win_Sub_FinalExitChoice",
        },
        subIdle:
        {
            available: function()
			{
				return State.variables.CharacterSheet_Shard_Ring.quest.available_subExit_subIdle;
			},
            condition: function()
            {
                return State.variables.CharacterSheet_Shard_Ring.quest.fullSub == true;
            },
            passage: "Shard_Ring_Low_Rela_Win_Sub_IdleExit",
        },
    },
}>>

::_shard_ring_text_sheet <850,4850>
<<set setup.TextSheet_Shard_Ring =
{
}>>

::_slime_fight_sheet <975,4850>
<<set setup.FighterSheet_Slime =
{
	hp: 80,
	stamina: 35,
	strength: 20,
	critChance: 0,
    critDamage: 1.50,
	arousalGain: 10,
	minArousal: 0,
    growthMultiplier: 1,
	bonusGrowth: {
        height: 0,
        cock: 0,
        muscles: 0,
        balls: 0,
    },
	staminaRecovery: 12,
	variables: $FightVariables,
	fightMoveIDs: [setup.FightMove_SlimeLunge.id],
	fightReward: setup.RewardTier.VERY_LOW,
	encounterIntroText: "<<include Encounter_Intro_Slime>>",
	encounterStartText: "<<include Encounter_Start_Slime>>",
	outcomePlayerWins: "<<include Encounter_Win_Slime>>",
	outcomePlayerLoses: "<<include Encounter_Loss_Slime>>"
}>>

::_slime_info_sheet <1100,4850>
<<set setup.InfoSheet_Slime =
{
	name: "",
	gender: "other",
	corruption: 0,
	muscles: 0,
	height: 76,
	cock: 0,
	balls: 0,
	alive: true,
	known: setup.EncounterKnownState.UNKNOWN,
    anatomy:
    {
        heads: {
			number: 1,
			race: setup.RacePool.SYMBIOTE,
			colour: setup.ColourPool.DEFAULT
		},
		eyes: {
			number: 0,
			race: setup.RacePool.SYMBIOTE,
			colour: setup.ColourPool.DEFAULT
		},
		jaws: {
			number: 0,
			race: setup.RacePool.SYMBIOTE,
			colour: setup.ColourPool.DEFAULT
		},
		teeths: {
			number: 0,
			race: setup.RacePool.SYMBIOTE,
			colour: setup.ColourPool.DEFAULT
		},
		hands: {
			number: 2,
			race: setup.RacePool.SYMBIOTE,
			colour: setup.ColourPool.DEFAULT
		},
		horns: {
			number: 0,
			race: setup.RacePool.SYMBIOTE,
			colour: setup.ColourPool.DEFAULT
		},
		wings: {
			number: 0,
			race: setup.RacePool.SYMBIOTE,
			colour: setup.ColourPool.DEFAULT
		},
		tongues:{
			number: 0,
			race: setup.RacePool.SYMBIOTE,
			colour: setup.ColourPool.DEFAULT
		},
		arms: {
			number: 2,
			race: setup.RacePool.SYMBIOTE,
			colour: setup.ColourPool.DEFAULT
		},
		pecs: {
			number: 0,
			race: setup.RacePool.SYMBIOTE,
			colour: setup.ColourPool.DEFAULT
		},
		abdominals: {
			number: 0,
			race: setup.RacePool.SYMBIOTE,
			colour: setup.ColourPool.DEFAULT
		},
		cocks: {
			number: 0,
			race: setup.RacePool.SYMBIOTE,
			colour: setup.ColourPool.DEFAULT
		},
		balls: {
			number: 0,
			race: setup.RacePool.SYMBIOTE,
			colour: setup.ColourPool.DEFAULT
		},
		legs: {
			number: 0,
			race: setup.RacePool.SYMBIOTE,
			colour: setup.ColourPool.DEFAULT
		},
		tails: {
			number: 0,
			race: setup.RacePool.SYMBIOTE,
			colour: setup.ColourPool.DEFAULT
		},
		breasts: {
			number: 0,
			race: setup.RacePool.SYMBIOTE,
			colour: setup.ColourPool.DEFAULT
		},
		vaginas: {
			number: 0,
			race: setup.RacePool.SYMBIOTE,
			colour: setup.ColourPool.DEFAULT
		}
    }
}>>

::Sheets_Slime <1225,4850>
<<include "_slime_fight_sheet">>
<<include "_slime_info_sheet">>
<<include "_slime_quest_sheet">>
<<include "_slime_text_sheet">>

<<set $CharacterSheet_Slime = setup.CharacterFactory.createCharacter({id: "CharacterSheet_Slime", 
                                                               info:  setup.InfoSheet_Slime, 
                                                               fight: setup.FighterSheet_Slime, 
                                                               quest: setup.QuestSheet_Slime, 
                                                               text:  "TextSheet_Slime"})>>

::_slime_quest_sheet <100,4975>
<<set setup.QuestSheet_Slime =
{
	met: false
}>>

::_slime_text_sheet <225,4975>
<<set setup.TextSheet_Slime =
{
}>>

::_torgar_audio <350,4975>
<<set setup.AudioSheet_Torgar =
{
    voice:
    {
        playlist:
        {
            title: "characterVoice_Torgar",
            tracks:
            {
                arousal_1_Size_1:
                {
                    tags: ["arousal_1", "Torgar_Normal"],
                    track: "Torgar_Idle_S1_A1"
                },
                arousal_2_Size_1:
                {
                    tags: ["arousal_2", "Torgar_Normal"],
                    track: "Torgar_Idle_S1_A2"
                },
                arousal_3_Size_1:
                {
                    tags: ["arousal_3", "Torgar_Normal"],
                    track: "Torgar_Idle_S1_A3"
                },
                arousal_4_Size_1:
                {
                    tags: ["arousal_4", "Torgar_Normal"],
                    track: "Torgar_Idle_S1_A4"
                },
                arousal_1_Size_2:
                {
                    tags: ["arousal_1", "Torgar_Infected"],
                    track: "Torgar_Idle_S2_A1"
                },
                arousal_2_Size_2:
                {
                    tags: ["arousal_2", "Torgar_Infected"],
                    track: "Torgar_Idle_S2_A2"
                },
                arousal_3_Size_2:
                {
                    tags: ["arousal_3", "Torgar_Infected"],
                    track: "Torgar_Idle_S2_A3"
                },
                arousal_4_Size_2:
                {
                    tags: ["arousal_4", "Torgar_Infected"],
                    track: "Torgar_Idle_S2_A4"
                },
                arousal_1_Size_3:
                {
                    tags: ["arousal_1", "Torgar_Lost"],
                    track: "Torgar_Idle_S3_A1"
                },
                arousal_2_Size_3:
                {
                    tags: ["arousal_2", "Torgar_Lost"],
                    track: "Torgar_Idle_S3_A2"
                },
                arousal_3_Size_3:
                {
                    tags: ["arousal_3", "Torgar_Lost"],
                    track: "Torgar_Idle_S3_A3"
                },
                arousal_4_Size_3:
                {
                    tags: ["arousal_4", "Torgar_Lost"],
                    track: "Torgar_Idle_S3_A4"
                },
            },
        },
    },
}>>

::_torgar_body_visual <475,4975>
<<set setup.BodyVisualSheet_Torgar =
{
    emoteList:
    {
        normal: 
        {
            visual: "https://sombreve.github.io/Dawn-of-Corruption-Site/Images/characters/Torgar/portrait_torgar_head_neutral.png",
            cumVisual: "https://sombreve.github.io/Dawn-of-Corruption-Site/Images/characters/Torgar/portrait_torgar_head_cum_white.png",
        },
        smiling: 
        {
            visual: "https://sombreve.github.io/Dawn-of-Corruption-Site/Images/characters/Torgar/portrait_torgar_head_smiling.png",
            cumVisual: "https://sombreve.github.io/Dawn-of-Corruption-Site/Images/characters/Torgar/portrait_torgar_head_cum_white.png",
        },
        blushing: 
        {
            visual: "https://sombreve.github.io/Dawn-of-Corruption-Site/Images/characters/Torgar/portrait_torgar_head_blushing.png",
            cumVisual: "https://sombreve.github.io/Dawn-of-Corruption-Site/Images/characters/Torgar/portrait_torgar_head_cum_white.png",
        },
        horny: 
        {
            visual: "https://sombreve.github.io/Dawn-of-Corruption-Site/Images/characters/Torgar/portrait_torgar_head_horny.png",
            cumVisual: "https://sombreve.github.io/Dawn-of-Corruption-Site/Images/characters/Torgar/portrait_torgar_head_cum_white.png",
        },
        sad: 
        {
            visual: "https://sombreve.github.io/Dawn-of-Corruption-Site/Images/characters/Torgar/portrait_torgar_head_sad.png",
            cumVisual: "https://sombreve.github.io/Dawn-of-Corruption-Site/Images/characters/Torgar/portrait_torgar_head_cum_white.png",
        },
        angry: 
        {
            visual: "https://sombreve.github.io/Dawn-of-Corruption-Site/Images/characters/Torgar/portrait_torgar_head_angry.png",
            cumVisual: "https://sombreve.github.io/Dawn-of-Corruption-Site/Images/characters/Torgar/portrait_torgar_head_cum_white.png",
        },
        cumming: 
        {
            visual: "https://sombreve.github.io/Dawn-of-Corruption-Site/Images/characters/Torgar/portrait_torgar_head_cumming.png",
            cumVisual: "https://sombreve.github.io/Dawn-of-Corruption-Site/Images/characters/Torgar/portrait_torgar_head_cum_white.png",
        },
    },
    cockList :
    {
        smallest:
        {
            visual: "https://sombreve.github.io/Dawn-of-Corruption-Site/Images/characters/Torgar/portrait_torgar_dick_1.png",
            cumVisual: "https://sombreve.github.io/Dawn-of-Corruption-Site/Images/characters/Torgar/portrait_torgar_dick_1_cum.png",
        },
        small:
        {
            visual: "https://sombreve.github.io/Dawn-of-Corruption-Site/Images/characters/Torgar/portrait_torgar_dick_2.png",
            cumVisual: "https://sombreve.github.io/Dawn-of-Corruption-Site/Images/characters/Torgar/portrait_torgar_dick_2_cum.png",
        },
        medium:
        {
            visual: "https://sombreve.github.io/Dawn-of-Corruption-Site/Images/characters/Torgar/portrait_torgar_dick_3.png",
            cumVisual: "https://sombreve.github.io/Dawn-of-Corruption-Site/Images/characters/Torgar/portrait_torgar_dick_3_cum.png",
        },
        corruptedMedium:
        {
            visual: "https://sombreve.github.io/Dawn-of-Corruption-Site/Images/characters/Torgar/portrait_torgar_dick_4.png",
            cumVisual: "https://sombreve.github.io/Dawn-of-Corruption-Site/Images/characters/Torgar/portrait_torgar_dick_4_cum.png",
        },
        lost:
        {
            visual: "https://sombreve.github.io/Dawn-of-Corruption-Site/Images/characters/Torgar/portrait_torgar_dick_5.png",
            cumVisual: "https://sombreve.github.io/Dawn-of-Corruption-Site/Images/characters/Torgar/portrait_torgar_dick_5_cum.png",
        },
        ascended:
        {
            visual: "https://sombreve.github.io/Dawn-of-Corruption-Site/Images/characters/Torgar/portrait_torgar_dick_6.png",
            cumVisual: "https://sombreve.github.io/Dawn-of-Corruption-Site/Images/characters/Torgar/portrait_torgar_dick_6_cum.png",
        },
    },
    bodyList :
    {
        normal:
        {
            visual: "https://sombreve.github.io/Dawn-of-Corruption-Site/Images/characters/Torgar/portrait_torgar_body_1.png",
            cumVisual: "https://sombreve.github.io/Dawn-of-Corruption-Site/Images/characters/Torgar/portrait_torgar_body_1_cum.png",
            condition: function(character)
            {
                var size = setup.getStatValue(character, "height");
                return character.quest.progress == setup.TorgarProgress.NORMAL;
            },
            headClass: "TorgarSmallBodyHead",
            permittedCocks: [
                {
                    cock: "smallest",
                    cockClass: "TorgarSmallBody1Cock",
                    condition: function(character)
                    {
                        let ratio = setup.getcockToBodyRatio(character);
                        return ratio < 0.55;
                    },
                },
                {
                    cock: "small",
                    cockClass: "TorgarSmallBody2Cock",
                    condition: function(character)
                    {
                        let ratio = setup.getcockToBodyRatio(character);
                        return ratio >= 0.55;
                    },
                },
            ],
        },
        infected:
        {
            visual: "https://sombreve.github.io/Dawn-of-Corruption-Site/Images/characters/Torgar/portrait_torgar_body_2.png",
            cumVisual: "https://sombreve.github.io/Dawn-of-Corruption-Site/Images/characters/Torgar/portrait_torgar_body_2_cum.png",
            condition: function(character)
            {
                return character.quest.progress == setup.TorgarProgress.INFECTED ||  character.quest.progress == setup.TorgarProgress.REDEEMED || (!character.quest.lost_FullyCovered && character.quest.progress == setup.TorgarProgress.LOST);
            },
            headClass: "TorgarInfectedBodyHead",
            permittedCocks: [
                {
                    cock: "medium",
                    cockClass: "TorgarInfected2Cock",
                    condition: function(character)
                    {
                        return character.quest.blackVeinsOnDick == false;
                    },
                },
                {
                    cock: "corruptedMedium",
                    cockClass: "TorgarInfected3Cock",
                    condition: function(character)
                    {
                        return character.quest.blackVeinsOnDick == true;
                    },
                },
            ],
        },
        lost:
        {
            visual: "https://sombreve.github.io/Dawn-of-Corruption-Site/Images/characters/Torgar/portrait_torgar_body_3.png",
            cumVisual: "https://sombreve.github.io/Dawn-of-Corruption-Site/Images/characters/Torgar/portrait_torgar_body_3.png",
            condition: function(character)
            {
                return (character.quest.lost_FullyCovered && character.quest.progress == setup.TorgarProgress.LOST) || character.quest.progress == setup.TorgarProgress.LOST_TEAMMATE;
            },
            headClass: "TorgarLostBodyHead",
            permittedCocks: [
                {
                    cock: "lost",
                    cockClass: "TorgarLost4Cock",
                    condition: function(character)
                    {
                        return true;
                    },
                },
            ],
        },
        ascended:
        {
            visual: "https://sombreve.github.io/Dawn-of-Corruption-Site/Images/characters/Torgar/portrait_torgar_body_4.png",
            cumVisual: "https://sombreve.github.io/Dawn-of-Corruption-Site/Images/characters/Torgar/portrait_torgar_body_4.png",
            condition: function(character)
            {
                return character.quest.progress == setup.TorgarProgress.ASCENDED;
            },
            headClass: "TorgarAscendedBodyHead",
            permittedCocks: [
                {
                    cock: "ascended",
                    cockClass: "TorgarAscended5Cock",
                    condition: function(character)
                    {
                        return true;
                    },
                },
            ],
        },
        redeemed:
        {
            visual: "https://sombreve.github.io/Dawn-of-Corruption-Site/Images/characters/Torgar/portrait_torgar_body_1_no_canister.png",
            cumVisual: "https://sombreve.github.io/Dawn-of-Corruption-Site/Images/characters/Torgar/portrait_torgar_body_1_no_canister_cum.png",
            condition: function(character)
            {
                return character.quest.progress == setup.TorgarProgress.REDEEMED_TEAMMATE;
            },
            headClass: "TorgarSmallBodyHead",
            permittedCocks: [
                {
                    cock: "smallest",
                    cockClass: "TorgarSmallBody1Cock",
                    condition: function(character)
                    {
                        let ratio = setup.getcockToBodyRatio(character);
                        return ratio < 0.55;
                    },
                },
                {
                    cock: "small",
                    cockClass: "TorgarSmallBody2Cock",
                    condition: function(character)
                    {
                        let ratio = setup.getcockToBodyRatio(character);
                        return ratio >= 0.55;
                    },
                },
            ],
        },
    },
}>>

::_torgar_fight_sheet <600,4975>
<<set setup.FighterSheet_Torgar =
{
	hp: 120,
	stamina: 12,
	strength: 35,
	critChance: 0,
    critDamage: 1.50,
	arousalGain: 10,
    growthMultiplier: 1,
	bonusGrowth: {
        height: 0,
        cock: 0,
        muscles: 0,
        balls: 0,
    },
	minArousal: 0,
	staminaRecovery: 4,
	variables: $FightVariables,
	fightMoveIDs: [setup.FightMove_Basic_Attack.id, setup.FightMove_Sigil_Triad.id],
	fightReward: setup.RewardTier.LOW,
	encounterIntroText: "<<include Encounter_Intro_Torgar>>",
	encounterStartText: "<<include Encounter_Start_Torgar>>",
	outcomePlayerWins: "<<include Encounter_Win_Torgar>>",
	outcomePlayerLoses: "<<include Encounter_Loss_Torgar>>",
	teammateSettings:
	{
		attackTiming: setup.AttackTiming.BEFORE_PLAYER,
	},
}>>

::_torgar_info_sheet <725,4975>
<<set setup.InfoSheet_Torgar =
{
	name: "",
	gender: "male",
	bodyVisual: "BodyVisualSheet_Torgar",
	audioSheet: "AudioSheet_Torgar",
	corruption: 100,
	muscles: 40,
	height: 81,
	cock: 12,
	balls: 5,
	alive: true,
	known: setup.EncounterKnownState.UNKNOWN,
	anatomy: {
		heads: {
			number: 1,
			race: setup.RacePool.HALFORC,
			colour: setup.ColourPool.DEFAULT
		},
		eyes: {
			number: 2,
			race: setup.RacePool.HALFORC,
			colour: setup.ColourPool.GREEN
		},
		jaws: {
			number: 1,
			race: setup.RacePool.HALFORC,
			colour: setup.ColourPool.DEFAULT
		},
		teeths: {
			number: 1,
			race: setup.RacePool.HALFORC,
			colour: setup.ColourPool.DEFAULT
		},
		hands: {
			number: 2,
			race: setup.RacePool.HALFORC,
			colour: setup.ColourPool.DEFAULT
		},
		tongues:{
			number: 1,
			race: setup.RacePool.HALFORC,
			colour: setup.ColourPool.DEFAULT
		},
		arms: {
			number: 2,
			race: setup.RacePool.HALFORC,
			colour: setup.ColourPool.DEFAULT
		},
		pecs: {
			number: 2,
			race: setup.RacePool.HALFORC,
			colour: setup.ColourPool.DEFAULT
		},
		abdominals: {
			number: 6,
			race: setup.RacePool.HALFORC,
			colour: setup.ColourPool.DEFAULT
		},
		cocks: {
			number: 1,
			race: setup.RacePool.HALFORC,
			colour: setup.ColourPool.DEFAULT
		},
		balls: {
			number: 2,
			race: setup.RacePool.HALFORC,
			colour: setup.ColourPool.DEFAULT
		},
		legs: {
			number: 2,
			race: setup.RacePool.HALFORC,
			colour: setup.ColourPool.DEFAULT
		},
		tails: {
			number: 1,
			race: setup.RacePool.HALFORC,
			colour: setup.ColourPool.DEFAULT
		},
		breasts: {
			number: 0,
			race: setup.RacePool.HALFORC,
			colour: setup.ColourPool.DEFAULT
		},
		vaginas: {
			number: 0,
			race: setup.RacePool.HALFORC,
			colour: setup.ColourPool.DEFAULT
		}
	}
}>>

::Sheets_Torgar <850,4975>
<<include "_torgar_body_visual">>
<<include "_torgar_audio">>
<<include "_torgar_text_sheet">>
<<include "_torgar_fight_sheet">>
<<include "_torgar_info_sheet">>
<<include "_torgar_quest_sheet">>
<<include "_torgar_story_sheet">>


<<set $CharacterSheet_Torgar = setup.CharacterFactory.createCharacter({id: "CharacterSheet_Torgar", 
                                                 info: setup.InfoSheet_Torgar, 
                                                 fight: setup.FighterSheet_Torgar, 
                                                 quest: setup.QuestSheet_Torgar, 
                                                 text: "TextSheet_Torgar"})>>

<<run $CharacterSheet_Torgar.applyAbilityRuntimeData(setup.Ability_HerculeanBuild)>>
<<run $CharacterSheet_Torgar.applyAbilityRuntimeData(setup.Ability_HerculeanBuild)>>

::_torgar_quest_sheet <975,4975>
<<set setup.QuestSheet_Torgar =
{
    met: false,
    progress: setup.TorgarProgress.NORMAL,
    pureScoring: 0,
    lostScoring: 0,
    ascendedScoring: 0,
    relationshipScoring: 0,
    growthMultiplier: 1,
    usedVialOnPlayerDick: false,
    blackVeinsOnDick: false,
    lost_FullyCovered: false,
    available_encounterPassages_lostTeammateIdle: true,
    available_encounterPassages_redeemedTeammateFirstTime: true,
    available_encounterPassages_redeemedTeammateIdle: true,
    available_encounterPassages_lowRelaMidRelaTrigger: true,
    available_encounterPassages_midRelaPathChange: true,
    available_encounterPassages_lostPathIdle: true,
    available_encounterPassages_midRelaIdle: true,
    available_encounterPassages_lostPathTrigger: true,
    available_encounterPassages_purePathTrigger: true,
    available_encounterPassages_lowRelaIdle_GotBig: true,
    available_encounterPassages_lowRelaIdle_Carry: true,
    available_encounterPassages_lowRelaIdle_Origin: true,
    available_encounterPassages_lowRelaIdle: true,
    available_encounterPassages_firstTime: true,
    available_postFightPassagesWin_lowRelaMidRelaTrigger: true,
    available_postFightPassagesWin_midRelaPathChange: true,
    available_postFightPassagesWin_lostPathTrigger: true,
    available_postFightPassagesWin_purePathTrigger: true,
    available_postFightPassagesWin_lostPathIdle: true,
    available_postFightPassagesWin_midRelaIdle: true,
    available_postFightPassagesWin_lowRelaIdle: true,
    available_postFightPassagesLoss_lowRelaMidRelaTrigger: true,
    available_postFightPassagesLoss_midRelaPathChange: true,
    available_postFightPassagesLoss_lostPathTrigger: true,
    available_postFightPassagesLoss_purePathTrigger: true,
    available_postFightPassagesLoss_lostPathIdle: true,
    available_postFightPassagesLoss_midRelaIdle: true,
    available_postFightPassagesLoss_lowRelaIdle: true,
}>>

::_torgar_story_sheet <1100,4975>
<<set setup.StorySheet_Torgar = 
{
    encounterPassages:
    {
        lostTeammateIdle:
        {
            available: function()
			{
				return State.variables.CharacterSheet_Torgar.quest.available_encounterPassages_lostTeammateIdle;
			},
            condition: function()
            {
                return State.variables.CharacterSheet_Torgar.quest.progress == setup.TorgarProgress.LOST_TEAMMATE;
            },
            passage: "Torgar_Lost_Teammate_EncounterStart",
        },
        redeemedTeammateFirstTime:
        {
            available: function()
			{
				return State.variables.CharacterSheet_Torgar.quest.available_encounterPassages_redeemedTeammateFirstTime;
			},
            condition: function()
            {
                return State.variables.CharacterSheet_Torgar.quest.progress == setup.TorgarProgress.REDEEMED_TEAMMATE;
            },
            passage: "Torgar_Redeemed_Path_Idle_Win_Epilogue",
        },
        redeemedTeammateIdle:
        {
            available: function()
			{
				return State.variables.CharacterSheet_Torgar.quest.available_encounterPassages_redeemedTeammateIdle;
			},
            condition: function()
            {
                return State.variables.CharacterSheet_Torgar.quest.progress == setup.TorgarProgress.REDEEMED_TEAMMATE;
            },
            passage: "Torgar_Redeemed_Teammate_Path_Idle",
        },
        lowRelaMidRelaTrigger:
        {
            available: function()
			{
				return State.variables.CharacterSheet_Torgar.quest.available_encounterPassages_lowRelaMidRelaTrigger;
			},
            condition: function()
            {
                return State.variables.CharacterSheet_Torgar.quest.relationshipScoring >= 4;
            },
            passage: "Torgar_Low_Rela_Mid_Rela_Trigger_EncounterStart",
        },
        midRelaPathChange:
        {
            available: function()
			{
				return State.variables.CharacterSheet_Torgar.quest.available_encounterPassages_midRelaPathChange;
			},
            condition: function()
            {
                return State.variables.CharacterSheet_Torgar.quest.relationshipScoring >= 6;
            },
            passage: "Torgar_Mid_Rela_Path_Change_EncounterStart",
        },
        lostPathIdle:
        {
            available: function()
			{
				return State.variables.CharacterSheet_Torgar.quest.available_encounterPassages_lostPathIdle;
			},
            condition: function()
            {
                return State.variables.CharacterSheet_Torgar.quest.progress == setup.TorgarProgress.LOST;
            },
            passage: "Torgar_Lost_Path_Idle_EncounterStart",
        }, 
        midRelaIdle:
        {
            available: function()
			{
				return State.variables.CharacterSheet_Torgar.quest.available_encounterPassages_midRelaIdle;
			},
            condition: function()
            {
                return State.variables.CharacterSheet_Torgar.quest.progress == setup.TorgarProgress.INFECTED;
            },
            passage: "Torgar_Mid_Rela_Idle_EncounterStart",
        },
        lostPathTrigger:
        {
            available: function()
			{
				return State.variables.CharacterSheet_Torgar.quest.available_encounterPassages_lostPathTrigger;
			},
            condition: function()
            {
                return State.variables.CharacterSheet_Torgar.quest.relationshipScoring >= 6 && setup.evaluateTorgarPath() == setup.TorgarProgress.LOST;
            },
            passage: "Torgar_Lost_Path_Trigger_EncounterStart",
        },
        purePathTrigger:
        {
            available: function()
			{
				return State.variables.CharacterSheet_Torgar.quest.available_encounterPassages_purePathTrigger;
			},
            condition: function()
            {
                return State.variables.CharacterSheet_Torgar.quest.relationshipScoring >= 6 && setup.evaluateTorgarPath() == setup.TorgarProgress.REDEEMED;
            },
            passage: "Torgar_Pure_Path_Trigger_EncounterStart",
        },
        lowRelaIdle_GotBig:
        {
            available: function()
			{
				return State.variables.CharacterSheet_Torgar.quest.available_encounterPassages_lowRelaIdle_GotBig;
			},
            condition: function()
            {
                return State.variables.CharacterSheet_Torgar.quest.relationshipScoring >= 1;
            },
            passage: "Torgar_Low_Rela_EncounterStart_Converse",
        },
        lowRelaIdle_Carry:
        {
            available: function()
			{
				return State.variables.CharacterSheet_Torgar.quest.available_encounterPassages_lowRelaIdle_Carry;
			},
            condition: function()
            {
                return State.variables.CharacterSheet_Torgar.quest.relationshipScoring >= 1;
            },
            passage: "Torgar_Low_Rela_EncounterStart_Converse",
        },
        lowRelaIdle_Origin:
        {
            available: function()
			{
				return State.variables.CharacterSheet_Torgar.quest.available_encounterPassages_lowRelaIdle_Origin;
			},
            condition: function()
            {
                return State.variables.CharacterSheet_Torgar.quest.relationshipScoring >= 1;
            },
            passage: "Torgar_Low_Rela_EncounterStart_Converse",
        },
        lowRelaIdle:
        {
            available: function()
			{
				return State.variables.CharacterSheet_Torgar.quest.available_encounterPassages_lowRelaIdle;
			},
            condition: function()
            {
                return State.variables.CharacterSheet_Torgar.quest.relationshipScoring >= 1;
            },
            passage: "Torgar_Low_Rela_EncounterStart",
        },
        firstTime:
        {
            available: function()
			{
				return State.variables.CharacterSheet_Torgar.quest.available_encounterPassages_firstTime;
			},
            condition: function()
            {
                return true;
            },
            passage: "Torgar_FirstMeeting_Intro",
        },
    },
    postFightPassagesWin:
    {
        lowRelaMidRelaTrigger:
        {
            available: function()
			{
				return State.variables.CharacterSheet_Torgar.quest.available_postFightPassagesWin_lowRelaMidRelaTrigger;
			},
            condition: function()
            {
                return State.variables.CharacterSheet_Torgar.quest.relationshipScoring >= 4;
            },
            passage: "Torgar_Low_Rela_Mid_Rela_Trigger_Win",
        },
        midRelaPathChange:
        {
            available: function()
			{
				return State.variables.CharacterSheet_Torgar.quest.available_postFightPassagesWin_midRelaPathChange;
			},
            condition: function()
            {
                return State.variables.CharacterSheet_Torgar.quest.relationshipScoring >= 6;
            },
            passage: "Torgar_Mid_Rela_Path_Change_Win",
        },
        lostPathTrigger:
        {
            available: function()
			{
				return State.variables.CharacterSheet_Torgar.quest.available_postFightPassagesWin_lostPathTrigger;
			},
            condition: function()
            {
                return State.variables.CharacterSheet_Torgar.quest.relationshipScoring >= 6 && State.variables.CharacterSheet_Torgar.quest.progress == setup.TorgarProgress.LOST;
            },
            passage: "Torgar_Lost_Path_Trigger_Win",
        },
        purePathTrigger:
        {
            available: function()
			{
				return State.variables.CharacterSheet_Torgar.quest.available_postFightPassagesWin_purePathTrigger;
			},
            condition: function()
            {
                return State.variables.CharacterSheet_Torgar.quest.relationshipScoring >= 6 && State.variables.CharacterSheet_Torgar.quest.progress == setup.TorgarProgress.REDEEMED;
            },
            passage: "Torgar_Pure_Path_Trigger_Win",
        },
        lostPathIdle:
        {
            available: function()
			{
				return State.variables.CharacterSheet_Torgar.quest.available_postFightPassagesWin_lostPathIdle;
			},
            condition: function()
            {
                return State.variables.CharacterSheet_Torgar.quest.progress == setup.TorgarProgress.LOST;
            },
            passage: "Torgar_Lost_Path_Idle_Win",
        },
        midRelaIdle:
        {
            available: function()
			{
				return State.variables.CharacterSheet_Torgar.quest.available_postFightPassagesWin_midRelaIdle;
			},
            condition: function()
            {
                return State.variables.CharacterSheet_Torgar.quest.progress == setup.TorgarProgress.INFECTED;
            },
            passage: "Torgar_Mid_Rela_Win_Idle",
        },
        lowRelaIdle:
        {
            available: function()
			{
				return State.variables.CharacterSheet_Torgar.quest.available_postFightPassagesWin_lowRelaIdle;
			},
            condition: function()
            {
                return true;
            },
            passage: "Torgar_Low_Rela_Win_Idle",
        },
    },
    postFightPassagesLoss:
    {
        lowRelaMidRelaTrigger:
        {
            available: function()
			{
				return State.variables.CharacterSheet_Torgar.quest.available_postFightPassagesLoss_lowRelaMidRelaTrigger;
			},
            condition: function()
            {
                return State.variables.CharacterSheet_Torgar.quest.relationshipScoring >= 4;
            },
            passage: "Torgar_Low_Rela_Mid_Rela_Trigger_Loss",
        }, 
        midRelaPathChange:
        {
            available: function()
			{
				return State.variables.CharacterSheet_Torgar.quest.available_postFightPassagesLoss_midRelaPathChange;
			},
            condition: function()
            {
                return State.variables.CharacterSheet_Torgar.quest.relationshipScoring >= 6;
            },
            passage: "Torgar_Mid_Rela_Path_Change_Loss",
        },
        lostPathTrigger:
        {
            available: function()
			{
				return State.variables.CharacterSheet_Torgar.quest.available_postFightPassagesLoss_lostPathTrigger;
			},
            condition: function()
            {
                return State.variables.CharacterSheet_Torgar.quest.relationshipScoring >= 6 && State.variables.CharacterSheet_Torgar.quest.progress == setup.TorgarProgress.LOST;
            },
            passage: "Torgar_Lost_Path_Trigger_Loss",
        },
        purePathTrigger:
        {
            available: function()
			{
				return State.variables.CharacterSheet_Torgar.quest.available_postFightPassagesLoss_purePathTrigger;
			},
            condition: function()
            {
                return State.variables.CharacterSheet_Torgar.quest.relationshipScoring >= 6 && State.variables.CharacterSheet_Torgar.quest.progress == setup.TorgarProgress.REDEEMED;
            },
            passage: "Torgar_Pure_Path_Trigger_Loss",
        },
        lostPathIdle:
        {
            available: function()
			{
				return State.variables.CharacterSheet_Torgar.quest.available_postFightPassagesLoss_lostPathIdle;
			},
            condition: function()
            {
                return State.variables.CharacterSheet_Torgar.quest.progress == setup.TorgarProgress.LOST;
            },
            passage: "Torgar_Lost_Path_Idle_Loss",
        },
        midRelaIdle:
        {
            available: function()
			{
				return State.variables.CharacterSheet_Torgar.quest.available_postFightPassagesLoss_midRelaIdle;
			},
            condition: function()
            {
                return State.variables.CharacterSheet_Torgar.quest.progress == setup.TorgarProgress.INFECTED;
            },
            passage: "Torgar_Mid_Rela_Loss_Idle",
        },
        lowRelaIdle:
        {
            available: function()
			{
				return State.variables.CharacterSheet_Torgar.quest.available_postFightPassagesLoss_lowRelaIdle;
			},
            condition: function()
            {
                return true;
            },
            passage: "Torgar_Low_Rela_Loss_Idle",
        },
    },
}>>

::_torgar_text_sheet <1225,4975>
<<set setup.TextSheet_Torgar =
{	
	goMeetImp_Intro :{
		heightFlavour: {
			small: [
				"GoMeetImp_heightFlavour_small",
			],
			medium: [
				"GoMeetImp_heightFlavour_small",
			],
			large: [
				"GoMeetImp_heightFlavour_large",
			],
			huge: [
				"GoMeetImp_heightFlavour_huge",
			],
		},
	},
}>>

::_town_guard_fight_sheet <100,5100>
<<set setup.FighterSheet_town_guard =
{
	hp: 80,
	stamina: 10,
	strength: 30,
	critChance: 20,
    critDamage: 1.75,
	arousalGain: 5,
	minArousal: 0,
    growthMultiplier: 1,
	bonusGrowth: {
        height: 0,
        cock: 0,
        muscles: 0,
        balls: 0,
    },
	staminaRecovery: 15,
	variables: $FightVariables,
	fightMoveIDs: [setup.FightMove_Basic_Attack.id],
	fightReward: setup.RewardTier.LOW,
	encounterIntroText: undefined,
	encounterStartText: "<<include town_guard_fight_start>>",
	outcomePlayerWins: "<<include town_guard_fight_won>>",
	outcomePlayerLoses: "<<include town_guard_fight_lost>>"
}>>

::_town_guard_info_sheet <225,5100>
<<set setup.InfoSheet_town_guard =
{
	name: "",
	gender: "male",
    corruption: 0,
	muscles: 15,
	height: 73,
	cock: 6,
	balls: 2,
	alive: true,
    anatomy: {
		heads: {
			number: 1,
			race: setup.RacePool.DRAGONBORN,
			colour: setup.ColourPool.DEFAULT
		},
		eyes: {
			number: 2,
			race: setup.RacePool.DRAGONBORN,
			colour: setup.ColourPool.DEFAULT
		},
		jaws: {
			number: 1,
			race: setup.RacePool.DRAGONBORN,
			colour: setup.ColourPool.DEFAULT
		},
		teeths: {
			number: 1,
			race: setup.RacePool.DRAGONBORN,
			colour: setup.ColourPool.DEFAULT
		},
		hands: {
			number: 2,
			race: setup.RacePool.DRAGONBORN,
			colour: setup.ColourPool.DEFAULT
		},
		horns: {
			number: 0,
			race: setup.RacePool.DRAGONBORN,
			colour: setup.ColourPool.DEFAULT
		},
		wings: {
			number: 0,
			race: setup.RacePool.DRAGONBORN,
			colour: setup.ColourPool.DEFAULT
		},
		tongues:{
			number: 1,
			race: setup.RacePool.DRAGONBORN,
			colour: setup.ColourPool.DEFAULT
		},
		arms: {
			number: 2,
			race: setup.RacePool.DRAGONBORN,
			colour: setup.ColourPool.DEFAULT
		},
		pecs: {
			number: 2,
			race: setup.RacePool.DRAGONBORN,
			colour: setup.ColourPool.DEFAULT
		},
		abdominals: {
			number: 6,
			race: setup.RacePool.DRAGONBORN,
			colour: setup.ColourPool.DEFAULT
		},
		cocks: {
			number: 1,
			race: setup.RacePool.DRAGONBORN,
			colour: setup.ColourPool.DEFAULT
		},
		balls: {
			number: 2,
			race: setup.RacePool.DRAGONBORN,
			colour: setup.ColourPool.DEFAULT
		},
		legs: {
			number: 2,
			race: setup.RacePool.DRAGONBORN,
			colour: setup.ColourPool.DEFAULT
		},
		tails: {
			number: 1,
			race: setup.RacePool.DRAGONBORN,
			colour: setup.ColourPool.DEFAULT
		},
		breasts: {
			number: 0,
			race: setup.RacePool.DRAGONBORN,
			colour: setup.ColourPool.DEFAULT
		},
		vaginas: {
			number: 0,
			race: setup.RacePool.DRAGONBORN,
			colour: setup.ColourPool.DEFAULT
		}
	}
}>>

::Sheets_town_guard <350,5100>
<<include "_town_guard_fight_sheet">>
<<include "_town_guard_info_sheet">>
<<include "_town_guard_quest_sheet">>

<<set $CharacterSheet_town_guard = setup.CharacterFactory.createCharacter({id: "CharacterSheet_town_guard", 
                                                    info: setup.InfoSheet_town_guard, 
                                                    fight: setup.FighterSheet_town_guard, 
                                                    quest: setup.QuestSheet_town_guard, 
                                                    text: undefined})>>

::_town_guard_quest_sheet <475,5100>
<<set setup.QuestSheet_town_guard =
{
	met: false,
	fled: false,
	corrupted: false,
	beatenOnce: false
}>>

::_wounded_lost_fight_sheet <600,5100>
<<set setup.FighterSheet_Wounded_Lost =
{
	hp: 30,
	stamina: 60,
	strength: 0,
	critChance: 0,
    critDamage: 1.50,
	arousalGain: 20,
    growthMultiplier: 1,
	bonusGrowth: {
        height: 0,
        cock: 0,
        muscles: 0,
        balls: 0,
    },
	minArousal: 0,
	staminaRecovery: 8,
	variables: $FightVariables,
	fightMoveIDs: [setup.FightMove_Tutorial1.id, setup.FightMove_Tutorial2.id,  setup.FightMove_Tutorial3.id],
	fightReward: setup.RewardTier.VERY_LOW,
	encounterIntroText: "",
	encounterStartText: "",
	outcomePlayerWins: "<<include intro_fight_won>>",
	outcomePlayerLoses: "<<include intro_fight_lost>>",
	teammateSettings:
	{
		attackTiming: setup.AttackTiming.BEFORE_PLAYER,
	},
}>>

::_wounded_lost_info_sheet <725,5100>
<<set setup.InfoSheet_Wounded_Lost =
{
	name: "",
	gender: "male",
	corruption: 800,
	muscles: 60,
	height: 98,
	cock: 12,
	balls: 6,
	alive: true,
	known: setup.EncounterKnownState.UNKNOWN,
	anatomy: {
		heads: {
			number: 1,
			race: setup.RacePool.WEREWOLF,
			colour: setup.ColourPool.DEFAULT
		},
		eyes: {
			number: 2,
			race: setup.RacePool.WEREWOLF,
			colour: setup.ColourPool.DEFAULT
		},
		jaws: {
			number: 1,
			race: setup.RacePool.WEREWOLF,
			colour: setup.ColourPool.DEFAULT
		},
		teeths: {
			number: 1,
			race: setup.RacePool.WEREWOLF,
			colour: setup.ColourPool.DEFAULT
		},
		hands: {
			number: 2,
			race: setup.RacePool.WEREWOLF,
			colour: setup.ColourPool.DEFAULT
		},
		tongues:{
			number: 1,
			race: setup.RacePool.WEREWOLF,
			colour: setup.ColourPool.DEFAULT
		},
		arms: {
			number: 2,
			race: setup.RacePool.WEREWOLF,
			colour: setup.ColourPool.DEFAULT
		},
		pecs: {
			number: 2,
			race: setup.RacePool.WEREWOLF,
			colour: setup.ColourPool.DEFAULT
		},
		abdominals: {
			number: 6,
			race: setup.RacePool.WEREWOLF,
			colour: setup.ColourPool.DEFAULT
		},
		cocks: {
			number: 1,
			race: setup.RacePool.WEREWOLF,
			colour: setup.ColourPool.DEFAULT
		},
		balls: {
			number: 2,
			race: setup.RacePool.WEREWOLF,
			colour: setup.ColourPool.DEFAULT
		},
		legs: {
			number: 2,
			race: setup.RacePool.WEREWOLF,
			colour: setup.ColourPool.DEFAULT
		},
		tails: {
			number: 1,
			race: setup.RacePool.WEREWOLF,
			colour: setup.ColourPool.DEFAULT
		},
		breasts: {
			number: 0,
			race: setup.RacePool.WEREWOLF,
			colour: setup.ColourPool.DEFAULT
		},
		vaginas: {
			number: 0,
			race: setup.RacePool.WEREWOLF,
			colour: setup.ColourPool.DEFAULT
		}
	}
}>>

::Sheets_Wounded_Lost <850,5100>
<<include "_wounded_lost_text_sheet">>
<<include "_wounded_lost_fight_sheet">>
<<include "_wounded_lost_info_sheet">>
<<include "_wounded_lost_quest_sheet">>


<<set $CharacterSheet_Wounded_Lost = setup.CharacterFactory.createCharacter({id: "CharacterSheet_Wounded_Lost", 
                                                 info: setup.InfoSheet_Wounded_Lost, 
                                                 fight: setup.FighterSheet_Wounded_Lost, 
                                                 quest: setup.QuestSheet_Wounded_Lost, 
                                                 text: "TextSheet_Wounded_Lost"})>>

::_wounded_lost_quest_sheet <975,5100>
<<set setup.QuestSheet_Wounded_Lost =
{
    met: false,
}>>

::_wounded_lost_text_sheet <1100,5100>
<<set setup.TextSheet_Wounded_Lost =
{	
}>>

::Ability_ActiveParry <1225,5100>
<<set setup.Ability_ActiveParry = setup.AbilityDataFactory.createAbilityData({
    id:         "Ability_ActiveParry",
    name:       "", 
    description:function(character)
    {
        return character.info.name + ""; 
    },
    maxRank: 1
})>>

<<run setup.Ability_ActiveParry.addBehaviour(
    "start",
    setup.AbilityTrigger.ON_ACQUIRE,
    function(abilityRuntimeData, abilityParams)
    {
        abilityRuntimeData.blackboard = {parryTurnCount: 0}
    },
)>>

<<run setup.Ability_ActiveParry.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_FIGHT_PRE_RECEIVE_DAMAGE,
    function(abilityRuntimeData, abilityParams){
        var displayString = "";

        if(abilityParams.attackDamage != 0)
        {
            var blackboard = 
            {
                attackDamage: abilityParams.attackDamage,
            };
            
            abilityParams.attackDamage = 0;
            abilityParams.ignoreAdditionalEffects = true;

            abilityParams.target.applyAbilityRuntimeData(setup.Ability_ParryEnergy, blackboard)

            displayString += abilityParams.target.info.name + "\n"
            displayString += "\n";
            displayString += "\n";
            displayString += abilityParams.target.info.name + "";

        }
        else
        {
            displayString += abilityParams.target.info.name + "";
        }

        return displayString;
    }
)>>

<<run setup.Ability_ActiveParry.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_FIGHT_TURN_START,
    function(abilityRuntimeData, abilityParams){
        var displayString = "";

        abilityRuntimeData.blackboard.parryTurnCount++

        if(abilityRuntimeData.blackboard.parryTurnCount >= 2)
        {
            abilityRuntimeData.isScheduledForRemoval = true;
        }

        return displayString;
    }
)>>

<<run setup.Ability_ActiveParry.setFilter(setup.AbilityFilter.STATUSEFFECT)>>

::Ability_AppetiteForGrowth <100,5225>
<<set setup.Ability_AppetiteForGrowth = setup.AbilityDataFactory.createAbilityData({
    id:         "Ability_AppetiteForGrowth",
    name:       "",
    description:function(character, abilityRuntimeData)
    {
        if(abilityRuntimeData == undefined)
        {
            return "25%"; 
        }
        else
        {
            return ""+ (Math.ceil((0.25 + setup.getRankGrowth(abilityRuntimeData, "log", 10)) * 100)).toFixed(2).replace(/\.00$/, '') +"%"; 
        }
    },
    maxRank: 5
})>>

<<run setup.Ability_AppetiteForGrowth.addBehaviour(
    "start",
    setup.AbilityTrigger.ON_ACQUIRE,
    undefined,
)>>

<<run setup.Ability_AppetiteForGrowth.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_ACQUIRE,
        function(abilityRuntimeData, abilityParams)
    {
        abilityRuntimeData.modifier.growthMods = {
            mod: setup.mod.ADD, value: (0.25 + setup.getRankGrowth(abilityRuntimeData, "log", 10)) //This value is not a - I KNOOOOOOOOOOOOOOOOW I JUST FOUND IT
        }
    }
)>>

<<run setup.Ability_AppetiteForGrowth.setUpgrade(
    function(abilityRuntimeData, character){
        return (setup.canRank(abilityRuntimeData) == false)
    },
    setup.Ability_AppetiteForGrowth_2,
    function(character){
        var displayString = ""
        displayString += "3(" + State.variables.Level  + ")\n"
        return displayString
    }
)>>

<<run setup.Ability_AppetiteForGrowth.setUnlockableFromLevelScreen(true)>>

<<run setup.Ability_AppetiteForGrowth.setUnlockCondition(
    function(character){
        return (State.variables.Level >= 3)
    }
)>>

<<set setup.Ability_AppetiteForGrowth.setCategory(setup.AbilityCategory.GROWTH)>>
<<set setup.Ability_AppetiteForGrowth.setGrade(setup.AbilityGrade.LOW)>>

::Ability_AppetiteForGrowth_2 <225,5225>
<<set setup.Ability_AppetiteForGrowth_2 = setup.AbilityDataFactory.createAbilityData({
    id:         "Ability_AppetiteForGrowth_2",
    name:       "",
    description:function(character, abilityRuntimeData)
    {
        if(abilityRuntimeData == undefined)
        {
            return "75%"; 
        }
        else
        {
            return ""+ ( Math.ceil((0.75 + setup.getRankGrowth(abilityRuntimeData, "exp", 3) / 100) * 100) ).toFixed(2).replace(/\.00$/, '') +"%\n" + (10 + setup.getRankGrowth(abilityRuntimeData, "linear", 5))+"" ; 
        }
    },
    maxRank: 5
})>>

<<run setup.Ability_AppetiteForGrowth_2.addBehaviour(
    "start",
    setup.AbilityTrigger.ON_ACQUIRE,
    undefined,
)>>

<<run setup.Ability_AppetiteForGrowth_2.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_ACQUIRE,
    function(abilityRuntimeData, abilityParams)
    {
        abilityRuntimeData.modifier.growthMods = {
                mod: setup.mod.ADD, value: (0.75 + setup.getRankGrowth(abilityRuntimeData, "exp", 3) / 100)
        }

        setup.setModifierCorruptionMods(abilityRuntimeData.modifier, {mod: setup.mod.ADD, value: 10 + setup.getRankGrowth(abilityRuntimeData, "linear", 5)})
    }
)>>

<<set setup.Ability_AppetiteForGrowth_2.setCategory(setup.AbilityCategory.SOMBREVE)>>
<<set setup.Ability_AppetiteForGrowth_2.setGrade(setup.AbilityGrade.HIGH)>>

::Ability_Berserking <350,5225>
<<set setup.Ability_Berserking = setup.AbilityDataFactory.createAbilityData({
    id:         "Ability_Berserking",
    name:       "",
    description:function(character, abilityRuntimeData)
    {
        if(abilityRuntimeData == undefined)
        {
            let displayString = "15%";
            displayString += "5%"
            return displayString
        }
        else
        {
            let displayString = "";
            displayString += setup.getRankGrowth(abilityRuntimeData, "linear", 15) + "%";
            displayString += "";
            displayString += setup.getRankGrowth(abilityRuntimeData, "linear", 5) + "%";
            return displayString
        }
    },
    maxRank: 5
})>>

<<run setup.Ability_Berserking.addBehaviour(
    "start",
    setup.AbilityTrigger.ON_ACQUIRE,
    undefined
)>>

<<run setup.Ability_Berserking.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_ACQUIRE  + setup.AbilityTrigger.ON_STAT_CHANGE,
    function(abilityRuntimeData, abilityParams)
    {
        abilityRuntimeData.modifier.strengthMods = {
            mod: setup.mod.MULTIPLYPOS,
            value: setup.getRankGrowth(abilityRuntimeData, "linear", 0.15),
        }

        abilityRuntimeData.modifier.maxHPMods = {
                mod: setup.mod.MULTIPLYNEG,
                value: setup.getRankGrowth(abilityRuntimeData, "linear", 0.05),
            }
    }
)>>

<<run setup.Ability_Berserking.setUnlockableFromLevelScreen(true)>>

<<run setup.Ability_Berserking.setUnlockCondition(
    function(character){
        return (State.variables.Level >= 1)
    }
)>>

<<set setup.Ability_Berserking.setCategory(setup.AbilityCategory.WARRIOR)>>
<<set setup.Ability_Berserking.setGrade(setup.AbilityGrade.VERYLOW)>>

::Ability_BrinkOfMadness <475,5225>
<<set setup.Ability_BrinkOfMadness = setup.AbilityDataFactory.createAbilityData({
    id:         "Ability_BrinkOfMadness",
    name:       "",
    description:function(character, abilityRuntimeData)
    {
        return "";
        
    },
    maxRank: 1
})>>

<<run setup.Ability_BrinkOfMadness.addBehaviour(
    "start",
    setup.AbilityTrigger.ON_ACQUIRE,
    undefined,
)>>

<<run setup.Ability_BrinkOfMadness.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_ENTER_MID_HEALTH,
    function(abilityRuntimeData, abilityParams)
    {
        abilityRuntimeData.isActive = true
        abilityParams.target.fight.variables.currentArousal = Math.min(100, abilityParams.target.fight.variables.currentArousal + setup.getRankGrowth(abilityRuntimeData, "linear", 40))
        abilityRuntimeData.modifier.critChanceMods = {mod: setup.mod.ADD, value: setup.getRankGrowth(abilityRuntimeData, "linear", 30)}
        abilityRuntimeData.modifier.strengthMods = {mod: setup.mod.ADD, value: setup.getRankGrowth(abilityRuntimeData, "linear", 20)}
        abilityRuntimeData.modifier.maxStaminaMods = {mod: setup.mod.ADD, value: setup.getRankGrowth(abilityRuntimeData, "linear", 120)};
        abilityParams.target.fight.variables.currentStamina += 120;
        abilityParams.target.fight.variables.currentStamina = Math.min(abilityParams.target.fight.variables.currentStamina, setup.getMaxStamina(abilityParams.target));
        abilityRuntimeData.modifier.fightMoveIDsMods = {mod: setup.mod.ADD, value: [setup.FightMove_Hypnotize.id]}
        
        var displayString = abilityParams.target.info.name + "\n";
        displayString += "\n"
        displayString += "\n"

        return displayString;
    },
)>>

<<run setup.Ability_BrinkOfMadness.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_EXIT_MID_HEALTH + setup.AbilityTrigger.ON_FIGHT_END,
    function(abilityRuntimeData, abilityParams)
    {
        abilityRuntimeData.isActive = false
        abilityRuntimeData.modifier = setup.ModifierFactory.createModifier(
        {
            abilityIndex: abilityRuntimeData.abilityDataIndex
        });
        return ""
    }
)>>

<<run setup.Ability_BrinkOfMadness.setUnlockableFromLevelScreen(true)>>

<<run setup.Ability_BrinkOfMadness.setUnlockCondition(
    function(character){
        return (State.variables.Level >= 20 && setup.getStatValue(character, "corruption") >= 100);
    }
)>>

<<set setup.Ability_BrinkOfMadness.setCategory(setup.AbilityCategory.SOMBREVE)>>
<<set setup.Ability_BrinkOfMadness.setGrade(setup.AbilityGrade.VERYHIGH)>>

::Ability_BuriedInCum <600,5225>
<<set setup.Ability_BuriedInCum = setup.AbilityDataFactory.createAbilityData({
    id:         "Ability_BuriedInCum",
    name:       "", 
    description:function(character)
    {
        return ""; 
    },
    maxRank: 999
})>>

<<run setup.Ability_BuriedInCum.addBehaviour(
    "start",
    setup.AbilityTrigger.ON_ACQUIRE,
    undefined,
)>>

<<run setup.Ability_BuriedInCum.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_ACQUIRE,
    function(abilityRuntimeData, abilityParams){
        abilityRuntimeData.modifier.strengthMods = {mod: setup.mod.REMOVE, value: setup.getRankGrowth(abilityRuntimeData, "linear", 10)};
    }
)>>

<<run setup.Ability_BuriedInCum.addBehaviour(
    "remove",
    setup.AbilityTrigger.ON_FIGHT_END,
    undefined,
)>>

<<run setup.Ability_BuriedInCum.setFilter(setup.AbilityFilter.STATUSEFFECT)>>

::Ability_ChannelTheAstralSoul <725,5225>
<<set setup.Ability_ChannelTheAstralSoul = setup.AbilityDataFactory.createAbilityData({
    id:         "Ability_ChannelTheAstralSoul",
    name:       "", 
    description:function(character)
    {
        var displayString = ""
        switch(setup.getCorruptionTier(character))
        {
            case 0:
                displayString += "";
                break;
            case 1:
                displayString += "";
                break;
            case 2:
                displayString += "";
                break;
            case 3:
                displayString += "";
                break;
            case 4:
                displayString += "";
                break;
            default:
                displayString += ""
                break;
        }
        return displayString; 
    },
    maxRank: 5
})>>

<<run setup.Ability_ChannelTheAstralSoul.addBehaviour(
    "start",
    setup.AbilityTrigger.ON_ACQUIRE,
    undefined,
)>>

<<run setup.Ability_ChannelTheAstralSoul.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_ACQUIRE + setup.AbilityTrigger.ON_DAY_CHANGE + setup.AbilityTrigger.ON_GAIN_CORRUPTION,
    function(abilityRuntimeData, abilityParams)
    {
        switch(setup.getCorruptionTier(abilityParams.self))
        {
            case 0:
                abilityRuntimeData.modifier.essenceMultiplierMods = {mod: setup.mod.ADD, value: setup.getRankGrowth(abilityRuntimeData, "linear", 0.20)};
                break;
            case 1:
                abilityRuntimeData.modifier.essenceMultiplierMods = {mod: setup.mod.ADD, value: setup.getRankGrowth(abilityRuntimeData, "linear", 0.15)};
                break;
            case 2:
                abilityRuntimeData.modifier.essenceMultiplierMods = {mod: setup.mod.ADD, value: setup.getRankGrowth(abilityRuntimeData, "linear", 0.10)};
                break;
            case 3:
                abilityRuntimeData.modifier.essenceMultiplierMods = {mod: setup.mod.ADD, value: setup.getRankGrowth(abilityRuntimeData, "linear", 0.05)};
                break;
            case 4:
                abilityRuntimeData.modifier.essenceMultiplierMods = {mod: setup.mod.ADD, value: setup.getRankGrowth(abilityRuntimeData, "linear", 0.01)};
                break;
            default:
                abilityRuntimeData.modifier.essenceMultiplierMods = {mod: setup.mod.ADD, value: setup.getRankGrowth(abilityRuntimeData, "linear", 0.01)};
                break;
        }
    }
)>>

<<run setup.Ability_ChannelTheAstralSoul.setUnlockCondition(
    function(character){
        return State.variables.Level >= 3
    }
)>>

<<run setup.Ability_ChannelTheAstralSoul.setUnlockableFromLevelScreen(true)>>

<<set setup.Ability_ChannelTheAstralSoul.setCategory(setup.AbilityCategory.PURITY)>>
<<set setup.Ability_ChannelTheAstralSoul.setGrade(setup.AbilityGrade.LOW)>>

::Ability_CockRingOfTheBind <850,5225>
<<set setup.Ability_CockRingOfTheBind = setup.AbilityDataFactory.createAbilityData({
    id:         "Ability_CockRingOfTheBind",
    name:       "",
    description:function(character, abilityRuntimeData)
    {
        let displayString = "";
        return displayString
    },
    maxRank: 10
})>>

<<run setup.Ability_CockRingOfTheBind.addBehaviour(
    "start",
    setup.AbilityTrigger.ON_ACQUIRE,
    undefined
)>>

<<run setup.Ability_CockRingOfTheBind.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_ACQUIRE + setup.AbilityTrigger.ON_FIGHT_END,
    function(abilityRuntimeData, abilityParams)
    {   
        abilityRuntimeData.modifier.fightMoveIDsMods = {mod: setup.mod.ADD, value: [setup.FightMove_AbsorbEssence.id]};
        let currentStrength = 0;
        if(abilityRuntimeData.modifier.strengthMods != undefined)
        {
            currentStrength = abilityRuntimeData.modifier.strengthMods.value;
        }
        abilityRuntimeData.modifier.strengthMods = {mod: setup.mod.ADD, value: currentStrength + setup.getRankGrowth(abilityRuntimeData, "linear", 1)}

        let currentMuscles = 0;
        if(abilityRuntimeData.modifier.musclesMods != undefined)
        {
            currentMuscles = abilityRuntimeData.modifier.musclesMods.value;
        }
        abilityRuntimeData.modifier.musclesMods = {mod: setup.mod.ADD, value: currentMuscles + setup.getRankGrowth(abilityRuntimeData, "linear", 2)}

        let currentCock = 0;
        if(abilityRuntimeData.modifier.cockMods != undefined)
        {
            currentCock = abilityRuntimeData.modifier.cockMods.value;
        }
        abilityRuntimeData.modifier.cockMods = {mod: setup.mod.ADD, value: currentCock + setup.getRankGrowth(abilityRuntimeData, "linear", 1)}

        let currentBalls = 0;
        if(abilityRuntimeData.modifier.ballsMods != undefined)
        {
            currentBalls = abilityRuntimeData.modifier.ballsMods.value;
        }
        abilityRuntimeData.modifier.ballsMods = {mod: setup.mod.ADD, value: currentBalls + setup.getRankGrowth(abilityRuntimeData, "linear", 0.3)}
    }
)>>

<<run setup.Ability_CockRingOfTheBind.setFilter(setup.AbilityFilter.ALTERATION)>>

::Ability_CodexPassion <975,5225>
<<set setup.Ability_CodexPassion = setup.AbilityDataFactory.createAbilityData({
    id:         "Ability_CodexPassion",
    name:       "",
    description:function(character, abilityRuntimeData)
    {
        if(abilityRuntimeData == undefined)
        {
            return "2";  
        }
        else
        {
            return ""+setup.getRankGrowth(abilityRuntimeData, "linear", 2)+""; 
        }
    },
    maxRank: 5
})>>

<<run setup.Ability_CodexPassion.addBehaviour(
    "start",
    setup.AbilityTrigger.ON_ACQUIRE,
    undefined,
)>>

<<run setup.Ability_CodexPassion.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_FIGHT_DO_DAMAGELESS_ATTACK,
    function(abilityRuntimeData, abilityParams)
    {   
        let heal = setup.getRankGrowth(abilityRuntimeData, "linear", 2);

        abilityParams.self.fight.variables.currentHP = Math.min(abilityParams.self.fight.variables.currentHP + heal, setup.getStatValue(abilityParams.self, "hp"));

        if(heal != 0)
        {
            return "<span style='color:#46c546;'>"++ "</span>";
        }
    },
)>>

<<run setup.Ability_CodexPassion.setUnlockCondition(
    function(character){
        return (State.variables.Level >= 4) && ((setup.getStatValue(character, "corruption") <= 25))
    }
)>>

<<run setup.Ability_CodexPassion.setUnlockableFromLevelScreen(true)>>

<<set setup.Ability_CodexPassion.setCategory(setup.AbilityCategory.PURITY)>>
<<set setup.Ability_CodexPassion.setGrade(setup.AbilityGrade.LOW)>>

::Ability_CollarOfTheBind <1100,5225>
<<set setup.Ability_CollarOfTheBind = setup.AbilityDataFactory.createAbilityData({
    id:         "Ability_CollarOfTheBind",
    name:       "",
    description:function(character, abilityRuntimeData)
    {
        let displayString = "";
        return displayString
    },
    maxRank: 10
})>>

<<run setup.Ability_CollarOfTheBind.addBehaviour(
    "start",
    setup.AbilityTrigger.ON_ACQUIRE,
    undefined
)>>

<<run setup.Ability_CollarOfTheBind.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_ACQUIRE,
    function(abilityRuntimeData, abilityParams)
    {   
        abilityRuntimeData.modifier.fightMoveIDsMods = {mod: setup.mod.ADD, value: [setup.FightMove_AbsorbEssence.id]};
        abilityRuntimeData.modifier.xpMultiplierMods = {mod: setup.mod.ADD, value: setup.getRankGrowth(abilityRuntimeData, "linear", 0.03)}
        abilityRuntimeData.modifier.essenceMultiplierMods = {mod: setup.mod.REMOVE, value: setup.getRankGrowth(abilityRuntimeData, "linear", 0.01)}
    }
)>>

<<run setup.Ability_CollarOfTheBind.setFilter(setup.AbilityFilter.ALTERATION)>>

::Ability_CorruptedStrength <1225,5225>
<<set setup.Ability_CorruptedStrength = setup.AbilityDataFactory.createAbilityData({
    id:         "Ability_CorruptedStrength",
    name:       "", 
    description:function(character)
    {
        return "20%"; 
    },
    maxRank: 999
})>>

<<run setup.Ability_CorruptedStrength.addBehaviour(
    "start",
    setup.AbilityTrigger.ON_ACQUIRE,
    undefined,
)>>

<<run setup.Ability_CorruptedStrength.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_ACQUIRE,
    function(abilityRuntimeData, abilityParams){
        
        var strength = Math.ceil(setup.getStatValue(abilityParams.self, "corruption", "Ability_CorruptedStrength") * 0.2);
        abilityRuntimeData.modifier.strengthMods = {mod: setup.mod.ADD, value: setup.getRankGrowth(abilityRuntimeData, "linear", strength)};
    }
)>>

<<run setup.Ability_CorruptedStrength.addBehaviour(
    "remove",
    setup.AbilityTrigger.ON_FIGHT_END,
    undefined,
)>>

<<run setup.Ability_CorruptedStrength.setFilter(setup.AbilityFilter.STATUSEFFECT)>>

::Ability_BlueStar <100,5350>
<<set setup.Ability_BlueStar = setup.AbilityDataFactory.createAbilityData({
    id:         "Ability_BlueStar",
    name:       "",
    description:function(character, abilityRuntimeData)
    {
        let displayString = "\n";
        displayString += "20%\n"
        return displayString
    },
    maxRank: 1
})>>

<<run setup.Ability_BlueStar.addBehaviour(
    "start",
    setup.AbilityTrigger.ON_ACQUIRE,
    function(abilityRuntimeData, abilityParams)
    {
        abilityRuntimeData.isActive = false;
    }
)>>

<<run setup.Ability_BlueStar.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_DAY_CHANGE + setup.AbilityTrigger.ON_STAT_CHANGE + setup.AbilityTrigger.ON_FIGHT_START,
    function(abilityRuntimeData, abilityParams)
    {   
        if(State.variables.Expedition % 4 == 3)
        {
            abilityRuntimeData.isActive = true;
            abilityRuntimeData.modifier.growthMods = {
                mod: setup.mod.MULTIPLYPOS,
                value: 0.2
            }
        }
        else
        {
            abilityRuntimeData.isActive = false;
        }

    }
)>>

<<run setup.Ability_BlueStar.setAsGlobalAbility()>>
<<run setup.Ability_BlueStar.setFilter(setup.AbilityFilter.GLOBAL)>>

::Ability_GoldenStar <225,5350>
<<set setup.Ability_GoldenStar = setup.AbilityDataFactory.createAbilityData({
    id:         "Ability_GoldenStar",
    name:       "",
    description:function(character, abilityRuntimeData)
    {
        let displayString = "\n";
        displayString += "20%"
        return displayString
    },
    maxRank: 1
})>>

<<run setup.Ability_GoldenStar.addBehaviour(
    "start",
    setup.AbilityTrigger.ON_ACQUIRE,
    function(abilityRuntimeData, abilityParams)
    {
        abilityRuntimeData.isActive = true;
    }
)>>

<<run setup.Ability_GoldenStar.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_DAY_CHANGE + setup.AbilityTrigger.ON_STAT_CHANGE + setup.AbilityTrigger.ON_FIGHT_START,
    function(abilityRuntimeData, abilityParams)
    {   
        if(State.variables.Expedition % 4 == 1)
        {
            abilityRuntimeData.isActive = true;
            abilityRuntimeData.modifier.strengthMods = {
                mod: setup.mod.MULTIPLYPOS,
                value: 0.2,
            }
        }
        else
        {
            abilityRuntimeData.isActive = false;
        }
    }
)>>

<<run setup.Ability_GoldenStar.setAsGlobalAbility()>>
<<run setup.Ability_GoldenStar.setFilter(setup.AbilityFilter.GLOBAL)>>

::Ability_GreenStar <350,5350>
<<set setup.Ability_GreenStar = setup.AbilityDataFactory.createAbilityData({
    id:         "Ability_GreenStar",
    name:       "",
    description:function(character, abilityRuntimeData)
    {
        let displayString = "\n";
        displayString += "20%"
        return displayString
    },
    maxRank: 1
})>>

<<run setup.Ability_GreenStar.addBehaviour(
    "start",
    setup.AbilityTrigger.ON_ACQUIRE,
    function(abilityRuntimeData, abilityParams)
    {
        abilityRuntimeData.isActive = false;
    }
)>>

<<run setup.Ability_GreenStar.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_DAY_CHANGE + setup.AbilityTrigger.ON_STAT_CHANGE + setup.AbilityTrigger.ON_FIGHT_START,
    function(abilityRuntimeData, abilityParams)
    {   
        if(State.variables.Expedition % 4 == 2)
        {
            abilityRuntimeData.isActive = true;
            abilityRuntimeData.modifier.maxStaminaMods = {
                mod: setup.mod.MULTIPLYPOS,
                value: 0.2
            }
        }
        else
        {
            abilityRuntimeData.isActive = false;
        }

    }
)>>

<<run setup.Ability_GreenStar.setAsGlobalAbility()>>
<<run setup.Ability_GreenStar.setFilter(setup.AbilityFilter.GLOBAL)>>

::Ability_RedStar <475,5350>
<<set setup.Ability_RedStar = setup.AbilityDataFactory.createAbilityData({
    id:         "Ability_RedStar",
    name:       "",
    description:function(character, abilityRuntimeData)
    {
        let displayString = "\n";
        displayString += "20%"
        return displayString
    },
    maxRank: 1
})>>

<<run setup.Ability_RedStar.addBehaviour(
    "start",
    setup.AbilityTrigger.ON_ACQUIRE,
    function(abilityRuntimeData, abilityParams)
    {
        abilityRuntimeData.isActive = false;
    }
)>>

<<run setup.Ability_RedStar.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_DAY_CHANGE + setup.AbilityTrigger.ON_STAT_CHANGE + setup.AbilityTrigger.ON_FIGHT_START,
    function(abilityRuntimeData, abilityParams)
    {
        if(State.variables.Expedition % 4 == 0)
        {
            abilityRuntimeData.isActive = true;
            abilityRuntimeData.modifier.critChanceMods = {
                mod: setup.mod.MULTIPLYPOS,
                value: 0.2
            }
        }
        else
        {
            abilityRuntimeData.isActive = false;
        }

    }
)>>

<<run setup.Ability_RedStar.setAsGlobalAbility()>>
<<run setup.Ability_RedStar.setFilter(setup.AbilityFilter.GLOBAL)>>

::Ability_DeadlyAim <600,5350>
<<set setup.Ability_DeadlyAim = setup.AbilityDataFactory.createAbilityData({
    id:         "Ability_DeadlyAim",
    name:       "",
    description:function(character, abilityRuntimeData)
    {
        if(abilityRuntimeData == undefined)
        {
            let displayString = "7%";
            return displayString
        }
        else
        {
            let displayString = "";
            displayString += setup.getRankGrowth(abilityRuntimeData, "linear", 7) + "%";
            return displayString
        }
    },
    maxRank: 5
})>>

<<run setup.Ability_DeadlyAim.addBehaviour(
    "start",
    setup.AbilityTrigger.ON_ACQUIRE,
    undefined
)>>

<<run setup.Ability_DeadlyAim.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_ACQUIRE + setup.AbilityTrigger.ON_STAT_CHANGE,
    function(abilityRuntimeData, abilityParams)
    {   
        abilityRuntimeData.modifier.critChanceMods = {
            mod: setup.mod.ADD,
            value: setup.getRankGrowth(abilityRuntimeData, "linear", 7)
        }
    }
)>>

<<run setup.Ability_DeadlyAim.setUnlockableFromLevelScreen(true)>>

<<run setup.Ability_DeadlyAim.setUnlockCondition(
    function(character){
        return (State.variables.Level >= 1)
    }
)>>

<<set setup.Ability_DeadlyAim.setCategory(setup.AbilityCategory.WARRIOR)>>
<<set setup.Ability_DeadlyAim.setGrade(setup.AbilityGrade.VERYLOW)>>

::Ability_Defiler <725,5350>
<<set setup.Ability_Defiler = setup.AbilityDataFactory.createAbilityData({
    id:         "Ability_Defiler",
    name:       "", 
    description:function(character, abilityRuntimeData)
    {
        if(abilityRuntimeData == undefined)
        {
            return "5005%"
        }
        else
        {
            return "500"+setup.getRankGrowth(abilityRuntimeData, "linear", 5)+"% "
        }
    },
    maxRank: 10
})>>

<<run setup.Ability_Defiler.addBehaviour(
    "start",
    setup.AbilityTrigger.ON_ACQUIRE,
    undefined
)>>

<<run setup.Ability_Defiler.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_FIGHT_START,
    function(abilityRuntimeData, abilityParams)
    {
        if(setup.getStatValue(abilityParams.target, "corruption") < 500)
        {
            abilityRuntimeData.modifier.strengthMods = {mod: setup.mod.MULTIPLYPOS, value: setup.getRankGrowth(abilityRuntimeData, "linear", 0.05)};
        }
    }
)>>

<<run setup.Ability_Defiler.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_FIGHT_END,
    function(abilityRuntimeData, abilityParams)
    {
        abilityRuntimeData.modifier = setup.ModifierFactory.createModifier(
        {
            abilityIndex: abilityRuntimeData.abilityDataIndex
        });
    }
)>>

<<run setup.Ability_Defiler.setFilter(setup.AbilityFilter.ALTERATION)>>

::Ability_DemonicCorruption <850,5350>
<<set setup.Ability_DemonicCorruption = setup.AbilityDataFactory.createAbilityData({
    id:         "Ability_DemonicCorruption",
    name:       "",
    description:function(character)
    {
        return ""; 
    },
    maxRank: 1
})>>


<<run setup.Ability_DemonicCorruption.addBehaviour(
    "start",
    setup.AbilityTrigger.ON_ACQUIRE,
    function(abilityRuntimeData, abilityParams)
    {
        abilityRuntimeData.modifier.arousalGainMods = {mod: setup.mod.ADD, value: 3}
        abilityRuntimeData.modifier.maxStaminaMods = {mod: setup.mod.ADD, value: 4}

        setup.setModifierCorruptionMods(abilityRuntimeData.modifier, {mod: setup.mod.ADD, value: 30})

        abilityRuntimeData.modifier.musclesMods = {mod: setup.mod.ADD, value: 10}
        abilityRuntimeData.modifier.heightMods = {mod: setup.mod.ADD, value: 6}
        abilityRuntimeData.modifier.cockMods = {mod: setup.mod.ADD, value: 5}
        abilityRuntimeData.modifier.ballsMods = {mod: setup.mod.ADD, value: 2}
    }
)>>

<<run setup.Ability_DemonicCorruption.setUpgrade(
    function(abilityRuntimeData, character){
        return true;
    },
    setup.Ability_DemonicCorruption_2
)>>

<<run setup.Ability_DemonicCorruption.setUnlockCondition(
    function(character){
        return (State.variables.Level >= 1)
    }
)>>

<<run setup.Ability_DemonicCorruption.setFilter(setup.AbilityFilter.ALTERATION)>>

::Ability_DemonicCorruption_2 <975,5350>
<<set setup.Ability_DemonicCorruption_2 = setup.AbilityDataFactory.createAbilityData({
    id:         "Ability_DemonicCorruption_2",
    name:       "",
    description:function(character)
    {
        return "" +
                ""
    },
    maxRank: 1
})>>

<<run setup.Ability_DemonicCorruption_2.addBehaviour(
    "start",
    setup.AbilityTrigger.ON_ACQUIRE,
    function(abilityRuntimeData, abilityParams)
    {
        abilityRuntimeData.modifier.arousalGainMods = {mod: setup.mod.ADD, value: 9}
        abilityRuntimeData.modifier.maxStaminaMods = {mod: setup.mod.ADD, value: 10}
        abilityRuntimeData.modifier.maxHPMods = {mod: setup.mod.ADD, value: 5}

        setup.setModifierCorruptionMods(abilityRuntimeData.modifier, {mod: setup.mod.ADD, value: 45})
        abilityRuntimeData.modifier.musclesMods = {mod: setup.mod.ADD, value: 15}
        abilityRuntimeData.modifier.heightMods = {mod: setup.mod.ADD, value: 16}
        abilityRuntimeData.modifier.cockMods = {mod: setup.mod.ADD, value: 12}
        abilityRuntimeData.modifier.ballsMods = {mod: setup.mod.ADD, value: 4}
        abilityRuntimeData.modifier.fightMoveIDsMods = {mod: setup.mod.ADD, value: [setup.FightMove_IncubusCall.id]}
    }
)>>

<<run setup.Ability_DemonicCorruption_2.setUpgrade(
    function(abilityRuntimeData, character){
        return true;
    },
    setup.Ability_DemonicCorruption_3
)>>

<<run setup.Ability_DemonicCorruption_2.setFilter(setup.AbilityFilter.ALTERATION)>>

::Ability_DemonicCorruption_3 <1100,5350>
<<set setup.Ability_DemonicCorruption_3 = setup.AbilityDataFactory.createAbilityData({
    id:         "Ability_DemonicCorruption_3",
    name:       "",
    description:function(character)
    {
        return "\n" +
                "\n" +
                ""
    },
    maxRank: 1
})>>

<<run setup.Ability_DemonicCorruption_3.addBehaviour(
    "start",
    setup.AbilityTrigger.ON_ACQUIRE,
    function(abilityRuntimeData, abilityParams)
    {
        abilityRuntimeData.modifier.arousalGainMods = {mod: setup.mod.ADD, value: 15}
        abilityRuntimeData.modifier.maxStaminaMods = {mod: setup.mod.ADD, value: 15}
        abilityRuntimeData.modifier.maxHPMods = {mod: setup.mod.ADD, value: 10}

        setup.setModifierCorruptionMods(abilityRuntimeData.modifier, {mod: setup.mod.ADD, value: 60})
        
        abilityRuntimeData.modifier.musclesMods = {mod: setup.mod.ADD, value: 30}
        abilityRuntimeData.modifier.heightMods = {mod: setup.mod.ADD, value: 32}
        abilityRuntimeData.modifier.cockMods = {mod: setup.mod.ADD, value: 18}
        abilityRuntimeData.modifier.ballsMods = {mod: setup.mod.ADD, value: 6}
        abilityRuntimeData.modifier.fightMoveIDsMods = {mod: setup.mod.ADD, value: [setup.FightMove_IncubusCall.id, setup.FightMove_IncubusStrike.id]}
    }
)>>

<<run setup.Ability_DemonicCorruption_3.setFilter(setup.AbilityFilter.ALTERATION)>>

::Ability_Disciplined <1225,5350>
<<set setup.Ability_Disciplined = setup.AbilityDataFactory.createAbilityData({
    id:         "Ability_Disciplined",
    name:       "", 
    description:function(character, abilityRuntimeData)
    {
        if(abilityRuntimeData == undefined)
        {
            return "5005%"
        }
        else
        {
            return "500"+setup.getRankGrowth(abilityRuntimeData, "linear", 5)+"%"
        }
    },
    maxRank: 10
})>>

<<run setup.Ability_Disciplined.addBehaviour(
    "start",
    setup.AbilityTrigger.ON_ACQUIRE,
    undefined
)>>

<<run setup.Ability_Disciplined.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_FIGHT_START,
    function(abilityRuntimeData, abilityParams)
    {
        if(setup.getStatValue(abilityParams.target, "corruption") > 500)
        {
            abilityRuntimeData.modifier.strengthMods = {mod: setup.mod.MULTIPLYPOS, value: setup.getRankGrowth(abilityRuntimeData, "linear", 0.05)};
        }
    }
)>>

<<run setup.Ability_Disciplined.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_FIGHT_END,
    function(abilityRuntimeData, abilityParams)
    {
        abilityRuntimeData.modifier = setup.ModifierFactory.createModifier(
        {
            abilityIndex: abilityRuntimeData.abilityDataIndex
        });
    }
)>>

<<run setup.Ability_Disciplined.setFilter(setup.AbilityFilter.ALTERATION)>>

::Ability_DracosOmnipotence <100,5475>
<<set setup.Ability_DracosOmnipotence = setup.AbilityDataFactory.createAbilityData({
    id:         "Ability_DracosOmnipotence",
    name:       "",
    description:function(character, abilityRuntimeData)
    {
        if(abilityRuntimeData == undefined)
        {
            return ""; 
        }
        else
        {
            return ""+setup.getRankGrowth(abilityRuntimeData, "linear", 1)+""; 
        }
    },
    maxRank: 10
})>>

<<run setup.Ability_DracosOmnipotence.addBehaviour(
    "start",
    setup.AbilityTrigger.ON_ACQUIRE,
    undefined,
)>>

<<run setup.Ability_DracosOmnipotence.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_MAX_LUST,
    function(abilityRuntimeData, abilityParams)
    {   
        var self = abilityParams.self;

        var cockGrowth = setup.applyGrowth(self, "cock", Math.round(State.variables.Essence * setup.getRankGrowth(abilityRuntimeData, "linear", 1) / 3));
        var ballsGrowth = setup.applyGrowth(self, "balls", Math.round(State.variables.Essence * setup.getRankGrowth(abilityRuntimeData, "linear", 1) / 9));
        var muscleGrowth = setup.applyGrowth(self, "muscles", Math.round(State.variables.Essence * setup.getRankGrowth(abilityRuntimeData, "linear", 1) / 4.5));
        var sizeGrowth = setup.applyGrowth(self, "height", Math.round(State.variables.Essence * setup.getRankGrowth(abilityRuntimeData, "linear", 1)));

        var displayString = "\n\n";
        displayString += setup.growthFlavourDescriptors(self, abilityParams.target, cockGrowth, ballsGrowth, muscleGrowth, sizeGrowth);

        return displayString;
    },
)>>

<<run setup.Ability_DracosOmnipotence.setUnlockableFromLevelScreen(true)>>

<<run setup.Ability_DracosOmnipotence.setUnlockCondition(
    function(character){
        return (State.variables.Level >= 20);
    }
)>>

<<set setup.Ability_DracosOmnipotence.setCategory(setup.AbilityCategory.GROWTH)>>
<<set setup.Ability_DracosOmnipotence.setGrade(setup.AbilityGrade.VERYHIGH)>>

::Ability_EchoForm <225,5475>
<<set setup.Ability_EchoForm = setup.AbilityDataFactory.createAbilityData({
    id:         "Ability_EchoForm",
    name:       "",
    description:function(character){
        return character.symbiote.name + "";
    },
    maxRank: 5
})>>

<<run setup.Ability_EchoForm.addBehaviour(
    "start",
    setup.AbilityTrigger.ON_MAX_LUST,
    function(abilityRuntimeData, abilityParams)
    {   
        if(State.variables.HasSymbiote == false || State.variables.HasSymbiote == undefined)
        {
            abilityRuntimeData.isActive = true;
            State.variables.HasSymbiote = true;

            let hpMod = 25;
            let stamMod = 5;
            abilityRuntimeData.modifier.maxHPMods = {mod: setup.mod.ADD, value: hpMod}
            abilityRuntimeData.modifier.maxStaminaMods = {mod: setup.mod.ADD, value: stamMod}
            abilityRuntimeData.modifier.strengthMods = {mod: setup.mod.ADD, value: 10}
            abilityRuntimeData.modifier.critChanceMods = {mod: setup.mod.ADD, value: 10}
            abilityRuntimeData.modifier.arousalGainMods = {mod: setup.mod.REPLACE, value: -17}
            abilityRuntimeData.modifier.fightMoveIDsMods = {mod: setup.mod.ADD, value: [setup.FightMove_Goo_Stun.id]}
            abilityRuntimeData.modifier.actionSlotsMods = {mod: setup.mod.ADD, value: 1}
            abilityRuntimeData.modifier.comboMovesPerTurnMods = {mod: setup.mod.ADD, value: 2}

			abilityParams.self.fight.variables.currentHP = Math.min(abilityParams.self.fight.variables.currentHP + hpMod, setup.getMaxHP(abilityParams.self));
			abilityParams.self.fight.variables.currentStamina = Math.min(abilityParams.self.fight.variables.currentStamina + stamMod, setup.getMaxStamina(abilityParams.self));

            return "\n "+$CharacterSheet_Player.symbiote.color+"\n "+$CharacterSheet_Player.symbiote.color+""+setup.getRace($CharacterSheet_Player.symbiote.anatomy)+"";
        }
    }
)>>

<<run setup.Ability_EchoForm.addBehaviour(
    "end",
    setup.AbilityTrigger.ON_MIN_LUST + setup.AbilityTrigger.ON_FIGHT_END,
    function(abilityRuntimeData, abilityParams)
    {   
        if(State.variables.HasSymbiote == true)
        {
            abilityRuntimeData.modifier = setup.ModifierFactory.createModifier(
            {
                abilityIndex: abilityRuntimeData.abilityDataIndex
            });
            
            State.variables.HasSymbiote = false;
            abilityRuntimeData.isActive = false;

            return ""+setup.getRace(abilityParams.self.info.anatomy)+"";
        }
    }
)>>

<<run setup.Ability_EchoForm.setFilter(setup.AbilityFilter.ALTERATION)>>

::Ability_EmpoweringDrink <350,5475>
<<set setup.Ability_EmpoweringDrink = setup.AbilityDataFactory.createAbilityData({
    id:         "Ability_EmpoweringDrink",
    name:       "",
    description:function(character)
    {
        return "\n4"; 
    },
    maxRank: 999
})>>

<<run setup.Ability_EmpoweringDrink.addBehaviour(
    "start",
    setup.AbilityTrigger.ON_ACQUIRE,
    function(abilityRuntimeData, abilityParams)
    {
        abilityRuntimeData.blackboard = {}
    },
)>>

<<run setup.Ability_EmpoweringDrink.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_ACQUIRE,
    function(abilityRuntimeData, abilityParams)
    {
        abilityRuntimeData.blackboard.dayConsumed = State.variables.Expedition;

        setup.applyCorruption(abilityParams.self, 7);
        setup.applyGrowth(abilityParams.self, "muscles", 5);

        abilityRuntimeData.isActive = true;
        abilityRuntimeData.modifier.maxHPMods = {mod: setup.mod.ADD, value: setup.getRankGrowth(abilityRuntimeData, "linear", 5)};
        abilityRuntimeData.modifier.maxStaminaMods = {mod: setup.mod.ADD, value: setup.getRankGrowth(abilityRuntimeData, "linear", 5)};
        abilityRuntimeData.modifier.strengthMods = {mod: setup.mod.ADD, value: setup.getRankGrowth(abilityRuntimeData, "linear", 3)};
    }
)>>

<<run setup.Ability_EmpoweringDrink.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_DAY_CHANGE,
    function(abilityRuntimeData, abilityParams)
    {   
        if(State.variables.Expedition - abilityRuntimeData.blackboard.dayConsumed >= 4)
        {
            abilityRuntimeData.isActive = false;
            abilityRuntimeData.rank = 0;
        }
    }
)>>

<<run setup.Ability_EmpoweringDrink.setFilter(setup.AbilityFilter.ALTERATION)>>

::Ability_EssenceHoarder <475,5475>
<<set setup.Ability_EssenceHoarder = setup.AbilityDataFactory.createAbilityData({
    id:         "Ability_EssenceHoarder",
    name:       "",
    description:function(character, abilityRuntimeData)
    {
        if(abilityRuntimeData == undefined)
        {
            return "2001(30)"; 
        }
        else
        {
            return "200"+setup.getRankGrowth(abilityRuntimeData, "linear", 1)+"("+setup.getRankGrowth(abilityRuntimeData, "linear", 30)+")"; 
        }
    },
    maxRank: 5
})>>

<<run setup.Ability_EssenceHoarder.addBehaviour(
    "start",
    setup.AbilityTrigger.ON_ACQUIRE,
    undefined,
)>>

<<run setup.Ability_EssenceHoarder.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_GAIN_ESSENCE + setup.AbilityTrigger.ON_ACQUIRE,
    function(abilityRuntimeData, abilityParams)
    {
        var mod = Math.min(Math.floor(State.variables.Essence / 200) * setup.getRankGrowth(abilityRuntimeData, "linear", 1), setup.getRankGrowth(abilityRuntimeData, "linear", 30));
        abilityRuntimeData.modifier.strengthMods = {mod: setup.mod.ADD, value: mod}
    },
)>>

<<run setup.Ability_EssenceHoarder.setUnlockCondition(
    function(character){
        return (State.variables.Level >= 5)
    }
)>>

<<run setup.Ability_EssenceHoarder.setUnlockableFromLevelScreen(true)>>

<<set setup.Ability_EssenceHoarder.setCategory(setup.AbilityCategory.WARRIOR)>>
<<set setup.Ability_EssenceHoarder.setGrade(setup.AbilityGrade.MEDIUM)>>

::Ability_EssenceSurge <600,5475>
<<set setup.Ability_EssenceSurge = setup.AbilityDataFactory.createAbilityData({
    id:         "Ability_EssenceSurge",
    name:       "", 
    description:function(character)
    {
        return ""; 
    },
    maxRank: 999
})>>

<<run setup.Ability_EssenceSurge.addBehaviour(
    "start",
    setup.AbilityTrigger.ON_ACQUIRE,
    undefined,
)>>

<<run setup.Ability_EssenceSurge.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_ACQUIRE,
    function(abilityRuntimeData, abilityParams)
    {
        let currentValue = 0;
        if(abilityRuntimeData.modifier.strengthMods != undefined)
        {
            currentValue = abilityRuntimeData.modifier.strengthMods.value;
        }

        abilityRuntimeData.modifier.strengthMods = {mod: setup.mod.ADD, value: currentValue + (State.variables.FightTurn * 5)}
    }
)>>

<<run setup.Ability_EssenceSurge.addBehaviour(
    "remove",
    setup.AbilityTrigger.ON_FIGHT_END,
    undefined,
)>>

<<run setup.Ability_EssenceSurge.setFilter(setup.AbilityFilter.STATUSEFFECT)>>

::Ability_FaithsReward <725,5475>
<<set setup.Ability_FaithsReward = setup.AbilityDataFactory.createAbilityData({
    id:         "Ability_FaithsReward",
    name:       "",
    description:function(character, abilityRuntimeData)
    {
        if(abilityRuntimeData == undefined)
        {
            return "0.50.5\n1";
        }
        else
        {
            return ""+setup.getRankGrowth(abilityRuntimeData, "linear", 0.5)+""+setup.getRankGrowth(abilityRuntimeData, "linear", 0.5)+"\n1";
        }
    },
    maxRank: 5
})>>

<<run setup.Ability_FaithsReward.addBehaviour(
    "start",
    setup.AbilityTrigger.ON_ACQUIRE,
    undefined,
)>>

<<run setup.Ability_FaithsReward.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_FIGHT_BATTLE_WON,
    function(abilityRuntimeData, abilityParams)
    {   
        if(abilityRuntimeData.modifier.maxHPMods == undefined || abilityRuntimeData.modifier.maxStaminaMods == undefined){
            abilityRuntimeData.modifier.maxHPMods = {mod: setup.mod.ADD, value: setup.getRankGrowth(abilityRuntimeData, "linear", 0.5)}
            abilityRuntimeData.modifier.maxStaminaMods = {mod: setup.mod.ADD, value: setup.getRankGrowth(abilityRuntimeData, "linear", 0.5)}
        }else{
            let previousHPModifier = abilityRuntimeData.modifier.maxHPMods.value;
            let previousStamModifier = abilityRuntimeData.modifier.maxStaminaMods.value;
            abilityRuntimeData.modifier.maxHPMods = {mod: setup.mod.ADD, value: previousHPModifier + setup.getRankGrowth(abilityRuntimeData, "linear", 0.5)}
            abilityRuntimeData.modifier.maxStaminaMods = {mod: setup.mod.ADD, value: previousStamModifier + setup.getRankGrowth(abilityRuntimeData, "linear", 0.5)}
        }

        return "\n\n"
    },
)>>

<<run setup.Ability_FaithsReward.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_GAIN_CORRUPTION,
    function(abilityRuntimeData, abilityParams)
    {   
        if(abilityParams.gainedCorruption <= 0)
        {
            return;
        }

        if(abilityRuntimeData.modifier.maxHPMods != undefined && abilityRuntimeData.modifier.maxStaminaMods != undefined){

            if(abilityRuntimeData.modifier.maxHPMods.value >= 0)
            {
                abilityRuntimeData.modifier.maxHPMods = {mod: setup.mod.ADD, value: Math.max(0, abilityRuntimeData.modifier.maxHPMods.value - 1)}
                abilityRuntimeData.modifier.maxStaminaMods = {mod: setup.mod.ADD, value: Math.max(0,abilityRuntimeData.modifier.maxStaminaMods.value -1)}

                return "\n"
            }
            else
            {
                return "\n"
            }
            
        }

        return "";
    }
)>>

<<run setup.Ability_FaithsReward.setUnlockableFromLevelScreen(true)>>

<<run setup.Ability_FaithsReward.setUnlockCondition(
    function(character){
        return (State.variables.Level >= 7)
    }
)>>

<<set setup.Ability_FaithsReward.setCategory(setup.AbilityCategory.PURITY)>>
<<set setup.Ability_FaithsReward.setGrade(setup.AbilityGrade.HIGH)>>

::Ability_Focused <850,5475>
<<set setup.Ability_Focused = setup.AbilityDataFactory.createAbilityData({
    id:         "Ability_Focused",
    name:       "", 
    description:function(character)
    {
        return ""; 
    },
    maxRank: 999
})>>

<<run setup.Ability_Focused.addBehaviour(
    "start",
    setup.AbilityTrigger.ON_ACQUIRE,
    undefined,
)>>

<<run setup.Ability_Focused.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_ACQUIRE,
    function(abilityRuntimeData, abilityParams){
        abilityRuntimeData.modifier.actionSlotsMods = {mod: setup.mod.ADD, value: setup.getRankGrowth(abilityRuntimeData, "linear", 1)};
    }
)>>

<<run setup.Ability_Focused.addBehaviour(
    "end",
    setup.AbilityTrigger.ON_FIGHT_END,
    undefined
)>>

<<run setup.Ability_Focused.addBehaviour(
    "remove",
    setup.AbilityTrigger.ON_FIGHT_END,
    undefined,
)>>

<<run setup.Ability_Focused.setFilter(setup.AbilityFilter.STATUSEFFECT)>>

::Ability_HerculeanBuild <975,5475>
<<set setup.Ability_HerculeanBuild = setup.AbilityDataFactory.createAbilityData({
    id:         "Ability_HerculeanBuild",
    name:       "",
    description:function(abilityData, abilityRuntimeData){
        if(abilityRuntimeData == undefined)
        {
            return "15 10"
        }
        else
        {
            return ""+setup.getRankGrowth(abilityRuntimeData, "linear", 15)+" 10"
        }
    },
    maxRank: 5
})>>

<<run setup.Ability_HerculeanBuild.addBehaviour(
    "start",
    setup.AbilityTrigger.ON_ACQUIRE,
    undefined
)>>

<<run setup.Ability_HerculeanBuild.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_APPLY_GROWTH,
    function(abilityRuntimeData, abilityParams){
        var boost = Math.min(Math.floor(setup.getStatValue(abilityParams.self, "muscles", "Ability_HerculeanBuild") / 2), setup.getRankGrowth(abilityRuntimeData, "linear", 15));
        abilityRuntimeData.modifier.strengthMods = {mod: setup.mod.ADD, value: boost}
    }
)>>

<<run setup.Ability_HerculeanBuild.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_ACQUIRE,
    function(abilityRuntimeData, abilityParams){
        setup.applyGrowth(abilityParams.self, "muscles", 10);
    }
)>>

<<run setup.Ability_HerculeanBuild.setUnlockableFromLevelScreen(true)>>

<<run setup.Ability_HerculeanBuild.setUnlockCondition(
    function(character){
        return (State.variables.Level >= 1)
    }
)>>

<<set setup.Ability_HerculeanBuild.setCategory(setup.AbilityCategory.WARRIOR)>>
<<set setup.Ability_HerculeanBuild.setGrade(setup.AbilityGrade.VERYLOW)>>

::Ability_HostOfEcho <1100,5475>
<<set setup.Ability_HostOfEcho = setup.AbilityDataFactory.createAbilityData({
    id:         "Ability_HostOfEcho",
    name:       "<<SymbioteName>>",
    description:function(character)
    {
        return "\n\n\n\n";     },
    maxRank: 1
})>>

<<run setup.Ability_HostOfEcho.addBehaviour(
    "start",
    setup.AbilityTrigger.ON_ACQUIRE,
    function(abilityRuntimeData, abilityParams)
    {
        this.name = "Host of <<SymbioteName>>";
        
        abilityRuntimeData.modifier.fightMoveIDsMods = {mod: setup.mod.ADD, value: [setup.FightMove_Masturbate.id]}
    }
)>>

<<run setup.Ability_HostOfEcho.setFilter(setup.AbilityFilter.ALTERATION)>>

::Ability_Incorruptible <1225,5475>
<<set setup.Ability_Incorruptible = setup.AbilityDataFactory.createAbilityData({
    id:         "Ability_Incorruptible",
    name:       "",
    description:function(character, abilityRuntimeData)
    {
        if(abilityRuntimeData == undefined)
        {
            return "255%1025";
        }
        else
        {
            return "25"+setup.getRankGrowth(abilityRuntimeData, "linear", 5)+"%"+setup.getRankGrowth(abilityRuntimeData, "linear", 10)+"25";
        }
    },
    maxRank: 5
})>>

<<run setup.Ability_Incorruptible.addBehaviour(
    "start",
    setup.AbilityTrigger.ON_ACQUIRE,
    undefined,
)>>

<<run setup.Ability_Incorruptible.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_ACQUIRE + setup.AbilityTrigger.ON_DAY_CHANGE + setup.AbilityTrigger.ON_GAIN_CORRUPTION,
    function(abilityRuntimeData, abilityParams)
    {   
        if(setup.getStatValue(abilityParams.self, "corruption") <= 25)
        {
            abilityRuntimeData.modifier.critChanceMods = {mod: setup.mod.ADD, value: setup.getRankGrowth(abilityRuntimeData, "linear", 5)};
            abilityRuntimeData.modifier.strengthMods = {mod: setup.mod.ADD, value: setup.getRankGrowth(abilityRuntimeData, "linear", 10)};
        }
        else
        {
            abilityRuntimeData.modifier.critChanceMods = {mod: setup.mod.ADD, value: setup.getRankGrowth(abilityRuntimeData, "linear", 2.5)};
            abilityRuntimeData.modifier.strengthMods = {mod: setup.mod.ADD, value: setup.getRankGrowth(abilityRuntimeData, "linear", 5)};
        }
        
    },
)>>

<<run setup.Ability_Incorruptible.setUnlockCondition(
    function(character){
        return State.variables.Level >= 4
    }
)>>

<<run setup.Ability_Incorruptible.setUnlockableFromLevelScreen(true)>>

<<set setup.Ability_Incorruptible.setCategory(setup.AbilityCategory.PURITY)>>
<<set setup.Ability_Incorruptible.setGrade(setup.AbilityGrade.HIGH)>>

::Ability_KalethsFervour <100,5600>
<<set setup.Ability_KalethsFervour = setup.AbilityDataFactory.createAbilityData({
    id:         "Ability_KalethsFervour",
    name:       "",
    description:function(character, abilityRuntimeData)
    {
        if(abilityRuntimeData == undefined)
        {
            return "3%"; 
        }
        else
        {
            return ""+setup.getRankGrowth(abilityRuntimeData, "linear", 3)+"%  ";
        }
    },
    maxRank: 10
})>>

<<run setup.Ability_KalethsFervour.addBehaviour(
    "start",
    setup.AbilityTrigger.ON_ACQUIRE,
    undefined,
)>>

<<run setup.Ability_KalethsFervour.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_GAIN_CORRUPTION + setup.AbilityTrigger.ON_ACQUIRE,
    function(abilityRuntimeData, abilityParams)
    {   
        abilityRuntimeData.modifier.growthMods = {mod: setup.mod.ADD, value: setup.getRankGrowth(abilityRuntimeData, "linear", 1) / 100 * setup.getStatValue(abilityParams.self, "corruption")};
    },
)>>

<<run setup.Ability_KalethsFervour.setUnlockableFromLevelScreen(true)>>

<<run setup.Ability_KalethsFervour.setUnlockCondition(
    function(character){
        return (State.variables.Level >= 7) && (setup.getStatValue(character, "corruption") >= 50);
    }
)>>

<<set setup.Ability_KalethsFervour.setCategory(setup.AbilityCategory.SOMBREVE)>>
<<set setup.Ability_KalethsFervour.setGrade(setup.AbilityGrade.HIGH)>>

::Ability_LastStand <225,5600>
<<set setup.Ability_LastStand = setup.AbilityDataFactory.createAbilityData({
    id:         "Ability_LastStand",
    name:       "",
    description:function(character, abilityRuntimeData)
    {
        if(abilityRuntimeData == undefined)
        {
            return "25%2030%15"; 
        }
        else
        {
            return "25%"+setup.getRankGrowth(abilityRuntimeData, "linear", 20)+""+setup.getRankGrowth(abilityRuntimeData, "linear", 30)+"%"+setup.getRankGrowth("linear", 15)+""; 
        }
        
    },
    maxRank: 3
})>>

<<run setup.Ability_LastStand.addBehaviour(
    "start",
    setup.AbilityTrigger.ON_ACQUIRE,
    undefined,
)>>

<<run setup.Ability_LastStand.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_ENTER_LOW_HEALTH,
    function(abilityRuntimeData, abilityParams)
    {
        abilityRuntimeData.isActive = true
        abilityParams.self.fight.variables.currentArousal += Math.min(100, setup.getRankGrowth(abilityRuntimeData, "linear", 20))
        abilityRuntimeData.modifier.critChanceMods = {mod: setup.mod.ADD, value: setup.getRankGrowth(abilityRuntimeData, "linear", 30)}
        abilityRuntimeData.modifier.strengthMods = {mod: setup.mod.ADD, value: setup.getRankGrowth(abilityRuntimeData, "linear", 15)}
        return ""
    },
)>>

<<run setup.Ability_LastStand.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_EXIT_LOW_HEALTH + setup.AbilityTrigger.ON_FIGHT_END,
    function(abilityRuntimeData, abilityParams)
    {
        abilityRuntimeData.isActive = false
        abilityRuntimeData.modifier = setup.ModifierFactory.createModifier(
        {
            abilityIndex: abilityRuntimeData.abilityDataIndex
        });
        return ""
    }
)>>

<<run setup.Ability_LastStand.setUnlockableFromLevelScreen(true)>>

<<run setup.Ability_LastStand.setUnlockCondition(
    function(character){
        return (State.variables.Level >= 3);
    }
)>>

<<set setup.Ability_LastStand.setCategory(setup.AbilityCategory.WARRIOR)>>
<<set setup.Ability_LastStand.setGrade(setup.AbilityGrade.LOW)>>

::Ability_LustIncarnate <350,5600>
<<set setup.Ability_LustIncarnate = setup.AbilityDataFactory.createAbilityData({
    id:         "Ability_LustIncarnate",
    name:       "",
    description:function(character, abilityRuntimeData)
    {
        let displayString = ""+setup.getRankGrowth(abilityRuntimeData, "linear", 15) +"%" ;
        return displayString
    },
    maxRank: 10
})>>

<<run setup.Ability_LustIncarnate.addBehaviour(
    "start",
    setup.AbilityTrigger.ON_ACQUIRE,
    undefined
)>>

<<run setup.Ability_LustIncarnate.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_FIGHT_TURN_START + setup.AbilityTrigger.ON_FIGHT_START,
    function(abilityRuntimeData, abilityParams)
    {   
        abilityRuntimeData.modifier.strengthMods = {mod: setup.mod.ADD, value: setup.getRankGrowth(abilityRuntimeData, "linear", 0.15) * abilityParams.target.fight.variables.currentArousal}
    }
)>>

<<run setup.Ability_LustIncarnate.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_FIGHT_END,
    function(abilityRuntimeData, abilityParams)
    {   
        abilityRuntimeData.modifier = setup.ModifierFactory.createModifier(
        {
            abilityIndex: abilityRuntimeData.abilityDataIndex
        });
    }
)>>

<<run setup.Ability_LustIncarnate.setFilter(setup.AbilityFilter.ALTERATION)>>

::Ability_Masochism <475,5600>
<<set setup.Ability_Masochism = setup.AbilityDataFactory.createAbilityData({
    id:         "Ability_Masochism",
    name:       "M",
    description:function(character, abilityRuntimeData)
    {
        if(abilityRuntimeData == undefined)
        {
            return "(3)"; 
        }
        else
        {
            return "("+ setup.getRankGrowth(abilityRuntimeData, "linear", 3) +")"; 
        }
    },
    maxRank: 5
})>>

<<run setup.Ability_Masochism.addBehaviour(
    "start",
    setup.AbilityTrigger.ON_ACQUIRE,
    undefined,
)>>

<<run setup.Ability_Masochism.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_FIGHT_POST_RECEIVE_DAMAGE,
    function(abilityRuntimeData, abilityParams)
    {
        var He = setup.getPronoun(abilityParams.target,"pronounCap");

        var arousalGain = Math.min(abilityParams.attackDamage, setup.getRankGrowth(abilityRuntimeData, "linear", 3));
        
        var displayString = abilityParams.target.info.name + ""+He+"<span style='color:#ac46c5;'>" + arousalGain + "</span>\n";

        abilityParams.target.fight.variables.currentArousal += arousalGain;

        return displayString;
    },
)>>

<<run setup.Ability_Masochism.setUnlockableFromLevelScreen(true)>>

<<run setup.Ability_Masochism.setUnlockCondition(
    function(character){
        return (State.variables.Level >= 1);
    }
)>>

<<set setup.Ability_Masochism.setCategory(setup.AbilityCategory.LUST)>>
<<set setup.Ability_Masochism.setGrade(setup.AbilityGrade.VERYLOW)>>

::Ability_MemoriesOfApothus <600,5600>
<<set setup.Ability_MemoriesOfApothus = setup.AbilityDataFactory.createAbilityData({
    id:         "Ability_MemoriesOfApothus",
    name:       "",
    description:function(character)
    {
        return ""; 
    },
    maxRank: 1
})>>

<<set setup.Ability_MemoriesOfApothus.isAchievement = true>>
<<set setup.Ability_MemoriesOfApothus.achievementInfo = "">>

<<run setup.Ability_MemoriesOfApothus.addBehaviour(
    "start",
    setup.AbilityTrigger.ON_ACQUIRE,
    function(abilityRuntimeData, abilityParams)
    {  
        if(abilityRuntimeData.achivemementState == setup.AchievementState.ACTIVATED)
        {
            return;
        }
        
        abilityRuntimeData.isActive = false;
    }
)>>

<<run setup.Ability_MemoriesOfApothus.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_NEW_GAME_PLUS,
    function(abilityRuntimeData, abilityParams)
    {
        if(abilityRuntimeData.achivemementState == setup.AchievementState.ACTIVATED)
        {
            abilityRuntimeData.isActive = true;

            abilityRuntimeData.modifier.minArousalMods = {mod: setup.mod.ADD, value: 5};
            abilityRuntimeData.modifier.maxHPMods = {mod: setup.mod.ADD, value: 10};
            abilityRuntimeData.modifier.critMod = {mod: setup.mod.REMOVE, value: 20};
            abilityRuntimeData.modifier.xpMultiplierMods = {mod: setup.mod.ADD, value: 0.2}
        }
    }
)>>

::Ability_MemoriesOfCray <725,5600>
<<set setup.Ability_MemoriesOfCray = setup.AbilityDataFactory.createAbilityData({
    id:         "Ability_MemoriesOfCray",
    name:       "",
    description:function(character)
    {
        return ""; 
    },
    maxRank: 1
})>>

<<set setup.Ability_MemoriesOfCray.isAchievement = true>>
<<set setup.Ability_MemoriesOfCray.achievementInfo = "">>

<<run setup.Ability_MemoriesOfCray.addBehaviour(
    "start",
    setup.AbilityTrigger.ON_ACQUIRE,
    function(abilityRuntimeData, abilityParams)
    {  
        if(abilityRuntimeData.achivemementState == setup.AchievementState.ACTIVATED)
        {
            return;
        }
        
        abilityRuntimeData.isActive = false;
    }
)>>

<<run setup.Ability_MemoriesOfCray.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_NEW_GAME_PLUS,
    function(abilityRuntimeData, abilityParams)
    {
        if(abilityRuntimeData.achivemementState == setup.AchievementState.ACTIVATED)
        {
            abilityRuntimeData.isActive = true;

            abilityRuntimeData.modifier.growthMods = {mod: setup.mod.ADD, value: 1.0}
            abilityRuntimeData.modifier.maxStaminaMods = {mod: setup.mod.ADD, value: 10}
            abilityRuntimeData.modifier.xpMultiplierMods = {mod: setup.mod.ADD, value: 0.5}
        }
    }
)>>

::Ability_MemoriesOfNyx <850,5600>
<<set setup.Ability_MemoriesOfNyx = setup.AbilityDataFactory.createAbilityData({
    id:         "Ability_MemoriesOfNyx",
    name:       "",
    description:function(character)
    {
        return ""; 
    },
    maxRank: 1
})>>

<<set setup.Ability_MemoriesOfNyx.isAchievement = true>>
<<set setup.Ability_MemoriesOfNyx.achievementInfo = "">>

<<run setup.Ability_MemoriesOfNyx.addBehaviour(
    "start",
    setup.AbilityTrigger.ON_ACQUIRE,
    function(abilityRuntimeData, abilityParams)
    {  
        if(abilityRuntimeData.achivemementState == setup.AchievementState.ACTIVATED)
        {
            return;
        }
        
        abilityRuntimeData.isActive = false;
    }
)>>

<<run setup.Ability_MemoriesOfNyx.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_NEW_GAME_PLUS,
    function(abilityRuntimeData, abilityParams)
    {
        if(abilityRuntimeData.achivemementState == setup.AchievementState.ACTIVATED)
        {
            abilityRuntimeData.isActive = true;

            abilityRuntimeData.modifier.minArousalMods = {mod: setup.mod.ADD, value: 10};
            abilityRuntimeData.modifier.maxStaminaMods = {mod: setup.mod.ADD, value: 10};
            abilityRuntimeData.modifier.actionSlotsMods = {mod: setup.mod.ADD, value: 1};
            abilityRuntimeData.modifier.growthMods = {mod: setup.mod.ADD, value: 0.25};
            abilityRuntimeData.modifier.xpMultiplierMods = {mod: setup.mod.ADD, value: 0.3};
        }
    }
)>>

::Ability_MemoriesOfTheChosen <975,5600>
<<set setup.Ability_MemoriesOfTheChosen = setup.AbilityDataFactory.createAbilityData({
    id:         "Ability_MemoriesOfTheChosen",
    name:       "",
    description:function(character)
    {
        return ""; 
    },
    maxRank: 1
})>>

<<run setup.Ability_MemoriesOfTheChosen.addBehaviour(
    "start",
    setup.AbilityTrigger.ON_ACQUIRE,
    function(abilityRuntimeData, abilityParams)
    {
        abilityRuntimeData.modifier.maxHPMods = {mod: setup.mod.ADD, value: 25};
        abilityRuntimeData.modifier.maxStaminaMods = {mod: setup.mod.ADD, value: 25}
        abilityRuntimeData.modifier.strengthMods = {mod: setup.mod.ADD, value: 10}
        abilityRuntimeData.modifier.xpMultiplierMods = {mod: setup.mod.ADD, value: 0.5}
    }
)>>

::Ability_Momentum <1100,5600>
<<set setup.Ability_Momentum = setup.AbilityDataFactory.createAbilityData({
    id:         "Ability_Momentum",
    name:       "",
    description:function(character, abilityRuntimeData)
    {
        if(abilityRuntimeData == undefined)
        {
            return "7%";  
        }
        else
        {
            return ""+setup.getRankGrowth(abilityRuntimeData, "linear", 7)+"%"; 
        }
    },
    maxRank: 5
})>>

<<run setup.Ability_Momentum.addBehaviour(
    "start",
    setup.AbilityTrigger.ON_ACQUIRE,
    undefined,
)>>

<<run setup.Ability_Momentum.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_FIGHT_TURN_START,
    function(abilityRuntimeData, abilityParams)
    {   
        abilityRuntimeData.modifier.critDamageMods = {mod: setup.mod.ADD, value: 0};
    },
)>>

<<run setup.Ability_Momentum.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_FIGHT_DAMAGING_HIT,
    function(abilityRuntimeData, abilityParams)
    {   
        var currentValue = abilityRuntimeData.modifier.critDamageMods.value;
        abilityRuntimeData.modifier.critDamageMods = {mod: setup.mod.ADD, value: currentValue + setup.getRankGrowth(abilityRuntimeData, "linear", 0.07)};
    },
)>>

<<run setup.Ability_Momentum.setUnlockCondition(
    function(character){
        return State.variables.Level >= 7
    }
)>>

<<run setup.Ability_Momentum.setUnlockableFromLevelScreen(true)>>

<<set setup.Ability_Momentum.setCategory(setup.AbilityCategory.WARRIOR)>>
<<set setup.Ability_Momentum.setGrade(setup.AbilityGrade.HIGH)>>

::Ability_Mutant <1225,5600>
<<set setup.Ability_Mutant = setup.AbilityDataFactory.createAbilityData({
    id:         "Ability_Mutant",
    name:       "",
    description:function(character, abilityRuntimeData)
    {
        if(abilityRuntimeData == undefined)
        {
            return "1/10"
        }
        else
        {
            return "1/" + (11 - setup.getRankGrowth(abilityRuntimeData, "linear", 1)) + ""
        }
    },
    maxRank: 5
})>>

<<run setup.Ability_Mutant.addBehaviour(
    "start",
    setup.AbilityTrigger.ON_ACQUIRE,
    undefined
)>>

<<run setup.Ability_Mutant.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_FIGHT_POST_RECEIVE_DAMAGE,
    function(abilityRuntimeData, abilityParams)
    {
        var denominator = 12 - setup.getRankGrowth(abilityRuntimeData, "linear", 1);

        if(Math.floor(Math.random() * denominator) == (denominator - 1))
        {
            var randomLimb = setup.getRandomLimb(abilityParams.target.info.anatomy)
            var currentNumber = randomLimb.currentNumber;
            var limb = randomLimb.limb;
            var displayString = ""

            if (currentNumber % 2 == 0)
            {
                setup.changeLimbNumber(abilityParams.target.info.anatomy, limb, 2, "add") 
                displayString += setup.processFlavours(abilityParams.target, "" + "@[2|" + limb + "|noverb]")
            }
            else
            {
                setup.changeLimbNumber(abilityParams.target.info.anatomy, limb, 1, "add")
                displayString += setup.processFlavours(abilityParams.target, "" + "@[1|" + limb + "|noverb]!")
            }
            return displayString;
        }
        else
        {
            return "";
        }  
    }
)>>

<<run setup.Ability_Mutant.setUpgrade(
    function(abilityRuntimeData, character){
        return (setup.getStatValue(character, "corruption") >= setup.CorruptionComparators.CORRUPT) && (setup.canRank(abilityRuntimeData) == false)
    },
    setup.Ability_Mutant_2,
    function(character){
        var displayString = ""
        displayString += ""+setup.CorruptionComparators.CORRUPT+"(" + setup.displayStatValue(character, "corruption") + ")\n"
        return displayString
    }
)>>


<<run setup.Ability_Mutant.setUnlockableFromLevelScreen(true)>>

<<run setup.Ability_Mutant.setUnlockCondition(
    function(character){
        return (State.variables.Level >= 1) && (setup.getStatValue(character, "corruption") >= setup.CorruptionComparators.TAINTED)
    }
)>>

<<set setup.Ability_Mutant.setCategory(setup.AbilityCategory.SOMBREVE)>>
<<set setup.Ability_Mutant.setGrade(setup.AbilityGrade.HIGH)>>

::Ability_Mutant_2 <100,5725>
<<set setup.Ability_Mutant_2 = setup.AbilityDataFactory.createAbilityData({
id:         "Ability_Mutant_2",
name:       "",
description:function(character, abilityRuntimeData)
{
    return "1/5"
},
maxRank: 1
})>>

<<run setup.Ability_Mutant_2.addBehaviour(
    "start",
    setup.AbilityTrigger.ON_ACQUIRE,
    undefined
)>>

<<run setup.Ability_Mutant_2.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_FIGHT_POST_RECEIVE_DAMAGE,
    function(abilityRuntimeData, abilityParams)
    {
        if(Math.floor(Math.random() * 6) == 5)
        {

            var randomLimb = setup.getRandomLimb(abilityParams.target.info.anatomy);
            var currentNumber = randomLimb.currentNumber;
            var limb = randomLimb.limb;

            setup.changeLimbNumber(abilityParams.target.info.anatomy, limb, 2, "multiply");
            var displayString = "";
            var limbNumber = setup.getLimbNumber("all", abilityParams.target.info.anatomy[limb], true);

            if(limbNumber == 2)
            {
                displayString +=  setup.processFlavours(abilityParams.target, limb + "!@[all|" + limb + "|noverb].\n");
            }
            else
            {
                displayString +=  setup.processFlavours(abilityParams.target, limb + "!@[all|" + limb + "|noverb]\n");
            }
              
            return displayString;
        }
        else
        {
            return "";
        }
    }
)>>

<<set setup.Ability_Mutant_2.setCategory(setup.AbilityCategory.SOMBREVE)>>
<<set setup.Ability_Mutant_2.setGrade(setup.AbilityGrade.VERYHIGH)>>

::Ability_CurseOfTheNaga <225,5725>
<<set setup.Ability_CurseOfTheNaga = setup.AbilityDataFactory.createAbilityData({
    id:         "Ability_CurseOfTheNaga",
    name:       "", 
    description:function(character)
    {
        return "\n"; 
    },
    maxRank: 1
})>>

<<run setup.Ability_CurseOfTheNaga.addBehaviour(
    "start",
    setup.AbilityTrigger.ON_ACQUIRE,
    function(abilityRuntimeData, abilityParams){
        abilityRuntimeData.modifier.musclesMods = {mod: setup.mod.REMOVE, value: State.variables.CharacterSheet_Player.quest.curseOfTheNagaStatDrain.muscles};
        abilityRuntimeData.modifier.heightMods = {mod: setup.mod.REMOVE, value: State.variables.CharacterSheet_Player.quest.curseOfTheNagaStatDrain.height};
        abilityRuntimeData.modifier.cockMods = {mod: setup.mod.REMOVE, value: State.variables.CharacterSheet_Player.quest.curseOfTheNagaStatDrain.cock};
        abilityRuntimeData.modifier.ballsMods = {mod: setup.mod.REMOVE, value: State.variables.CharacterSheet_Player.quest.curseOfTheNagaStatDrain.balls};
    }
)>>

<<run setup.Ability_CurseOfTheNaga.setFilter(setup.AbilityFilter.ALTERATION)>>

::Ability_StolenMass <350,5725>
<<set setup.Ability_StolenMass = setup.AbilityDataFactory.createAbilityData({
    id:         "Ability_StolenMass",
    name:       "",
    description:function(character)
    {
        return ""; 
    },
    maxRank: 1
})>>

<<run setup.Ability_StolenMass.addBehaviour(
    "start",
    setup.AbilityTrigger.ON_ACQUIRE,
    function(abilityRuntimeData, abilityParams){
        abilityRuntimeData.modifier.musclesMods = {mod: setup.mod.ADD, value: State.variables.CharacterSheet_Player.quest.curseOfTheNagaStatDrain.muscles};
        abilityRuntimeData.modifier.heightMods = {mod: setup.mod.ADD, value: State.variables.CharacterSheet_Player.quest.curseOfTheNagaStatDrain.height};
        abilityRuntimeData.modifier.cockMods = {mod: setup.mod.ADD, value: State.variables.CharacterSheet_Player.quest.curseOfTheNagaStatDrain.cock};
        abilityRuntimeData.modifier.ballsMods = {mod: setup.mod.ADD, value: State.variables.CharacterSheet_Player.quest.curseOfTheNagaStatDrain.balls};
    }
)>>

<<run setup.Ability_StolenMass.setFilter(setup.AbilityFilter.ALTERATION)>>

::Ability_NeverendingGrowth <475,5725>
<<set setup.Ability_NeverendingGrowth = setup.AbilityDataFactory.createAbilityData({
    id:         "Ability_NeverendingGrowth",
    name:       "", 
    description:function(character, abilityRuntimeData){
        return "" 
    },
    maxRank: 1
})>>

<<run setup.Ability_NeverendingGrowth.addBehaviour(
    "start",
    setup.AbilityTrigger.ON_ACQUIRE,
    undefined
)>>

<<run setup.Ability_NeverendingGrowth.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_FIGHT_TURN_START,
    function(abilityRuntimeData, abilityParams)
    {
        var self = abilityParams.self;

        let ability = setup.getAbilityByIndex(abilityRuntimeData.abilityDataIndex);
        var level = ability.level;

        var corruption = setup.getStatValue(self, "corruption");
        var multiplier = Math.ceil(corruption / 20);

        var displayString = "";

        var cockSize = setup.getStatValue(self, "cock")
        var muscleSize = setup.getStatValue(self, "muscles")
        var ballSize = setup.getStatValue(self, "balls")
        var height = setup.getStatValue(self, "height")

        setup.applyGrowth(self, "cock", Math.round(3 * multiplier));
        setup.applyGrowth(self, "balls", Math.round(1 * multiplier));
        setup.applyGrowth(self, "muscles", Math.round(2 * multiplier));
        setup.applyGrowth(self, "height", Math.round(9 * multiplier));

        if (corruption > 0){
            if(self.id == "CharacterSheet_Player"){
                displayString += ""
                displayString += "@[all|cocks|noverb]@[all|balls|noverb]\n"
                return setup.processFlavours(self, displayString);
            }else{
                displayString += ""
                displayString += "@[all|cocks|noverb]@[all|balls|noverb]\n"
                return setup.processFlavours(self, displayString);
            }
        }else{
            return undefined
        }
        
    }
)>>

<<run setup.Ability_NeverendingGrowth.setUnlockableFromLevelScreen(true)>>

<<run setup.Ability_NeverendingGrowth.setUnlockCondition(
    function(character){
        return (State.variables.Level >= 10) && (setup.getStatValue(character, "corruption") >= 50)
    }
)>>

<<set setup.Ability_NeverendingGrowth.setCategory(setup.AbilityCategory.GROWTH)>>
<<set setup.Ability_NeverendingGrowth.setGrade(setup.AbilityGrade.HIGH)>>

::Ability_NyxInducedWorkout <600,5725>
<<set setup.Ability_NyxInducedWorkout = setup.AbilityDataFactory.createAbilityData({
    id:         "Ability_NyxInducedWorkout",
    name:       "",
    description:function(character, abilityRuntimeData)
    {
        let displayString = "";
        return displayString
    },
    maxRank: 999
})>>

<<run setup.Ability_NyxInducedWorkout.addBehaviour(
    "start",
    setup.AbilityTrigger.ON_ACQUIRE,
    undefined
)>>

<<run setup.Ability_NyxInducedWorkout.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_ACQUIRE,
    function(abilityRuntimeData, abilityParams)
    {   
        abilityRuntimeData.modifier.musclesMods = {mod: setup.mod.MULTIPLYPOS, value: setup.getRankGrowth(abilityRuntimeData, "linear", 0.1)}
    }
)>>

<<run setup.Ability_NyxInducedWorkout.setFilter(setup.AbilityFilter.ALTERATION)>>

::Ability_NyxParasiteInfection <725,5725>
<<set setup.Ability_NyxParasiteInfection = setup.AbilityDataFactory.createAbilityData({
    id:         "Ability_NyxParasiteInfection",
    name:       "", 
    description:function(character){
        return ""
    },
    maxRank: 10
})>>

<<run setup.Ability_NyxParasiteInfection.addBehaviour(
    "start",
    setup.AbilityTrigger.ON_ACQUIRE,
    undefined
)>>

<<run setup.Ability_NyxParasiteInfection.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_ACQUIRE,
    function(abilityRuntimeData, abilityParams)
    {
        abilityRuntimeData.modifier.minArousalMods = {mod: setup.mod.ADD, value: 20};
        abilityRuntimeData.modifier.strengthMods = {mod: setup.mod.ADD, value: setup.getRankGrowth(abilityRuntimeData, "linear", 2)};
        abilityRuntimeData.modifier.cockMods = {mod: setup.mod.ADD, value: setup.getRankGrowth(abilityRuntimeData, "linear", 4)};
        abilityRuntimeData.modifier.ballsMods = {mod: setup.mod.ADD, value: setup.getRankGrowth(abilityRuntimeData, "linear", 3)};
        abilityRuntimeData.modifier.essenceMultiplierMods = {mod: setup.mod.REMOVE, value: 0.1};
        
        if(abilityRuntimeData.rank >= 5)
        {
            setup.completeAchievement("Achievement_HostOfTheSpawns");
        }
    }
)>>

<<run setup.Ability_NyxParasiteInfection.setUpgrade(
    function(abilityRuntimeData, character){
        return setup.canRank(abilityRuntimeData) == false
    },
    setup.Ability_NyxParasiteInfection_2,
    function(character){
        return ""
    }
)>>

<<run setup.Ability_NyxParasiteInfection.setFilter(setup.AbilityFilter.ALTERATION)>>

::Ability_NyxParasiteInfection_2 <850,5725>
<<set setup.Ability_NyxParasiteInfection_2 = setup.AbilityDataFactory.createAbilityData({
    id:         "Ability_NyxParasiteInfection_2",
    name:       "", 
    description:function(character){
        return "\n1\n\n\n"
    },
    maxRank: 15
})>>

<<run setup.Ability_NyxParasiteInfection_2.addBehaviour(
    "start",
    setup.AbilityTrigger.ON_ACQUIRE,
    undefined
)>>

<<run setup.Ability_NyxParasiteInfection_2.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_ACQUIRE,
    function(abilityRuntimeData, abilityParams)
    {
        abilityRuntimeData.modifier.minArousalMods = {mod: setup.mod.ADD, value: 20 + setup.getRankGrowth(abilityRuntimeData, "linear", 1)};
        abilityRuntimeData.modifier.strengthMods = {mod: setup.mod.ADD, value: 20 + setup.getRankGrowth(abilityRuntimeData, "linear", 3)};
        abilityRuntimeData.modifier.cockMods = {mod: setup.mod.ADD, value: 40 + setup.getRankGrowth(abilityRuntimeData, "linear", 10)};
        abilityRuntimeData.modifier.ballsMods = {mod: setup.mod.ADD, value: 30 + setup.getRankGrowth(abilityRuntimeData, "linear", 8)};
        abilityRuntimeData.modifier.essenceMultiplierMods = {mod: setup.mod.REMOVE, value: 0.2};
        abilityRuntimeData.modifier.fightMoveIDsMods = {mod: setup.mod.ADD, value: [setup.FightMove_SummonParasite.id]}

        if(abilityRuntimeData.rank >= 5)
        {
            setup.completeAchievement("Achievement_LordOfTheSpawns");
        }
    }
)>>

<<run setup.Ability_NyxParasiteInfection_2.setFilter(setup.AbilityFilter.ALTERATION)>>

::Ability_Oath_Containment <975,5725>
<<set setup.Ability_Oath_Containment = setup.AbilityDataFactory.createAbilityData({
    id:         "Ability_Oath_Containment",
    name:       "",
    description:function(character)
    {
        return "\n"; 
    },
    maxRank: 1
})>>

<<run setup.Ability_Oath_Containment.addBehaviour(
    "start",
    setup.AbilityTrigger.ON_ACQUIRE,
    function(abilityRuntimeData, abilityParams)
    {
        abilityRuntimeData.modifier.arousalGainMods = {mod: setup.mod.REMOVE, value: 5};
        abilityRuntimeData.modifier.critChanceMods = {mod: setup.mod.ADD, value: 10};
        abilityRuntimeData.modifier.maxHPMods = {mod: setup.mod.ADD, value: 10};
    }
)>>

<<run setup.Ability_Oath_Containment.setFilter(setup.AbilityFilter.ALTERATION)>>

::Ability_Oath_Nyx <1100,5725>
<<set setup.Ability_Oath_Nyx = setup.AbilityDataFactory.createAbilityData({
    id:         "Ability_Oath_Nyx",
    name:       "",
    description:function(character)
    {
        return "\n"; 
    },
    maxRank: 1
})>>

<<run setup.Ability_Oath_Nyx.addBehaviour(
    "start",
    setup.AbilityTrigger.ON_ACQUIRE,
    function(abilityRuntimeData, abilityParams)
    {
        abilityRuntimeData.modifier.corruptionMods = {mod: setup.mod.ADD, value: 20};
        abilityRuntimeData.modifier.minArousalMods = {mod: setup.mod.ADD, value: 10};
        abilityRuntimeData.modifier.maxHPMods = {mod: setup.mod.ADD, value: 10};
        abilityRuntimeData.modifier.critMod = {mod: setup.mod.REMOVE, value: 20};
    }
)>>

<<run setup.Ability_Oath_Nyx.setFilter(setup.AbilityFilter.ALTERATION)>>

::Ability_Oathbreaker <1225,5725>
<<set setup.Ability_Oathbreaker = setup.AbilityDataFactory.createAbilityData({
id:         "Ability_Oathbreaker",
name:       "",
description:function(character)
{
    return "\n"; 
},
maxRank: 1
})>>

<<run setup.Ability_Oathbreaker.addBehaviour(
    "start",
    setup.AbilityTrigger.ON_ACQUIRE,
    undefined,
)>>

<<run setup.Ability_Oathbreaker.setFilter(setup.AbilityFilter.ALTERATION)>>

::Ability_OrgasmicGrowth <100,5850>
<<set setup.Ability_OrgasmicGrowth = setup.AbilityDataFactory.createAbilityData({
    id:         "Ability_OrgasmicGrowth",
    name:       "", 
    description:function(character, abilityRuntimeData){
        if(abilityRuntimeData == undefined)
        {
            return setup.processFlavours(
                character,
                ""+setup.getLength(2.5)+"@[all|cocks|noverb]"+setup.getLength(1)+"@[all|balls|noverb]"+setup.getLength(0.5)+""
            )
        }
        else
        {
            return setup.processFlavours(
                character,
                ""+setup.getLength(setup.getRankGrowth(abilityRuntimeData, "linear", 2.5))+"@[all|cocks|noverb]"+setup.getLength(setup.getRankGrowth(abilityRuntimeData, "linear", 1))+"@[all|balls|noverb]"+setup.getLength(setup.getRankGrowth(abilityRuntimeData, "linear", 0.5))+"." 
            )
        }
    },
    maxRank: 3
})>>

<<run setup.Ability_OrgasmicGrowth.addBehaviour(
    "start",
    setup.AbilityTrigger.ON_ACQUIRE,
    undefined
)>>

<<run setup.Ability_OrgasmicGrowth.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_MAX_LUST,
    function(abilityRuntimeData, abilityParams)
    {
        var self = abilityParams.self;

        setup.applyGrowth(self, "cock", setup.getRankGrowth(abilityRuntimeData, "linear", 1));
        setup.applyGrowth(self, "balls", setup.getRankGrowth(abilityRuntimeData, "linear", 0.5));
        setup.applyGrowth(self, "height", setup.getRankGrowth(abilityRuntimeData, "linear", 2.5));
        setup.applyGrowth(self, "muscles", setup.getRankGrowth(abilityRuntimeData, "linear", 0.5));

        var displayString = setup.processFlavours(self, "@[all|balls|noverb]! @[all|cocks|noverb]")
        displayString += setup.processFlavours(self, "")
        displayString += setup.processFlavours(self, "@[all|cocks|noverb]@[all|balls|noverb]!")

        return displayString //not sure if you want the actual numbers in the string above.
    }
)>>

<<run setup.Ability_OrgasmicGrowth.setUnlockableFromLevelScreen(true)>>

<<run setup.Ability_OrgasmicGrowth.setUnlockCondition(
    function(character){
        return (State.variables.Level >= 7)
    }
)>>

<<set setup.Ability_OrgasmicGrowth.setCategory(setup.AbilityCategory.GROWTH)>>
<<set setup.Ability_OrgasmicGrowth.setGrade(setup.AbilityGrade.HIGH)>>

::Ability_ParryEnergy <225,5850>
<<set setup.Ability_ParryEnergy = setup.AbilityDataFactory.createAbilityData({
    id:         "Ability_ParryEnergy",
    name:       "", 
    description:function(character)
    {
        return ""; 
    },
    maxRank: 1
})>>

<<run setup.Ability_ParryEnergy.addBehaviour(
    "start",
    setup.AbilityTrigger.ON_ACQUIRE,
    undefined,
)>>

<<run setup.Ability_ParryEnergy.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_ACQUIRE,
    function(abilityRuntimeData, abilityParams){
        abilityRuntimeData.modifier.maxStaminaMods = {mod: setup.mod.ADD, value: abilityRuntimeData.blackboard.attackDamage};
        abilityParams.self.fight.variables.currentStamina += abilityRuntimeData.blackboard.attackDamage;
    }
)>>

<<run setup.Ability_ParryEnergy.setFilter(setup.AbilityFilter.STATUSEFFECT)>>

::Ability_PiercingPrecision <350,5850>
<<set setup.Ability_PiercingPrecision = setup.AbilityDataFactory.createAbilityData({
    id:         "Ability_PiercingPrecision",
    name:       "", 
    description:function(character, abilityRuntimeData)
    {
        if(abilityRuntimeData == undefined)
        {
            let displayString = "15%";
            return displayString
        }
        else
        {
           let displayString = ""+(setup.getRankGrowth(abilityRuntimeData, "linear", 0.15) * 100).toFixed(2).replace(/\.00$/, '') + "%"+"";
            return displayString
        }
    },
    maxRank: 5
})>>

<<run setup.Ability_PiercingPrecision.addBehaviour(
    "start",
    setup.AbilityTrigger.ON_ACQUIRE,
    undefined,
)>>

<<run setup.Ability_PiercingPrecision.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_ACQUIRE,
    function(abilityRuntimeData, abilityParams){
        abilityRuntimeData.modifier.critDamageMods = {mod: setup.mod.ADD, value: setup.getRankGrowth(abilityRuntimeData, "linear", 0.15)};
    }
)>>

<<run setup.Ability_PiercingPrecision.setUnlockCondition(
    function(character){
        return (State.variables.Level >= 5)
    }
)>>

<<run setup.Ability_PiercingPrecision.setUnlockableFromLevelScreen(true)>>

<<set setup.Ability_PiercingPrecision.setCategory(setup.AbilityCategory.WARRIOR)>>
<<set setup.Ability_PiercingPrecision.setGrade(setup.AbilityGrade.MEDIUM)>>

::Ability_PromiseOfServitude <475,5850>
<<set setup.Ability_PromiseOfServitude = setup.AbilityDataFactory.createAbilityData({
    id:         "Ability_PromiseOfServitude",
    name:       "",
    description:function(character)
    {
        return ""; 
    },
    maxRank: 1
})>>

<<run setup.Ability_PromiseOfServitude.addBehaviour(
    "start",
    setup.AbilityTrigger.ON_ACQUIRE,
    function(abilityRuntimeData, abilityParams)
    {
        abilityRuntimeData.modifier.minArousalMods = {mod: setup.mod.ADD, value: 10};
        abilityRuntimeData.modifier.strengthMods = {mod: setup.mod.ADD, value: 20};
    }
)>>

<<run setup.Ability_PromiseOfServitude.setFilter(setup.AbilityFilter.ALTERATION)>>

::Ability_ServantOfKanathar <600,5850>
<<set setup.Ability_ServantOfKanathar = setup.AbilityDataFactory.createAbilityData({
    id:         "Ability_ServantOfKanathar",
    name:       "",
    description:function(character)
    {
        return ""; 
    },
    maxRank: 999
})>>

<<run setup.Ability_ServantOfKanathar.addBehaviour(
    "start",
    setup.AbilityTrigger.ON_ACQUIRE,
    undefined
)>>

<<run setup.Ability_ServantOfKanathar.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_ACQUIRE,
    function(abilityRuntimeData, abilityParams)
    {
        abilityRuntimeData.modifier.maxHPMods = {mod: setup.mod.ADD, value: State.variables.CharacterSheet_Imp.quest.servantLosses * 3};
        abilityRuntimeData.modifier.maxStaminaMods = {mod: setup.mod.ADD, value: State.variables.CharacterSheet_Imp.quest.servantWins * 3};
        abilityRuntimeData.modifier.minArousalMods = {mod: setup.mod.ADD, value: 10};
        abilityRuntimeData.modifier.arousalGainMods = {mod: setup.mod.ADD, value: 5};
        abilityRuntimeData.modifier.growthMods = {mod: setup.mod.ADD, value: setup.getRankGrowth(abilityRuntimeData, "linear", 0.2)};
    }
)>>

<<run setup.Ability_ServantOfKanathar.setFilter(setup.AbilityFilter.ALTERATION)>>

::Ability_SigilOfPerception <725,5850>
<<set setup.Ability_SigilOfPerception = setup.AbilityDataFactory.createAbilityData({
    id:         "Ability_SigilOfPerception",
    name:       "",
    description:function(character, abilityRuntimeData)
    {
        if(abilityRuntimeData == undefined)
        {
            return "30%";
        }
        else
        {
            return ""+setup.getRankGrowth(abilityRuntimeData, "linear", 30) + "%";
        }
        
    },
    maxRank: 99
})>>

<<run setup.Ability_SigilOfPerception.addBehaviour(
    "start",
    setup.AbilityTrigger.ON_ACQUIRE,
    undefined,
)>>

<<run setup.Ability_SigilOfPerception.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_ACQUIRE,
    function(abilityRuntimeData, abilityParams)
    {
        abilityRuntimeData.modifier.critChanceMods = {mod: setup.mod.ADD, value: setup.getRankGrowth(abilityRuntimeData, "linear", 30)}
        return ""
    },
)>>

<<run setup.Ability_SigilOfPerception.addBehaviour(
    "end",
    setup.AbilityTrigger.ON_FIGHT_END,
    undefined
)>>

<<run setup.Ability_SigilOfPerception.addBehaviour(
    "remove",
    setup.AbilityTrigger.ON_FIGHT_END,
    undefined,
)>>

<<run setup.Ability_SigilOfPerception.setFilter(setup.AbilityFilter.STATUSEFFECT)>>

::Ability_Global_BallsTier_First <850,5850>
<<set setup.Ability_BallsTier_First = setup.AbilityDataFactory.createAbilityData({
    id:         "Ability_BallsTier_First",
    name:       "1",
    description:function(character)
    {
        return ""; 
    },
    maxRank: 1
})>>

<<run setup.Ability_BallsTier_First.addBehaviour(
    "start",
    setup.AbilityTrigger.ON_ACQUIRE,
    undefined
)>>

<<run setup.Ability_BallsTier_First.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_APPLY_GROWTH + setup.AbilityTrigger.ON_ACQUIRE,
    function(abilityRuntimeData, abilityParams)
    {
        var comparatorSize = 7.5 / 3;
        var balls = setup.getStatValue(abilityParams.self, "balls", "Ability_BallsTier_First");

        if(balls < comparatorSize)
        {
            abilityRuntimeData.isActive = true;
	        abilityRuntimeData.modifier.maxStaminaMods = {mod: setup.mod.ADD, value: 5};
        }
        else
        {
            abilityRuntimeData.isActive = false;
            abilityRuntimeData.modifier = setup.ModifierFactory.createModifier(
            {
                abilityIndex: abilityRuntimeData.abilityDataIndex
            });
        }
    }
)>>

<<run setup.Ability_BallsTier_First.setAsGlobalAbility()>>
<<run setup.Ability_BallsTier_First.setFilter(setup.AbilityFilter.GLOBAL)>>

::Ability_Global_BallsTier_Second <975,5850>
<<set setup.Ability_BallsTier_Second = setup.AbilityDataFactory.createAbilityData({
    id:         "Ability_BallsTier_Second",
    name:       "2",
    description:function(character)
    {
        return ""; 
    },
    maxRank: 1
})>>

<<run setup.Ability_BallsTier_Second.addBehaviour(
    "start",
    setup.AbilityTrigger.ON_ACQUIRE,
    undefined
)>>

<<run setup.Ability_BallsTier_Second.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_APPLY_GROWTH + setup.AbilityTrigger.ON_ACQUIRE,
    function(abilityRuntimeData, abilityParams)
    {
        var comparatorSize = 7.5 / 3;
        var nextComparatorSize = 10 / 3;
        var balls = setup.getStatValue(abilityParams.self, "balls", "Ability_BallsTier_Second");

        if(balls > comparatorSize && balls < nextComparatorSize)
        {
            abilityRuntimeData.isActive = true;
	        abilityRuntimeData.modifier.maxStaminaMods = {mod: setup.mod.ADD, value: 10};
        }
        else
        {
            abilityRuntimeData.isActive = false;
            abilityRuntimeData.modifier = setup.ModifierFactory.createModifier(
            {
                abilityIndex: abilityRuntimeData.abilityDataIndex
            });
        }
    }
)>>

<<run setup.Ability_BallsTier_Second.setAsGlobalAbility()>>
<<run setup.Ability_BallsTier_Second.setFilter(setup.AbilityFilter.GLOBAL)>>

::Ability_Global_BallsTier_Third <1100,5850>
<<set setup.Ability_BallsTier_Third = setup.AbilityDataFactory.createAbilityData({
    id:         "Ability_BallsTier_Third",
    name:       "3",
    description:function(character)
    {
        return ""; 
    },
    maxRank: 1
})>>

<<run setup.Ability_BallsTier_Third.addBehaviour(
    "start",
    setup.AbilityTrigger.ON_ACQUIRE,
    undefined
)>>

<<run setup.Ability_BallsTier_Third.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_APPLY_GROWTH + setup.AbilityTrigger.ON_ACQUIRE,
    function(abilityRuntimeData, abilityParams)
    {
        var comparatorSize = 10 / 3;
        var nextComparatorSize = 16.5 / 3;
        var balls = setup.getStatValue(abilityParams.self, "balls", "Ability_HeightSizeTier_Third");

        if(balls > comparatorSize && balls < nextComparatorSize)
        {
            abilityRuntimeData.isActive = true;
	        abilityRuntimeData.modifier.maxStaminaMods = {mod: setup.mod.ADD, value: 20};
        }
        else
        {
            abilityRuntimeData.isActive = false;
            abilityRuntimeData.modifier = setup.ModifierFactory.createModifier(
            {
                abilityIndex: abilityRuntimeData.abilityDataIndex
            });
        }
    }
)>>

<<run setup.Ability_BallsTier_Third.setAsGlobalAbility()>>
<<run setup.Ability_BallsTier_Third.setFilter(setup.AbilityFilter.GLOBAL)>>

::Ability_Global_BallsTier_Fourth <1225,5850>
<<set setup.Ability_BallsTier_Fourth = setup.AbilityDataFactory.createAbilityData({
    id:         "Ability_BallsTier_Fourth",
    name:       "4",
    description:function(character)
    {
        return ""; 
    },
    maxRank: 1
})>>

<<run setup.Ability_BallsTier_Fourth.addBehaviour(
    "start",
    setup.AbilityTrigger.ON_ACQUIRE,
    undefined
)>>

<<run setup.Ability_BallsTier_Fourth.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_APPLY_GROWTH + setup.AbilityTrigger.ON_ACQUIRE,
    function(abilityRuntimeData, abilityParams)
    {
        var comparatorSize = 16.5 / 3;
        var nextComparatorSize = 32 / 3;
        var balls = setup.getStatValue(abilityParams.self, "balls", "Ability_BallsTier_Fourth");

        if(balls > comparatorSize && balls < nextComparatorSize)
        {
            abilityRuntimeData.isActive = true;
	        abilityRuntimeData.modifier.maxStaminaMods = {mod: setup.mod.ADD, value: 50};
        }
        else
        {
            abilityRuntimeData.isActive = false;
            abilityRuntimeData.modifier = setup.ModifierFactory.createModifier(
            {
                abilityIndex: abilityRuntimeData.abilityDataIndex
            });
        }
    }
)>>

<<run setup.Ability_BallsTier_Fourth.setAsGlobalAbility()>>
<<run setup.Ability_BallsTier_Fourth.setFilter(setup.AbilityFilter.GLOBAL)>>

::Ability_Global_BallsTier_Fifth <100,5975>
<<set setup.Ability_BallsTier_Fifth = setup.AbilityDataFactory.createAbilityData({
    id:         "Ability_BallsTier_Fifth",
    name:       "5",
    description:function(character)
    {
        return "2"; 
    },
    maxRank: 1
})>>

<<run setup.Ability_BallsTier_Fifth.addBehaviour(
    "start",
    setup.AbilityTrigger.ON_ACQUIRE,
    undefined
)>>

<<run setup.Ability_BallsTier_Fifth.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_APPLY_GROWTH + setup.AbilityTrigger.ON_ACQUIRE,
    function(abilityRuntimeData, abilityParams)
    {
        var comparatorSize = 32 / 3;
        var nextComparatorSize = 65 / 3;
        var balls = setup.getStatValue(abilityParams.self, "balls", "Ability_BallsTier_Fifth");

        if(balls > comparatorSize && balls < nextComparatorSize)
        {
            abilityRuntimeData.isActive = true;
	        abilityRuntimeData.modifier.maxStaminaMods = {mod: setup.mod.ADD, value: 75};
        }
        else
        {
            abilityRuntimeData.isActive = false;
            abilityRuntimeData.modifier = setup.ModifierFactory.createModifier(
            {
                abilityIndex: abilityRuntimeData.abilityDataIndex
            });
        }
    }
)>>

<<run setup.Ability_BallsTier_Fifth.setAsGlobalAbility()>>
<<run setup.Ability_BallsTier_Fifth.setFilter(setup.AbilityFilter.GLOBAL)>>

::Ability_Global_BallsTier_Sixth <225,5975>
<<set setup.Ability_BallsTier_Sixth = setup.AbilityDataFactory.createAbilityData({
    id:         "Ability_BallsTier_Sixth",
    name:       "6",
    description:function(character)
    {
        return ""; 
    },
    maxRank: 1
})>>

<<run setup.Ability_BallsTier_Sixth.addBehaviour(
    "start",
    setup.AbilityTrigger.ON_ACQUIRE,
    undefined
)>>

<<run setup.Ability_BallsTier_Sixth.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_APPLY_GROWTH + setup.AbilityTrigger.ON_ACQUIRE,
    function(abilityRuntimeData, abilityParams)
    {
        var comparatorSize = 65 / 3;
        var balls = setup.getStatValue(abilityParams.self, "balls", "Ability_BallsTier_Sixth");

        if(balls > comparatorSize)
        {
            abilityRuntimeData.isActive = true;
	        abilityRuntimeData.modifier.maxStaminaMods = {mod: setup.mod.ADD, value: 100};
        }
        else
        {
            abilityRuntimeData.isActive = false;
            abilityRuntimeData.modifier = setup.ModifierFactory.createModifier(
            {
                abilityIndex: abilityRuntimeData.abilityDataIndex
            });
        }
    }
)>>

<<run setup.Ability_BallsTier_Sixth.setAsGlobalAbility()>>
<<run setup.Ability_BallsTier_Sixth.setFilter(setup.AbilityFilter.GLOBAL)>>

::Ability_Global_CockTier_First <350,5975>
<<set setup.Ability_CockTier_First = setup.AbilityDataFactory.createAbilityData({
    id:         "Ability_CockTier_First",
    name:       "1",
    description:function(character)
    {
        return "";
    },
    maxRank: 1
})>>

<<run setup.Ability_CockTier_First.addBehaviour(
    "start",
    setup.AbilityTrigger.ON_ACQUIRE,
    undefined
)>>

<<run setup.Ability_CockTier_First.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_APPLY_GROWTH + setup.AbilityTrigger.ON_ACQUIRE,
    function(abilityRuntimeData, abilityParams)
    {
        var comparatorSize = 7.5;
        var cock = setup.getStatValue(abilityParams.self, "cock", "Ability_CockTier_First");

        if(cock < comparatorSize)
        {
            abilityRuntimeData.isActive = true;
	        abilityRuntimeData.modifier.maxStaminaMods = {mod: setup.mod.ADD, value: 5};
        }
        else
        {
            abilityRuntimeData.isActive = false;
            abilityRuntimeData.modifier = setup.ModifierFactory.createModifier(
            {
                abilityIndex: abilityRuntimeData.abilityDataIndex
            });
        }
    }
)>>

<<run setup.Ability_CockTier_First.setAsGlobalAbility()>>
<<run setup.Ability_CockTier_First.setFilter(setup.AbilityFilter.GLOBAL)>>

::Ability_Global_CockTier_Second <475,5975>
<<set setup.Ability_CockTier_Second = setup.AbilityDataFactory.createAbilityData({
    id:         "Ability_CockTier_Second",
    name:       "2",
    description:function(character)
    {
        return ""; 
    },
    maxRank: 1
})>>

<<run setup.Ability_CockTier_Second.addBehaviour(
    "start",
    setup.AbilityTrigger.ON_ACQUIRE,
    undefined
)>>

<<run setup.Ability_CockTier_Second.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_APPLY_GROWTH + setup.AbilityTrigger.ON_ACQUIRE,
    function(abilityRuntimeData, abilityParams)
    {
        var comparatorSize = 7.5;
        var nextComparatorSize = 10;
        var cock = setup.getStatValue(abilityParams.self, "cock", "Ability_CockTier_Second");

        if(cock > comparatorSize && cock < nextComparatorSize)
        {
            abilityRuntimeData.isActive = true;
	        abilityRuntimeData.modifier.maxStaminaMods = {mod: setup.mod.ADD, value: 10};
        }
        else
        {
            abilityRuntimeData.isActive = false;
            abilityRuntimeData.modifier = setup.ModifierFactory.createModifier(
            {
                abilityIndex: abilityRuntimeData.abilityDataIndex
            });
        }
    }
)>>

<<run setup.Ability_CockTier_Second.setAsGlobalAbility()>>
<<run setup.Ability_CockTier_Second.setFilter(setup.AbilityFilter.GLOBAL)>>

::Ability_Global_CockTier_Third <600,5975>
<<set setup.Ability_CockTier_Third = setup.AbilityDataFactory.createAbilityData({
    id:         "Ability_CockTier_Third",
    name:       "3",
    description:function(character)
    {
        return "2"; 
    },
    maxRank: 1
})>>

<<run setup.Ability_CockTier_Third.addBehaviour(
    "start",
    setup.AbilityTrigger.ON_ACQUIRE,
    undefined
)>>

<<run setup.Ability_CockTier_Third.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_APPLY_GROWTH + setup.AbilityTrigger.ON_ACQUIRE,
    function(abilityRuntimeData, abilityParams)
    {
        var comparatorSize = 10;
        var nextComparatorSize = 16.5;
        var cock = setup.getStatValue(abilityParams.self, "cock", "Ability_HeightSizeTier_Third");

        if(cock > comparatorSize && cock < nextComparatorSize)
        {
            abilityRuntimeData.isActive = true;
	        abilityRuntimeData.modifier.maxStaminaMods = {mod: setup.mod.ADD, value: 20};
        }
        else
        {
            abilityRuntimeData.isActive = false;
            abilityRuntimeData.modifier = setup.ModifierFactory.createModifier(
            {
                abilityIndex: abilityRuntimeData.abilityDataIndex
            });
        }
    }
)>>

<<run setup.Ability_CockTier_Third.setAsGlobalAbility()>>
<<run setup.Ability_CockTier_Third.setFilter(setup.AbilityFilter.GLOBAL)>>

::Ability_Global_CockTier_Fourth <725,5975>
<<set setup.Ability_CockTier_Fourth = setup.AbilityDataFactory.createAbilityData({
    id:         "Ability_CockTier_Fourth",
    name:       "4",
    description:function(character)
    {
        return ""; 
    },
    maxRank: 1
})>>

<<run setup.Ability_CockTier_Fourth.addBehaviour(
    "start",
    setup.AbilityTrigger.ON_ACQUIRE,
    undefined
)>>

<<run setup.Ability_CockTier_Fourth.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_APPLY_GROWTH + setup.AbilityTrigger.ON_ACQUIRE,
    function(abilityRuntimeData, abilityParams)
    {
        var comparatorSize = 16.5;
        var nextComparatorSize = 32;
        var cock = setup.getStatValue(abilityParams.self, "cock", "Ability_CockTier_Fourth");

        if(cock > comparatorSize && cock < nextComparatorSize)
        {
            abilityRuntimeData.isActive = true;
	        abilityRuntimeData.modifier.maxStaminaMods = {mod: setup.mod.ADD, value: 50};
        }
        else
        {
            abilityRuntimeData.isActive = false;
            abilityRuntimeData.modifier = setup.ModifierFactory.createModifier(
            {
                abilityIndex: abilityRuntimeData.abilityDataIndex
            });
        }
    }
)>>

<<run setup.Ability_CockTier_Fourth.setAsGlobalAbility()>>
<<run setup.Ability_CockTier_Fourth.setFilter(setup.AbilityFilter.GLOBAL)>>

::Ability_Global_CockTier_Fifth <850,5975>
<<set setup.Ability_CockTier_Fifth = setup.AbilityDataFactory.createAbilityData({
    id:         "Ability_CockTier_Fifth",
    name:       "5",
    description:function(character)
    {
        return ""; 
    },
    maxRank: 1
})>>

<<run setup.Ability_CockTier_Fifth.addBehaviour(
    "start",
    setup.AbilityTrigger.ON_ACQUIRE,
    undefined
)>>

<<run setup.Ability_CockTier_Fifth.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_APPLY_GROWTH + setup.AbilityTrigger.ON_ACQUIRE,
    function(abilityRuntimeData, abilityParams)
    {
        var comparatorSize = 32;
        var nextComparatorSize = 65;
        var cock = setup.getStatValue(abilityParams.self, "cock", "Ability_CockTier_Fifth");

        if(cock > comparatorSize && cock < nextComparatorSize)
        {
            abilityRuntimeData.isActive = true;
	        abilityRuntimeData.modifier.maxStaminaMods = {mod: setup.mod.ADD, value: 75};
        }
        else
        {
            abilityRuntimeData.isActive = false;
            abilityRuntimeData.modifier = setup.ModifierFactory.createModifier(
            {
                abilityIndex: abilityRuntimeData.abilityDataIndex
            });
        }
    }
)>>

<<run setup.Ability_CockTier_Fifth.setAsGlobalAbility()>>
<<run setup.Ability_CockTier_Fifth.setFilter(setup.AbilityFilter.GLOBAL)>>

::Ability_Global_CockTier_Sixth <975,5975>
<<set setup.Ability_CockTier_Sixth = setup.AbilityDataFactory.createAbilityData({
    id:         "Ability_CockTier_Sixth",
    name:       "6",
    description:function(character)
    {
        return ""; 
    },
    maxRank: 1
})>>

<<run setup.Ability_CockTier_Sixth.addBehaviour(
    "start",
    setup.AbilityTrigger.ON_ACQUIRE,
    undefined
)>>

<<run setup.Ability_CockTier_Sixth.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_APPLY_GROWTH + setup.AbilityTrigger.ON_ACQUIRE,
    function(abilityRuntimeData, abilityParams)
    {
        var comparatorSize = 65;
        var cock = setup.getStatValue(abilityParams.self, "cock", "Ability_CockTier_Sixth");

        if(cock > comparatorSize)
        {
            abilityRuntimeData.isActive = true;
	        abilityRuntimeData.modifier.maxStaminaMods = {mod: setup.mod.ADD, value: 100};
        }
        else
        {
            abilityRuntimeData.isActive = false;
            abilityRuntimeData.modifier = setup.ModifierFactory.createModifier(
            {
                abilityIndex: abilityRuntimeData.abilityDataIndex
            });
        }
    }
)>>

<<run setup.Ability_CockTier_Sixth.setAsGlobalAbility()>>
<<run setup.Ability_CockTier_Sixth.setFilter(setup.AbilityFilter.GLOBAL)>>

::Ability_Global_HeightSizeTier_1 <1100,5975>
<<set setup.Ability_HeightSizeTier_First = setup.AbilityDataFactory.createAbilityData({
    id:         "Ability_HeightSizeTier_First",
    name:       "1",
    description:function(character)
    {
        return ""; 
    },
    maxRank: 1
})>>

<<run setup.Ability_HeightSizeTier_First.addBehaviour(
    "start",
    setup.AbilityTrigger.ON_ACQUIRE,
    undefined
)>>

<<run setup.Ability_HeightSizeTier_First.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_APPLY_GROWTH + setup.AbilityTrigger.ON_ACQUIRE,
    function(abilityRuntimeData, abilityParams)
    {
        var comparatorSize = 12 * 7;
        var height = setup.getStatValue(abilityParams.self, "height", "Ability_HeightSizeTier_First");

        if(height < comparatorSize)
        {
            abilityRuntimeData.isActive = true;
	        abilityRuntimeData.modifier.strengthMods = {mod: setup.mod.ADD, value: 3};
        }
        else
        {
            abilityRuntimeData.isActive = false;
            abilityRuntimeData.modifier = setup.ModifierFactory.createModifier(
            {
                abilityIndex: abilityRuntimeData.abilityDataIndex
            });
        }
    }
)>>

<<run setup.Ability_HeightSizeTier_First.setAsGlobalAbility()>>
<<run setup.Ability_HeightSizeTier_First.setFilter(setup.AbilityFilter.GLOBAL)>>

::Ability_Global_HeightSizeTier_2 <1225,5975>
<<set setup.Ability_HeightSizeTier_Second = setup.AbilityDataFactory.createAbilityData({
    id:         "Ability_HeightSizeTier_Second",
    name:       "2",
    description:function(character)
    {
        return ""; 
    },
    maxRank: 1
})>>

<<run setup.Ability_HeightSizeTier_Second.addBehaviour(
    "start",
    setup.AbilityTrigger.ON_ACQUIRE,
    undefined
)>>

<<run setup.Ability_HeightSizeTier_Second.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_APPLY_GROWTH + setup.AbilityTrigger.ON_ACQUIRE,
    function(abilityRuntimeData, abilityParams)
    {
        var comparatorSize = 12 * 7;
        var nextComparatorSize = 12 * 9;
        var height = setup.getStatValue(abilityParams.self, "height", "Ability_HeightSizeTier_Second");

        if(height > comparatorSize && height < nextComparatorSize)
        {
            abilityRuntimeData.isActive = true;
	        abilityRuntimeData.modifier.strengthMods = {mod: setup.mod.ADD, value: 10};
        }
        else
        {
            abilityRuntimeData.isActive = false;
            abilityRuntimeData.modifier = setup.ModifierFactory.createModifier(
            {
                abilityIndex: abilityRuntimeData.abilityDataIndex
            });
        }
    }
)>>

<<run setup.Ability_HeightSizeTier_Second.setAsGlobalAbility()>>
<<run setup.Ability_HeightSizeTier_Second.setFilter(setup.AbilityFilter.GLOBAL)>>

::Ability_Global_HeightSizeTier_3 <100,6100>
<<set setup.Ability_HeightSizeTier_Third = setup.AbilityDataFactory.createAbilityData({
    id:         "Ability_HeightSizeTier_Third",
    name:       "3",
    description:function(character)
    {
        return ""; 
    },
    maxRank: 1
})>>

<<run setup.Ability_HeightSizeTier_Third.addBehaviour(
    "start",
    setup.AbilityTrigger.ON_ACQUIRE,
    undefined
)>>

<<run setup.Ability_HeightSizeTier_Third.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_APPLY_GROWTH + setup.AbilityTrigger.ON_ACQUIRE,
    function(abilityRuntimeData, abilityParams)
    {
        var comparatorSize = 12 * 9;
        var nextComparatorSize = 12 * 15;
        var height = setup.getStatValue(abilityParams.self, "height", "Ability_HeightSizeTier_Third");

        if(height > comparatorSize && height < nextComparatorSize)
        {
            abilityRuntimeData.isActive = true;
	        abilityRuntimeData.modifier.strengthMods = {mod: setup.mod.ADD, value: 20};
        }
        else
        {
            abilityRuntimeData.isActive = false;
            abilityRuntimeData.modifier = setup.ModifierFactory.createModifier(
            {
                abilityIndex: abilityRuntimeData.abilityDataIndex
            });
        }
    }
)>>

<<run setup.Ability_HeightSizeTier_Third.setAsGlobalAbility()>>
<<run setup.Ability_HeightSizeTier_Third.setFilter(setup.AbilityFilter.GLOBAL)>>

::Ability_Global_HeightSizeTier_4 <225,6100>
<<set setup.Ability_HeightSizeTier_Fourth = setup.AbilityDataFactory.createAbilityData({
    id:         "Ability_HeightSizeTier_Fourth",
    name:       "4",
    description:function(character)
    {
        return ""; 
    },
    maxRank: 1
})>>

<<run setup.Ability_HeightSizeTier_Fourth.addBehaviour(
    "start",
    setup.AbilityTrigger.ON_ACQUIRE,
    undefined
)>>

<<run setup.Ability_HeightSizeTier_Fourth.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_APPLY_GROWTH + setup.AbilityTrigger.ON_ACQUIRE,
    function(abilityRuntimeData, abilityParams)
    {
        var comparatorSize = 12 * 15;
        var nextComparatorSize = 12 * 30;
        var height = setup.getStatValue(abilityParams.self, "height", "Ability_HeightSizeTier_Fourth");

        if(height > comparatorSize && height < nextComparatorSize)
        {
            abilityRuntimeData.isActive = true;
	        abilityRuntimeData.modifier.strengthMods = {mod: setup.mod.ADD, value: 50};
        }
        else
        {
            abilityRuntimeData.isActive = false;
            abilityRuntimeData.modifier = setup.ModifierFactory.createModifier(
            {
                abilityIndex: abilityRuntimeData.abilityDataIndex
            });
        }
    }
)>>

<<run setup.Ability_HeightSizeTier_Fourth.setAsGlobalAbility()>>
<<run setup.Ability_HeightSizeTier_Fourth.setFilter(setup.AbilityFilter.GLOBAL)>>

::Ability_Global_HeightSizeTier_5 <350,6100>
<<set setup.Ability_HeightSizeTier_Fifth = setup.AbilityDataFactory.createAbilityData({
    id:         "Ability_HeightSizeTier_Fifth",
    name:       "5",
    description:function(character)
    {
        return ""; 
    },
    maxRank: 1
})>>

<<run setup.Ability_HeightSizeTier_Fifth.addBehaviour(
    "start",
    setup.AbilityTrigger.ON_ACQUIRE,
    undefined
)>>

<<run setup.Ability_HeightSizeTier_Fifth.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_APPLY_GROWTH + setup.AbilityTrigger.ON_ACQUIRE,
    function(abilityRuntimeData, abilityParams)
    {
        var comparatorSize = 12 * 30;
        var nextComparatorSize = 12 * 60;
        var height = setup.getStatValue(abilityParams.self, "height", "Ability_HeightSizeTier_Fifth");
        if(height > comparatorSize && height < nextComparatorSize)
        {
            abilityRuntimeData.isActive = true;
	        abilityRuntimeData.modifier.strengthMods = {mod: setup.mod.ADD, value: 75};
        }
        else
        {
            abilityRuntimeData.isActive = false;
            abilityRuntimeData.modifier = setup.ModifierFactory.createModifier(
            {
                abilityIndex: abilityRuntimeData.abilityDataIndex
            });
        }
    }
)>>

<<run setup.Ability_HeightSizeTier_Fifth.setAsGlobalAbility()>>
<<run setup.Ability_HeightSizeTier_Fifth.setFilter(setup.AbilityFilter.GLOBAL)>>

::Ability_Global_HeightSizeTier_6 <475,6100>
<<set setup.Ability_HeightSizeTier_Sixth = setup.AbilityDataFactory.createAbilityData({
    id:         "Ability_HeightSizeTier_Sixth",
    name:       "6",
    description:function(character)
    {
        return "6"; 
    },
    maxRank: 1
})>>

<<run setup.Ability_HeightSizeTier_Sixth.addBehaviour(
    "start",
    setup.AbilityTrigger.ON_ACQUIRE,
    undefined
)>>

<<run setup.Ability_HeightSizeTier_Sixth.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_APPLY_GROWTH + setup.AbilityTrigger.ON_ACQUIRE,
    function(abilityRuntimeData, abilityParams)
    {
        var comparatorSize = 12 * 60;
        var height = setup.getStatValue(abilityParams.self, "height", "Ability_HeightSizeTier_Sixth");
        if(height > comparatorSize)
        {
            abilityRuntimeData.isActive = true;
	        abilityRuntimeData.modifier.strengthMods = {mod: setup.mod.ADD, value: 100};
        }
        else
        {
            abilityRuntimeData.isActive = false;
            abilityRuntimeData.modifier = setup.ModifierFactory.createModifier(
            {
                abilityIndex: abilityRuntimeData.abilityDataIndex
            });
        }
    }
)>>

<<run setup.Ability_HeightSizeTier_Sixth.setAsGlobalAbility()>>
<<run setup.Ability_HeightSizeTier_Sixth.setFilter(setup.AbilityFilter.GLOBAL)>>

::Ability_Global_MuscleTier_First <600,6100>
<<set setup.Ability_MuscleTier_First = setup.AbilityDataFactory.createAbilityData({
    id:         "Ability_MuscleTier_First",
    name:       "1",
    description:function(character)
    {
        return ""; 
    },
    maxRank: 1
})>>

<<run setup.Ability_MuscleTier_First.addBehaviour(
    "start",
    setup.AbilityTrigger.ON_ACQUIRE,
    undefined
)>>

<<run setup.Ability_MuscleTier_First.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_APPLY_GROWTH + setup.AbilityTrigger.ON_ACQUIRE,
    function(abilityRuntimeData, abilityParams)
    {
        var comparatorSize = 20;
        var muscles = setup.getStatValue(abilityParams.self, "muscles", "Ability_MuscleTier_First");

        if(muscles < comparatorSize)
        {
            abilityRuntimeData.isActive = true;
	        abilityRuntimeData.modifier.strengthMods = {mod: setup.mod.ADD, value: 3};
        }
        else
        {
            abilityRuntimeData.isActive = false;
            abilityRuntimeData.modifier = setup.ModifierFactory.createModifier(
            {
                abilityIndex: abilityRuntimeData.abilityDataIndex
            });
        }
    }
)>>

<<run setup.Ability_MuscleTier_First.setAsGlobalAbility()>>
<<run setup.Ability_MuscleTier_First.setFilter(setup.AbilityFilter.GLOBAL)>>

::Ability_Global_MuscleTier_Second <725,6100>
<<set setup.Ability_MuscleTier_Second = setup.AbilityDataFactory.createAbilityData({
    id:         "Ability_MuscleTier_Second",
    name:       "2",
    description:function(character)
    {
        return ""; 
    },
    maxRank: 1
})>>

<<run setup.Ability_MuscleTier_Second.addBehaviour(
    "start",
    setup.AbilityTrigger.ON_ACQUIRE,
    undefined
)>>

<<run setup.Ability_MuscleTier_Second.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_APPLY_GROWTH + setup.AbilityTrigger.ON_ACQUIRE,
    function(abilityRuntimeData, abilityParams)
    {
        var comparatorSize = 20;
        var nextComparatorSize = 60;
        var muscles = setup.getStatValue(abilityParams.self, "muscles", "Ability_HeightSizeTier_Second");

        if(muscles > comparatorSize && muscles < nextComparatorSize)
        {
            abilityRuntimeData.isActive = true;
	        abilityRuntimeData.modifier.strengthMods = {mod: setup.mod.ADD, value: 10};
        }
        else
        {
            abilityRuntimeData.isActive = false;
            abilityRuntimeData.modifier = setup.ModifierFactory.createModifier(
            {
                abilityIndex: abilityRuntimeData.abilityDataIndex
            });
        }
    }
)>>

<<run setup.Ability_MuscleTier_Second.setAsGlobalAbility()>>
<<run setup.Ability_MuscleTier_Second.setFilter(setup.AbilityFilter.GLOBAL)>>

::Ability_Global_MuscleTier_Third <850,6100>
<<set setup.Ability_MuscleTier_Third = setup.AbilityDataFactory.createAbilityData({
    id:         "Ability_MuscleTier_Third",
    name:       "3",
    description:function(character)
    {
        return ""; 
    },
    maxRank: 1
})>>

<<run setup.Ability_MuscleTier_Third.addBehaviour(
    "start",
    setup.AbilityTrigger.ON_ACQUIRE,
    undefined
)>>

<<run setup.Ability_MuscleTier_Third.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_APPLY_GROWTH + setup.AbilityTrigger.ON_ACQUIRE,
    function(abilityRuntimeData, abilityParams)
    {
        var comparatorSize = 60;
        var nextComparatorSize = 110;
        var muscles = setup.getStatValue(abilityParams.self, "muscles", "Ability_HeightSizeTier_Third");

        if(muscles > comparatorSize && muscles < nextComparatorSize)
        {
            abilityRuntimeData.isActive = true;
	        abilityRuntimeData.modifier.strengthMods = {mod: setup.mod.ADD, value: 20};
        }
        else
        {
            abilityRuntimeData.isActive = false;
            abilityRuntimeData.modifier = setup.ModifierFactory.createModifier(
            {
                abilityIndex: abilityRuntimeData.abilityDataIndex
            });
        }
    }
)>>

<<run setup.Ability_MuscleTier_Third.setAsGlobalAbility()>>
<<run setup.Ability_MuscleTier_Third.setFilter(setup.AbilityFilter.GLOBAL)>>

::Ability_Global_MuscleTier_Fourth <975,6100>
<<set setup.Ability_MuscleTier_Fourth = setup.AbilityDataFactory.createAbilityData({
    id:         "Ability_MuscleTier_Fourth",
    name:       "4",
    description:function(character)
    {
        return ""; 
    },
    maxRank: 1
})>>

<<run setup.Ability_MuscleTier_Fourth.addBehaviour(
    "start",
    setup.AbilityTrigger.ON_ACQUIRE,
    undefined
)>>

<<run setup.Ability_MuscleTier_Fourth.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_APPLY_GROWTH + setup.AbilityTrigger.ON_ACQUIRE,
    function(abilityRuntimeData, abilityParams)
    {
        var comparatorSize = 110;
        var nextComparatorSize = 180;
        var muscles = setup.getStatValue(abilityParams.self, "muscles", "Ability_HeightSizeTier_Fourth");

        if(muscles > comparatorSize && muscles < nextComparatorSize)
        {
            abilityRuntimeData.isActive = true;
	        abilityRuntimeData.modifier.strengthMods = {mod: setup.mod.ADD, value: 50};
        }
        else
        {
            abilityRuntimeData.isActive = false;
            abilityRuntimeData.modifier = setup.ModifierFactory.createModifier(
            {
                abilityIndex: abilityRuntimeData.abilityDataIndex
            });
        }
    }
)>>

<<run setup.Ability_MuscleTier_Fourth.setAsGlobalAbility()>>
<<run setup.Ability_MuscleTier_Fourth.setFilter(setup.AbilityFilter.GLOBAL)>>

::Ability_Global_MuscleTier_Fifth <1100,6100>
<<set setup.Ability_MuscleTier_Fifth = setup.AbilityDataFactory.createAbilityData({
    id:         "Ability_MuscleTier_Fifth",
    name:       "5",
    description:function(character)
    {
        return ""; 
    },
    maxRank: 1
})>>

<<run setup.Ability_MuscleTier_Fifth.addBehaviour(
    "start",
    setup.AbilityTrigger.ON_ACQUIRE,
    undefined
)>>

<<run setup.Ability_MuscleTier_Fifth.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_APPLY_GROWTH + setup.AbilityTrigger.ON_ACQUIRE,
    function(abilityRuntimeData, abilityParams)
    {
        var comparatorSize = 180;
        var nextComparatorSize = 250;
        var muscles = setup.getStatValue(abilityParams.self, "muscles", "Ability_HeightSizeTier_Fifth");

        if(muscles > comparatorSize && muscles < nextComparatorSize)
        {
            abilityRuntimeData.isActive = true;
	        abilityRuntimeData.modifier.strengthMods = {mod: setup.mod.ADD, value: 75};
        }
        else
        {
            abilityRuntimeData.isActive = false;
            abilityRuntimeData.modifier = setup.ModifierFactory.createModifier(
            {
                abilityIndex: abilityRuntimeData.abilityDataIndex
            });
        }
    }
)>>

<<run setup.Ability_MuscleTier_Fifth.setAsGlobalAbility()>>
<<run setup.Ability_MuscleTier_Fifth.setFilter(setup.AbilityFilter.GLOBAL)>>

::Ability_Global_MuscleTier_Sixth <1225,6100>
<<set setup.Ability_MuscleTier_Sixth = setup.AbilityDataFactory.createAbilityData({
    id:         "Ability_MuscleTier_Sixth",
    name:       "6",
    description:function(character)
    {
        return ""; 
    },
    maxRank: 1
})>>

<<run setup.Ability_MuscleTier_Sixth.addBehaviour(
    "start",
    setup.AbilityTrigger.ON_ACQUIRE,
    undefined
)>>

<<run setup.Ability_MuscleTier_Sixth.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_APPLY_GROWTH + setup.AbilityTrigger.ON_ACQUIRE,
    function(abilityRuntimeData, abilityParams)
    {
        var comparatorSize = 250;
        var muscles = setup.getStatValue(abilityParams.self, "muscles", "Ability_HeightSizeTier_Sixth");

        if(muscles > comparatorSize)
        {
            abilityRuntimeData.isActive = true;
	        abilityRuntimeData.modifier.strengthMods = {mod: setup.mod.ADD, value: 100};
        }
        else
        {
            abilityRuntimeData.isActive = false;
            abilityRuntimeData.modifier = setup.ModifierFactory.createModifier(
            {
                abilityIndex: abilityRuntimeData.abilityDataIndex
            });
        }
    }
)>>

<<run setup.Ability_MuscleTier_Sixth.setAsGlobalAbility()>>
<<run setup.Ability_MuscleTier_Sixth.setFilter(setup.AbilityFilter.GLOBAL)>>

::Ability_Global_Overwhelming_Balls <100,6225>
<<set setup.Ability_Overwhelming_Balls = setup.AbilityDataFactory.createAbilityData({
    id:         "Ability_Overwhelming_Balls",
    name:       "",
    description:function(character)
    {
        return ""; 
    },
    maxRank: 1
})>>

<<run setup.Ability_Overwhelming_Balls.addBehaviour(
    "start",
    setup.AbilityTrigger.ON_FIGHT_START,
    undefined
)>>

<<run setup.Ability_Overwhelming_Balls.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_FIGHT_TURN_START,
    function(abilityRuntimeData, abilityParams)
    {
        if(setup.cockcomparison(setup.getStatValue(abilityParams.self, "balls"), setup.getStatValue(abilityParams.target, "height"))  >= setup.CockComparators.SLIGHTLY_BIGGER &&
         setup.cockcomparison(setup.getStatValue(abilityParams.self, "balls"), setup.getStatValue(abilityParams.target, "height"))  < setup.CockComparators.MASSIVE)
        {
            abilityRuntimeData.isActive = true;
            abilityRuntimeData.modifier.arousalGainMods = {mod: setup.mod.ADD, value: 10};
        }
        else
        {
            abilityRuntimeData.isActive = false;
            abilityRuntimeData.modifier = setup.ModifierFactory.createModifier(
            {
                abilityIndex: abilityRuntimeData.abilityDataIndex
            });
        }
    }
)>>

<<run setup.Ability_Overwhelming_Balls.addBehaviour(
    "end",
    setup.AbilityTrigger.ON_FIGHT_END,
    undefined
)>>

<<run setup.Ability_Overwhelming_Balls.setAsGlobalAbility()>>
<<run setup.Ability_Overwhelming_Balls.setFilter(setup.AbilityFilter.GLOBAL)>>

::Ability_Global_All_Consuming_Balls <225,6225>
<<set setup.Ability_All_Consuming_Balls = setup.AbilityDataFactory.createAbilityData({
    id:         "Ability_All_Consuming_Balls",
    name:       "",
    description:function(character)
    {
        return ""; 
    },
    maxRank: 1
})>>

<<run setup.Ability_All_Consuming_Balls.addBehaviour(
    "start",
    setup.AbilityTrigger.ON_FIGHT_START,
    undefined
)>>

<<run setup.Ability_All_Consuming_Balls.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_FIGHT_TURN_START,
    function(abilityRuntimeData, abilityParams)
    {        
        if(setup.cockcomparison(setup.getStatValue(abilityParams.self, "balls"), setup.getStatValue(abilityParams.target, "height")) >= setup.CockComparators.MASSIVE)
        {
            abilityRuntimeData.isActive = true;
            abilityRuntimeData.modifier.arousalGainMods = {mod: setup.mod.ADD, value: 15};
            abilityRuntimeData.modifier.fightMoveIDsMods = {mod: setup.mod.ADD, value: [setup.FightMove_CumDeluge.id]};
        }
        else
        {
            abilityRuntimeData.isActive = false;
            abilityRuntimeData.modifier = setup.ModifierFactory.createModifier(
            {
                abilityIndex: abilityRuntimeData.abilityDataIndex
            });
        }
    }
)>>

<<run setup.Ability_All_Consuming_Balls.addBehaviour(
    "end",
    setup.AbilityTrigger.ON_FIGHT_END,
    undefined
)>>

<<run setup.Ability_All_Consuming_Balls.setAsGlobalAbility()>>
<<run setup.Ability_All_Consuming_Balls.setFilter(setup.AbilityFilter.GLOBAL)>>

::Ability_Global_Bigger_Than_Target_1 <350,6225>
<<set setup.Ability_Bigger_Than_Target = setup.AbilityDataFactory.createAbilityData({
    id:         "Ability_Bigger_Than_Target",
    name:       "",
    description:function(character)
    {
        return ""; 
    },
    maxRank: 1
})>>

<<run setup.Ability_Bigger_Than_Target.addBehaviour(
    "start",
    setup.AbilityTrigger.ON_FIGHT_START,
    undefined
)>>

<<run setup.Ability_Bigger_Than_Target.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_FIGHT_TURN_START,
    function(abilityRuntimeData, abilityParams)
    {
        if(setup.sizeCharactercomparison(abilityParams.self, abilityParams.target) >= setup.Comparators.BIGGER &&
         setup.sizeCharactercomparison(abilityParams.self, abilityParams.target) < setup.Comparators.REACHES_WAIST)
        {
            abilityRuntimeData.isActive = true;
	        abilityRuntimeData.modifier.strengthMods = {mod: setup.mod.ADD, value: 7};
        }
        else
        {
            abilityRuntimeData.isActive = false;
            abilityRuntimeData.modifier = setup.ModifierFactory.createModifier(
            {
                abilityIndex: abilityRuntimeData.abilityDataIndex
            });
        }
    }
)>>

<<run setup.Ability_Bigger_Than_Target.addBehaviour(
    "end",
    setup.AbilityTrigger.ON_FIGHT_END,
    undefined
)>>

<<run setup.Ability_Bigger_Than_Target.setAsGlobalAbility()>>
<<run setup.Ability_Bigger_Than_Target.setFilter(setup.AbilityFilter.GLOBAL)>>

::Ability_Global_Bigger_Than_Target_2 <475,6225>
<<set setup.Ability_Looming_Over_Target = setup.AbilityDataFactory.createAbilityData({
    id:         "Ability_Looming_Over_Target",
    name:       "",
    description:function(character)
    {
        return ""; 
    },
    maxRank: 1
})>>

<<run setup.Ability_Looming_Over_Target.addBehaviour(
    "start",
    setup.AbilityTrigger.ON_FIGHT_START,
    undefined
)>>

<<run setup.Ability_Looming_Over_Target.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_FIGHT_TURN_START,
    function(abilityRuntimeData, abilityParams)
    {
		if(setup.sizeCharactercomparison(abilityParams.self, abilityParams.target) >= setup.Comparators.REACHES_WAIST && 
            setup.sizeCharactercomparison(abilityParams.self, abilityParams.target) < setup.Comparators.FITS_ON_HAND)
        {
            abilityRuntimeData.isActive = true;
	        abilityRuntimeData.modifier.strengthMods = {mod: setup.mod.ADD, value: 10};
	        abilityRuntimeData.modifier.arousalGainMods = {mod: setup.mod.ADD, value: 5};
	        abilityRuntimeData.modifier.fightMoveIDsMods = {mod: setup.mod.ADD, value: [setup.FightMove_Stomp.id]};
        }
        else
        {
            abilityRuntimeData.isActive = false;
            abilityRuntimeData.modifier = setup.ModifierFactory.createModifier(
            {
                abilityIndex: abilityRuntimeData.abilityDataIndex
            });
        }
    }
)>>

<<run setup.Ability_Looming_Over_Target.addBehaviour(
    "end",
    setup.AbilityTrigger.ON_FIGHT_END,
    undefined
)>>

<<run setup.Ability_Looming_Over_Target.setAsGlobalAbility()>>
<<run setup.Ability_Looming_Over_Target.setFilter(setup.AbilityFilter.GLOBAL)>>

::Ability_Global_Bigger_Than_Target_3 <600,6225>
<<set setup.Ability_Overwhelming_Target = setup.AbilityDataFactory.createAbilityData({
    id:         "Ability_Overwhelming_Target",
    name:       "",
    description:function(character)
    {
        return ""; 
    },
    maxRank: 1
})>>

<<run setup.Ability_Overwhelming_Target.addBehaviour(
    "start",
    setup.AbilityTrigger.ON_FIGHT_START,
    undefined
)>>

<<run setup.Ability_Overwhelming_Target.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_FIGHT_TURN_START,
    function(abilityRuntimeData, abilityParams)
    {
		if(setup.sizeCharactercomparison(abilityParams.self, abilityParams.target) >= setup.Comparators.FITS_ON_HAND)
        {
            abilityRuntimeData.isActive = true;
	        abilityRuntimeData.modifier.strengthMods = {mod: setup.mod.ADD, value: 40};
	        abilityRuntimeData.modifier.arousalGainMods = {mod: setup.mod.ADD, value: 15};
	        abilityRuntimeData.modifier.fightMoveIDsMods = {mod: setup.mod.ADD, value: [setup.FightMove_Stomp.id]};
        }
        else
        {
            abilityRuntimeData.isActive = false;
            abilityRuntimeData.modifier = setup.ModifierFactory.createModifier(
            {
                abilityIndex: abilityRuntimeData.abilityDataIndex
            });
        }
    }
)>>

<<run setup.Ability_Overwhelming_Target.addBehaviour(
    "end",
    setup.AbilityTrigger.ON_FIGHT_END,
    undefined
)>>

<<run setup.Ability_Overwhelming_Target.setAsGlobalAbility()>>
<<run setup.Ability_Overwhelming_Target.setFilter(setup.AbilityFilter.GLOBAL)>>

::Ability_SombrevesWhisper <725,6225>
<<set setup.Ability_SombrevesWhisper = setup.AbilityDataFactory.createAbilityData({
    id:         "Ability_SombrevesWhisper",
    name:       "Sombreve",
    description:function(character, abilityRuntimeData)
    {
        if(abilityRuntimeData == undefined)
        {
            var displayString = "";
            displayString += "2\n";
            displayString += "5%"; 
            return displayString;
        }
        else
        {
            var displayString = "";
            displayString += ""+ (2 + setup.getRankGrowth(abilityRuntimeData, "linear", 1)) +"\n";
            displayString += ""+setup.getRankGrowth(abilityRuntimeData, "linear", 5)+"%"; 
            return displayString;
        }
    },
    maxRank: 5
})>>

<<run setup.Ability_SombrevesWhisper.addBehaviour(
    "start",
    setup.AbilityTrigger.ON_ACQUIRE,
    undefined,
)>>

<<run setup.Ability_SombrevesWhisper.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_FIGHT_TURN_START + setup.AbilityTrigger.ON_STAT_CHANGE + setup.AbilityTrigger.ON_FIGHT_END,
    function(abilityRuntimeData, abilityParams)
    {
        if(State.variables.FightTurn != 0)
        {
            abilityRuntimeData.modifier.arousalGainMods = {mod: setup.mod.ADD, value: (2 + setup.getRankGrowth(abilityRuntimeData, "linear", 2)) * State.variables.FightTurn}
            abilityRuntimeData.modifier.corruptionMods = {mod: setup.mod.MULTIPLYPOS, value: setup.getRankGrowth(abilityRuntimeData, "linear", 0.05) * State.variables.FightTurn}

            /*var params = 
            {
                trigger: setup.AbilityTrigger.ON_GAIN_CORRUPTION,
                self: abilityParams.self,
            }
            abilityParams.self.broadcastAbilityTrigger(params);*/
        }
        else
        {
            abilityRuntimeData.modifier = setup.ModifierFactory.createModifier(
            {
                abilityIndex: abilityRuntimeData.abilityDataIndex
            });
        }
    },
)>>

<<run setup.Ability_SombrevesWhisper.setUnlockableFromLevelScreen(true)>>

<<run setup.Ability_SombrevesWhisper.setUnlockCondition(
    function(character){
        return (State.variables.Level >= 15) && (setup.getStatValue(character, "corruption") >= 75)
    }
)>>

<<set setup.Ability_SombrevesWhisper.setCategory(setup.AbilityCategory.SOMBREVE)>>
<<set setup.Ability_SombrevesWhisper.setGrade(setup.AbilityGrade.VERYHIGH)>>

::Ability_SurvivorOfTheFirstEclipse <850,6225>
<<set setup.Ability_SurvivorOfTheFirstEclipse = setup.AbilityDataFactory.createAbilityData({
    id:         "Ability_SurvivorOfTheFirstEclipse",
    name:       "",
    description:function(character)
    {
        return ""; 
    },
    maxRank: 1
})>>

<<run setup.Ability_SurvivorOfTheFirstEclipse.addBehaviour(
    "start",
    setup.AbilityTrigger.ON_ACQUIRE,
    function(abilityRuntimeData, abilityParams)
    {
        abilityRuntimeData.modifier.maxHPMods = {mod: setup.mod.ADD, value: 5};
        abilityRuntimeData.modifier.maxStaminaMods = {mod: setup.mod.ADD, value: 5}
    }
)>>

<<run setup.Ability_SurvivorOfTheFirstEclipse.setFilter(setup.AbilityFilter.ALTERATION)>>

::Ability_TaintedByTheLost <975,6225>
<<set setup.Ability_TaintedByTheLost = setup.AbilityDataFactory.createAbilityData({
    id:         "Ability_TaintedByTheLost",
    name:       "",
    description:function(character)
    {
        return ""; 
    },
    maxRank: 1
})>>

<<run setup.Ability_TaintedByTheLost.addBehaviour(
    "start",
    setup.AbilityTrigger.ON_ACQUIRE,
    function(abilityRuntimeData, abilityParams)
    {
        abilityRuntimeData.modifier.corruptionMods = {mod: setup.mod.ADD, value: 5};
        abilityRuntimeData.modifier.minArousalMods = {mod: setup.mod.ADD, value: 5};
        abilityRuntimeData.modifier.arousalGainMods = {mod: setup.mod.ADD, value: 5}
    }
)>>

<<run setup.Ability_TaintedByTheLost.setFilter(setup.AbilityFilter.ALTERATION)>>

::Ability_Tank <1100,6225>
<<set setup.Ability_Tank = setup.AbilityDataFactory.createAbilityData({
    id:         "Ability_Tank",
    name:       "",
    description:function(character, abilityRuntimeData)
    {
        if(abilityRuntimeData == undefined)
        {
            let displayString = "HP20%";
            displayString += "5%"
            return displayString
        }
        else
        {
            let displayString = "HP";
            displayString += setup.getRankGrowth(abilityRuntimeData, "linear", 20) + "%";
            displayString += "";
            displayString += setup.getRankGrowth(abilityRuntimeData, "linear", 5) + "%";
            return displayString
        }
    },
    maxRank: 5
})>>

<<run setup.Ability_Tank.addBehaviour(
    "start",
    setup.AbilityTrigger.ON_ACQUIRE,
    undefined
)>>

<<run setup.Ability_Tank.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_ACQUIRE + setup.AbilityTrigger.ON_STAT_CHANGE,
    function(abilityRuntimeData, abilityParams)
    {   
        abilityRuntimeData.modifier.maxHPMods = {
            mod: setup.mod.MULTIPLYPOS,
            value: setup.getRankGrowth(abilityRuntimeData, "linear", 0.2)
        }

        abilityRuntimeData.modifier.maxStaminaMods = {
                mod: setup.mod.MULTIPLYNEG,
                value: setup.getRankGrowth(abilityRuntimeData, "linear", 0.05)
            }
    }
)>>

<<run setup.Ability_Tank.setUnlockableFromLevelScreen(true)>>

<<run setup.Ability_Tank.setUnlockCondition(
    function(character){
        return (State.variables.Level >= 1)
    }
)>>

<<set setup.Ability_Tank.setCategory(setup.AbilityCategory.WARRIOR)>>
<<set setup.Ability_Tank.setGrade(setup.AbilityGrade.VERYLOW)>>

::Ability_ToLiveForEcho <1225,6225>
<<set setup.Ability_ToLiveForEcho = setup.AbilityDataFactory.createAbilityData({
    id:         "Ability_ToLiveForEcho",
    name:       "<<SymbioteName>>",
    description: function(character, abilityRuntimeData)
                {
                    return "<<SymbioteName>>"; 
                },
    maxRank:    1
})>>

<<run setup.Ability_ToLiveForEcho.addBehaviour(
    "start",
    setup.AbilityTrigger.ON_ACQUIRE,
    undefined,
)>>

<<run setup.Ability_ToLiveForEcho.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_MAX_LUST,
    function(abilityRuntimeData, abilityParams)
    {   
        abilityRuntimeData.modifier.maxHPMods = {mod: setup.mod.ADD, value: 35}
        abilityRuntimeData.modifier.maxStaminaMods = {mod: setup.mod.ADD, value: 20}
        abilityRuntimeData.modifier.strengthMods = {mod: setup.mod.ADD, value: 20}
        abilityRuntimeData.modifier.critChanceMods = {mod: setup.mod.ADD, value: 20}
        abilityRuntimeData.modifier.fightMoveIDsMods = {mod: setup.mod.ADD, value: []}

        var displayString = "<<SymbioteName>>";
        displayString += "<<SymbioteName>>"
        displayString += "" + setup.getRace($CharacterSheet_Player.symbiote.anatomy)  + ""
        return 
    }
)>>

<<run setup.Ability_ToLiveForEcho.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_MIN_LUST + setup.AbilityTrigger.ON_FIGHT_END + setup.AbilityTrigger.ON_FIGHT_START,
    function(abilityRuntimeData, abilityParams)
    {   
        abilityRuntimeData.modifier = setup.ModifierFactory.createModifier(
        {
            abilityIndex: abilityRuntimeData.abilityDataIndex
        });
        
        abilityRuntimeData.modifier.fightMoveIDsMods = {mod: setup.mod.REPLACE, value: [setup.FightMove_Masturbate.id]}

        return "<<SymbioteName>>";
    }
)>>

/*This breaks in 0.4.0*/
/*<<run setup.Ability_ToLiveForEcho.setUnlockableFromLevelScreen(true)>>*/

<<run setup.Ability_ToLiveForEcho.setUnlockCondition(
    function(character){
        return State.variables.Level >= 7
    }
)>>

<<set setup.Ability_ToLiveForEcho.setCategory(setup.AbilityCategory.LUST)>>
<<set setup.Ability_ToLiveForEcho.setGrade(setup.AbilityGrade.HIGH)>>

::Ability_TonicOfStillness <100,6350>
<<set setup.Ability_TonicOfStillness = setup.AbilityDataFactory.createAbilityData({
    id:         "Ability_TonicOfStillness",
    name:       "",
    description:function(character)
    {
        return "\n7"; 
    },
    maxRank: 999
})>>

<<run setup.Ability_TonicOfStillness.addBehaviour(
    "start",
    setup.AbilityTrigger.ON_ACQUIRE,
    function(abilityRuntimeData, abilityParams)
    {
        abilityRuntimeData.blackboard = {}
    },
)>>

<<run setup.Ability_TonicOfStillness.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_ACQUIRE,
    function(abilityRuntimeData, abilityParams)
    {
        abilityRuntimeData.blackboard.dayConsumed = State.variables.Expedition;

        console.log(abilityParams.self);

        var appliedCorruption = Math.max(State.variables[abilityParams.self.id].info.corruption * -1, -5);

        if(appliedCorruption != 0)
        {
            console.log("applying "+appliedCorruption);
            setup.applyCorruption(State.variables[abilityParams.self.id], appliedCorruption);
            console.log(appliedCorruption);

            console.log("asd");

            var strengthValue = 0;

            if(abilityRuntimeData.modifier.strengthMods != null)
            {
                strengthValue = abilityRuntimeData.modifier.strengthMods.value;
            }

            abilityRuntimeData.isActive = true;
            abilityRuntimeData.modifier.strengthMods = {mod: setup.mod.ADD, value: strengthValue + (appliedCorruption * -1)};
        }
    }
)>>

<<run setup.Ability_TonicOfStillness.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_DAY_CHANGE,
    function(abilityRuntimeData, abilityParams)
    {   
        if(State.variables.Expedition - abilityRuntimeData.blackboard.dayConsumed >= 7)
        {
            abilityRuntimeData.isActive = false;
            abilityRuntimeData.rank = 0;
        }
    }
)>>

<<run setup.Ability_TonicOfStillness.setFilter(setup.AbilityFilter.STATUSEFFECT)>>

::Ability_TorgarsBond <225,6350>
<<set setup.Ability_TorgarsBond = setup.AbilityDataFactory.createAbilityData({
    id:         "Ability_TorgarsBond",
    name:       "",
    description:function(character, abilityRuntimeData)
    {
        if(abilityRuntimeData == undefined)
        {
            return "\n20%";
        }
        else
        {
            let displayString = "\n";
            displayString += ""+setup.getRankGrowth(abilityRuntimeData, "linear", 20) + "%";
            return displayString;
        }
    },
    maxRank: 5
})>>

<<run setup.Ability_TorgarsBond.addBehaviour(
    "start",
    setup.AbilityTrigger.ON_ACQUIRE,
    undefined,
)>>

<<run setup.Ability_TorgarsBond.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_ACQUIRE + setup.AbilityTrigger.ON_DAY_CHANGE + setup.AbilityTrigger.ON_STAT_CHANGE,
    function(abilityRuntimeData, abilityParams)
    {
        abilityRuntimeData.modifier.strengthMods = {mod: setup.mod.ADD, value: setup.getRankGrowth(abilityRuntimeData, "linear", 0.2) * setup.getStatValue(State.variables.CharacterSheet_Torgar, "strength")};
    }
)>>

<<run setup.Ability_TorgarsBond.setFilter(setup.AbilityFilter.ALTERATION)>>

::Ability_TorgarsCorruption <350,6350>
<<set setup.Ability_TorgarsCorruption = setup.AbilityDataFactory.createAbilityData({
    id:         "Ability_TorgarsCorruption",
    name:       "",
    description:function(character)
    {
        return "\n12"; 
    },
    maxRank: 999
})>>

<<run setup.Ability_TorgarsCorruption.addBehaviour(
    "start",
    setup.AbilityTrigger.ON_ACQUIRE,
    function(abilityRuntimeData, abilityParams)
    {
        abilityRuntimeData.blackboard = {}
    },
)>>

<<run setup.Ability_TorgarsCorruption.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_ACQUIRE,
    function(abilityRuntimeData, abilityParams)
    {
        abilityRuntimeData.blackboard.dayConsumed = State.variables.Expedition;

        setup.applyCorruption(abilityParams.self, 10);
        setup.applyGrowth(abilityParams.self, "muscles", 10);

        abilityRuntimeData.isActive = true;
        abilityRuntimeData.modifier.maxHPMods = {mod: setup.mod.ADD, value: setup.getRankGrowth(abilityRuntimeData, "linear", 8)};
        abilityRuntimeData.modifier.maxStaminaMods = {mod: setup.mod.ADD, value: setup.getRankGrowth(abilityRuntimeData, "linear", 8)};
        abilityRuntimeData.modifier.strengthMods = {mod: setup.mod.ADD, value: setup.getRankGrowth(abilityRuntimeData, "linear", 5)};
        abilityRuntimeData.modifier.minArousalMods = {mod: setup.mod.ADD, value: 10};
        abilityRuntimeData.modifier.corruptionMods = {mod: setup.mod.ADD, value: setup.getRankGrowth(abilityRuntimeData, "linear", 8)};
    }
)>>

<<run setup.Ability_TorgarsCorruption.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_DAY_CHANGE,
    function(abilityRuntimeData, abilityParams)
    {   
        if(State.variables.Expedition - abilityRuntimeData.blackboard.dayConsumed >= 12)
        {
            abilityRuntimeData.isActive = false;
            abilityRuntimeData.rank = 0;
        }
    }
)>>

<<run setup.Ability_TorgarsCorruption.setFilter(setup.AbilityFilter.ALTERATION)>>

::Ability_EmbracedByNyxsLight <475,6350>
<<set setup.Ability_EmbracedByNyxsLight = setup.AbilityDataFactory.createAbilityData({
    id:         "Ability_EmbracedByNyxsLight",
    name:       "",
    description:function(character)
                {
                    return "40%"; 
                },
    maxRank:    1
})>>

<<run setup.Ability_EmbracedByNyxsLight.addBehaviour(
    "start",
    setup.AbilityTrigger.ON_ACQUIRE,
    undefined,
)>>

<<run setup.Ability_EmbracedByNyxsLight.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_ACQUIRE + setup.AbilityTrigger.ON_STAT_CHANGE,
    function(abilityRuntimeData, abilityParams)
    {
        abilityRuntimeData.modifier.arousalGainMods = {mod: setup.mod.ADD, value: Math.ceil(setup.getStatValue(abilityParams.self, "arousalGain") * 0.4, 0)};
    },
)>>

<<run setup.Ability_EmbracedByNyxsLight.setFilter(setup.AbilityFilter.ALTERATION)>>

::Ability_TouchedByNyxsLight <600,6350>
<<set setup.Ability_TouchedByNyxsLight = setup.AbilityDataFactory.createAbilityData({
    id:         "Ability_TouchedByNyxsLight",
    name:       "",
    description:function(character)
                {
                    return "15%"; 
                },
    maxRank:    1
})>>

<<run setup.Ability_TouchedByNyxsLight.addBehaviour(
    "start",
    setup.AbilityTrigger.ON_ACQUIRE,
    undefined,
)>>

<<run setup.Ability_TouchedByNyxsLight.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_ACQUIRE + setup.AbilityTrigger.ON_STAT_CHANGE,
    function(abilityRuntimeData, abilityParams)
    {
        abilityRuntimeData.modifier.arousalGainMods = {mod: setup.mod.ADD, value: Math.ceil(setup.getStatValue(abilityParams.self, "arousalGain") * 0.15, 0)};
    },
)>>

<<run setup.Ability_TouchedByNyxsLight.addBehaviour(
    "end",
    setup.AbilityTrigger.ON_FIGHT_BATTLE_LOST,
    undefined,
)>>

<<run setup.Ability_TouchedByNyxsLight.setFilter(setup.AbilityFilter.ALTERATION)>>

::Ability_UnstoppableExpansion <725,6350>
<<set setup.Ability_UnstoppableExpansion = setup.AbilityDataFactory.createAbilityData({
    id:         "Ability_UnstoppableExpansion",
    name:       "",
    description:function(character, abilityRuntimeData)
    {
        if(abilityRuntimeData == undefined)
        {
            return "0.1%"; 
        }
        else
        {
            return ""+ setup.getRankGrowth(abilityRuntimeData, "linear", 0.1).toFixed(2).replace(/\.00$/, '') +"%"; 
        }
        
    },
    maxRank: 10
})>>  

<<run setup.Ability_UnstoppableExpansion.addBehaviour(
    "start",
    setup.AbilityTrigger.ON_ACQUIRE,
    undefined,
)>>

<<run setup.Ability_UnstoppableExpansion.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_APPLY_GROWTH + setup.AbilityTrigger.ON_ACQUIRE,
    function(abilityRuntimeData, abilityParams)
    {
        abilityRuntimeData.modifier.bonusGrowthCock = {mod: setup.mod.ADD, value: setup.getStatValue(abilityParams.self, "cock") * setup.getRankGrowth(abilityRuntimeData, "linear", 1) / 1000}
        abilityRuntimeData.modifier.bonusGrowthHeight = {mod: setup.mod.ADD, value: setup.getStatValue(abilityParams.self, "height") * setup.getRankGrowth(abilityRuntimeData, "linear", 1) / 1000}
        abilityRuntimeData.modifier.bonusGrowthMuscles = {mod: setup.mod.ADD, value: setup.getStatValue(abilityParams.self, "muscles") * setup.getRankGrowth(abilityRuntimeData, "linear", 1) / 1000}
        abilityRuntimeData.modifier.bonusGrowthBalls = {mod: setup.mod.ADD, value: setup.getStatValue(abilityParams.self, "balls") * setup.getRankGrowth(abilityRuntimeData, "linear", 1) / 1000}
    },
)>>

<<run setup.Ability_UnstoppableExpansion.setUnlockableFromLevelScreen(true)>>

<<run setup.Ability_UnstoppableExpansion.setUnlockCondition(
    function(character){
        return (State.variables.Level >= 15)
    }
)>>

<<set setup.Ability_UnstoppableExpansion.setCategory(setup.AbilityCategory.GROWTH)>>
<<set setup.Ability_UnstoppableExpansion.setGrade(setup.AbilityGrade.VERYHIGH)>>

::Ability_ValiantRush <850,6350>
<<set setup.Ability_ValiantRush = setup.AbilityDataFactory.createAbilityData({
    id:         "Ability_ValiantRush",
    name:       "",
    description:function(character, abilityRuntimeData)
    {
        if(abilityRuntimeData == undefined)
        {
            return "1";  
        }
        else
        {
            return ""+setup.getRankGrowth(abilityRuntimeData, "linear", 1)+""; 
        }
    },
    maxRank: 5
})>>

<<run setup.Ability_ValiantRush.addBehaviour(
    "start",
    setup.AbilityTrigger.ON_ACQUIRE,
    undefined,
)>>

<<run setup.Ability_ValiantRush.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_ACQUIRE,
    function(abilityRuntimeData, abilityParams)
    {   
        abilityRuntimeData.modifier.comboMovesPerTurnMods = {mod: setup.mod.ADD, value: setup.getRankGrowth(abilityRuntimeData, "linear", 1)};
    },
)>>

<<run setup.Ability_ValiantRush.setUnlockCondition(
    function(character){
        return State.variables.Level >= 5
    }
)>>

<<run setup.Ability_ValiantRush.setUnlockableFromLevelScreen(true)>>

<<set setup.Ability_ValiantRush.setCategory(setup.AbilityCategory.WARRIOR)>>
<<set setup.Ability_ValiantRush.setGrade(setup.AbilityGrade.MEDIUM)>>

::Ability_VampiricLust <975,6350>
<<set setup.Ability_VampiricLust = setup.AbilityDataFactory.createAbilityData({
    id:         "Ability_VampiricLust",
    name:       "",
    description:function(character, abilityRuntimeData)
    {
        if(abilityRuntimeData == undefined)
        {
            return "5";
        }
        else
        {
            return ""+ (2 + setup.getRankGrowth(abilityRuntimeData, "linear", 3))+"";
        }
    },
    maxRank: 5
})>>

<<run setup.Ability_VampiricLust.addBehaviour(
    "start",
    setup.AbilityTrigger.ON_ACQUIRE,
    undefined,
)>>

<<run setup.Ability_VampiricLust.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_MAX_LUST,
    function(abilityRuntimeData, abilityParams)
    {
        abilityParams.self.fight.variables.currentHP = Math.min(setup.getStatValue(abilityParams.self, "hp"), abilityParams.self.fight.variables.currentHP + 2 + setup.getRankGrowth(abilityRuntimeData, "linear", 3));
        return "Lust courses through your system, your need drives you ever onwards!"
    },
)>>

<<run setup.Ability_VampiricLust.setUnlockableFromLevelScreen(true)>>

<<run setup.Ability_VampiricLust.setUnlockCondition(
    function(character){
        return State.variables.Level >= 4 && character.hasAbility("Ability_HostOfEcho")
    }
)>>

<<set setup.Ability_VampiricLust.setCategory(setup.AbilityCategory.LUST)>>
<<set setup.Ability_VampiricLust.setGrade(setup.AbilityGrade.LOW)>>

::Ability_VigorOfTheEndowed <1100,6350>
<<set setup.Ability_VigorOfTheEndowed = setup.AbilityDataFactory.createAbilityData({
id:         "Ability_VigorOfTheEndowed",
name:       "",
description:function(character, abilityRuntimeData)
{
    if(abilityRuntimeData == undefined)
    {
        return ""+setup.getLength(4)+"15\n"+setup.getLength(2)+""+setup.getLength(1)+""; 
    }
    else
    {
        return ""+setup.getLength(4)+""+(5 + setup.getRankGrowth(abilityRuntimeData, "linear", 10))+"\n"+setup.getLength(setup.getRankGrowth(abilityRuntimeData, "linear", 2))+""+setup.getLength(setup.getRankGrowth(abilityRuntimeData, "linear", 1))+""; 
    }
},
maxRank: 4
})>>

<<run setup.Ability_VigorOfTheEndowed.addBehaviour(
    "start",
    setup.AbilityTrigger.ON_ACQUIRE,
    undefined,
)>>

<<run setup.Ability_VigorOfTheEndowed.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_ACQUIRE,
    function(abilityRuntimeData, abilityParams)
    {
        setup.applyGrowth(abilityParams.self, "cock", setup.getRankGrowth(abilityRuntimeData, "linear", 2));
        setup.applyGrowth(abilityParams.self, "balls", setup.getRankGrowth(abilityRuntimeData, "linear", 1));
    },
)>>

<<run setup.Ability_VigorOfTheEndowed.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_APPLY_GROWTH + setup.AbilityTrigger.ON_ACQUIRE,
    function(abilityRuntimeData, abilityParams)
    {
        var boost = Math.min(Math.ceil(setup.getStatValue(abilityParams.self, "cock", "Ability_VigorOfTheEndowed") / 4), (15 + setup.getRankGrowth(abilityRuntimeData, "linear", 10)));
        abilityRuntimeData.modifier.maxStaminaMods = {mod: setup.mod.ADD, value: boost};
    },
)>>

<<run setup.Ability_VigorOfTheEndowed.setUpgrade(
    function(abilityRuntimeData, character){
        return (State.variables.Level >= 7) && (setup.canRank(abilityRuntimeData) == false)
    },
    setup.Ability_VigorOfTheEndowed_2,
    function(character){
        var displayString = ""
        displayString += "7:(" + State.variables.Level + ")\n"
        return displayString
    }
)>>

<<run setup.Ability_VigorOfTheEndowed.setUnlockableFromLevelScreen(true)>>

<<run setup.Ability_VigorOfTheEndowed.setUnlockCondition(
    function(character){
        return true
    }
)>>

<<set setup.Ability_VigorOfTheEndowed.setCategory(setup.AbilityCategory.WARRIOR)>>
<<set setup.Ability_VigorOfTheEndowed.setGrade(setup.AbilityGrade.VERYLOW)>>

::Ability_VigorOfTheEndowed_2 <1225,6350>
<<set setup.Ability_VigorOfTheEndowed_2 = setup.AbilityDataFactory.createAbilityData({
id:         "Ability_VigorOfTheEndowed_2",
name:       "",
description:function(character, abilityRuntimeData)
{
    if(abilityRuntimeData == undefined)
    {
        return ""+setup.getLength(4)+"45\n"+setup.getLength(5)+""+setup.getLength(2)+"";
    }
    else
    {
        return ""+setup.getLength(4)+""+(35 + setup.getRankGrowth(abilityRuntimeData, "linear", 10))+"\n"+setup.getLength(setup.getRankGrowth(abilityRuntimeData, "linear", 5))+""+setup.getLength(setup.getRankGrowth(abilityRuntimeData, "linear", 2))+"";
    }
},
maxRank: 5
})>>

<<run setup.Ability_VigorOfTheEndowed_2.addBehaviour(
    "start",
    setup.AbilityTrigger.ON_ACQUIRE,
    undefined,
)>>

<<run setup.Ability_VigorOfTheEndowed_2.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_ACQUIRE,
    function(abilityRuntimeData, abilityParams)
    {
        setup.applyGrowth(abilityParams.self, "cock", setup.getRankGrowth(abilityRuntimeData, "linear", 5));
        setup.applyGrowth(abilityParams.self, "balls", setup.getRankGrowth(abilityRuntimeData, "linear", 2));
    },
)>>

<<run setup.Ability_VigorOfTheEndowed_2.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_APPLY_GROWTH + setup.AbilityTrigger.ON_ACQUIRE,
    function(abilityRuntimeData, abilityParams)
    {
        var boost = Math.min(setup.getStatValue(abilityParams.self, "cock", "Ability_VigorOfTheEndowed_2" / 4), (35 + setup.getRankGrowth(abilityRuntimeData, "linear", 10)));
        abilityRuntimeData.modifier.maxStaminaMods = {mod: setup.mod.ADD, value: boost};
        abilityRuntimeData.modifier.maxHPMods = {mod: setup.mod.ADD, value: boost};
    },
)>>

<<set setup.Ability_VigorOfTheEndowed_2.setCategory(setup.AbilityCategory.WARRIOR)>>
<<set setup.Ability_VigorOfTheEndowed_2.setGrade(setup.AbilityGrade.HIGH)>>

::Ability_WarriorOfDuality <100,6475>
<<set setup.Ability_WarriorOfDuality = setup.AbilityDataFactory.createAbilityData({
    id:         "Ability_WarriorOfDuality",
    name:       "",
    description:function(character, abilityRuntimeData)
    {
        if(abilityRuntimeData == undefined)
        {
            return "501\n 501"; 
        }
        else
        {
            return "50"+setup.getRankGrowth(abilityRuntimeData, "linear", 1)+"\n 50"+setup.getRankGrowth(abilityRuntimeData, "linear", 1)+""; 
        }
    },
    maxRank: 5
})>>

<<run setup.Ability_WarriorOfDuality.addBehaviour(
    "start",
    setup.AbilityTrigger.ON_ACQUIRE,
    undefined,
)>>

<<run setup.Ability_WarriorOfDuality.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_LEVEL_UP,
    function(abilityRuntimeData, abilityParams)
    {   
        if(setup.getStatValue(abilityParams.self, "corruption") < 50)
        {
            setup.addToBaseStatValue(abilityParams.self, "hp", setup.getRankGrowth(abilityRuntimeData, "linear", 1))
        }
        else
        {
            setup.addToBaseStatValue(abilityParams.self, "arousalGain", setup.getRankGrowth(abilityRuntimeData, "linear", 1))
        }
    },
)>>

<<run setup.Ability_WarriorOfDuality.setUnlockableFromLevelScreen(true)>>

<<run setup.Ability_WarriorOfDuality.setUnlockCondition(
    function(character){
        return (State.variables.Level >= 3)
    }
)>>

<<set setup.Ability_WarriorOfDuality.setCategory(setup.AbilityCategory.WARRIOR)>>
<<set setup.Ability_WarriorOfDuality.setGrade(setup.AbilityGrade.LOW)>>

::Ability_WitheringVenom <225,6475>
<<set setup.Ability_WitheringVenom = setup.AbilityDataFactory.createAbilityData({
    id:         "Ability_WitheringVenom",
    name:       "", 
    description:function(character)
    {
        return "" + setup.getStatValue(character, "minArousal") + ""; 
    },
    maxRank: 999
})>>

<<run setup.Ability_WitheringVenom.addBehaviour(
    "start",
    setup.AbilityTrigger.ON_ACQUIRE,
    undefined,
)>>

<<run setup.Ability_WitheringVenom.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_ACQUIRE,
    function(abilityRuntimeData, abilityParams){
        abilityRuntimeData.modifier.maxHPMods = {mod: setup.mod.REMOVE, value: setup.getRankGrowth(abilityRuntimeData, "linear", 10)};
    }
)>>

<<run setup.Ability_WitheringVenom.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_MIN_LUST,
    function(abilityRuntimeData, abilityParams){
        abilityRuntimeData.modifier = setup.ModifierFactory.createModifier(
        {
            abilityIndex: abilityRuntimeData.abilityDataIndex
        });
    }
)>>

<<run setup.Ability_WitheringVenom.addBehaviour(
    "remove",
    setup.AbilityTrigger.ON_FIGHT_END,
    undefined,
)>>

<<run setup.Ability_WitheringVenom.setFilter(setup.AbilityFilter.STATUSEFFECT)>>

::Ability_LordOfCorruption <350,6475>
<<set setup.Ability_LordOfCorruption = setup.AbilityDataFactory.createAbilityData({
    id:         "Ability_LordOfCorruption",
    name:       "",
    description:function(character)
    {
        return "\n''''''''"; 
    },
    maxRank: 1
})>>

<<run setup.Ability_LordOfCorruption.addBehaviour(
    "start",
    setup.AbilityTrigger.ON_ACQUIRE,
    undefined
)>>

<<run setup.Ability_LordOfCorruption.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_GAIN_CORRUPTION + setup.AbilityTrigger.ON_DAY_CHANGE + setup.AbilityTrigger.ON_ACQUIRE,
    function(abilityRuntimeData, abilityParams)
    {  
        var corruption = setup.getStatValue(abilityParams.self, "corruption");
        if(corruption >= 2000)
        {
            abilityRuntimeData.isActive = true;
	        abilityRuntimeData.modifier.arousalGainMods = {mod: setup.mod.ADD, value: 20};
            abilityRuntimeData.modifier.growthMods = {mod: setup.mod.ADD, value: 2};
            abilityRuntimeData.modifier.corruptionPerDayMods = {mod: setup.mod.ADD, value: 1};
        }
        else
        {
            abilityRuntimeData.isActive = false;
            abilityRuntimeData.modifier = setup.ModifierFactory.createModifier(
            {
                abilityIndex: abilityRuntimeData.abilityDataIndex
            });
        }
    }
)>>

<<run setup.Ability_LordOfCorruption.setFilter(setup.AbilityFilter.ALTERATION)>>

::Ability_LostInCorruption <475,6475>
<<set setup.Ability_LostInCorruption = setup.AbilityDataFactory.createAbilityData({
    id:         "Ability_LostInCorruption",
    name:       "",
    description:function(character)
    {
        return "\n''''''''"; 
    },
    maxRank: 1
})>>

<<run setup.Ability_LostInCorruption.addBehaviour(
    "start",
    setup.AbilityTrigger.ON_ACQUIRE,
    undefined
)>>

<<run setup.Ability_LostInCorruption.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_GAIN_CORRUPTION + setup.AbilityTrigger.ON_DAY_CHANGE + setup.AbilityTrigger.ON_ACQUIRE,
    function(abilityRuntimeData, abilityParams)
    {  
        var corruption = setup.getStatValue(abilityParams.self, "corruption");
        if(corruption >= setup.CorruptionComparators.CORRUPT && corruption < 2000)
        {
            abilityRuntimeData.isActive = true;
	        abilityRuntimeData.modifier.arousalGainMods = {mod: setup.mod.ADD, value: 12};
	        abilityRuntimeData.modifier.maxStaminaMods = {mod: setup.mod.ADD, value: 12};
            abilityRuntimeData.modifier.growthMods = {mod: setup.mod.ADD, value: 1};
            abilityRuntimeData.modifier.corruptionPerDayMods = {mod: setup.mod.REMOVE, value: 1};
        }
        else
        {
            abilityRuntimeData.isActive = false;
            abilityRuntimeData.modifier = setup.ModifierFactory.createModifier(
            {
                abilityIndex: abilityRuntimeData.abilityDataIndex
            });
        }
    }
)>>

<<run setup.Ability_LostInCorruption.setFilter(setup.AbilityFilter.ALTERATION)>>

::Ability_MajorCorruption <600,6475>
<<set setup.Ability_MajorCorruption = setup.AbilityDataFactory.createAbilityData({
    id:         "Ability_MajorCorruption",
    name:       "",
    description:function(character)
    {
        return "\n ''''"; 
    },
    maxRank: 1
})>>

<<run setup.Ability_MajorCorruption.addBehaviour(
    "start",
    setup.AbilityTrigger.ON_ACQUIRE,
    undefined
)>>

<<run setup.Ability_MajorCorruption.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_GAIN_CORRUPTION + setup.AbilityTrigger.ON_DAY_CHANGE + setup.AbilityTrigger.ON_ACQUIRE,
    function(abilityRuntimeData, abilityParams)
    {  
        var corruption = setup.getStatValue(abilityParams.self, "corruption");
        if(corruption >= setup.CorruptionComparators.NEUTRAL && corruption < setup.CorruptionComparators.TAINTED)
        {
            abilityRuntimeData.isActive = true;
	        abilityRuntimeData.modifier.arousalGainMods = {mod: setup.mod.ADD, value: 5};
            abilityRuntimeData.modifier.growthMods = {mod: setup.mod.ADD, value: 0.5};
            abilityRuntimeData.modifier.corruptionPerDayMods = {mod: setup.mod.REMOVE, value: 2};
        }
        else
        {
            abilityRuntimeData.isActive = false;
            abilityRuntimeData.modifier = setup.ModifierFactory.createModifier(
            {
                abilityIndex: abilityRuntimeData.abilityDataIndex
            });
        }
    }
)>>

<<run setup.Ability_MajorCorruption.setFilter(setup.AbilityFilter.ALTERATION)>>

::Ability_MinorCorruption <725,6475>
<<set setup.Ability_MinorCorruption = setup.AbilityDataFactory.createAbilityData({
    id:         "Ability_MinorCorruption",
    name:       "",
    description:function(character)
    {
        return "\n ''"; 
    },
    maxRank: 1
})>>

<<run setup.Ability_MinorCorruption.addBehaviour(
    "start",
    setup.AbilityTrigger.ON_ACQUIRE,
    undefined
)>>

<<run setup.Ability_MinorCorruption.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_GAIN_CORRUPTION + setup.AbilityTrigger.ON_DAY_CHANGE + setup.AbilityTrigger.ON_ACQUIRE,
    function(abilityRuntimeData, abilityParams)
    {  
        var corruption = setup.getStatValue(abilityParams.self, "corruption");
        if(corruption >= setup.CorruptionComparators.PURE && corruption < setup.CorruptionComparators.NEUTRAL)
        {
            abilityRuntimeData.isActive = true;
	        abilityRuntimeData.modifier.arousalGainMods = {mod: setup.mod.ADD, value: 2};
            abilityRuntimeData.modifier.growthMods = {mod: setup.mod.ADD, value: 0.25};
            abilityRuntimeData.modifier.corruptionPerDayMods = {mod: setup.mod.REMOVE, value: 2.5};
        }
        else
        {
            abilityRuntimeData.isActive = false;
            abilityRuntimeData.modifier = setup.ModifierFactory.createModifier(
            {
                abilityIndex: abilityRuntimeData.abilityDataIndex
            });
        }
    }
)>>

<<run setup.Ability_MinorCorruption.setFilter(setup.AbilityFilter.ALTERATION)>>

::Ability_OverwhelmingCorruption <850,6475>
<<set setup.Ability_OverwhelmingCorruption = setup.AbilityDataFactory.createAbilityData({
    id:         "Ability_OverwhelmingCorruption",
    name:       "",
    description:function(character)
    {
        return "\n''''''"; 
    },
    maxRank: 1
})>>

<<run setup.Ability_OverwhelmingCorruption.addBehaviour(
    "start",
    setup.AbilityTrigger.ON_ACQUIRE,
    undefined
)>>

<<run setup.Ability_OverwhelmingCorruption.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_GAIN_CORRUPTION + setup.AbilityTrigger.ON_DAY_CHANGE + setup.AbilityTrigger.ON_ACQUIRE,
    function(abilityRuntimeData, abilityParams)
    {  
        var corruption = setup.getStatValue(abilityParams.self, "corruption");
        if(corruption >= setup.CorruptionComparators.TAINTED && corruption < setup.CorruptionComparators.CORRUPT)
        {
            abilityRuntimeData.isActive = true;
	        abilityRuntimeData.modifier.arousalGainMods = {mod: setup.mod.ADD, value: 7};
	        abilityRuntimeData.modifier.growthMods = {mod: setup.mod.ADD, value: 1};
            abilityRuntimeData.modifier.corruptionPerDayMods = {mod: setup.mod.REMOVE, value: 1.5};
        }
        else
        {
            abilityRuntimeData.isActive = false;
            abilityRuntimeData.modifier = setup.ModifierFactory.createModifier(
            {
                abilityIndex: abilityRuntimeData.abilityDataIndex
            });
        }
    }
)>>

<<run setup.Ability_OverwhelmingCorruption.setFilter(setup.AbilityFilter.ALTERATION)>>

::Ability_ProcessingCorruption <975,6475>
<<set setup.Ability_ProcessingCorruption = setup.AbilityDataFactory.createAbilityData({
    id:         "Ability_ProcessingCorruption",
    name:       "",
    description:function(character, abilityRuntimeData)
    {
        if(abilityRuntimeData != undefined)
        {
            let displayString = "\n";

            if(character.info.accumulatedCorruption > 0)
            {
                displayString += ""+character.info.accumulatedCorruption+"";
            }

            return displayString
        }
    },
    maxRank: 1
})>>

<<run setup.Ability_ProcessingCorruption.addBehaviour(
    "start",
    setup.AbilityTrigger.ON_ACQUIRE,
    undefined,
)>>

<<run setup.Ability_ProcessingCorruption.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_GAIN_CORRUPTION + setup.AbilityTrigger.ON_ACQUIRE,
    function(abilityRuntimeData, abilityParams)
    {  
        if(abilityParams.self.info.accumulatedCorruption + abilityParams.gainedCorruption > 0)
        {
            abilityRuntimeData.isActive = true;
            abilityParams.self.info.accumulatedCorruption += abilityParams.gainedCorruption;
        }
        else
        {
            abilityRuntimeData.isActive = false;
            abilityParams.self.info.accumulatedCorruption = 0;
        }
    }
)>>

<<run setup.Ability_ProcessingCorruption.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_DAY_CHANGE,
    function(abilityRuntimeData, abilityParams)
    {  
        if(abilityRuntimeData.isActive == true)
        {
            if(abilityParams.self.info.accumulatedCorruption <= 0)
            {
                abilityRuntimeData.isActive = false;
            }
        }
    }
)>>

<<run setup.Ability_ProcessingCorruption.setFilter(setup.AbilityFilter.ALTERATION)>>

::Ability_Uncorrupted <1100,6475>
<<set setup.Ability_Uncorrupted = setup.AbilityDataFactory.createAbilityData({
    id:         "Ability_Uncorrupted",
    name:       "",
    description:function(character)
    {
        return ""; 
    },
    maxRank: 1
})>>

<<run setup.Ability_Uncorrupted.addBehaviour(
    "start",
    setup.AbilityTrigger.ON_ACQUIRE,
    undefined
)>>

<<run setup.Ability_Uncorrupted.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_GAIN_CORRUPTION + setup.AbilityTrigger.ON_DAY_CHANGE + setup.AbilityTrigger.ON_ACQUIRE,
    function(abilityRuntimeData, abilityParams)
    {  
        var corruption = setup.getStatValue(abilityParams.self, "corruption");
        if(corruption < 25)
        {
            abilityRuntimeData.isActive = true;
            abilityRuntimeData.modifier.corruptionPerDayMods = {mod: setup.mod.REMOVE, value: 2.5};
        }
        else
        {
            abilityRuntimeData.isActive = false;
            abilityRuntimeData.modifier = setup.ModifierFactory.createModifier(
            {
                abilityIndex: abilityRuntimeData.abilityDataIndex
            });
        }
    }
)>>

<<run setup.Ability_Uncorrupted.setFilter(setup.AbilityFilter.ALTERATION)>>

::Achievement_BaptismInCorruption <1225,6475>
<<set setup.Achievement_BaptismInCorruption = setup.AbilityDataFactory.createAbilityData({
    id:         "Achievement_BaptismInCorruption",
    name:       "",
    description:function(character)
    {
        return ""; 
    },
    maxRank: 1
})>>

<<set setup.Achievement_BaptismInCorruption.isAchievement = true>>
<<set setup.Achievement_BaptismInCorruption.achievementInfo = "150">>

<<run setup.Achievement_BaptismInCorruption.addBehaviour(
    "start",
    setup.AbilityTrigger.ON_ACQUIRE,
    function(abilityRuntimeData, abilityParams)
    {
        abilityRuntimeData.isActive = false;
    }
)>>

<<run setup.Achievement_BaptismInCorruption.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_NEW_GAME_PLUS,
    function(abilityRuntimeData, abilityParams)
    {  
        if(abilityRuntimeData.achivemementState == setup.AchievementState.ACTIVATED)
        {
            abilityRuntimeData.isActive = true;
            abilityRuntimeData.modifier.arousalGainMods = {mod: setup.mod.ADD, value: 10};
            abilityRuntimeData.modifier.essenceMultiplierMods = {mod: setup.mod.ADD, value: 0.2};
        }
    }
)>>

::Achievement_CockRingOfTheBind <100,6600>
<<set setup.Achievement_CockRingOfTheBind = setup.AbilityDataFactory.createAbilityData({
    id:         "Achievement_CockRingOfTheBind",
    name:       "",
    description:function(character)
    {
        return ""; 
    },
    maxRank: 1
})>>

<<set setup.Achievement_CockRingOfTheBind.isAchievement = true>>
<<set setup.Achievement_CockRingOfTheBind.achievementInfo = "">>

<<run setup.Achievement_CockRingOfTheBind.addBehaviour(
    "start",
    setup.AbilityTrigger.ON_ACQUIRE,
    function(abilityRuntimeData, abilityParams)
    {
        abilityRuntimeData.isActive = false;
    }
)>>

<<run setup.Achievement_CockRingOfTheBind.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_NEW_GAME_PLUS,
    function(abilityRuntimeData, abilityParams)
    {  
        if(abilityRuntimeData.achivemementState == setup.AchievementState.ACTIVATED)
        {
            abilityRuntimeData.isActive = true;
            abilityRuntimeData.modifier.xpMultiplierMods = {mod: setup.mod.ADD, value: 0.2}
            abilityRuntimeData.modifier.essenceMultiplierMods = {mod: setup.mod.ADD, value: 0.2};
        }
    }
)>>

::Achievement_CollarOfTheBind <225,6600>
<<set setup.Achievement_CollarOfTheBind = setup.AbilityDataFactory.createAbilityData({
    id:         "Achievement_CollarOfTheBind",
    name:       "",
    description:function(character)
    {
        return ""; 
    },
    maxRank: 1
})>>

<<set setup.Achievement_CollarOfTheBind.isAchievement = true>>
<<set setup.Achievement_CollarOfTheBind.achievementInfo = "">>

<<run setup.Achievement_CollarOfTheBind.addBehaviour(
    "start",
    setup.AbilityTrigger.ON_ACQUIRE,
    function(abilityRuntimeData, abilityParams)
    {
        abilityRuntimeData.isActive = false;
    }
)>>

<<run setup.Achievement_CollarOfTheBind.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_NEW_GAME_PLUS,
    function(abilityRuntimeData, abilityParams)
    {  
        if(abilityRuntimeData.achivemementState == setup.AchievementState.ACTIVATED)
        {
            abilityRuntimeData.isActive = true;
            abilityRuntimeData.modifier.xpMultiplierMods = {mod: setup.mod.ADD, value: 0.2}
            abilityRuntimeData.modifier.essenceMultiplierMods = {mod: setup.mod.ADD, value: 0.2};
        }
    }
)>>

::Achievement_DamnatoryKnowledge <350,6600>
<<set setup.Achievement_DamnatoryKnowledge = setup.AbilityDataFactory.createAbilityData({
    id:         "Achievement_DamnatoryKnowledge",
    name:       "",
    description:function(character)
    {
        return ""; 
    },
    maxRank: 1
})>>

<<set setup.Achievement_DamnatoryKnowledge.isAchievement = true>>
<<set setup.Achievement_DamnatoryKnowledge.achievementInfo = "">>

<<run setup.Achievement_DamnatoryKnowledge.addBehaviour(
    "start",
    setup.AbilityTrigger.ON_ACQUIRE,
    function(abilityRuntimeData, abilityParams)
    {
        abilityRuntimeData.isActive = false;
    }
)>>

<<run setup.Achievement_DamnatoryKnowledge.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_NEW_GAME_PLUS,
    function(abilityRuntimeData, abilityParams)
    {  
        if(abilityRuntimeData.achivemementState == setup.AchievementState.ACTIVATED)
        {
            abilityRuntimeData.isActive = true;
            abilityRuntimeData.modifier.arousalGainMods = {mod: setup.mod.ADD, value: 5};
            abilityRuntimeData.modifier.essenceMultiplierMods = {mod: setup.mod.ADD, value: 0.2};
        }
    }
)>>

::Achievement_ExplorerOfCorruptedDepths <475,6600>
<<set setup.Achievement_ExplorerOfCorruptedDepths = setup.AbilityDataFactory.createAbilityData({
    id:         "Achievement_ExplorerOfCorruptedDepths",
    name:       "",
    description:function(character)
    {
        return ""; 
    },
    maxRank: 1
})>>

<<set setup.Achievement_ExplorerOfCorruptedDepths.isAchievement = true>>
<<set setup.Achievement_ExplorerOfCorruptedDepths.achievementInfo = "">>

<<run setup.Achievement_ExplorerOfCorruptedDepths.addBehaviour(
    "start",
    setup.AbilityTrigger.ON_ACQUIRE,
    function(abilityRuntimeData, abilityParams)
    {
        abilityRuntimeData.isActive = false;
    }
)>>

<<run setup.Achievement_ExplorerOfCorruptedDepths.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_NEW_GAME_PLUS,
    function(abilityRuntimeData, abilityParams)
    {  
        if(abilityRuntimeData.achivemementState == setup.AchievementState.ACTIVATED)
        {
            abilityRuntimeData.isActive = true;
            abilityRuntimeData.modifier.xpMultiplierMods = {mod: setup.mod.ADD, value: 0.2};
            abilityRuntimeData.modifier.essenceMultiplierMods = {mod: setup.mod.ADD, value: 0.2};
        }
    }
)>>

::Achievement_GodAmongstMen <600,6600>
<<set setup.Achievement_GodAmongstMen = setup.AbilityDataFactory.createAbilityData({
    id:         "Achievement_GodAmongstMen",
    name:       "",
    description:function(character)
    {
        return ""; 
    },
    maxRank: 1
})>>

<<set setup.Achievement_GodAmongstMen.isAchievement = true>>
<<set setup.Achievement_GodAmongstMen.achievementInfo = "50">>

<<run setup.Achievement_GodAmongstMen.addBehaviour(
    "start",
    setup.AbilityTrigger.ON_ACQUIRE,
    function(abilityRuntimeData, abilityParams)
    {
        abilityRuntimeData.isActive = false;
    }
)>>

<<run setup.Achievement_GodAmongstMen.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_LEVEL_UP + setup.AbilityTrigger.ON_ACQUIRE,
    function(abilityRuntimeData, abilityParams)
    {  
        if(abilityRuntimeData.achivemementState == setup.AchievementState.ACTIVATED)
        {
            return;
        }
        
        if(State.variables.Level >= 50)
        {
            setup.completeAchievement("Achievement_GodAmongstMen");
        }
    }
)>>

<<run setup.Achievement_GodAmongstMen.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_NEW_GAME_PLUS,
    function(abilityRuntimeData, abilityParams)
    {  
        if(abilityRuntimeData.achivemementState == setup.AchievementState.ACTIVATED)
        {
            abilityRuntimeData.isActive = true;
            abilityRuntimeData.modifier.xpMultiplierMods = {mod: setup.mod.ADD, value: 0.8}
            abilityRuntimeData.modifier.essenceMultiplierMods = {mod: setup.mod.ADD, value: 0.8};
        }
    }
)>>

::Achievement_HostOfTheSpawns <725,6600>
<<set setup.Achievement_HostOfTheSpawns = setup.AbilityDataFactory.createAbilityData({
    id:         "Achievement_HostOfTheSpawns",
    name:       "",
    description:function(character)
    {
        return "";
    },
    maxRank: 1
})>>

<<set setup.Achievement_HostOfTheSpawns.isAchievement = true>>
<<set setup.Achievement_HostOfTheSpawns.achievementInfo = "5">>

<<run setup.Achievement_HostOfTheSpawns.addBehaviour(
    "start",
    setup.AbilityTrigger.ON_ACQUIRE,
    function(abilityRuntimeData, abilityParams)
    {
        abilityRuntimeData.isActive = false;
    }
)>>

<<run setup.Achievement_HostOfTheSpawns.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_NEW_GAME_PLUS,
    function(abilityRuntimeData, abilityParams)
    {  
        if(abilityRuntimeData.achivemementState == setup.AchievementState.ACTIVATED)
        {
            abilityRuntimeData.isActive = true;
            abilityRuntimeData.modifier.arousalGainMods = {mod: setup.mod.ADD, value: 10};
            abilityRuntimeData.modifier.minArousalMods = {mod: setup.mod.ADD, value: 5};
            abilityRuntimeData.modifier.essenceMultiplierMods = {mod: setup.mod.ADD, value: 0.2};
        }
    }
)>>

::Achievement_IncompleteMemories <850,6600>
<<set setup.Achievement_IncompleteMemories = setup.AbilityDataFactory.createAbilityData({
    id:         "Achievement_IncompleteMemories",
    name:       "",
    description:function(character)
    {
        return ""; 
    },
    maxRank: 1
})>>

<<set setup.Achievement_IncompleteMemories.isAchievement = true>>
<<set setup.Achievement_IncompleteMemories.achievementInfo = "">>

<<run setup.Achievement_IncompleteMemories.addBehaviour(
    "start",
    setup.AbilityTrigger.ON_ACQUIRE,
    function(abilityRuntimeData, abilityParams)
    {
        abilityRuntimeData.isActive = false;
    }
)>>

<<run setup.Achievement_IncompleteMemories.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_NEW_GAME_PLUS,
    function(abilityRuntimeData, abilityParams)
    {  
        if(abilityRuntimeData.achivemementState == setup.AchievementState.ACTIVATED)
        {
            abilityRuntimeData.isActive = true;
            abilityRuntimeData.modifier.xpMultiplierMods = {mod: setup.mod.ADD, value: 0.2}
            abilityRuntimeData.modifier.essenceMultiplierMods = {mod: setup.mod.ADD, value: 0.2};
            abilityRuntimeData.modifier.fightMoveIDsMods = {mod: setup.mod.ADD, value: [setup.FightMove_HeraldsDevotion.id]};
        }
    }
)>>

::Achievement_LordOfTheSpawns <975,6600>
<<set setup.Achievement_LordOfTheSpawns = setup.AbilityDataFactory.createAbilityData({
    id:         "Achievement_LordOfTheSpawns",
    name:       "",
    description:function(character)
    {
        return "";
    },
    maxRank: 1
})>>

<<set setup.Achievement_LordOfTheSpawns.isAchievement = true>>
<<set setup.Achievement_LordOfTheSpawns.achievementInfo = "15">>

<<run setup.Achievement_LordOfTheSpawns.addBehaviour(
    "start",
    setup.AbilityTrigger.ON_ACQUIRE,
    function(abilityRuntimeData, abilityParams)
    {
        abilityRuntimeData.isActive = false;
    }
)>>

<<run setup.Achievement_LordOfTheSpawns.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_NEW_GAME_PLUS,
    function(abilityRuntimeData, abilityParams)
    {  
        if(abilityRuntimeData.achivemementState == setup.AchievementState.ACTIVATED)
        {
            abilityRuntimeData.isActive = true;
            abilityRuntimeData.modifier.arousalGainMods = {mod: setup.mod.ADD, value: 20};
            abilityRuntimeData.modifier.minArousalMods = {mod: setup.mod.ADD, value: 10};
            abilityRuntimeData.modifier.essenceMultiplierMods = {mod: setup.mod.ADD, value: 0.2};
            abilityRuntimeData.modifier.xpMultiplierMods = {mod: setup.mod.ADD, value: 0.2}
        }
    }
)>>

::Achievement_MasterOfTheBarrens <1100,6600>
<<set setup.Achievement_MasterOfTheBarrens = setup.AbilityDataFactory.createAbilityData({
    id:         "Achievement_MasterOfTheBarrens",
    name:       "",
    description:function(character)
    {
        return ""; 
    },
    maxRank: 1
})>>

<<set setup.Achievement_MasterOfTheBarrens.isAchievement = true>>
<<set setup.Achievement_MasterOfTheBarrens.achievementInfo = "100">>

<<run setup.Achievement_MasterOfTheBarrens.addBehaviour(
    "start",
    setup.AbilityTrigger.ON_ACQUIRE,
    function(abilityRuntimeData, abilityParams)
    {
        abilityRuntimeData.isActive = false;
    }
)>>

<<run setup.Achievement_MasterOfTheBarrens.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_DAY_CHANGE + setup.AbilityTrigger.ON_ACQUIRE,
    function(abilityRuntimeData, abilityParams)
    {  
        if(abilityRuntimeData.achivemementState == setup.AchievementState.ACTIVATED)
        {
            return;
        }
        
        if(State.variables.Expedition >= 100)
        {
            setup.completeAchievement("Achievement_MasterOfTheBarrens");
        }
    }
)>>

<<run setup.Achievement_MasterOfTheBarrens.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_NEW_GAME_PLUS,
    function(abilityRuntimeData, abilityParams)
    {  
        if(abilityRuntimeData.achivemementState == setup.AchievementState.ACTIVATED)
        {
            abilityRuntimeData.isActive = true;
            abilityRuntimeData.modifier.maxStaminaMods = {mod: setup.mod.ADD, value: 10}
            abilityRuntimeData.modifier.xpMultiplierMods = {mod: setup.mod.ADD, value: 0.2}
        }
    }
)>>

::Achievement_MemoriesOfDemonicAscent <1225,6600>
<<set setup.Achievement_MemoriesOfDemonicAscent = setup.AbilityDataFactory.createAbilityData({
    id:         "Achievement_MemoriesOfDemonicAscent",
    name:       "",
    description:function(character)
    {
        return ""; 
    },
    maxRank: 1
})>>

<<set setup.Achievement_MemoriesOfDemonicAscent.isAchievement = true>>
<<set setup.Achievement_MemoriesOfDemonicAscent.achievementInfo = "">>

<<run setup.Achievement_MemoriesOfDemonicAscent.addBehaviour(
    "start",
    setup.AbilityTrigger.ON_ACQUIRE,
    function(abilityRuntimeData, abilityParams)
    {
        abilityRuntimeData.isActive = false;
    }
)>>

<<run setup.Achievement_MemoriesOfDemonicAscent.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_NEW_GAME_PLUS,
    function(abilityRuntimeData, abilityParams)
    {  
        if(abilityRuntimeData.achivemementState == setup.AchievementState.ACTIVATED)
        {
            abilityRuntimeData.isActive = true;
            abilityRuntimeData.modifier.maxHPMods = {mod: setup.mod.ADD, value: 15};
            abilityRuntimeData.modifier.xpMultiplierMods = {mod: setup.mod.ADD, value: 0.5}
            abilityRuntimeData.modifier.essenceMultiplierMods = {mod: setup.mod.ADD, value: 0.2};
        }
    }
)>>

::Achievement_MemoriesOfKanathar <100,6725>
<<set setup.Achievement_MemoriesOfKanathar = setup.AbilityDataFactory.createAbilityData({
    id:         "Achievement_MemoriesOfKanathar",
    name:       "",
    description:function(character)
    {
        return ""; 
    },
    maxRank: 1
})>>

<<set setup.Achievement_MemoriesOfKanathar.isAchievement = true>>
<<set setup.Achievement_MemoriesOfKanathar.achievementInfo = "">>

<<run setup.Achievement_MemoriesOfKanathar.addBehaviour(
    "start",
    setup.AbilityTrigger.ON_ACQUIRE,
    function(abilityRuntimeData, abilityParams)
    {
        abilityRuntimeData.isActive = false;
    }
)>>

<<run setup.Achievement_MemoriesOfKanathar.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_NEW_GAME_PLUS,
    function(abilityRuntimeData, abilityParams)
    {  
        if(abilityRuntimeData.achivemementState == setup.AchievementState.ACTIVATED)
        {
            abilityRuntimeData.isActive = true;
            abilityRuntimeData.modifier.maxHPMods = {mod: setup.mod.ADD, value: 15};
            abilityRuntimeData.modifier.xpMultiplierMods = {mod: setup.mod.ADD, value: 0.5}
            abilityRuntimeData.modifier.essenceMultiplierMods = {mod: setup.mod.ADD, value: 0.2};
        }
    }
)>>

::Achievement_MemoriesOfTheLost <225,6725>
<<set setup.Achievement_MemoriesOfTheLost = setup.AbilityDataFactory.createAbilityData({
    id:         "Achievement_MemoriesOfTheLost",
    name:       "",
    description:function(character)
    {
        return ""; 
    },
    maxRank: 1
})>>

<<set setup.Achievement_MemoriesOfTheLost.isAchievement = true>>
<<set setup.Achievement_MemoriesOfTheLost.achievementInfo = "">>

<<run setup.Achievement_MemoriesOfTheLost.addBehaviour(
    "start",
    setup.AbilityTrigger.ON_ACQUIRE,
    function(abilityRuntimeData, abilityParams)
    {
        abilityRuntimeData.isActive = false;
    }
)>>

<<run setup.Achievement_MemoriesOfTheLost.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_NEW_GAME_PLUS,
    function(abilityRuntimeData, abilityParams)
    {  
        if(abilityRuntimeData.achivemementState == setup.AchievementState.ACTIVATED)
        {
            abilityRuntimeData.isActive = true;
            abilityRuntimeData.modifier.arousalGainMods = {mod: setup.mod.ADD, value: 10};
            abilityRuntimeData.modifier.xpMultiplierMods = {mod: setup.mod.ADD, value: 0.2}
            abilityRuntimeData.modifier.essenceMultiplierMods = {mod: setup.mod.ADD, value: 0.2};
        }
    }
)>>

::Achievement_MemoriesOfTheMinotaur <350,6725>
<<set setup.Achievement_MemoriesOfTheMinotaur = setup.AbilityDataFactory.createAbilityData({
    id:         "Achievement_MemoriesOfTheMinotaur",
    name:       "",
    description:function(character)
    {
        return "Tiadane"; 
    },
    maxRank: 1
})>>

<<set setup.Achievement_MemoriesOfTheMinotaur.isAchievement = true>>
<<set setup.Achievement_MemoriesOfTheMinotaur.achievementInfo = "">>

<<run setup.Achievement_MemoriesOfTheMinotaur.addBehaviour(
    "start",
    setup.AbilityTrigger.ON_ACQUIRE,
    function(abilityRuntimeData, abilityParams)
    {
        abilityRuntimeData.isActive = false;
    }
)>>

<<run setup.Achievement_MemoriesOfTheMinotaur.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_NEW_GAME_PLUS,
    function(abilityRuntimeData, abilityParams)
    {  
        if(abilityRuntimeData.achivemementState == setup.AchievementState.ACTIVATED)
        {
            abilityRuntimeData.isActive = true;
            abilityRuntimeData.modifier.maxHPMods = {mod: setup.mod.ADD, value: 15};
            abilityRuntimeData.modifier.xpMultiplierMods = {mod: setup.mod.ADD, value: 0.5}
            abilityRuntimeData.modifier.essenceMultiplierMods = {mod: setup.mod.ADD, value: 0.2};
        }
    }
)>>

::Achievement_MightOfAugwult <475,6725>
<<set setup.Achievement_MightOfAugwult = setup.AbilityDataFactory.createAbilityData({
    id:         "Achievement_MightOfAugwult",
    name:       "",
    description:function(character)
    {
        return ""; 
    },
    maxRank: 1
})>>

<<set setup.Achievement_MightOfAugwult.isAchievement = true>>
<<set setup.Achievement_MightOfAugwult.achievementInfo = "200">>

<<run setup.Achievement_MightOfAugwult.addBehaviour(
    "start",
    setup.AbilityTrigger.ON_ACQUIRE,
    function(abilityRuntimeData, abilityParams)
    {
        abilityRuntimeData.isActive = false;
    }
)>>

<<run setup.Achievement_MightOfAugwult.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_STAT_CHANGE,
    function(abilityRuntimeData, abilityParams)
    {  
        if(abilityRuntimeData.achivemementState == setup.AchievementState.ACTIVATED)
        {
            return;
        }

        if(setup.getStatValue(State.variables.CharacterSheet_Player, "strength") >= 200)
        {
            setup.completeAchievement("Achievement_MightOfAugwult");
        }
    }
)>>

<<run setup.Achievement_MightOfAugwult.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_NEW_GAME_PLUS,
    function(abilityRuntimeData, abilityParams)
    {  
        if(abilityRuntimeData.achivemementState == setup.AchievementState.ACTIVATED)
        {
            abilityRuntimeData.isActive = true;
            abilityRuntimeData.modifier.strengthMods = {mod: setup.mod.ADD, value: 30};
            abilityRuntimeData.modifier.xpMultiplierMods = {mod: setup.mod.ADD, value: 0.2}
        }
    }
)>>

::Achievement_OffTheDeepEnd <600,6725>
<<set setup.Achievement_OffTheDeepEnd = setup.AbilityDataFactory.createAbilityData({
    id:         "Achievement_OffTheDeepEnd",
    name:       "",
    description:function(character)
    {
        return " <br>"; 
    },
    maxRank: 1
})>>

<<set setup.Achievement_OffTheDeepEnd.isAchievement = true>>
<<set setup.Achievement_OffTheDeepEnd.achievementInfo = "200">>

<<run setup.Achievement_OffTheDeepEnd.addBehaviour(
    "start",
    setup.AbilityTrigger.ON_ACQUIRE,
    function(abilityRuntimeData, abilityParams)
    {
        abilityRuntimeData.isActive = false;
    }
)>>

<<run setup.Achievement_OffTheDeepEnd.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_GAIN_CORRUPTION + setup.AbilityTrigger.ON_DAY_CHANGE + setup.AbilityTrigger.ON_ACQUIRE,
    function(abilityRuntimeData, abilityParams)
    {  
        if(abilityRuntimeData.achivemementState == setup.AchievementState.ACTIVATED)
        {
            return;
        }

        if(abilityParams.self.id != "CharacterSheet_Player")
        {
            return;
        }

        var corruption = setup.getStatValue(abilityParams.self, "corruption");
        if(corruption >= 200)
        {
            setup.completeAchievement("Achievement_OffTheDeepEnd");
        }
    }
)>>

<<run setup.Achievement_OffTheDeepEnd.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_NEW_GAME_PLUS,
    function(abilityRuntimeData, abilityParams)
    {  
        if(abilityRuntimeData.achivemementState == setup.AchievementState.ACTIVATED)
        {
            abilityRuntimeData.isActive = true;
            abilityRuntimeData.modifier.arousalGainMods = {mod: setup.mod.ADD, value: 5};
            abilityRuntimeData.modifier.essenceMultiplierMods = {mod: setup.mod.ADD, value: 0.2};
        }
    }
)>>

::Achievement_Redemption <725,6725>
<<set setup.Achievement_Redemption = setup.AbilityDataFactory.createAbilityData({
    id:         "Achievement_Redemption",
    name:       "",
    description:function(character)
    {
        return ""; 
    },
    maxRank: 1
})>>

<<set setup.Achievement_Redemption.isAchievement = true>>
<<set setup.Achievement_Redemption.achievementInfo = "">>

<<run setup.Achievement_Redemption.addBehaviour(
    "start",
    setup.AbilityTrigger.ON_ACQUIRE,
    function(abilityRuntimeData, abilityParams)
    {
        abilityRuntimeData.isActive = false;
    }
)>>

<<run setup.Achievement_Redemption.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_NEW_GAME_PLUS,
    function(abilityRuntimeData, abilityParams)
    {  
        if(abilityRuntimeData.achivemementState == setup.AchievementState.ACTIVATED)
        {
            abilityRuntimeData.isActive = true;
            abilityRuntimeData.modifier.xpMultiplierMods = {mod: setup.mod.ADD, value: 0.2}
            abilityRuntimeData.modifier.essenceMultiplierMods = {mod: setup.mod.ADD, value: 0.2};
            abilityRuntimeData.modifier.fightMoveIDsMods = {mod: setup.mod.ADD, value: [setup.FightMove_TonicOfStillness.id]}
        }
    }
)>>

::Achievement_Resolute <850,6725>
<<set setup.Achievement_Resolute = setup.AbilityDataFactory.createAbilityData({
    id:         "Achievement_Resolute",
    name:       "",
    description:function(character)
    {
        return ""; 
    },
    maxRank: 1
})>>

<<set setup.Achievement_Resolute.isAchievement = true>>
<<set setup.Achievement_Resolute.achievementInfo = "10100">>

<<run setup.Achievement_Resolute.addBehaviour(
    "start",
    setup.AbilityTrigger.ON_ACQUIRE,
    function(abilityRuntimeData, abilityParams)
    {
        abilityRuntimeData.isActive = false;
        abilityRuntimeData.blackboard = {}
    }
)>>

<<run setup.Achievement_Resolute.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_ACQUIRE,
    function(abilityRuntimeData, abilityParams)
    {
        abilityRuntimeData.blackboard.purity = true;
    }
)>>

<<run setup.Achievement_Resolute.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_LEVEL_UP,
    function(abilityRuntimeData, abilityParams)
    {  
        if(abilityRuntimeData.achivemementState == setup.AchievementState.ACTIVATED)
        {
            return;
        }

        if(abilityRuntimeData.blackboard.purity == true && State.variables.Level >= 10)
        {
            setup.completeAchievement("Achievement_Resolute");
        }
    }
)>>

<<run setup.Achievement_Resolute.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_GAIN_CORRUPTION + setup.AbilityTrigger.ON_DAY_CHANGE,
    function(abilityRuntimeData, abilityParams)
    {  
        if(abilityRuntimeData.achivemementState == setup.AchievementState.ACTIVATED)
        {
            return;
        }

        if(abilityRuntimeData.blackboard.purity == true)
        {
            if(setup.getStatValue(State.variables.CharacterSheet_Player, "corruption") >= 100)
            {
                abilityRuntimeData.blackboard.purity = false;
            }
        }
    }
)>>

<<run setup.Achievement_Resolute.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_NEW_GAME_PLUS,
    function(abilityRuntimeData, abilityParams)
    {  
        if(abilityRuntimeData.achivemementState == setup.AchievementState.ACTIVATED)
        {
            abilityRuntimeData.isActive = true;
            abilityRuntimeData.modifier.xpMultiplierMods = {mod: setup.mod.ADD, value: 0.3}
        }
    }
)>>

::Achievement_SafePassage <975,6725>
<<set setup.Achievement_SafePassage = setup.AbilityDataFactory.createAbilityData({
    id:         "Achievement_SafePassage",
    name:       "",
    description:function(character)
    {
        return ""; 
    },
    maxRank: 1
})>>

<<set setup.Achievement_SafePassage.isAchievement = true>>
<<set setup.Achievement_SafePassage.achievementInfo = "">>

<<run setup.Achievement_SafePassage.addBehaviour(
    "start",
    setup.AbilityTrigger.ON_ACQUIRE,
    function(abilityRuntimeData, abilityParams)
    {
        abilityRuntimeData.isActive = false;
    }
)>>

<<run setup.Achievement_SafePassage.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_NEW_GAME_PLUS,
    function(abilityRuntimeData, abilityParams)
    {  
        if(abilityRuntimeData.achivemementState == setup.AchievementState.ACTIVATED)
        {
            abilityRuntimeData.isActive = true;
            abilityRuntimeData.modifier.strengthMods = {mod: setup.mod.ADD, value: 10};
            abilityRuntimeData.modifier.xpMultiplierMods = {mod: setup.mod.ADD, value: 0.3};
        }
    }
)>>

::Achievement_ShiftingIdeals <1100,6725>
<<set setup.Achievement_ShiftingIdeals = setup.AbilityDataFactory.createAbilityData({
    id:         "Achievement_ShiftingIdeals",
    name:       "",
    description:function(character)
    {
        return ""; 
    },
    maxRank: 1
})>>

<<set setup.Achievement_ShiftingIdeals.isAchievement = true>>
<<set setup.Achievement_ShiftingIdeals.achievementInfo = "">>

<<run setup.Achievement_ShiftingIdeals.addBehaviour(
    "start",
    setup.AbilityTrigger.ON_ACQUIRE,
    function(abilityRuntimeData, abilityParams)
    {
        abilityRuntimeData.isActive = false;
        abilityRuntimeData.blackboard = {};
    }
)>>

<<run setup.Achievement_ShiftingIdeals.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_FIGHT_END,
    function(abilityRuntimeData, abilityParams)
    {  
        if(abilityRuntimeData.achivemementState != setup.AchievementState.ACTIVATED && abilityParams.target.id == "CharacterSheet_Doppleganger")
        {
            if(setup.MQ002_Manor_IsCorruptedInManor(State.variables.CharacterSheet_Player))
            {
                abilityRuntimeData.blackboard.foughtPure = true;
            }
            else
            {
                abilityRuntimeData.blackboard.foughtCorrupted = true;
            }

            if(abilityRuntimeData.blackboard.foughtPure == true && abilityRuntimeData.blackboard.foughtCorrupted == true)
            {
                setup.completeAchievement("Achievement_ShiftingIdeals");
            }
        }
    }
)>>

<<run setup.Achievement_ShiftingIdeals.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_NEW_GAME_PLUS,
    function(abilityRuntimeData, abilityParams)
    {  
        if(abilityRuntimeData.achivemementState == setup.AchievementState.ACTIVATED)
        {
            abilityRuntimeData.isActive = true;
            abilityRuntimeData.modifier.xpMultiplierMods = {mod: setup.mod.ADD, value: 0.2};
            abilityRuntimeData.modifier.essenceMultiplierMods = {mod: setup.mod.ADD, value: 0.2};
        }
    }
)>>

::Achievement_SubmissiveFighter <1225,6725>
<<set setup.Achievement_SubmissiveFighter = setup.AbilityDataFactory.createAbilityData({
    id:         "Achievement_SubmissiveFighter",
    name:       "",
    description:function(character)
    {
        return ""; 
    },
    maxRank: 1
})>>

<<set setup.Achievement_SubmissiveFighter.isAchievement = true>>
<<set setup.Achievement_SubmissiveFighter.achievementInfo = "5">>

<<run setup.Achievement_SubmissiveFighter.addBehaviour(
    "start",
    setup.AbilityTrigger.ON_ACQUIRE,
    function(abilityRuntimeData, abilityParams)
    {
        abilityRuntimeData.isActive = false;
        abilityRuntimeData.blackboard = {};
    }
)>>

<<run setup.Achievement_SubmissiveFighter.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_ACQUIRE,
    function(abilityRuntimeData, abilityParams)
    {
        abilityRuntimeData.blackboard.lostEncounters = [];
    }
)>>

<<run setup.Achievement_SubmissiveFighter.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_FIGHT_BATTLE_LOST,
    function(abilityRuntimeData, abilityParams)
    {  
        if(abilityRuntimeData.achivemementState == setup.AchievementState.ACTIVATED)
        {
            return;
        }

        let isUnique = true;
        for(let i = 0; i < abilityRuntimeData.blackboard.lostEncounters.length; i++)
        {
            if(abilityRuntimeData.blackboard.lostEncounters[i] == abilityParams.target.id)
            {
                isUnique = false;
                break;
            }
        }

        if(isUnique == true)
        {
            abilityRuntimeData.blackboard.lostEncounters.push(abilityParams.target.id);
        }

        if(abilityRuntimeData.blackboard.lostEncounters.length >= 5)
        {
            setup.completeAchievement("Achievement_SubmissiveFighter");
        }
    }
)>>

<<run setup.Achievement_SubmissiveFighter.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_NEW_GAME_PLUS,
    function(abilityRuntimeData, abilityParams)
    {  
        if(abilityRuntimeData.achivemementState == setup.AchievementState.ACTIVATED)
        {
            abilityRuntimeData.isActive = true;
            abilityRuntimeData.modifier.arousalGainMods = {mod: setup.mod.ADD, value: 5};
            abilityRuntimeData.modifier.xpMultiplierMods = {mod: setup.mod.ADD, value: 0.2}
        }
    }
)>>

::Achievement_WordOfPower <100,6850>
<<set setup.Achievement_WordOfPower = setup.AbilityDataFactory.createAbilityData({
    id:         "Achievement_WordOfPower",
    name:       "",
    description:function(character)
    {
        return ""; 
    },
    maxRank: 1
})>>

<<set setup.Achievement_WordOfPower.isAchievement = true>>
<<set setup.Achievement_WordOfPower.achievementInfo = "">>

<<run setup.Achievement_WordOfPower.addBehaviour(
    "start",
    setup.AbilityTrigger.ON_ACQUIRE,
    function(abilityRuntimeData, abilityParams)
    {
        abilityRuntimeData.isActive = false;
    }
)>>

<<run setup.Achievement_WordOfPower.addBehaviour(
    "update",
    setup.AbilityTrigger.ON_NEW_GAME_PLUS,
    function(abilityRuntimeData, abilityParams)
    {  
        if(abilityRuntimeData.achivemementState == setup.AchievementState.ACTIVATED)
        {
            abilityRuntimeData.isActive = true;
            abilityRuntimeData.modifier.strengthMods = {mod: setup.mod.ADD, value: 10};
            abilityRuntimeData.modifier.xpMultiplierMods = {mod: setup.mod.ADD, value: 0.3};
        }
    }
)>>

::FightLogic [Fight] <331,1843>
\<<nobr>>

/*Initialization*/
<<if !$Encounter_Target.fight.variables.currentHP>>
  <<run setup.stopAllRealizationPackages()>>
  <<run setup.stopSoundActions();>>
	<<run setup.variableInitializer.initializeFightVariables($Encounter_Target)>>
  <<print $Encounter_Target.fight.encounterStartText >>

  <<run setup.aiFightStart()>>
  <<run setup.broadcastFightFlowTrigger($CharacterSheet_Player, $Encounter_Target, setup.AbilityTrigger.ON_FIGHT_START)>>
<</if>>

<<set $RedrawCount = 0>>
<<set $AddSlotCount = 0>>
<<set $CharacterSheet_Player.fight.variables.currentStamina = setup.getStatValue($CharacterSheet_Player, "stamina")>>
<<run setup.preAttacksUpdate($CharacterSheet_Player, $Encounter_Target)>>

/*Attack Handling*/ 
<<if $Encounter_Target.fight.variables.currentFightMove && $CharacterSheet_Player.fight.variables.currentFightMove>> 

<<if setup.canTeammateAct($CharacterSheet_Player, $Encounter_Target, setup.AttackTiming.BEFORE_PLAYER) == true>>
<<run setup.doAttack(State.variables[$CharacterSheet_Player.fight.teammate], $Encounter_Target) >>
<</if>>

<<if $FightComboStackIndexes.length != 0>>
<<run setup.doComboAttack($CharacterSheet_Player, $Encounter_Target) >>
<<else>>
<<run setup.doAttack($CharacterSheet_Player, $Encounter_Target) >>
<</if>>

<<if setup.canTeammateAct($CharacterSheet_Player, $Encounter_Target, setup.AttackTiming.BETWEEN_PLAYER_AND_ENEMY) == true>>
<<run setup.doAttack(State.variables[$CharacterSheet_Player.fight.teammate], $Encounter_Target) >>
<</if>>

<<run setup.doAttack($Encounter_Target, $CharacterSheet_Player) >>

<<if setup.canTeammateAct($CharacterSheet_Player, $Encounter_Target, setup.AttackTiming.AFTER_ENEMY) == true>>
<<run setup.doAttack(State.variables[$CharacterSheet_Player.fight.teammate], $Encounter_Target) >>
<</if>>

<</if>>

/*Check Max Arousal*/
<<print setup.updateArousal($CharacterSheet_Player) >>
<<if $CharacterSheet_Player.fight.teammate != undefined>>
<<print setup.updateArousal(State.variables[$CharacterSheet_Player.fight.teammate]) >>
<</if>>
<<print setup.updateArousal($Encounter_Target) >>
\<</nobr>>
\<<run setup.postAttacksAIUpdate($Encounter_Target)>>
\
\/*Display*/
\<<nobr>>

<<if setup.canTeammateAct($CharacterSheet_Player, $Encounter_Target, setup.AttackTiming.BEFORE_PLAYER) == true>>
<<print setup.displayFightTurnOutcome(State.variables[$CharacterSheet_Player.fight.teammate], $Encounter_Target) >>
<</if>>

<<print setup.displayFightTurnOutcome($CharacterSheet_Player, $Encounter_Target) >>

<<if setup.canTeammateAct($CharacterSheet_Player, $Encounter_Target, setup.AttackTiming.BETWEEN_PLAYER_AND_ENEMY) == true>>
<<print setup.displayFightTurnOutcome(State.variables[$CharacterSheet_Player.fight.teammate], $Encounter_Target) >>
<</if>>

<<print setup.displayFightTurnOutcome($Encounter_Target, $CharacterSheet_Player) >>

<<if setup.canTeammateAct($CharacterSheet_Player, $Encounter_Target, setup.AttackTiming.AFTER_ENEMY) == true>>
<<print setup.displayFightTurnOutcome(State.variables[$CharacterSheet_Player.fight.teammate], $Encounter_Target) >>
<</if>>

\<</nobr>>
\<<print setup.updateFightStatus($CharacterSheet_Player, $Encounter_Target) >>

::Fight Outcome <504,1844>
\<<if setup.hasLostFight($Encounter_Target)>>
  \<<print setup.onFightEnd($CharacterSheet_Player, $Encounter_Target)>>
	\<<print $Encounter_Target.fight.outcomePlayerWins>>
\<<elseif setup.hasLostFight($CharacterSheet_Player)>>
  \<<print setup.onFightEnd($Encounter_Target, $CharacterSheet_Player)>>
	\<<print $Encounter_Target.fight.outcomePlayerLoses>>
\<</if>>

<<nobr>>
/*Unset Fight Variables*/
<<set $FightTurn = 0>>
<<unset $RedrawCount>>
<<unset $AddSlotCount>>
<<run setup.broadcastFightFlowTrigger($CharacterSheet_Player, $Encounter_Target, setup.AbilityTrigger.ON_FIGHT_END)>>
<<run setup.saveFightAttributes($Encounter_Target)>>
<<unset $Display_Player_FightMoveOutcome,
	$Encounter_Target,
	$HasSymbiote>>

<<if $CachedTeammate != undefined>>
<<set $CharacterSheet_Player.fight.teammate = $CachedTeammate>>
<<unset $CachedTeammate>>
<</if>>

<<if $CharacterSheet_Player.fight.teammate != undefined>>
  <<set State.variables[$CharacterSheet_Player.fight.teammate].fight.variables = $FightVariables>>
<</if>>
<<set $CharacterSheet_Player.fight.variables = $FightVariables>>
		
<</nobr>>

::FightMove_AbsorbEssence <475,6850>
<<set setup.FightMove_AbsorbEssence =
{
	id: "FightMove_AbsorbEssence",
	name: "",
	preparation: function(character, target)
	{
		return character.info.name + ""
	},
	attackAttemptDesc: function(character, target)
	{
        return ""+character.info.name+"";
	},
	attackHitDesc: function(character, target)
	{
		return "";
	},
	activationCondition: function(character, target)
	{
		return character.fight.variables.currentStamina >= this.staminaCost;
	},
	dmg: function(character, target)
	{
		let damageParam = 
		{
			multiplier: 0,
			addon: 0,
		}

		return damageParam;
	},
	staminaCost: 0,
	critMod: 0,
    comboCost: 1,
	skillStatsToDescriptionSpacing: 2,
	skillDescription: "",
	skillType: "buff",
	skillTheme: "buff",
	additionalEffects: [setup.absorbEssenceEffects]
}>>

::FightMove_Bash <600,6850>
<<set setup.FightMove_Bash =
{
	id: "FightMove_Bash",
	name: "",
	preparation: function(character, target)
	{
		var flavourtext = setup.getFlavourBasedDescription(character, 'basicAttackPrepFlavour', 1)
		if(flavourtext != undefined)
		{
			return character.info.name + " " + flavourtext
		}
		else
		{
			return character.info.name + ""
		}
	},
	attackAttemptDesc: function(character, target)
	{
		var flavourtext = setup.getFlavourBasedDescription(character, 'bashAttackAttemptFlavour', 1)
		return flavourtext
	},
	activationCondition: function(character, target)
	{
		return true;
	},
	dmg: function(character, target)
	{
		let damageParam = 
		{
			multiplier: 1,
			addon: 4,
		}

		return damageParam;
	},
	staminaCost: 0,
	critMod: 20,
    comboCost: 2,
    skillStatsToDescriptionSpacing: 2,
	skillDescription: "",
	skillType: "offensive",
	skillTheme: "offensive",
	additionalEffects: []
}>>

::FightMove_BasicAttack <725,6850>
<<set setup.FightMove_Basic_Attack =
{
	id: "FightMove_Basic_Attack",
	name: "",
	preparation: function(character, target)
	{
		var flavourtext = setup.getFlavourBasedDescription(character, 'basicAttackPrepFlavour', 1)
		if(flavourtext != undefined)
		{
			return character.info.name + " " + flavourtext
		}
		else
		{
			return character.info.name + ""
		}
	},
	attackAttemptDesc: function(character, target)
	{
		var flavourtext = setup.getFlavourBasedDescription(character, 'basicAttackAttemptFlavour', 1)
		return flavourtext
	},
	activationCondition: function(character, target)
	{
		return true;
	},
	dmg: function(character, target)
	{
		let damageParam = 
		{
			multiplier: 0.7,
			addon: 3,
		}

		return damageParam;
	},
	staminaCost: 0,
	critMod: 0,
    comboCost: 2,
	skillStatsToDescriptionSpacing: 2,
	skillDescription: "",
	skillType: "offensive",
	skillTheme: "offensive",
	additionalEffects: []
}>>

::FightMove_ChargedStrike <850,6850>
<<set setup.FightMove_ChargedStrike =
{
	id: "FightMove_ChargedStrike",
	name: "",
	preparation: function(character, target)
	{
        if(this.currentStep == 0)
        {
		    return character.info.name + "";
        }
        else
        {
            return character.info.name + "!";
        }
	},
	attackAttemptDesc: function(character, target)
	{
		return ""+ character.info.name +"!";
	},
	activationCondition: function(character, target)
	{
		return true;
	},
    currentStep: 0,
    steps: 1,
	dmg: function(character, target)
	{
		let damageParam = 
		{
			multiplier: 1.5,
			addon: 14,
		}

		return damageParam;
	},
	staminaCost: 0,
	critMod: 0,
	skillDescription: "",
	skillType: "offensive",
	skillTheme: "offensive",
	additionalEffects: [],
}>>

::FightMove_ConsumeLost <975,6850>
<<set setup.FightMove_ConsumeLost =
{
    id: "FightMove_ConsumeLost",
	name: "Consume Lost",
	preparation: function(character, target)
	{
		return character.info.name + ""
	},
	attackAttemptDesc: function(character, target)
	{
		var his = setup.getPronoun(character,"pronounDepPos");
		return character.info.name + "";
	},
    attackHitDesc: function(character, target)
	{
        var displayString = ""+character.info.name+" \n"
        displayString += ""
        displayString += ""+ setup.getLength(9) + "\n";
        displayString += ""+ setup.getLength(3) + "\n";
        displayString += "("+ setup.getLength(5) + ")\n";
        displayString += ""+ setup.getLength(18) + "\n";

        return displayString;
	},
	activationCondition: function(character, target)
	{
		return true;
	},
	dmg: function(character, target)
	{
		let damageParam = 
		{
			multiplier: 0,
			addon: 0,
		}

		return damageParam;
	},
	staminaCost: 16,
	critMod: 100,
    cooldown: 3,
	skillStatsToDescriptionSpacing: 2,
	skillDescription: "",
	skillType: "offensive",
	skillTheme: "offensive",
    unlearnable: true,
	additionalEffects: [setup.consumeLost]
}>>

::FightMove_CorruptedRemedy <1100,6850>
<<set setup.FightMove_CorruptedRemedy =
{
	id: "FightMove_CorruptedRemedy",
	name: "",
	preparation: function(character, target)
	{
		return character.info.name + ""
	},
	attackAttemptDesc: function(character, target)
	{
		return ""+character.info.name+""
	},
	activationCondition: function(character, target)
	{
		return true;
	},
	dmg: function(character, target)
	{
		let damageParam = 
		{
			multiplier: 0,
			addon: 0,
		}

		return damageParam;
	},
	staminaCost: 0,
	critMod: 100,
    comboCost: 3,
    skillStatsToDescriptionSpacing: 2,
	skillDescription: "5%",
	skillType: "buff",
	skillTheme: "corruption",
    unlearnable: true,
	additionalEffects: [setup.corruptedRemedyMove]
}>>

::FightMove_CorruptedUrges <1225,6850>
<<set setup.FightMove_CorruptedUrges =
{
	id: "FightMove_CorruptedUrges",
	name: "",
	preparation: function(character, target)
	{
		return character.info.name + ""
	},
	attackAttemptDesc: function(character, target)
	{
		return ""+character.info.name+"''"
	},
	activationCondition: function(character, target)
	{
		return true;
	},
	dmg: function(character, target)
	{
		let damageParam = 
		{
			multiplier: 0,
			addon: 0,
		}

		return damageParam;
	},
	staminaCost: 0,
	critMod: 100,
    comboCost: 2,
    skillStatsToDescriptionSpacing: 3,
	skillDescription: "20%",
	skillType: "buff",
	skillTheme: "corruption",
    unlearnable: true,
	additionalEffects: [setup.corruptedUrgesMove]
}>>

::FightMove_CumDeluge <100,6975>
<<set setup.FightMove_CumDeluge =
{
	id: "FightMove_CumDeluge",
	name: "",
	preparation: function(character, target)
	{
		return character.info.name + "";
	},
	attackAttemptDesc: function(character, target)
	{
		var displayString = setup.processFlavours(State.variables.CharacterSheet_Player, character.info.name +"@[all|balls|noverb],");
		displayString += target.info.name +"";
		displayString += setup.processFlavours(State.variables.CharacterSheet_Player, ""+character.info.name+"@[all|cocks|noverb]"+target.info.name+"");

		return displayString;
	},
	activationCondition: function(character, target)
	{
		return true;
	},
	dmg: function(character, target)
	{
		let damageParam = 
		{
			multiplier: 1.4,
			addon: 26,
		}

		return damageParam;
	},
	staminaCost: 30,
	critMod: 20,    
	cooldown: 2,
	comboCost: 3,
	unique: true,
	skillStatsToDescriptionSpacing: 2,
	skillDescription: "",
	skillType: "offensive",
	skillTheme: "offensive",
    unlearnable: true,
	additionalEffects: [setup.cumDeluge]
}>>

::FightMove_DoNothing <225,6975>
<<set setup.FightMove_Do_Nothing =
{
	id: "FightMove_Do_Nothing",
	name: "",
	preparation: function(character, target)
	{
		var he = setup.getPronoun(character,"pronoun");

		return character.info.name + ""+he+"";
	},
	attackAttemptDesc: function(character, target)
	{
		return character.info.name +"";
	},
	activationCondition: function(character, target)
	{
		return true;
	},
	doesNothing: true,
	dmg: function(character, target)
	{
		let damageParam = 
		{
			multiplier: 0,
			addon: 0,
		}

		return damageParam;
	},
	staminaCost: 0,
	critMod: 100,
	skillStatsToDescriptionSpacing: 1,
	skillDescription: "",
	skillType: "special",
	skillTheme: "special",
    unlearnable: true,
	additionalEffects: []
}>>

<<set setup.FightMove_Submit_Completely =
{
    id: "FightMove_Submit_Completely",
	name: "",
	preparation: function(character, target)
	{
		var he = setup.getPronoun(character,"pronoun");

		return character.info.name + "";
	},
	attackAttemptDesc: function(character, target)
	{
		return character.info.name + "";
	},
	activationCondition: function(character, target)
	{
		if(character.fight.variables.cantSubmit)
		{
			return false;
		}

		return true;
	},
	dmg: function(character, target)
	{
		let damageParam = 
		{
			multiplier: 0,
			addon: 0,
		}

		return damageParam;
	},
	staminaCost: 0,
	critMod: 100,
	skillStatsToDescriptionSpacing: 1,
	skillDescription: "",
	skillType: "special",
	skillTheme: "special",
    unlearnable: true,
	additionalEffects: [setup.surrender]
}>>

::FightMove_DragonStrike <350,6975>
<<set setup.FightMove_DragonStrike =
{
	id: "FightMove_DragonStrike",
	name: "",
	preparation: function(character, target)
	{
		return character.info.name + "";
	},
	attackAttemptDesc: function(character, target)
	{
		return "" + character.info.name +"";
	},
	activationCondition: function(character, target)
	{
		return character.fight.variables.currentStamina >= this.staminaCost;
	},
	dmg: function(character, target)
	{
		let damageParam = 
		{
			multiplier: 1,
			addon: 70,
		}

		return damageParam;
	},
	staminaCost: 25,
	critMod: 0,
	skillStatsToDescriptionSpacing: 1,
	skillDescription: "",
	skillType: "offensive",
	skillTheme: "offensive",
	additionalEffects: [setup.stunTarget],
}>>

::FightMove_EnragedPummel <475,6975>
<<set setup.FightMove_EnragedPummel =
{
	id: "FightMove_EnragedPummel",
	name: "",
	preparation: function(character, target)
	{
		var his = setup.getPronoun(character,"pronounDepPos");

		return character.info.name + ""+his+""
	},
	attackAttemptDesc: function(character, target)
	{
		var his = setup.getPronoun(character,"pronounDepPos");
		
		return character.info.name + ""+his+""
	},
	attackHitDesc: function(character, target)
	{
		var his = setup.getPronoun(character,"pronounDepPos");

		return character.info.name + ""+his+"!";
	},
	activationCondition: function(character, target)
	{
		return State.variables.FightComboStackIndexes.length >= 2;
	},
	dmg: function(character, target)
	{
		let damageParam = 
		{
			multiplier: 1.6,
			addon: 10,
		}

		return damageParam;
	},
	staminaCost: 0,
	critMod: 45,
    comboCost: 1,
	skillStatsToDescriptionSpacing: 2,
	skillDescription: "2",
	skillType: "offensive",
	skillTheme: "offensive",
	additionalEffects: []
}>>

::FightMove_FirstStrike <600,6975>
<<set setup.FightMove_FirstStrike =
{
	id: "FightMove_FirstStrike",
	name: "",
	preparation: function(character, target)
	{
		var his = setup.getPronoun(character,"pronounDepPos");

		return character.info.name + ""
	},
	attackAttemptDesc: function(character, target)
	{
		return character.info.name + ""
	},
	attackHitDesc: function(character, target)
	{
		return character.info.name + "!";
	},
	activationCondition: function(character, target)
	{
		return State.variables.FightComboStackIndexes.length == 0;
	},
	dmg: function(character, target)
	{
		let damageParam = 
		{
			multiplier: 1.9,
			addon: 10,
		}

		return damageParam;
	},
	staminaCost: 0,
	critMod: 45,
    comboCost: 1,
	skillStatsToDescriptionSpacing: 2,
	skillDescription: "",
	skillType: "offensive",
	skillTheme: "offensive",
	additionalEffects: []
}>>

::FightMove_Focus <725,6975>
<<set setup.FightMove_Focus =
{
	id: "FightMove_Focus",
	name: "",
	preparation: function(character, target)
	{
		return character.info.name + ""
	},
	attackAttemptDesc: function(character, target)
	{
		return character.info.name + ""
	},
	activationCondition: function(character, target)
	{
		return true;
	},
	dmg: function(character, target)
	{
		let damageParam = 
		{
			multiplier: 0,
			addon: 0,
		}

		return damageParam;
	},
	staminaCost: 4,
	critMod: 100,
    comboCost: 1,
    skillStatsToDescriptionSpacing: 2,
	skillDescription: "",
	skillType: "buff",
	skillTheme: "buff",
    unlearnable: true,
	additionalEffects: [setup.focusFightMove]
}>>

::FightMove_Goo_Stun <850,6975>
<<set setup.FightMove_Goo_Stun =
{
	id: "FightMove_Goo_Stun",
	name: "",
	preparation: function(character, target)
	{
		return character.info.name + ""+target.info.name+""
	},
	attackAttemptDesc: function(character, target)
	{
		var He = setup.getPronoun(character,"pronounCap");
		
		return character.info.name + ""+target.info.name+"";
	},
	activationCondition: function(character, target)
	{
		return character.fight.variables.currentStamina >= this.staminaCost;
	},
	dmg: function(character, target)
	{
		let damageParam = 
		{
			multiplier: 0,
			addon: 8,
		}

		return damageParam;
	},
	staminaCost: 18,
	critMod: -15,
    cooldown: 5,
	comboCost: 5,
	unique: true,
	skillStatsToDescriptionSpacing: 2,
	skillDescription: "",
	skillType: "symbiote",
	skillTheme: "symbiote",
	additionalEffects: [setup.stunTarget]
}>>

::FightMove_HeraldsDevotion <975,6975>
<<set setup.FightMove_HeraldsDevotion =
{
	id: "FightMove_HeraldsDevotion",
	name: "",
	preparation: function(character, target)
	{
        var arousal = character.fight.variables.currentArousal;

        if(arousal < 20 || !setup.usesArousal(character))
        {
            return character.info.name + "";
        } 
        else if(arousal < 70)
        {
            return character.info.name + "";
        }
        else
        {
            return character.info.name + "";
        }
		
	},
	attackAttemptDesc: function(character, target)
	{
        var arousal = character.fight.variables.currentArousal;

        if(arousal < 20 || !setup.usesArousal(character))
        {
            return character.info.name + "";
        } 
        else if(arousal < 70)
        {
            return character.info.name + "";
        }
        else
        {
            return character.info.name + "";
        }
	},
	activationCondition: function(character, target)
	{
		return character.fight.variables.currentStamina >= this.staminaCost;
	},
	dmg: function(character, target)
	{
		let damageParam = 
		{
			multiplier: 0,
			addon: 0,
		}

		return damageParam;
	},
	staminaCost: 10,
	critMod: 0,
    comboCost: 5,
	unique: true,
	skillStatsToDescriptionSpacing: 2,
	skillDescription: "",
	skillType: "buff",
	skillTheme: "special",
	additionalEffects: [setup.heraldsDevotionEffect],
}>>

::FightMove_Hypnotize <1100,6975>
<<set setup.FightMove_Hypnotize =
{
	id: "FightMove_Hypnotize",
	name: "",
	preparation: function(character, target)
	{
		return character.info.name + ""
	},
	attackAttemptDesc: function(character, target)
	{
		var He = setup.getPronoun(character,"pronounCap");
		
		return character.info.name + "";
	},
	activationCondition: function(character, target)
	{
		return character.fight.variables.currentStamina >= this.staminaCost;
	},
	dmg: function(character, target)
	{
		let damageParam = 
		{
			multiplier: 0,
			addon: 0,
		}

		return damageParam;
	},
	staminaCost: 18,
	critMod: -15,
	cooldown: 5,
	skillStatsToDescriptionSpacing: 2,
	skillDescription: "",
	skillType: "offensive",
	skillTheme: "offensive",
	additionalEffects: [setup.hypnotize]
}>>

::FightMove_IncubusCall <1225,6975>
<<set setup.FightMove_IncubusCall =
{
	id: "FightMove_IncubusCall",
	name: "",
	preparation: function(character, target)
	{
		return " "+ character.info.name + "";
	},
	attackAttemptDesc: function(character, target)
	{
		var His = setup.getPronoun(character,"pronounDepPosCap");
		var his = setup.getPronoun(character,"pronounDepPos");
		var he = setup.getPronoun(character,"pronoun");

        var cockSize = setup.getLength(setup.getStatValue(character, "cock") + 20);
		var displayString = ""+character.info.name +"" + cockSize + ""+His+"";
        displayString += ""+he+""+his+"\n";

        return displayString;
    },
	attackHitDesc: function(character, target)
	{
		var His = setup.getPronoun(character,"pronounDepPosCap");
		var his = setup.getPronoun(character,"pronounDepPos");
		var He = setup.getPronoun(character,"pronounCap");
		var he = setup.getPronoun(character,"pronoun");

		var displayString = target.info.name + ""+his+""+he+"'\n\n";
        displayString +=  His+"\n";
        displayString +=  He+""+his+""+his+"\n\n";
        displayString +=  ""+his+","+he+"\n\n";

        return displayString;
	},
	activationCondition: function(character, target)
	{
		return character.fight.variables.currentStamina >= this.staminaCost;
	},
	dmg: function(character, target)
	{
		let damageParam = 
		{
			multiplier: 1.8,
			addon: 6,
		}

		return damageParam;
	},
	staminaCost: 14,
	critMod: 0,
    comboCost: 3,
	skillStatsToDescriptionSpacing: 2,
	skillDescription: "",
	skillType: "demon",
	skillTheme: "demon",
	additionalEffects: [setup.incubusCallEffects]
}>>

::FightMove_IncubusStrike <100,7100>
<<set setup.FightMove_IncubusStrike =
{
	id: "FightMove_IncubusStrike",
	name: "",
	preparation: function(character, target)
	{
		var His = setup.getPronoun(character,"pronounDepPosCap");

		return ""+ character.info.name + ""+His+""
	},
	attackAttemptDesc: function(character, target)
	{
		return character.info.name + "";
	},
	attackHitDesc: function(character, target)
	{
		var his = setup.getPronoun(character,"pronounDepPos");
		var His = setup.getPronoun(character,"pronounDepPosCap");
		var him = setup.getPronoun(character,"pronounObject");
		var He = setup.getPronoun(character,"pronounCap");

		if(character.id == "CharacterSheet_Player")
		{
			return ""+target.info.name+"\n "+His+""
			+""
		}
		else
		{
			return He+""+his+""+his+"\n"+target.info.name+""+him+""
			+character.info.name+""+his+"\n"
		}
	},
	activationCondition: function(character, target)
	{
		return character.fight.variables.currentStamina >= this.staminaCost;
	},
	dmg: function(character, target)
	{
		let damageParam = 
		{
			multiplier: 3.4,
			addon: 0,
		}

		return damageParam;
	},
	staminaCost: 20,
	critMod: 15,
    comboCost: 5,
	skillStatsToDescriptionSpacing: 2,
	skillDescription: "",
	skillType: "demon",
	skillTheme: "demon",
	additionalEffects: [setup.incubusStrikeEffects]
}>>

::FightMove_InfectiousLust <225,7100>
<<set setup.FightMove_InfectiousLust =
{
	id: "FightMove_InfectiousLust",
	name: "",
	preparation: function(character, target)
	{
		return character.info.name + ""
	},
	attackAttemptDesc: function(character, target)
	{
		var displayString = setup.processFlavours(character, character.info.name + " @[all|hands|noverb]@[all|cocks|noverb]\n");
		displayString += "''\n";
		displayString += "'' "+character.info.name+""+target.info.name+"";

		return displayString;
	},
	activationCondition: function(character, target)
	{
		return true;
	},
	dmg: function(character, target)
	{
		let damageParam = 
		{
			multiplier: 0,
			addon: 0,
		}

		return damageParam;
	},
	staminaCost: 0,
	critMod: 100,
    comboCost: 2,
    skillStatsToDescriptionSpacing: 2,
	skillDescription: "",
	skillType: "buff",
	skillTheme: "corruption",
    unlearnable: true,
	additionalEffects: [setup.infectiousLustMove]
}>>

::FightMove_Infest <350,7100>
<<set setup.FightMove_Infest =
{
	id: "FightMove_Infest",
	name: "",
	preparation: function(character, target)
	{
		var his = setup.getPronoun(character,"pronounDepPos");

		return character.info.name + ""+his+""
	},
	attackAttemptDesc: function(character, target)
	{
        var his = setup.getPronoun(character,"pronounDepPos");
		return character.info.name + " "+his+"";
	},
	attackHitDesc: function(character, target)
	{
		var his = setup.getPronoun(character,"pronounDepPos");
		var him = setup.getPronoun(character,"pronounObject");

        var hitText = "";

        if(target.fight.variables.currentArousal >= 50)
        {
            hitText = ""+his+"\n"
                        +"\n"
						+"";

        }
        else
        {
            hitText = ""+his+"\n"
                        +"";
        }

		return "\"\""+him+""+his+"\n"+
                hitText;
	},
	activationCondition: function(character, target)
	{
		return character.fight.variables.currentStamina >= this.staminaCost;
	},
	dmg: function(character, target)
	{
		let damageParam = 
		{
			multiplier: 1,
			addon: 16,
		}

		return damageParam;
	},
	staminaCost: 12,
	critMod: 5,
    cooldown: 3,
	skillStatsToDescriptionSpacing: 2,
	skillDescription: "",
	skillType: "offensive",
	skillTheme: "offensive",
	additionalEffects: [setup.infestStun]
}>>

::FightMove_Inspect <475,7100>
<<set setup.FightMove_Inspect =
{
    id: "FightMove_Inspect",
	name: "",
	preparation: function(character, target)
	{
		return character.info.name + ""
	},
	attackAttemptDesc: function(character, target)
	{
        var displayString = "";

		displayString += character.info.name  + ""+target.info.name+"\n\n";

        if(target.info.picture != undefined)
        {
		    displayString += setup.displayEncounterImage(target.info.picture) + "\n\n";
        }

        displayString += ""+target.fight.variables.currentHP+"/"+setup.displayStatValue(target, "hp")+"\n";
        displayString += ""+target.fight.variables.currentStamina+"/"+setup.displayStatValue(target, "stamina")+"\n";
        displayString += ""+target.fight.variables.currentArousal+"\n\n";

        displayString += ""+setup.displayStatValue(target, "strength")+"\n";
        displayString += ""+setup.displayStatValue(target, "critChance")+"\n";
        displayString += ""+setup.displayStatValue(target, "arousalGain")+"\n";
        displayString += ""+setup.displayStatValue(target, "staminaRecovery")+"\n\n";

        displayString += ""+setup.getStatValue(target, "corruption")+"\n";
        displayString += ""+setup.getMusclesDescriptor(target)+"("+setup.displayStatValue(target, "muscles")+")\n";
        displayString += ""+setup.displayStatValue(target, "height", true)+"\n";
        displayString += ""+setup.displayStatValue(target, "cock", true)+"\n\n";

        displayString += "\n";

        if(character.abilityHandler.abilityRuntimeDatas.length > 0)
        {
            for(let i = 0; i < target.abilityHandler.abilityRuntimeDatas.length; ++i)
            {
                let abilityRuntimeData = target.abilityHandler.abilityRuntimeDatas[i];
                let ability = setup.getAbilityByIndex(abilityRuntimeData.abilityDataIndex);

                if(abilityRuntimeData.isActive == true)
                {
                    displayString += ability.name +": "+ ability.description(target, abilityRuntimeData) +"\n";
                }
            }
        }
        else
        {
            displayString += "None\n";
        }

        return displayString;
	},
	activationCondition: function(character, target)
	{
		return true;
	},
	dmg: function(character, target)
	{
		let damageParam = 
		{
			multiplier: 0,
			addon: 0,
		}

		return damageParam;
	},
	staminaCost: 0,
	critMod: 100,
	skillStatsToDescriptionSpacing: 2,
	skillDescription: "",
	skillType: "special",
	skillTheme: "special",
    unlearnable: true,
	additionalEffects: []
}>>

::FightMove_Lunge <600,7100>
<<set setup.FightMove_Lunge =
{
	id: "FightMove_Lunge",
	name: "",
	preparation: function(character, target)
	{
		return character.info.name + "";
	},
	attackAttemptDesc: function(character, target)
	{
		return character.info.name + "";
	},
	attackHitDesc: function(character, target)
	{
		var He = setup.getPronoun(character,"pronounCap");
		
		return character.info.name + ""+He+"";
	},
	activationCondition: function(character, target)
	{
		return true;
	},
	dmg: function(character, target)
	{
		let damageParam = 
		{
			multiplier: 1,
			addon: 3,
		}

		return damageParam;
	},
	staminaCost: 0,
	critMod: 0,
	skillDescription: "",
	additionalEffects: []
}>>

::FightMove_LustfulInstincts <725,7100>
<<set setup.FightMove_LustfulInstincts =
{
	id: "FightMove_LustfulInstincts",
	name: "",
	preparation: function(character, target)
	{
		return character.info.name + ""
	},
	attackAttemptDesc: function(character, target)
	{
		return character.info.name + ""+character.info.name+""
	},
	activationCondition: function(character, target)
	{
		return true;
	},
	dmg: function(character, target)
	{
		let damageParam = 
		{
			multiplier: 0,
			addon: 0,
		}

		return damageParam;
	},
	staminaCost: 0,
	critMod: 100,
    comboCost: 1,
    skillStatsToDescriptionSpacing: 2,
	skillDescription: "",
	skillType: "buff",
	skillTheme: "corruption",
    unlearnable: true,
	additionalEffects: [setup.lustfulInstinctsMove]
}>>

::FightMove_Masturbate <850,7100>
<<set setup.FightMove_Masturbate =
{
	id: "FightMove_Masturbate",
	name: "",
	preparation: function(character, target)
	{
		return character.info.name + ""
	},
	attackAttemptDesc: function(character, target)
	{
		var him = setup.getPronoun(character, "pronounObject");

		return character.info.name + setup.processFlavours(character, "@[all|cocks|noverb]")+him+""
	},
	activationCondition: function(character, target)
	{
		return true;
	},
	dmg: function(character, target)
	{
		let damageParam = 
		{
			multiplier: 0,
			addon: 0,
		}

		return damageParam;
	},
	staminaCost: 0,
	critMod: 100,
    comboCost: 1,
    skillStatsToDescriptionSpacing: 2,
	skillDescription: "100%",
	skillType: "buff",
	skillTheme: "buff",
    unlearnable: true,
	additionalEffects: [setup.masturbate]
}>>

::FightMove_ParasiteLunge <975,7100>
<<set setup.FightMove_ParasiteLunge =
{
	id: "FightMove_ParasiteLunge",
	name: "",
	preparation: function(character, target)
	{
		return character.info.name + "";
	},
	attackAttemptDesc: function(character, target)
	{
		return character.info.name + "";
	},
	attackHitDesc: function(character, target)
	{
		var He = setup.getPronoun(character,"pronounCap");
		
		return character.info.name + ""+He+"";
	},
	activationCondition: function(character, target)
	{
		return true;
	},
	dmg: function(character, target)
	{
		let damageParam = 
		{
			multiplier: 1,
			addon: 3,
		}

		return damageParam;
	},
	staminaCost: 4,
	critMod: 0,
	skillDescription: "",
	additionalEffects: []
}>>

::FightMove_Parry <1100,7100>
<<set setup.FightMove_Parry =
{
    id: "FightMove_Parry",
	name: "",
	preparation: function(character, target)
	{
        return character.info.name + "";
	},
	attackHitDesc: function(character, target)
	{
        var displayString = character.info.name + "";

        return displayString;
	},
	activationCondition: function(character, target)
	{
        return character.fight.variables.currentStamina >= this.staminaCost;
	},
	staminaCost: 12,
	critMod: 100,
    cooldown: 4,
	skillStatsToDescriptionSpacing: 1,
	skillDescription: "",
	skillType: "offensive",
	skillTheme: "offensive",
    callbackOnPreparation: setup.doParry,
	additionalEffects: []
}>>

::FightMove_PridefulAscent <1225,7100>
<<set setup.FightMove_PridefulAscent =
{
	id: "FightMove_PridefulAscent",
	name: "",
	preparation: function(character, target)
	{
		return character.info.name + ""
	},
	attackAttemptDesc: function(character, target)
	{
		return character.info.name + "";
	},
	attackHitDesc: function(character, target)
	{
		return character.info.name + ""+target.info.name+"\n " + character.info.name + "";
	},
	activationCondition: function(character, target)
	{
		return character.fight.variables.currentStamina >= this.staminaCost;
	},
	dmg: function(character, target)
	{
		let damageParam = 
		{
			multiplier: 1,
			addon: 7,
		}

		return damageParam;
	},
	staminaCost: 4,
	critMod: 0,
    comboCost: 1,
	skillStatsToDescriptionSpacing: 2,
	skillDescription: "",
	skillType: "demon",
	skillTheme: "demon",
	additionalEffects: [setup.pridefulAscentEffects]
}>>

::FightMove_SeedOfRuin <100,7225>
<<set setup.FightMove_SeedOfRuin =
{
    id: "FightMove_SeedOfRuin",
	name: "",
	preparation: function(character, target)
	{
		return character.info.name + ""
	},
	attackAttemptDesc: function(character, target)
	{
		var his = setup.getPronoun(character,"pronounDepPos");

		return character.info.name + "";
	},
    attackHitDesc: function(character, target)
	{
        var displayString = character.info.name + "\n" 
		displayString += "\n" 
		displayString += "\n"

        return displayString;
	},
	activationCondition: function(character, target)
	{
		return true;
	},
	dmg: function(character, target)
	{
		console.log("doing see of runis")
		console.log(target)
		let damageParam = 
		{
			multiplier: 1,
			addon: target.fight.variables.currentArousal,
		}

		return damageParam;
	},
	staminaCost: 16,
	critMod: 0,
    cooldown: 3,
	skillStatsToDescriptionSpacing: 2,
	skillDescription: "",
	skillType: "offensive",
	skillTheme: "offensive",
    unlearnable: true,
	additionalEffects: []
}>>

::FightMove_Sigil_Growth <225,7225>
<<set $Sigil_Growth = 
{
    id: "Sigil_Growth",
    constantDesc: function(attacker, victim)
    {
        return "" + attacker.info.name + "";
    },
    onDamagingHit: function(attacker, victim, params)
    {
        setup.removePersistentEffect(victim, this);

        var ballsGrowth = Math.ceil(params.attackDamage * 0.025);
        var cockGrowth = Math.ceil(params.attackDamage * 0.07);
        var muscleGrowth = Math.ceil(params.attackDamage * 0.07);
        var sizeGrowth = Math.ceil(params.attackDamage * 0.12);

        ballsGrowth = setup.applyGrowth(attacker, "balls", ballsGrowth);
        ballsGrowth = setup.applyGrowth(attacker, "cock", cockGrowth);
        muscleGrowth = setup.applyGrowth(attacker, "muscles", muscleGrowth);
        sizeGrowth = setup.applyGrowth(attacker, "height", sizeGrowth);

        var His = setup.getPronoun(attacker,"pronounDepPosCap");
        var his = setup.getPronoun(attacker,"pronounDepPos");

        var displayString = attacker.info.name +"\n";
        displayString += attacker.info.name + ""+ setup.getLength(cockGrowth) + "";
        displayString += his+"(+"+ muscleGrowth + ")";
        displayString += his+""+ setup.getLength(sizeGrowth) + "\n";

        return displayString;
    },
}>>
<<set setup.FightMove_Sigil_Growth =
{
    id: "FightMove_Sigil_Growth",
	name: "",
    itemName: "",
	preparation: function(character, target)
	{
        return character.info.name + "";
	},
	attackHitDesc: function(character, target)
	{
        var displayString = setup.displaySeedMoveIntro(character, target, "golden");
		displayString += "\n";
        displayString += character.info.name+"";

        return displayString;
	},
	activationCondition: function(character, target)
	{
		return true;
	},
	staminaCost: 0,
	critMod: 100,
    comboCost: 1,
    maxStack: 4,
	skillStatsToDescriptionSpacing: 2,
	skillDescription: "",
	skillType: "sigil",
	skillTheme: "sigil",
    buyFromStore: true,
    buyPassage: "Buy_Sigil_Growth",
    essenceCost: 150,
    persistentEffectOpponent: $Sigil_Growth,
	additionalEffects: []
}>>

::FightMove_Sigil_Pain <350,7225>
<<set $Sigil_Pain = 
{
    id: "Sigil_Pain",
	constantDesc: function(attacker, victim)
    {
        return "" + attacker.info.name + "";
    },
    onDamagingHit: function(attacker, victim, params)
    {
        setup.removePersistentEffect(victim, this);

        params.attackDamage = Math.floor(params.attackDamage * 1.25);

        return ""+ victim.info.name +""+params.attackDamage+"\n";
    },
}>>
<<set setup.FightMove_Sigil_Pain =
{
    id: "FightMove_Sigil_Pain",
	name: "",
	itemName: "",
	preparation: function(character, target)
	{
		return character.info.name + "";
	},
	attackHitDesc: function(character, target)
	{
		var displayString = setup.displaySeedMoveIntro(character, target, "dark red");
		displayString += ""+target.info.name+""+ target.info.name +"";

        return displayString;
	},
	activationCondition: function(character, target)
	{
		return true;
	},
	staminaCost: 0,
	critMod: 100,
    comboCost: 1,
    maxStack: 8,
	skillStatsToDescriptionSpacing: 2,
	skillDescription: "25%",
	skillType: "sigil",
	skillTheme: "sigil",
	buyPassage: "Buy_Sigil_Pain",
	buyFromStore: true,
	essenceCost: 150,
    persistentEffectOpponent: $Sigil_Pain,
	additionalEffects: []
}>>

::FightMove_Sigil_Perception <475,7225>
<<set $Sigil_Perception = 
{
    id: "Sigil_Perception",
    constantDesc: function(attacker, victim)
    {
        return "" + attacker.info.name + "";
    },
    onActivate: function(attacker, victim, params)
    {
        attacker.applyAbilityRuntimeData(setup.Ability_SigilOfPerception);
    },
    onDamagingHit: function(attacker, victim, params)
    {
        setup.removePersistentEffect(victim, this);
        attacker.removeAbilityRuntimeData(setup.Ability_SigilOfPerception);

        return "\n";
    },
}>>
<<set setup.FightMove_Sigil_Perception =
{
    id: "FightMove_Sigil_Perception",
	name: "",
	preparation: function(character, target)
	{
		return character.info.name + "";
	},
	attackHitDesc: function(character, target)
	{
        var displayString = "";
        displayString += setup.processFlavours(State.variables.CharacterSheet_Player, "@[all|hands| noverb]\n");
        displayString += ""+ target.info.name +"";

        return displayString;
	},
	activationCondition: function(character, target)
	{
        return true;
	},
	staminaCost: 0,
    critMod: 100,
    comboCost: 1,
    maxStack: 5,
    skillStatsToDescriptionSpacing: 2,
	skillDescription: "%30",
	skillType: "sigil",
	skillTheme: "sigil",
    persistentEffectOpponent: $Sigil_Perception,
	additionalEffects: []
}>>

::FightMove_Sigil_Triad <600,7225>
<<set $Sigil_Triad = 
{
    id: "Sigil_Triad",
	constantDesc: function(attacker, victim)
    {
        return "" + attacker.info.name + "";
    },
    onActivate: function(attacker, victim, params)
    {
        attacker.applyAbilityRuntimeData(setup.Ability_SigilOfPerception);
    },
    onDamagingHit: function(attacker, victim, params)
    {
        setup.removePersistentEffect(victim, this);

		var displayString = "";

        params.attackDamage = Math.floor(params.attackDamage * 1.25);
        displayString += ""+ victim.info.name +""+params.attackDamage+"\n";
		
        attacker.removeAbilityRuntimeData(setup.Ability_SigilOfPerception);
        displayString += "\n";

		var ballsGrowth = Math.ceil(params.attackDamage * 0.7);
        var cockGrowth = Math.ceil(params.attackDamage * 0.12);
        var muscleGrowth = Math.ceil(params.attackDamage * 0.2);
        var sizeGrowth = Math.ceil(params.attackDamage * 0.15);

        ballsGrowth = setup.applyGrowth(attacker, "balls", ballsGrowth);
        ballsGrowth = setup.applyGrowth(attacker, "cock", cockGrowth);
        muscleGrowth = setup.applyGrowth(attacker, "muscles", muscleGrowth);
        sizeGrowth = setup.applyGrowth(attacker, "height", sizeGrowth);

        var His = setup.getPronoun(attacker,"pronounDepPosCap");
        var his = setup.getPronoun(attacker,"pronounDepPos");

        var displayString = attacker.info.name +"\n";
        displayString += attacker.info.name + ""+ setup.getLength(cockGrowth) + "";
        displayString += his+"(+"+ muscleGrowth + ")";
        displayString += his+""+ setup.getLength(sizeGrowth) + "\n";

        return displayString
    },
}>>

<<set setup.FightMove_Sigil_Triad =
{
    id: "FightMove_Sigil_Triad",
	name: "",
	preparation: function(character, target)
	{
		return character.info.name + "";
	},
	attackHitDesc: function(character, target)
	{
        var displayString = "";
		displayString += character.info.name + "";

        return displayString;
	},
	activationCondition: function(character, target)
	{
		return true;
	},
	staminaCost: 0,
	critMod: 100,
    maxStack: 4,
    comboCost: 1,
	skillStatsToDescriptionSpacing: 3,
	skillDescription: "",
	skillType: "sigil",
	skillTheme: "sigil",
    persistentEffectOpponent: $Sigil_Triad,
	additionalEffects: []
}>>

::FightMove_Sigil_Vitality <725,7225>
<<set $Sigil_Vitality = 
{
    id: "Sigil_Vitality",
	constantDesc: function(attacker, victim)
    {
        return "" + attacker.info.name + "";
    },
    onDamagingHit: function(attacker, victim, params)
    {
        var lifedrain = Math.floor(params.attackDamage * 0.75);
        attacker.fight.variables.currentHP = Math.min(attacker.fight.variables.currentHP + lifedrain, setup.getMaxHP(attacker));
        setup.removePersistentEffect(victim, this);
		var displayString = "";
		if (attacker.id == "CharacterSheet_Player"){
			displayString = ""+victim.info.name+""+ lifedrain + "\n";
		}else{
			displayString = ""+ lifedrain + "\n";
		}

        return displayString
    },
}>>
<<set setup.FightMove_Sigil_Vitality =
{
    id: "FightMove_Sigil_Vitality",
	name: "",
	itemName: "",
	preparation: function(character, target)
	{
		return character.info.name + "";
	},
	attackHitDesc: function(character, target)
	{
        var displayString = setup.displaySeedMoveIntro(character, target, "turquoise");
		displayString += ""+target.info.name+"";

        return displayString;
	},
	activationCondition: function(character, target)
	{
		return true;
	},
	staminaCost: 0,
	critMod: 100,
    maxStack: 4,
    comboCost: 1,
	skillStatsToDescriptionSpacing: 3,
	skillDescription: "75%",
	skillType: "sigil",
	skillTheme: "sigil",
	buyFromStore: true,
	buyPassage: "Buy_Sigil_Vitality",
	essenceCost: 100,
    persistentEffectOpponent: $Sigil_Vitality,
	additionalEffects: []
}>>

::FightMove_Slash <850,7225>
<<set setup.FightMove_Slash =
{
	id: "FightMove_Slash",
	name: "",
	preparation: function(character, target)
	{
		var flavourtext = setup.getFlavourBasedDescription(character, 'basicAttackPrepFlavour', 1)
		if(flavourtext != undefined)
		{
			return character.info.name + " " + flavourtext
		}
		else
		{
			return character.info.name + ""
		}
	},
	attackAttemptDesc: function(character, target)
	{
		var flavourtext = setup.getFlavourBasedDescription(character, 'slashAttackAttemptFlavour', 1)
		return flavourtext
	},
	activationCondition: function(character, target)
	{
		return true;
	},
	dmg: function(character, target)
	{
		let damageParam = 
		{
			multiplier: 2.2,
			addon: 10,
		}

		return damageParam;
	},
	staminaCost: 0,
	critMod: 15,
    comboCost: 3,
    skillStatsToDescriptionSpacing: 2,
	skillDescription: "",
	skillType: "offensive",
	skillTheme: "offensive",
	additionalEffects: []
}>>

::FightMove_SlimeLunge <975,7225>
<<set setup.FightMove_SlimeLunge =
{
	id: "FightMove_SlimeLunge",
	name: "",
	preparation: function(character, target)
	{
		return character.info.name + "";
	},
	attackAttemptDesc: function(character, target)
	{
		return character.info.name + "";
	},
	attackHitDesc: function(character, target)
	{
		var He = setup.getPronoun(character,"pronounCap");
		
		return character.info.name + "";
	},
	activationCondition: function(character, target)
	{
		return true;
	},
	dmg: function(character, target)
	{
		let damageParam = 
		{
			multiplier: 1,
			addon: 4,
		}

		return damageParam;
	},
	staminaCost: 0,
	critMod: 0,
	skillDescription: "",
	skillType: "offensive",
	skillTheme: "offensive",
	additionalEffects: [setup.slimeLungeEffects]
}>>

::FightMove_Stomp <1100,7225>
<<set setup.FightMove_Stomp =
{
	id: "FightMove_Stomp",
	name: "",
	preparation: function(character, target)
	{
		return character.info.name + "";
	},
	attackAttemptDesc: function(character, target)
	{
		return ""
	},
	activationCondition: function(character, target)
	{
		return true;
	},
	dmg: function(character, target)
	{
		let damageParam = 
		{
			multiplier: 2,
			addon: 10,
		}

		return damageParam;
	},
	staminaCost: 20,
	comboCost: 4,
	unique: true,
	critMod: 20,
	skillStatsToDescriptionSpacing: 2,
	skillDescription: "",
	skillType: "offensive",
	skillTheme: "offensive",
    unlearnable: true,
	additionalEffects: []
}>>

::FightMove_SummonParasite <1225,7225>
<<set setup.FightMove_SummonParasite =
{
	id: "FightMove_SummonParasite",
	name: "",
	preparation: function(character, target)
	{
		var his = setup.getPronoun(character,"pronounDepPos");

		return ""+character.info.name+""
	},
	attackAttemptDesc: function(character, target)
	{
        var his = setup.getPronoun(character,"pronounDepPos");
        var displayString = "\n";
        displayString += ""+setup.getLength(Math.ceil(setup.getStatValue(character, "cock") / 3))+""+ target.info.name;
		return displayString;
	},
	attackHitDesc: function(character, target)
	{
        var displayString = ""+target.info.name+"";

		return displayString;
	},
	activationCondition: function(character, target)
	{
		return character.fight.variables.currentStamina >= this.staminaCost;
	},
	dmg: function(character, target)
	{
		let damageParam = 
		{
			multiplier: 1.5,
			addon: 10,
		}

		return damageParam;
	},
	staminaCost: 12,
	critMod: 0,
	comboCost: 3,
	skillStatsToDescriptionSpacing: 1,
	skillDescription: "",
	skillType: "demon",
	skillTheme: "demon",
	additionalEffects: [setup.witheringVenom]
}>>

::FightMove_TonicOfStillness <100,7350>
<<set setup.FightMove_TonicOfStillness =
{
    id: "FightMove_TonicOfStillness",
	name: "",
	preparation: function(character, target)
	{
		return character.info.name + ""
	},
	attackAttemptDesc: function(character, target)
	{
		var his = setup.getPronoun(character,"pronounDepPos");
		return character.info.name + "";
	},
    attackHitDesc: function(character, target)
	{
        var displayString = character.info.name+"\n"
        displayString += ""

        return displayString;
	},
	activationCondition: function(character, target)
	{
		return true;
	},
	dmg: function(character, target)
	{
		let damageParam = 
		{
			multiplier: 0,
			addon: 0,
		}

		return damageParam;
	},
	staminaCost: 0,
	critMod: 0,
    comboCost: 1,
	skillStatsToDescriptionSpacing: 1,
	skillDescription: "",
	skillType: "offensive",
	skillTheme: "special",
    unlearnable: true,
	additionalEffects: [setup.tonicOfStillness]
}>>

::FightMove_Tutorial1 <225,7350>
<<set setup.FightMove_Tutorial1 =
{
	id: "FightMove_Tutorial1",
	name: "",
	preparation: function(character, target)
	{
		return "<<include FightMove_Tutorial1_Preparation>>"
	},
	attackAttemptDesc: function(character, target)
	{
		return ""
	},
	activationCondition: function(character, target)
	{
		return true;
	},
	dmg: function(character, target)
	{
		let damageParam = 
		{
			multiplier: 0,
			addon: 0,
		}

		return damageParam;
	},
	staminaCost: 8,
	critMod: 0,
    comboCost: 2,
    cooldown: 2,
    skillStatsToDescriptionSpacing: 2,
	skillDescription: "",
	skillType: "special",
	skillTheme: "special",
	additionalEffects: []
}>>

::FightMove_Tutorial1_Preparation <350,7350>
!



"$CharacterSheet_Player.info.name<<link "">> <<replace "#tutorial">><<include "FightMove_Tutorial1_Tutorial">><</replace>> <</link>>"

<span id="tutorial"></span>

::FightMove_Tutorial1_Tutorial <475,7350>


41

[img["https://sombreve.github.io/Dawn-of-Corruption-Site/Images/Tutorials/tutorial_merged.png"]]



::FightMove_Tutorial2 <600,7350>
<<set setup.FightMove_Tutorial2 =
{
	id: "FightMove_Tutorial2",
	name: "",
	preparation: function(character, target)
	{
		return "<<include FightMove_Tutorial2_Preparation>>"
	},
	attackAttemptDesc: function(character, target)
	{
		return ""
	},
	activationCondition: function(character, target)
	{
		return true;
	},
	dmg: function(character, target)
	{
		let damageParam = 
		{
			multiplier: 1,
			addon: 1,
		}

		return damageParam;
	},
	staminaCost: 8,
	critMod: 0,
    comboCost: 2,
	cooldown: 2,
    skillStatsToDescriptionSpacing: 2,
	skillDescription: "",
	skillType: "special",
	skillTheme: "special",
	additionalEffects: []
}>>

::FightMove_Tutorial2_Preparation <725,7350>




" <<link "">> <<replace "#tutorial">><<include "FightMove_Tutorial2_Tutorial">><</replace>> <</link>>"

<span id="tutorial"></span>

::FightMove_Tutorial2_Tutorial <850,7350>
""



::FightMove_Tutorial3 <975,7350>
<<set setup.FightMove_Tutorial3 =
{
	id: "FightMove_Tutorial3",
	name: "",
	preparation: function(character, target)
	{
		return "<<include FightMove_Tutorial3_Preparation>>"
	},
	attackAttemptDesc: function(character, target)
	{
		return ""
	},
	activationCondition: function(character, target)
	{
		return true;
	},
	dmg: function(character, target)
	{
		let damageParam = 
		{
			multiplier: 0,
			addon: 0,
		}

		return damageParam;
	},
	staminaCost: 8,
	critMod: 0,
    comboCost: 2,
	cooldown: 2,
    skillStatsToDescriptionSpacing: 2,
	skillDescription: "",
	skillType: "special",
	skillTheme: "special",
	additionalEffects: []
}>>

::FightMove_Tutorial3_Preparation <1100,7350>




<<link "">> <<replace "#tutorial">><<include "FightMove_Tutorial3_Tutorial">><</replace>> <</link>>

<span id="tutorial"></span>

::FightMove_Tutorial3_Tutorial <1225,7350>




::FightMove_WitheringVenom <100,7475>
<<set setup.FightMove_WitheringVenom =
{
	id: "FightMove_WitheringVenom",
	name: "",
	preparation: function(character, target)
	{
		var his = setup.getPronoun(character,"pronounDepPos");

		return character.info.name + ""+his+""
	},
	attackAttemptDesc: function(character, target)
	{
        var his = setup.getPronoun(character,"pronounDepPos");
		return ""+ character.info.name + "\n";
	},
	attackHitDesc: function(character, target)
	{
        var displayString = ""+ character.info.name + "";

		return displayString;
	},
	activationCondition: function(character, target)
	{
		return character.fight.variables.currentStamina >= this.staminaCost;
	},
	dmg: function(character, target)
	{
		let damageParam = 
		{
			multiplier: 1,
			addon: 1,
		}

		return damageParam;
	},
	staminaCost: 12,
	critMod: 0,
	skillStatsToDescriptionSpacing: 2,
	skillDescription: "",
	skillType: "offensive",
	skillTheme: "offensive",
	additionalEffects: [setup.witheringVenom]
}>>

::FightMove_Worship <225,7475>
<<set setup.FightMove_Worship =
{
	id: "FightMove_Worship",
	name: "",
	preparation: function(character, target)
	{
		return character.info.name + "";
	},
	attackAttemptDesc: function(character, target)
	{
        let arousalGain = 10;
        target.fight.variables.currentArousal += arousalGain;
        target.fight.variables.currentArousal = Math.min(100, target.fight.variables.currentArousal);

        let displayString = character.info.name +""+target.info.name+"\n";
        displayString += target.info.name +""+character.info.name+""+arousalGain+"";

        return displayString;
	},
	activationCondition: function(character, target)
	{
		return true;
	},
	doesNothing: true,
	dmg: function(character, target)
	{
		let damageParam = 
		{
			multiplier: 0,
			addon: 0,
		}

		return damageParam;
	},
	staminaCost: 0,
	critMod: 100,
	skillStatsToDescriptionSpacing: 2,
	skillDescription: "",
	skillType: "special",
	skillTheme: "special",
    unlearnable: true,
	additionalEffects: []
}>>

::Encounter_Jorm <350,7475>
<<include setup.getNextNarativeEventPassage(setup.StorySheet_Jorm.encounterPassages)>>

::Jorm_FirstMeeting_Intro <475,7475>
<<run setup.initialJormSetup()>>\
<<print setup.getFlavourBasedDescription($CharacterSheet_Player, "jormFirstMeeting", 1)>>

::Jorm_FirstMeeting_PlayerSmall <600,7475>





\ 




\<<run setup.choice("[[->Jorm_FirstMeeting_PlayerSmall_2]]");>>
\<<run setup.choice("[[->village]]");>>

::Jorm_FirstMeeting_PlayerSmall_2 <725,7475>
<<set $CharacterSheet_Jorm.quest.available_encounterPassages_firstTime = false>>\




<<print setup.getLength(3937)>>

\<<run setup.choice("[[->Jorm_FirstMeeting_PlayerSmall_3]]");>>

::Jorm_FirstMeeting_PlayerSmall_3 <850,7475>





\<<run setup.choice("[[->Jorm_FirstMeeting_PlayerSmall_4]]");>>

::Jorm_FirstMeeting_PlayerSmall_4 <975,7475>
\
<<print setup.processFlavours($CharacterSheet_Player, "@[all|cocks|noverb]")>>
<<SymbioteName>> , 

<<print setup.processFlavours($CharacterSheet_Player, "@[all|cocks|noverb] ")>>
 \
<<print setup.processFlavours($CharacterSheet_Player, " ")>>



\<<run setup.choice("[[->Jorm_FirstMeeting_PlayerSmall_5]]");>>

::Jorm_FirstMeeting_PlayerSmall_5 <1100,7475>
  




\<<run setup.choice("[[->Jorm_JormEmerges_Small]]");>>

::Jorm_FirstMeeting_PlayerBig <1225,7475>





\<<run setup.choice("[[->Jorm_FirstMeeting_PlayerBig_2]]");>>

::Jorm_FirstMeeting_PlayerBig_2 <100,7600>

 




\<<run setup.choice("[[->Jorm_FirstMeeting_PlayerBig_3]]");>>
\<<run setup.choice("[[->village]]");>>

::Jorm_FirstMeeting_PlayerBig_3 <225,7600>
<<set $CharacterSheet_Jorm.quest.available_encounterPassages_firstTime = false>>\
 
<<print setup.getLength(3937)>><<SymbioteColor>>

\<<run setup.choice("[[->Jorm_FirstMeeting_PlayerBig_4]]");>>

::Jorm_FirstMeeting_PlayerBig_4 <350,7600>
 




<<SymbioteName>>,
<<print setup.processFlavours($CharacterSheet_Player, "@[all|cocks|noverb]")>>
<<SymbioteName>> \

<<print setup.processFlavours($CharacterSheet_Player, "@[all|cocks|noverb]@[all|cocks|noverb]")>>

  


\<<run setup.choice("[[->Jorm_FirstMeeting_PlayerBig_5]]");>>>>

::Jorm_FirstMeeting_PlayerBig_5 <475,7600>
<<SymbioteColor>>






\<<run setup.choice("[[->Jorm_JormEmerges_Big]]");>>

::Jorm_JormEmerges_Big <600,7600>




\<<run setup.choice("[[->Jorm_JormEmerges_Big_2]]");>>

::Jorm_JormEmerges_Big_2 <725,7600>
 
 






 





<<link "" setup.getInitialJormSizeDiffPassage()>><</link>>

::Jorm_JormEmerges_Small <850,7600>
  





\<<run setup.choice("[[->Jorm_JormEmerges_Small_2]]");>>

::Jorm_JormEmerges_Small_2 <975,7600>
  




   \
, 



<<link "" setup.getInitialJormSizeDiffPassage()>><</link>>

::Jorm_JormDescriptions_LargerThanPlayer <1100,7600>
<<SymbioteColor>>



<<print setup.getLength(setup.getStatValue($CharacterSheet_Jorm, "height"))>>, 


\
<<print setup.getLength(setup.getStatValue($CharacterSheet_Jorm, "cock"))>> <<print setup.processFlavours($CharacterSheet_Jorm, "@[all|cocks|noverb]")>>







\<<run setup.choice("[[->Jorm_JormDescriptions_LargerThanPlayer_2]]");>>

::Jorm_JormDescriptions_LargerThanPlayer_2 <1225,7600>







 \
<<print setup.processFlavours($CharacterSheet_Jorm, "@[all|cocks|noverb]")>>

\<<run setup.choice("[[->Jorm_JormDescriptions_LargerThanPlayer_3]]");>>

::Jorm_JormDescriptions_LargerThanPlayer_3 <100,7725>


<<if setup.getStatValue($CharacterSheet_Player, "muscles") > 100>>\

<<else>>\

<</if>>\






\


\<<run setup.choice("[[->Jorm_NamingDialogue]]");>>

::Jorm_JormDescriptions_EvenToPlayer <225,7725>
<<SymbioteColor>>\
<<print setup.getLength(setup.getStatValue($CharacterSheet_Jorm, "height"))>>

 \
's crotch. Two <<print setup.getLength(setup.getStatValue($CharacterSheet_Jorm, "cock"))>>

\<<run setup.choice("[[->Jorm_JormDescriptions_EvenToPlayer_2]]");>>

::Jorm_JormDescriptions_EvenToPlayer_2 <350,7725>







\<<run setup.choice("[[->Jorm_JormDescriptions_EvenToPlayer_3]]");>>

::Jorm_JormDescriptions_EvenToPlayer_3 <475,7725>






<<if setup.getStatValue($CharacterSheet_Player, "muscles") > 100>>\

<<else>>\

<</if>>\


\<<run setup.choice("[[->Jorm_JormDescriptions_EvenToPlayer_4]]");>>

::Jorm_JormDescriptions_EvenToPlayer_4 <600,7725>










\<<run setup.choice("[[->Jorm_NamingDialogue]]");>>

::Jorm_JormDescriptions_SmallerThanPlayer <725,7725>
<<SymbioteColor>><<print setup.getLength(setup.getStatValue($CharacterSheet_Jorm, "height"))>>



<<print setup.getLength(setup.getStatValue($CharacterSheet_Jorm, "cock"))>>






\<<run setup.choice("[[->Jorm_JormDescriptions_SmallerThanPlayer_2]]");>>

::Jorm_JormDescriptions_SmallerThanPlayer_2 <850,7725>


 

 


\<<run setup.choice("[[->Jorm_JormDescriptions_SmallerThanPlayer_3]]");>>

::Jorm_JormDescriptions_SmallerThanPlayer_3 <975,7725>










\<<run setup.choice("[[->Jorm_NamingDialogue]]");>>

::Jorm_NamingDialogue <1100,7725>






""





\<<run setup.choice("[[->Jorm_NamingDialogue_2]]");>>

::Jorm_NamingDialogue_2 <1225,7725>
""








""

<<link "" setup.getJormIntroductionPassage()>><</link>>

::Jorm_NamingDialogue_FuckedNaga <100,7850>
"..."


" \
"

\<<run setup.choice("[[->Jorm_NamingDialogue_ToNamingPrompt]]");>>

::Jorm_NamingDialogue_VoredNaga <225,7850>
""



"\
 \
"

\<<run setup.choice("[[->Jorm_NamingDialogue_ToNamingPrompt]]");>>

::Jorm_NamingDialogue_GotFuckedByNaga <350,7850>
""



"\
\
" 



\<<run setup.choice("[[->Jorm_NamingDialogue_GotFuckedByNaga_2]]");>>

::Jorm_NamingDialogue_GotFuckedByNaga_2 <475,7850>
"! "


<<SymbioteName>>
<<SymbioteName>>


\<<run setup.choice("[[->Jorm_NamingDialogue_ToNamingPrompt]]");>>

::Jorm_NamingDialogue_ToNamingPrompt <600,7850>
<<if setup.sizeCharactercomparison($CharacterSheet_Jorm, $CharacterSheet_Player) > setup.Comparators.BIGGER>>\
 

<</if>>\

""
 

""

<<SymbioteName>> 

""


"<<SymbioteName>>  "

<<set $passageName = ""+$CharacterSheet_Player.symbiote.name>>\
\<<run setup.choice("[[$passageName->Jorm_NamingDialogue_ToNamingPrompt_WithinDreams]]");>>
\<<run setup.choice("[[->Jorm_NamingDialogue_ToNamingPrompt_RefuseAnswer]]");>>

::Jorm_NamingDialogue_ToNamingPrompt_WithinDreams <725,7850>
<<SymbioteName>>



" , "
""

<<set $passageName = ""+ $CharacterSheet_Player.symbiote.name +"'">>\
\<<run setup.choice("[[$passageName->Jorm_NamingDialogue_ToNamingPrompt_Sire]]");>>
\<<run setup.choice("[[->Jorm_NamingDialogue_ToNamingPrompt_RefuseAnswer]]");>>

::Jorm_NamingDialogue_ToNamingPrompt_Sire <850,7850>


""


"\
<<SymbioteName>>\
\
 \
"

\<<run setup.choice("[[->Jorm_NamingDialogue_ToNamingPrompt_PostAnswer]]");>>

::Jorm_NamingDialogue_ToNamingPrompt_RefuseAnswer <975,7850>





\<<run setup.choice("[[->Jorm_NamingDialogue_ToNamingPrompt_PostAnswer]]");>>

::Jorm_NamingDialogue_ToNamingPrompt_PostAnswer <1100,7850>
" "


""




\<<run setup.choice("[[->Jorm_NamingDialogue_ToNamingPrompt_PostAnswer_2]]");>>

::Jorm_NamingDialogue_ToNamingPrompt_PostAnswer_2 <1225,7850>
"\
\
"



\<<run setup.choice("[[->Jorm_NamingDialogue_ToNamingPrompt_PostAnswer_3]]");>>

::Jorm_NamingDialogue_ToNamingPrompt_PostAnswer_3 <100,7975>
"\
\
"


""





\<<run setup.choice("[[->Jorm_NamingDialogue_ToNamingPrompt_PostAnswer_4]]");>>

::Jorm_NamingDialogue_ToNamingPrompt_PostAnswer_4 <225,7975>


""




"\
"


""

\<<run setup.choice("[[->Jorm_NamingPrompt]]");>>

::Jorm_NamingPrompt <350,7975>
 

<<textbox "$CharacterSheet_Jorm.info.name" "">>

\<<run setup.choice("[[->Jorm_NamingPromptEnd]]");>>

::Jorm_NamingPromptEnd <475,7975>
$CharacterSheet_Jorm.info.name 

" ..." 


"$CharacterSheet_Jorm.info.name " 




"<<SymbioteName>>"



\<<run setup.choice("[[->Village]]");>>

::Jorm_PostNamingPrompt <600,7975>
<<set $CharacterSheet_Jorm.quest.available_encounterPassages_jormPostNameSetup = false>>\



<<print $CharacterSheet_Jorm.info.name>>, 



"" 

"<<SymbioteName>>~"

<<link "" setup.getSecondJormSizeDiffPassage()>><</link>>

::Jorm_PostNamingPrompt_PlayerSmaller <725,7975>
$CharacterSheet_Jorm.info.name

\
<<print setup.processFlavours($CharacterSheet_Player, "@[all|pecs|noverb]@[all|abdominals|noverb]")>> 

<<print setup.processFlavours($CharacterSheet_Player, "@[all|cocks|noverb]@[all|cocks|noverb]")>>



\<<run setup.choice("[[->Jorm_PostNamingPrompt_PlayerSmaller_2]]");>>

::Jorm_PostNamingPrompt_PlayerSmaller_2 <850,7975>
<<print $CharacterSheet_Jorm.info.name>> \







<<SymbioteColor>>



\<<run setup.choice("[[->Jorm_PostNamingPrompt_PlayerSmaller_3]]");>>

::Jorm_PostNamingPrompt_PlayerSmaller_3 <975,7975>

 
<<if setup.getStatValue($CharacterSheet_Jorm, "cock") > setup.getStatValue($CharacterSheet_Player, "height")>>\

<<print setup.processFlavours($CharacterSheet_Player, "@[all|cocks|noverb]")>> \

<</if>>\

\


\<<run setup.choice("[[->Jorm_PostNamingPrompt_PlayerSmaller_4]]");>>

::Jorm_PostNamingPrompt_PlayerSmaller_4 <1100,7975>
$CharacterSheet_Jorm.info.name



 




\<<run setup.choice("[[->Jorm_PostNamingPrompt_PlayerSmaller_5]]");>>

::Jorm_PostNamingPrompt_PlayerSmaller_5 <1225,7975>
 $CharacterSheet_Jorm.info.name


\




\<<run setup.choice("[[->Jorm_PostNamingPrompt_PlayerSmaller_6]]");>>

::Jorm_PostNamingPrompt_PlayerSmaller_6 <100,8100>
\


""

()

\<<run setup.choice("[[->Village]]");>>

::Jorm_PostNamingPrompt_PlayerEven <225,8100>
\


<<if setup.getStatValue($CharacterSheet_Player, "muscles") > 100>>\
\

<<else>>\

<</if>>\

 

"~" 

\

\<<run setup.choice("[[->Jorm_PostNamingPrompt_PlayerEven_2]]");>>

::Jorm_PostNamingPrompt_PlayerEven_2 <350,8100>
\
<<print setup.processFlavours($CharacterSheet_Player, "@[all|cocks|noverb]")>> \
 
<<if setup.getStatValue($CharacterSheet_Player, "cock") > setup.getStatValue($CharacterSheet_Jorm, "height")>>\
<<print setup.processFlavours($CharacterSheet_Player, "@[all|cocks|noverb]")>> \
<<print setup.processFlavours($CharacterSheet_Player, "@[all|cocks|noverb]")>> \
<<else>>
<<print setup.processFlavours($CharacterSheet_Player, ", @[all|cocks|noverb]")>> \
<</if>>\
, ,  \
<<print setup.processFlavours($CharacterSheet_Player, "@[all|cocks|noverb]$CharacterSheet_Jorm.info.name")>> \



\<<run setup.choice("[[->Jorm_PostNamingPrompt_PlayerEven_3]]");>>

::Jorm_PostNamingPrompt_PlayerEven_3 <475,8100>
 \




<<print setup.processFlavours($CharacterSheet_Player, "@[all|cocks|noverb]")>>
 

\


\<<run setup.choice("[[->Jorm_PostNamingPrompt_PlayerEven_4]]");>>

::Jorm_PostNamingPrompt_PlayerEven_4 <600,8100>











\<<run setup.choice("[[->Jorm_PostNamingPrompt_PlayerEven_5]]");>>

::Jorm_PostNamingPrompt_PlayerEven_5 <725,8100>
<<print $CharacterSheet_Jorm.info.name>>




$CharacterSheet_Jorm.info.name



\<<run setup.choice("[[->Jorm_PostNamingPrompt_PlayerEven_6]]");>>

::Jorm_PostNamingPrompt_PlayerEven_6 <850,8100>



 

  


""

()

\<<run setup.choice("[[->Village]]");>>

::Jorm_PostNamingPrompt_PlayerBigger <975,8100>
 




\<<run setup.choice("[[->Village]]");>>

::Jorm_PostNamingPrompt_PlayerBigger_2 <1100,8100>
"~"


"" ""


<<SymbioteName>>

\<<run setup.choice("[[->Jorm_PostNamingPrompt_PlayerBigger_3]]");>>

::Jorm_PostNamingPrompt_PlayerBigger_3 <1225,8100>
"" 





<<print setup.processFlavours($CharacterSheet_Player, "@[all|cocks|noverb]")>>

definition



\<<run setup.choice("[[->Jorm_PostNamingPrompt_FillHim]]");>>
\<<run setup.choice("[[->Jorm_PostNamingPrompt_DenyHim]]");>>

::Jorm_PostNamingPrompt_FillHim <100,8225>

$CharacterSheet_Jorm.info.name





\<<run setup.choice("[[->Jorm_PostNamingPrompt_FillHim_2]]");>>

::Jorm_PostNamingPrompt_FillHim_2 <225,8225>
<<SymbioteColor>>




\<<run setup.choice("[[->Jorm_PostNamingPrompt_FillHim_3]]");>>

::Jorm_PostNamingPrompt_FillHim_3 <350,8225>






\<<run setup.choice("[[->Jorm_PostNamingPrompt_FillHim_4]]");>>

::Jorm_PostNamingPrompt_FillHim_4 <475,8225>

$CharacterSheet_Jorm.info.name\
<<print setup.processFlavours($CharacterSheet_Player, "@[all|cocks|noverb], ")>> \

"" 
"..."

"&"

""

()

\<<run setup.choice("[[->Village]]");>>

::Jorm_PostNamingPrompt_DenyHim <600,8225>
...




\<<run setup.choice("[[->Jorm_PostNamingPrompt_DenyHim_2]]");>>

::Jorm_PostNamingPrompt_DenyHim_2 <725,8225>



 $CharacterSheet_Jorm.info.name

\<<run setup.choice("[[->Jorm_PostNamingPrompt_DenyHim_3]]");>>

::Jorm_PostNamingPrompt_DenyHim_3 <850,8225>
, \
<<print setup.processFlavours($CharacterSheet_Player, " ")>>

lt;<print $CharacterSheet_Jorm.info.name>>'


\<<run setup.choice("[[->Jorm_PostNamingPrompt_DenyHim_4]]");>>

::Jorm_PostNamingPrompt_DenyHim_4 <975,8225>
$CharacterSheet_Jorm.info.name

\
$CharacterSheet_Jorm.info.name

\<<run setup.choice("[[->Jorm_PostNamingPrompt_DenyHim_5]]");>>

::Jorm_PostNamingPrompt_DenyHim_5 <1100,8225>


"" 


"" 

""

()

\<<run setup.choice("[[->Village]]");>>

::Encounter_Loss_Lost_Entity <1225,8225>
<<print setup.getRace($CharacterSheet_Lost_Entity.info.anatomy, true)>>

<<print setup.getRace($CharacterSheet_Lost_Entity.info.anatomy, true)>> <<print setup.processFlavours(
    $CharacterSheet_Lost_Entity,
    '"..." '
)>>



$CharacterSheet_Player.symbiote.name


<<print setup.getRace($CharacterSheet_Lost_Entity.info.anatomy, true)>>

   



<<print setup.getRace($CharacterSheet_Lost_Entity.info.anatomy, true)>>'

"" 





<<print setup.getFightReward($CharacterSheet_Lost_Entity, true)>>

\<<run setup.choice("[[->Death]]");>>

::Encounter_Start_Lost_Entity <100,8350>
<<print setup.processFlavours($CharacterSheet_Lost_Entity, "@[all|cocks|noverb]")>> <<print setup.getLength(setup.getStatValue($CharacterSheet_Lost_Entity, "cock"))>>

"..." 

::Encounter_Win_Lost_Entity <1225,8225>
<<print setup.getRace($CharacterSheet_Lost_Entity.info.anatomy, true)>> 



<<print setup.getFlavourBasedDescription($CharacterSheet_Player, "lostWin1", 1, $CharacterSheet_Lost_Entity)>>

<<print setup.getRace($CharacterSheet_Lost_Entity.info.anatomy, true)>>

  

\<<set $CharacterSheet_Lost_Entity.quest.beatenOnce = true>>
<<print setup.getFightReward($CharacterSheet_Lost_Entity)>>

\<<run setup.choice("[[->Encounter_Win_Lost_Entity_Fuck]]");>>
\<<run setup.choice("[[->Encounter_Lost_Leave_NoSex]]");>>

::Encounter_Intro_Lost_Entity <350,8350>
\<<set $CharacterSheet_Lost_Entity.info.known = setup.EncounterKnownState.KNOWN>>
\<<set $CharacterSheet_Lost_Entity.quest.met = true>>
\<<run $CharacterSheet_Lost_Entity.info.muscles = 30>>
\<<run $CharacterSheet_Lost_Entity.info.height = 90>>
\<<run $CharacterSheet_Lost_Entity.info.cock = 23>>
\<<run $CharacterSheet_Lost_Entity.info.balls = 8>>
\<<run setup.setRandomRace($CharacterSheet_Lost_Entity.info.anatomy)>> 
\<<run $CharacterSheet_Lost_Entity.info.name = "" + setup.getRace($CharacterSheet_Lost_Entity.info.anatomy, true)>>
\<<run $Encounter_Target=$CharacterSheet_Lost_Entity>>
 



<<print setup.getRace($CharacterSheet_Lost_Entity.info.anatomy, true)>> <<print setup.processFlavours(
    $CharacterSheet_Lost_Entity,
    "" + 
    "@[all| heads| noverb]@[1| tongues| noverb]@[all| eyes| noverb]\n"
)>>
\<<if $CharacterSheet_Lost_Entity.quest.beatenOnce>>


\<<else>>

\<</if>>



<<print setup.getFightStartPassages($CharacterSheet_Lost_Entity)>>

::Encounter_Lost_Leave_NoSex <475,8350>
<<print setup.getRace($CharacterSheet_Lost_Entity.info.anatomy, true)>>





\<<run setup.choice("[[->Village]]");>>

::LeavePurified <600,8350>


\<<run setup.choice("[[->Village]]");>>

::Recruit <725,8350>
$CharacterSheet_Player.symbiote.name

(())

\<<run setup.choice("[[->Recruit]]");>>
\<<run setup.choice("[[->Village]]");>>

::Encounter_Win_Lost_Entity_Absorb <850,8350>
<<print setup.getRace($CharacterSheet_Lost_Entity.info.anatomy, true)>> 

<<print setup.getRace($CharacterSheet_Lost_Entity.info.anatomy, true)>>

$CharacterSheet_Player.symbiote.color

<<print setup.getFlavourBasedDescription($CharacterSheet_Player, "lostKiss", 1, $CharacterSheet_Lost_Entity)>>

""

\<<run setup.choice("[[->Encounter_Win_Lost_Entity_Absorb_2]]");>>

::Encounter_Win_Lost_Entity_Absorb_2 <975,8350>


<<print setup.getRace($CharacterSheet_Lost_Entity.info.anatomy, true)>>

<<print setup.getFlavourBasedDescription($CharacterSheet_Player, "mergeLost1", 1, $CharacterSheet_Lost_Entity)>>

<<print setup.getRace($CharacterSheet_Lost_Entity.info.anatomy, true)>><<print setup.getRandomColor()>>

<<print setup.getRace($CharacterSheet_Lost_Entity.info.anatomy, true)>>
<<print setup.getLength(setup.getStatValue($CharacterSheet_Lost_Entity, "height"))>><<print setup.getLength(setup.getStatValue($CharacterSheet_Lost_Entity, "height") - 14)>>


 ""

\<<if setup.getStatValue($CharacterSheet_Player, "corruption") >= 75>>
 
\<<elseif setup.getStatValue($CharacterSheet_Player, "corruption") >= 50>>


<<print setup.getRace($CharacterSheet_Lost_Entity.info.anatomy, true)>>
\<<else>>
  

<<print setup.getRace($CharacterSheet_Lost_Entity.info.anatomy, true)>> "" " "
\<</if>>

\<<if (setup.sizeNormalPersoncomparison($CharacterSheet_Player) >= setup.Comparators.FITS_ON_FINGER) and (setup.getStatValue($CharacterSheet_Player, "corruption") >= 75)>>
<span class="glitch" data-text="-">[[-->Planetary69Ending]]</span>
\<<elseif setup.getStatValue($CharacterSheet_Player, "corruption") >= 75>>
\<<run setup.choice("[[-->Encounter_Win_Lost_Entity_Corrupt]]");>>
\<<run setup.choice("[[->LeavePurified]]");>>
\<<elseif setup.getStatValue($CharacterSheet_Player, "corruption") >= 50>>
\<<if Math.floor(Math.random() * 2) == 1>>
\<<run setup.choice("[[-->Encounter_Win_Lost_Entity_Corrupt]]");>>
\<<else>>
<span class="inactive">[[-->Recruit]]</span>
\<</if>>
\<<run setup.choice("[[->LeavePurified]]");>>
\<<else>>
<span class = "inactive">[[-->Recruit]]</span>
\<<run setup.choice("[[->LeavePurified]]");>>
\<</if>>

::Encounter_Win_Lost_Entity_Corrupt <1100,8350>
<<print setup.processFlavours(
    $CharacterSheet_Player,
    " "+
    " "+
    "\n\n"+
    "\@[all|cocks|noverb] "
)>>

""<<print setup.getRace($CharacterSheet_Lost_Entity.info.anatomy, true)>>"" 



<<print setup.processFlavours(
    $CharacterSheet_Player,
    "@[all|cocks|noverb]"
)>>

""

<<print setup.getRace($CharacterSheet_Lost_Entity.info.anatomy, true)>>

<<print setup.processFlavours(
    $CharacterSheet_Lost_Entity,
    ""+
    ""+
    ""+
    '\n\n"" '+
    "\n\n"+
    ""+
    "\n\n"
)>>

\<<run setup.choice("[[->Encounter_Lost_Entity_Swarm_creation]]");>>

::Encounter_Lost_Entity_Swarm_creation <1225,8350>
\<<if $CharacterSheet_Swarm.quest.firstSwarm>> 
\<<run $CharacterSheet_Lost_Harbinger.info.anatomy = $CharacterSheet_Lost_Entity.info.anatomy>>
\<<run setup.setBaseStatValue($CharacterSheet_Lost_Harbinger, "corruption", setup.getStatValue($CharacterSheet_Player, "corruption"))>>
\<<run setup.setBaseStatValue($CharacterSheet_Lost_Harbinger, "muscles", setup.getStatValue($CharacterSheet_Player, "muscles"))>>
\<<run setup.setBaseStatValue($CharacterSheet_Lost_Harbinger, "height", setup.getStatValue($CharacterSheet_Player, "height"))>>
\<<run setup.setBaseStatValue($CharacterSheet_Lost_Harbinger, "cock", setup.getStatValue($CharacterSheet_Player, "cock"))>>


, ""

" " 
\<<print setup.processFlavours(
    $CharacterSheet_Lost_Harbinger,
    "@[all| cocks| noverb]"
)>>

""""

""  """ 



<<textbox "$CharacterSheet_Lost_Harbinger.quest.harbingerName" "">>
<<run $CharacterSheet_Lost_Harbinger.quest.harbingerRace = setup.RacePool[setup.getRace($CharacterSheet_Lost_Entity.info.anatomy).toUpperCase()]>>
\<<run setup.choice("[[->Encounter_Lost_Entity_Swarm_Harbinger]]");>>
\<<else>>


$CharacterSheet_Lost_Harbinger.quest.harbingerName.



\<<run setup.choice("[[->Village]]");>>
\<</if>>

::Encounter_Lost_Entity_Swarm_Harbinger <100,8475>
, " $CharacterSheet_Lost_Harbinger.quest.harbingerName "







$CharacterSheet_Lost_Harbinger.quest.harbingerName

\<<run setup.choice("[[->Village][$CharacterSheet_Swarm.quest.firstSwarm = false;]]");>>

::Encounter_Win_Lost_Entity_Fuck <225,8475>
<<print setup.getFlavourBasedDescription($CharacterSheet_Player, "lostFuck1", 1, $CharacterSheet_Lost_Entity)>>

\<<run setup.applyGrowth($CharacterSheet_Player, "muscles", 1)>>
<<print setup.getMuscleGrowthSequenceText($CharacterSheet_Player)>>.

\<<run setup.choice("[[->Encounter_Win_Lost_Entity_Fuck_2]]");>>

::Encounter_Win_Lost_Entity_Fuck_2 <350,8475>
<<print setup.getFlavourBasedDescription($CharacterSheet_Player, "lostFuck2", 1, $CharacterSheet_Lost_Entity)>>


\<<run setup.applyGrowth($CharacterSheet_Player, "muscles", 2)>>
<<print setup.getMuscleGrowthSequenceText($CharacterSheet_Player)>>
\<<run setup.applyCorruption($CharacterSheet_Player, 5)>>
(+5)

\<<if setup.getStatValue($CharacterSheet_Player, "corruption") >= 25>>
<<print setup.getRace($CharacterSheet_Lost_Entity.info.anatomy, true)>>'

\<<run setup.choice("[[->Encounter_Win_Lost_Entity_Absorb]]");>>
\<<run setup.choice("[[->Encounter_Lost_Leave_NoSex]]");>>
\<<else>>




\<<run setup.choice("[[->Encounter_Lost_Leave_NoSex]]");>>
\<</if>>

::Quest_MQ002_ApothusEncounter_FightStart <475,8475>


::Quest_MQ002_ApothusEncounter_FightIntro <600,8475>
<<print setup.getFightStartPassages($CharacterSheet_Apothus)>>

::Quest_MQ002_ApothusEncounter_PlayerWins <725,8475>
<<print setup.getFightReward($CharacterSheet_Apothus)>>



"" 

""

""  

\<<run setup.choice("[[->Quest_MQ002_ApothusEncounter_PlayerWins_1]]");>>

::Quest_MQ002_ApothusEncounter_PlayerWins_1 <850,8475>
"" 




""

\<<run setup.choice("[[->Quest_MQ002_ApothusEncounter_PlayerWins_1_2]]");>>

::Quest_MQ002_ApothusEncounter_PlayerWins_1_2 <975,8475>



"" 



\<<run setup.choice("[[->Quest_MQ002_ApothusEncounter_PlayerWins_1_3]]");>>

::Quest_MQ002_ApothusEncounter_PlayerWins_1_3 <1100,8475>
""

"" 


"" 



\<<run setup.choice("[[->Quest_MQ002_ApothusEncounter_PlayerWins_1_4]]");>>

::Quest_MQ002_ApothusEncounter_PlayerWins_1_4 <1225,8475>
"!"




\<<run setup.choice("[[->Quest_MQ002_ApothusEncounter_PlayerWins_2]]");>>

::Quest_MQ002_ApothusEncounter_PlayerWins_2 <100,8600>
<<print setup.displayEncounterImage($CharacterSheet_Apothus_2nd_Form.info.picture)>>

 

\<<set $WorldState.apothusTransformed = true>>
\<<run setup.choice("[[->FightLogic][$Encounter_Target = $CharacterSheet_Apothus_2nd_Form]]");>>

::Quest_MQ002_ApothusEncounter_PlayerLoses <225,8600>



"" 

""



"Nyx"



<<print setup.getFightReward($CharacterSheet_Apothus, true)>>
\<<run $CharacterSheet_Player.removeAbilityRuntimeData(setup.Ability_EmbracedByNyxsLight);>>
\<<run setup.choice("[[->Death_NyxDungeon]]");>>

::Quest_MQ002_Apothus_2nd_Form_Encounter_FightStart <350,8600>


::Quest_MQ002_Apothus_2nd_Form_Encounter_FightIntro <475,8600>
<<print setup.getFightStartPassages($CharacterSheet_Apothus_2nd_Form)>>

::Quest_MQ002_Apothus_2nd_Form_Encounter_PlayerLoses <600,8600>
<<print setup.displayEncounterImage($CharacterSheet_Apothus_2nd_Form.info.picture)>>






\<<run setup.choice("[[->Quest_MQ002_Apothus_2nd_Form_Encounter_PlayerLoses_2]]");>>

::Quest_MQ002_Apothus_2nd_Form_Encounter_PlayerLoses_2 <725,8600>
<<print setup.displayEncounterImage($CharacterSheet_Apothus_2nd_Form.info.picture)>>






""

\<<run setup.choice("[[->Quest_MQ002_Manor_MainHall]]");>>
\<<run setup.choice("[[->Quest_MQ002_Apothus_2nd_Form_Encounter_PlayerLoses_01]]");>>

::Quest_MQ002_Apothus_2nd_Form_Encounter_PlayerLoses_01 <850,8600>
<<print setup.displayEncounterImage($CharacterSheet_Apothus_2nd_Form.info.picture)>>

 





\<<run setup.choice("[[->Quest_MQ002_Apothus_2nd_Form_Encounter_PlayerLoses_01_2]]");>>

::Quest_MQ002_Apothus_2nd_Form_Encounter_PlayerLoses_01_2 <975,8600>
<<print setup.displayEncounterImage($CharacterSheet_Apothus_2nd_Form.info.picture)>>






"" 

\<<run setup.choice("[[->Quest_MQ002_Apothus_2nd_Form_Encounter_PlayerLoses_02]]");>>

::Quest_MQ002_Apothus_2nd_Form_Encounter_PlayerLoses_02 <1100,8600>
<<print setup.displayEncounterImage($CharacterSheet_Apothus_2nd_Form.info.picture)>>





\<<run setup.choice("[[->Quest_MQ002_Apothus_2nd_Form_Encounter_PlayerLoses_02_2]]");>>

::Quest_MQ002_Apothus_2nd_Form_Encounter_PlayerLoses_02_2 <1225,8600>
<<print setup.displayEncounterImage($CharacterSheet_Apothus_2nd_Form.info.picture)>>

"" 




\<<run setup.choice("[[->Quest_MQ002_Apothus_2nd_Form_Encounter_PlayerLoses_03]]");>>

::Quest_MQ002_Apothus_2nd_Form_Encounter_PlayerLoses_03 <100,8725>
<<print setup.displayEncounterImage($CharacterSheet_Apothus_2nd_Form.info.picture)>>





\<<run setup.choice("[[->Quest_MQ002_Apothus_2nd_Form_Encounter_PlayerLoses_03_2]]");>>

::Quest_MQ002_Apothus_2nd_Form_Encounter_PlayerLoses_03_2 <225,8725>
<<print setup.displayEncounterImage($CharacterSheet_Apothus_2nd_Form.info.picture)>>







""

<<SymbioteName>>
<<SymbioteColor>>

\<<run setup.choice("[[->Quest_MQ002_Apothus_2nd_Form_Encounter_PlayerLoses_04]]");>>

::Quest_MQ002_Apothus_2nd_Form_Encounter_PlayerLoses_04 <350,8725>
<<print setup.displayEncounterImage($CharacterSheet_Apothus_2nd_Form.info.picture)>>
"!!"<<SymbioteName>>




"!"

\<<run setup.choice("[[->Quest_MQ002_Apothus_2nd_Form_Encounter_PlayerLoses_05]]");>>

::Quest_MQ002_Apothus_2nd_Form_Encounter_PlayerLoses_05 <475,8725>
<<print setup.displayEncounterImage($CharacterSheet_Apothus_2nd_Form.info.picture)>>







\<<run setup.choice("[[->Quest_MQ002_Apothus_2nd_Form_Encounter_PlayerLoses_05_2]]");>>

::Quest_MQ002_Apothus_2nd_Form_Encounter_PlayerLoses_05_2 <600,8725>
<<print setup.displayEncounterImage($CharacterSheet_Apothus_2nd_Form.info.picture)>>

 

 
<<SymbioteName>>


"" 

\<<run setup.choice("[[->Quest_MQ002_Apothus_2nd_Form_Encounter_PlayerLoses_06]]");>>

::Quest_MQ002_Apothus_2nd_Form_Encounter_PlayerLoses_06 <725,8725>
<<print setup.displayEncounterImage($CharacterSheet_Apothus_2nd_Form.info.picture)>>






\<<run setup.choice("[[->Quest_MQ002_Apothus_2nd_Form_Encounter_PlayerLoses_07]]");>>

::Quest_MQ002_Apothus_2nd_Form_Encounter_PlayerLoses_07 <850,8725>
 



 






\<<run setup.triggerEnding("Ending_OneWithApothus")>>
\<<run setup.choice("[[->Ending]]");>>

::Quest_MQ002_Apothus_2nd_Form_Encounter_PlayerWins <975,8725>
<<print setup.displayEncounterImage($CharacterSheet_Apothus_2nd_Form.info.picture)>>


"" 









\<<run setup.choice("[[->Quest_MQ002_Apothus_2nd_Form_Encounter_PlayerWins_2]]");>>

::Quest_MQ002_Apothus_2nd_Form_Encounter_PlayerWins_2 <1100,8725>
<<print setup.displayEncounterImage($CharacterSheet_Apothus_2nd_Form.info.picture)>>

""

 






"!!!!" 

\<<run setup.choice("[[->Quest_MQ002_Apothus_2nd_Form_Encounter_PlayerWins_2_2]]");>>

::Quest_MQ002_Apothus_2nd_Form_Encounter_PlayerWins_2_2 <1225,8725>
<<print setup.displayEncounterImage($CharacterSheet_Apothus_2nd_Form.info.picture)>>





"!" 

\<<run setup.choice("[[->Quest_MQ002_Apothus_2nd_Form_Encounter_PlayerWins_3]]");>>

::Quest_MQ002_Apothus_2nd_Form_Encounter_PlayerWins_3 <100,8850>
<<print setup.displayEncounterImage($CharacterSheet_Apothus_2nd_Form.info.picture)>>








\<<run setup.choice("[[->Quest_MQ002_Apothus_2nd_Form_Encounter_PlayerWins_3_2]]");>>

::Quest_MQ002_Apothus_2nd_Form_Encounter_PlayerWins_3_2 <225,8850>
<<print setup.displayEncounterImage($CharacterSheet_Apothus_2nd_Form.info.picture)>>







\<<run setup.choice("[[->Quest_MQ002_Apothus_2nd_Form_Encounter_PlayerWins_4]]");>>

::Quest_MQ002_Apothus_2nd_Form_Encounter_PlayerWins_4 <350,8850>






\<<run setup.choice("[[->Quest_MQ002_Apothus_2nd_Form_Encounter_PlayerWins_5]]");>>

::Quest_MQ002_Apothus_2nd_Form_Encounter_PlayerWins_5 <475,8850>
"" 








\<<run setup.choice("[[->Quest_MQ002_Apothus_2nd_Form_Encounter_PlayerWins_6]]");>>

::Quest_MQ002_Apothus_2nd_Form_Encounter_PlayerWins_6 <600,8850>


 

"" 

\<<run setup.choice("[[->Quest_MQ002_Apothus_2nd_Form_Encounter_PlayerWins_7]]");>>

::Quest_MQ002_Apothus_2nd_Form_Encounter_PlayerWins_7 <725,8850>
 








\<<run setup.choice("[[->Quest_MQ002_Apothus_2nd_Form_Encounter_PlayerWins_8]]");>>

::Quest_MQ002_Apothus_2nd_Form_Encounter_PlayerWins_8 <850,8850>




\<<run setup.choice("[[->Quest_MQ002_Apothus_2nd_Form_Encounter_PlayerWins_9]]");>>

::Quest_MQ002_Apothus_2nd_Form_Encounter_PlayerWins_9 <975,8850>






\<<run setup.completeAchievement("Achievement_IncompleteMemories");>>
\<<run setup.choice("[[->Ending]]");>>

::Encounter_Intro_Doppleganger <1100,8850>


::Encounter_Start_Doppleganger <1225,8850>


::Doppleganger_Intro_Corrupted <100,8975>






\<<run setup.choice("[[->Doppleganger_Intro_Corrupted_2]]");>>

::Doppleganger_Intro_Corrupted_2 <225,8975>

<<print setup.processFlavours($CharacterSheet_Doppleganger, "@[all| cocks| noverb]")>>

<<print setup.processFlavours($CharacterSheet_Doppleganger, "@[all|cocks|noverb]")>> 

""

\<<run setup.choice("[[->Doppleganger_Intro_Corrupted_3]]");>>

::Doppleganger_Intro_Corrupted_3 <350,8975>
 




\<<run setup.choice("[[->Doppleganger_Intro_Corrupted_4]]");>>

::Doppleganger_Intro_Corrupted_4 <475,8975>


 <<print setup.processFlavours($CharacterSheet_Doppleganger, "@[all|cocks|noverb]")>>




<<print setup.getFightStartPassages($CharacterSheet_Doppleganger)>>

::Doppleganger_Intro_Pure <600,8975>





\<<run setup.choice("[[->Doppleganger_Intro_Pure_2]]");>>

::Doppleganger_Intro_Pure_2 <725,8975>



""




\<<run setup.choice("[[->Doppleganger_Intro_Pure_3]]");>>

::Doppleganger_Intro_Pure_3 <850,8975>





<<print setup.getFightStartPassages($CharacterSheet_Doppleganger)>>

::Encounter_Loss_Doppleganger <975,8975>
<<print setup.getFightReward($CharacterSheet_Doppleganger, true)>>

<<include setup.getNextNarativeEventPassage(setup.StorySheet_Doppleganger.postFightPassagesLoss)>>

::Doppleganger_Loss_Pure <1100,8975>





""



\<<run setup.choice("[[->Doppleganger_Loss_Pure_Leave]]");>>
\<<run setup.choice("[[->Doppleganger_Loss_Pure_2]]");>>

::Doppleganger_Loss_Pure_Leave <1225,8975>





""

\<<run setup.choice("[[->WestWing_MirrorRoom_Exit]]");>>

::Doppleganger_Loss_Pure_2 <100,9100>

<<print setup.processFlavours($CharacterSheet_Doppleganger, "@[all|cocks|noverb]")>>

<<print setup.processFlavours($CharacterSheet_Doppleganger, "@[all|cocks|noverb]")>>

""

\<<run setup.choice("[[

::Doppleganger_Loss_Pure_3 <225,9100>
\<<run setup.playRealizationPackage(["CharacterSheet_Doppleganger", "CharacterSheet_Player"], 1)>>



""

\<<run setup.choice("[[->Doppleganger_Loss_Pure_4]]");>>

::Doppleganger_Loss_Pure_4 <350,9100>
\<<run setup.playRealizationPackage(["CharacterSheet_Doppleganger", "CharacterSheet_Player"], 1)>>





\<<run setup.choice("[[->Doppleganger_Loss_Pure_4_2]]");>>

::Doppleganger_Loss_Pure_4_2 <475,9100>
\<<run setup.playRealizationPackage(["CharacterSheet_Doppleganger", "CharacterSheet_Player"], 2)>>

""




\<<run setup.choice("[[->Doppleganger_Loss_Pure_4_3]]");>>

::Doppleganger_Loss_Pure_4_3 <600,9100>
\<<run setup.playRealizationPackage(["CharacterSheet_Doppleganger", "CharacterSheet_Player"], 3)>>






"!"




\<<run setup.choice("[[->Doppleganger_Loss_Pure_4_4]]");>>

::Doppleganger_Loss_Pure_4_4 <725,9100>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 3)>>
\<<run setup.playRealizationPackage(["CharacterSheet_Doppleganger"], 4)>>




""




\<<run setup.choice("[[->Doppleganger_Loss_Pure_5]]");>>

::Doppleganger_Loss_Pure_5 <850,9100>
\<<run setup.playRealizationPackage(["CharacterSheet_Doppleganger", "CharacterSheet_Player"], 4)>>







\<<run setup.choice("[[->Doppleganger_Loss_Pure_6]]");>>

::Doppleganger_Loss_Pure_6 <975,9100>
\<<run setup.playRealizationPackage(["CharacterSheet_Doppleganger", "CharacterSheet_Player"], 4)>>






\<<run setup.choice("[[->Doppleganger_Loss_Pure_7]]");>>

::Doppleganger_Loss_Pure_7 <1100,9100>
\<<run setup.stopRealizationPackages(["CharacterSheet_Player", "CharacterSheet_Doppleganger"])>>




\<<run setup.choice("[[->WestWing_MirrorRoom_Exit]]");>>

::Doppleganger_Loss_Corrupted <1225,9100>
<<print setup.processFlavours($CharacterSheet_Doppleganger, "@[all|arms|noverb]")>>





\<<run setup.choice("[[->Doppleganger_Loss_Corrupted_2]]");>>
\<<run setup.choice("[[->Doppleganger_Loss_Corrupted_Leave]]");>>

::Doppleganger_Loss_Corrupted_Leave <100,9225>




\<<run setup.choice("[[->WestWing_MirrorRoom_Exit]]");>>

::Doppleganger_Loss_Corrupted_2 <225,9225>
\<<run setup.playRealizationPackage(["CharacterSheet_Doppleganger", "CharacterSheet_Player"], 1)>>

<<print setup.processFlavours($CharacterSheet_Doppleganger, "@[all|cocks|noverb]")>>

<<print setup.processFlavours($CharacterSheet_Doppleganger, "@[all|cocks|noverb]")>>


<span class="glitch nyx" data-text="  ">""</span>

\<<run setup.choice("[[->Doppleganger_Loss_Corrupted_3]]");>>

::Doppleganger_Loss_Corrupted_3 <350,9225>
\<<run setup.playRealizationPackage(["CharacterSheet_Doppleganger", "CharacterSheet_Player"], 2)>>
<<print setup.processFlavours($CharacterSheet_Player, "@[all|eyes|noverb]")>>


<span class="glitch nyx" data-text="">""</span>

<<print setup.processFlavours($CharacterSheet_Doppleganger, "@[all|cocks|noverb]")>> 
<<print setup.processFlavours($CharacterSheet_Doppleganger, "@[all|cocks|noverb]")>>

\<<run setup.choice("[[->Doppleganger_Loss_Corrupted_4]]");>>

::Doppleganger_Loss_Corrupted_4 <475,9225>
\<<run setup.playRealizationPackage(["CharacterSheet_Doppleganger", "CharacterSheet_Player"], 3)>>

<<print setup.processFlavours($CharacterSheet_Doppleganger, "@[all|cocks|noverb]")>>

<span class="glitch nyx" data-text="">""</span>

<<print setup.processFlavours($CharacterSheet_Doppleganger, "@[all|cocks|noverb]")>><<print setup.processFlavours($CharacterSheet_Doppleganger, "@[all|pecs|noverb]")>>


<span class="glitch nyx" data-text="">"HMMMMMM"</span>

<<print setup.processFlavours($CharacterSheet_Player, "@[all|cocks|noverb]")>>

\<<run setup.choice("[[->Doppleganger_Loss_Corrupted_5]]");>>

::Doppleganger_Loss_Corrupted_5 <600,9225>
\<<run setup.playRealizationPackage(["CharacterSheet_Doppleganger", "CharacterSheet_Player"], 4)>>


<span class="glitch nyx" data-text="  ">""</span>

 





<<print setup.processFlavours($CharacterSheet_Player, "@[all|heads|noverb]")>>

\<<run setup.choice("[[->Doppleganger_Loss_Corrupted_6]]");>>

::Doppleganger_Loss_Corrupted_6 <725,9225>
\<<run setup.stopRealizationPackages(["CharacterSheet_Player", "CharacterSheet_Doppleganger"])>>


 




\<<run setup.choice("[[->WestWing_MirrorRoom_Exit]]");>>

::Encounter_Win_Doppleganger <850,9225>
<<print setup.getFightReward($CharacterSheet_Doppleganger)>>

<<include setup.getNextNarativeEventPassage(setup.StorySheet_Doppleganger.postFightPassagesWin)>>

::Doppleganger_Win_Pure <975,9225>





\<<run setup.choice("[[->Doppleganger_Win_Pure_2]]");>>

::Doppleganger_Win_Pure_2 <1100,9225>





""

\<<run setup.choice("[[->Doppleganger_Win_Pure_3]]");>>

::Doppleganger_Win_Pure_3 <1225,9225>


doppelganger

<<print setup.processFlavours($CharacterSheet_Doppleganger, "@[all|eyes|noverb]")>><<print setup.processFlavours($CharacterSheet_Doppleganger, "@[all|cocks|noverb]")>>

\<<print setup.clearWestWingRoom("WestWing_MirrorRoom")>>

\<<run setup.choice("[[->Doppleganger_Win_Pure_Fuck]]");>>
\<<run setup.choice("[[->Doppleganger_Win_Pure_Leave]]");>>

::Doppleganger_Win_Pure_Fuck <100,9350>
<<print setup.processFlavours($CharacterSheet_Doppleganger, "@[all|heads|noverb]")>>
<<print setup.processFlavours($CharacterSheet_Doppleganger, "@[all|eyes|noverb]")>>

""





\<<run setup.choice("[[->Doppleganger_Win_Pure_Fuck_2]]");>>

::Doppleganger_Win_Pure_Fuck_2 <225,9350>
<<print setup.processFlavours($CharacterSheet_Player, "@[all|cocks|noverb]")>> 




""



\<<run setup.choice("[[->Doppleganger_Win_Pure_Fuck_3]]");>>

::Doppleganger_Win_Pure_Fuck_3 <350,9350>
\<<run setup.playRealizationPackage(["CharacterSheet_Doppleganger", "CharacterSheet_Player"], 1)>>
""




"" 

\<<run setup.choice("[[->Doppleganger_Win_Pure_Fuck_4]]

::Doppleganger_Win_Pure_Fuck_4 <475,9350>
\<<run setup.playRealizationPackage(["CharacterSheet_Doppleganger", "CharacterSheet_Player"], 1)>>
<<print setup.processFlavours($CharacterSheet_Player, "@[all|cocks|noverb]")>>
<<print setup.processFlavours($CharacterSheet_Player, "@[all|cocks|noverb]")>>

""



\<<run setup.choice("[[->Doppleganger_Win_Pure_Fuck_5]]");>>

::Doppleganger_Win_Pure_Fuck_5 <600,9350>
\<<run setup.playRealizationPackage(["CharacterSheet_Doppleganger", "CharacterSheet_Player"], 2)>>

<<print setup.processFlavours($CharacterSheet_Player, "@[all|cocks|noverb]")>>


<<print setup.processFlavours($CharacterSheet_Doppleganger, "@[all|cocks|noverb]")>>'

\<<run setup.choice("[[->Doppleganger_Win_Pure_Fuck_6]]");>>

::Doppleganger_Win_Pure_Fuck_6 <725,9350>
\<<run setup.playRealizationPackage(["CharacterSheet_Doppleganger", "CharacterSheet_Player"], 3)>>



""

<<print setup.processFlavours($CharacterSheet_Player, "@[all|cocks|noverb]")>>


<<print setup.processFlavours($CharacterSheet_Player, "@[all|hands|noverb]")>> 

\<<run setup.choice("[[->Doppleganger_Win_Pure_Fuck_7]]");>>

::Doppleganger_Win_Pure_Fuck_7 <850,9350>
\<<run setup.playRealizationPackage(["CharacterSheet_Doppleganger", "CharacterSheet_Player"], 4)>>





\<<run setup.choice("[[->Doppleganger_Win_Pure_Fuck_8]]");>>

::Doppleganger_Win_Pure_Fuck_8 <975,9350>
\<<run setup.playRealizationPackage(["CharacterSheet_Doppleganger", "CharacterSheet_Player"], 1)>>


 


""

\<<run setup.choice("[[->Doppleganger_Win_Pure_Fuck_9]]");>>

::Doppleganger_Win_Pure_Fuck_9 <1100,9350>
\<<run setup.stopRealizationPackages(["CharacterSheet_Player", "CharacterSheet_Doppleganger"])>>




\<<run $CharacterSheet_Player.applyAbilityRuntimeData(setup.Ability_Defiler);>>
""

\<<run setup.choice("[[->WestWing_MirrorRoom_Exit]]");>>

::Doppleganger_Win_Pure_Leave <1225,9350>




\<<run setup.choice("[[->WestWing_MirrorRoom_Exit]]");>>

::Doppleganger_Win_Corrupted <100,9475>



<span class="glitch nyx" data-text="  ">""</span>


<<print setup.processFlavours($CharacterSheet_Doppleganger, "@[all|arms|noverb]")>>

\<<run setup.choice("[[->Doppleganger_Win_Corrupted_2]]");>>

::Doppleganger_Win_Corrupted_2 <225,9475>

<<print setup.processFlavours($CharacterSheet_Doppleganger, "@[all|cocks|noverb]")>>, 




\<<run setup.choice("[[->Doppleganger_Win_Corrupted_3]]");>>

::Doppleganger_Win_Corrupted_3 <350,9475>





\<<print setup.clearWestWingRoom("WestWing_MirrorRoom")>>

\<<run setup.choice("[[->Doppleganger_Win_Corrupted_Leave]]");>>
\<<run setup.choice("[[->Doppleganger_Win_Corrupted_Dominate]]");>>

::Doppleganger_Win_Corrupted_Leave <475,9475>





\<<run setup.choice("[[->WestWing_MirrorRoom_Exit]]");>>

::Doppleganger_Win_Corrupted_Dominate <600,9475>
\<<run setup.playRealizationPackage(["CharacterSheet_Doppleganger", "CharacterSheet_Player"], 1)>>



<span class="glitch nyx" data-text="  ">""</span>

<<print setup.processFlavours($CharacterSheet_Player, "@[all|cocks|noverb]")>>

\<<run setup.choice("[[->Doppleganger_Win_Corrupted_Dominate_2]]");>>

::Doppleganger_Win_Corrupted_Dominate_2 <725,9475>
\<<run setup.playRealizationPackage(["CharacterSheet_Doppleganger", "CharacterSheet_Player"], 1)>>

<span class="glitch nyx" data-text="  ">""</span>


<<print setup.processFlavours($CharacterSheet_Doppleganger, "@[all|cocks|noverb]")>>

\<<run setup.choice("[[->Doppleganger_Win_Corrupted_Dominate_3]]");>>

::Doppleganger_Win_Corrupted_Dominate_3 <850,9475>
\<<run setup.playRealizationPackage(["CharacterSheet_Doppleganger", "CharacterSheet_Player"], 2)>>




<span class="glitch nyx" data-text="    ">""</span>



\<<run setup.choice("[[->Doppleganger_Win_Corrupted_Dominate_4]]");>>

::Doppleganger_Win_Corrupted_Dominate_4 <975,9475>
\<<run setup.playRealizationPackage(["CharacterSheet_Doppleganger", "CharacterSheet_Player"], 2)>>





<span class="glitch nyx" data-text="">""</span>

\<<run setup.choice("[[->Doppleganger_Win_Corrupted_Dominate_5]]");>>

::Doppleganger_Win_Corrupted_Dominate_5 <1100,9475>
\<<run setup.playRealizationPackage(["CharacterSheet_Doppleganger", "CharacterSheet_Player"], 3)>>
<<print setup.processFlavours($CharacterSheet_Doppleganger, "@[all|cocks|one=noverb]")>> 


<span class="glitch nyx" data-text="">""</span>






\<<run setup.choice("[[->Doppleganger_Win_Corrupted_Dominate_6]]");>>

::Doppleganger_Win_Corrupted_Dominate_6 <1225,9475>
\<<run setup.playRealizationPackage(["CharacterSheet_Doppleganger", "CharacterSheet_Player"], 4)>>



<span class="glitch nyx" data-text="">""</span>




\<<run setup.choice("[[->Doppleganger_Win_Corrupted_Dominate_7]]");>>

::Doppleganger_Win_Corrupted_Dominate_7 <100,9600>
\<<run setup.playRealizationPackage(["CharacterSheet_Doppleganger", "CharacterSheet_Player"], 1)>>





\<<run setup.choice("[[->Doppleganger_Win_Corrupted_Dominate_8]]");>>

::Doppleganger_Win_Corrupted_Dominate_8 <225,9600>
\<<run setup.stopRealizationPackages(["CharacterSheet_Player", "CharacterSheet_Doppleganger"])>>




\<<run $CharacterSheet_Player.applyAbilityRuntimeData(setup.Ability_Disciplined);>>
""

\<<run setup.choice("[[->WestWing_MirrorRoom_Exit]]");>>

::Quest_MQ002_DragonMonkEncounter_FightStart <350,9600>


::Quest_MQ002_DragonMonkEncounter_FightIntro <475,9600>
\<<set $CharacterSheet_MQ002_DragonMonk.quest.met = true>>
<<print setup.getFightStartPassages($CharacterSheet_MQ002_DragonMonk)>>

::Quest_MQ002_DragonMonkEncounter_PlayerWins <600,9600>




<<print setup.getFightReward($CharacterSheet_MQ002_DragonMonk)>>
\<<set $CharacterSheet_MQ002_DragonMonk.quest.beaten = true>>
\<<run setup.choice("[[->Quest_MQ002_DragonMonkEncounter_PlayerWins_2]]");>>

::Quest_MQ002_DragonMonkEncounter_PlayerWins_2 <725,9600>

\<<if setup.MQ002_Manor_IsCorruptedInManor($CharacterSheet_Player)>>
<<print setup.processFlavours($CharacterSheet_Player, "@[all|tongues|noverb]")>>
\<</if>>

""



""

""





\<<run setup.breakOath("drenth")>>
\<<run setup.choice("[[->Quest_MQ002_DragonMonkEncounter_PlayerWins_3]]");>>

::Quest_MQ002_DragonMonkEncounter_PlayerWins_3 <850,9600>
 



\<<print setup.clearWestWingRoom("WestWing_DrenthRoom")>>

\<<run setup.choice("[[->Quest_MQ002_Manor_DragonRoom]]");>>

::Quest_MQ002_DragonMonkEncounter_PlayerLoses <975,9600>






<<print setup.getFightReward($CharacterSheet_MQ002_DragonMonk, true)>>

\<<run setup.choice("[[->Death_NyxDungeon]]");>>

::Encounter_Start_Ethrex <1100,9600>


::Encounter_Intro_Ethrex_Container <1225,9600>
<<include setup.getNextNarativeEventPassage(setup.StorySheet_Ethrex.encounterPassages)>>

::Encounter_Win_Ethrex_Container <100,9725>
<<include setup.getNextNarativeEventPassage(setup.StorySheet_Ethrex.postFightPassagesWin)>>

::Encounter_Loss_Ethrex_Container <225,9725>
<<include setup.getNextNarativeEventPassage(setup.StorySheet_Ethrex.postFightPassagesLoss)>>

::Encounter_Intro_Ethrex_FinalRela <350,9725>






\<<run setup.choice("[[->Encounter_Intro_Ethrex_FinalRela_2]]");>>
\<<run setup.choice("[[->Village]]");>>

::Encounter_Intro_Ethrex_FinalRela_2 <475,9725>


<<print setup.getLength(setup.getStatValue($CharacterSheet_Jorm, "height"))>>



\<<run setup.choice("[[->Encounter_Intro_Ethrex_FinalRela_3]]");>>

::Encounter_Intro_Ethrex_FinalRela_3 <600,9725>






<<print setup.getFightStartPassages($CharacterSheet_Ethrex)>>

::Encounter_Ethrex_FinalRela_Win <725,9725>









\<<run setup.choice("[[->Encounter_Ethrex_FinalRela_Win_2]]");>>

::Encounter_Ethrex_FinalRela_Win_2 <850,9725>





\<<run setup.choice("[[->Encounter_Ethrex_FinalRela_Win_3]]");>>

::Encounter_Ethrex_FinalRela_Win_3 <975,9725>





\<<run setup.choice("[[->Encounter_Ethrex_FinalRela_Win_4]]");>>

::Encounter_Ethrex_FinalRela_Win_4 <1100,9725>






\<<run setup.choice("[[->Encounter_Ethrex_FinalRela_Win_5]]");>>

::Encounter_Ethrex_FinalRela_Win_5 <1225,9725>





\<<run setup.choice("[[->Encounter_Ethrex_FinalRela_Win_6]]");>>

::Encounter_Ethrex_FinalRela_Win_6 <100,9850>
<<include setup.getNextNarativeEventPassage(setup.StorySheet_Ethrex.encounterFinalTeammateJoin)>>

::Encounter_Ethrex_FinalRela_Win_Solo <225,9850>












\<<run setup.choice("[[->Encounter_Ethrex_FinalRela_Win_6_Accept]]");>>
\<<run setup.choice("[[->Encounter_Ethrex_FinalRela_Win_6_Refuse]]");>>

::Encounter_Ethrex_FinalRela_Win_6_Accept <350,9850>
\<<set $CharacterSheet_Ethrex.quest.joinedTeam = true>>
\<<run setup.ethrexJoinsPlayer()>>
""



\<<run setup.choice("[[->Village]]");>>

::Encounter_Ethrex_FinalRela_Win_6_Refuse <475,9850>





\<<run setup.choice("[[->Encounter_Ethrex_FinalRela_Win_Leave_2]]");>>

::Encounter_Ethrex_FinalRela_Win_Leave_2 <600,9850>





\<<run setup.choice("[[->Village]]");>>

::Encounter_Intro_Ethrex <725,9850>







\<<run setup.choice("[[->Encounter_Intro_Ethrex_2]]");>>
\<<run setup.choice("[[->Village]]");>>

::Encounter_Intro_Ethrex_2 <850,9850>
\<<set $CharacterSheet_Ethrex.quest.met = true>>
\<<set $CharacterSheet_Ethrex.info.known = setup.EncounterKnownState.KNOWN>>







\<<run setup.choice("[[->Encounter_Intro_Ethrex_3]]");>>

::Encounter_Intro_Ethrex_3 <975,9850>


\<<if setup.sizeNormalPersoncomparison($CharacterSheet_Ethrex) >= setup.Comparators.REACHES_WAIST>>
<<print setup.getLength(setup.getStatValue($CharacterSheet_Ethrex, "height"))>>

\<<else>>

\<</if>>

\<<run setup.choice("[[->Encounter_Intro_Ethrex_4]]");>>

::Encounter_Intro_Ethrex_4 <1100,9850>



<<include setup.getNextNarativeEventPassage(setup.StorySheet_Ethrex.encounterIntroFirstTimeFlavour)>>

\<<run setup.choice("[[->Encounter_Intro_Ethrex_5]]");>>

::Encounter_Intro_Ethrex_Default <1225,9850>
""
\

::Encounter_Intro_Ethrex_Giant <100,9975>
""
\

::Encounter_Intro_Ethrex_Corrupt <225,9975>
""
\

::Encounter_Intro_Ethrex_5 <350,9975>







<<print setup.getFightStartPassages($CharacterSheet_Ethrex)>>

::Encounter_Intro_Ethrex_HighRela <475,9975>





\<<run setup.choice("[[->Encounter_Intro_Ethrex_HighRela_2]]");>>
\<<run setup.choice("[[->Village]]");>>

::Encounter_Intro_Ethrex_HighRela_2 <600,9975>






\<<run setup.choice("[[->Encounter_Intro_Ethrex_HighRela_3]]");>>

::Encounter_Intro_Ethrex_HighRela_3 <725,9975>


""



<<print setup.getFightStartPassages($CharacterSheet_Ethrex)>>

::Encounter_Ethrex_HighRela_Win <850,9975>









\<<run setup.choice("[[->Encounter_Ethrex_HighRela_Win_2]]");>>

::Encounter_Ethrex_HighRela_Win_2 <975,9975>





\<<run setup.choice("[[->Encounter_Ethrex_HighRela_Win_3]]");>>

::Encounter_Ethrex_HighRela_Win_3 <1100,9975>






\<<if $Essence >= setup.getDemonicTFCost($CharacterSheet_Player)>>
    <<print "[[("+setup.getDemonicTFCost($CharacterSheet_Player)+" Essence)->"+setup.getDemonicTFPassage($CharacterSheet_Player)+"][$Essence -= "+setup.getDemonicTFCost($CharacterSheet_Player)+"]]">>
\<<else>>
    <<print "<span class = 'inactive'>[[("+setup.getDemonicTFCost($CharacterSheet_Player)+" Essence)->"+setup.getDemonicTFPassage($CharacterSheet_Player)+"]]</span>">>
\<</if>>
[[->Encounter_Intro_Ethrex_LowRela_Win_Leave]]

::Encounter_Ethrex_HighRela_Win_Leave <1225,9975>







\<<run setup.choice("[[->Encounter_Ethrex_HighRela_Win_Leave_2]]");>>

::Encounter_Ethrex_HighRela_Win_Leave_2 <100,10100>





\<<run setup.choice("[[->Village]]");>>

::Transformation_Incubus_Level1_1 <225,10100>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 1)>>









\<<run setup.choice("[[->Transformation_Incubus_Level1_1_2]]");>>

::Transformation_Incubus_Level1_1_2 <350,10100>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 1)>>







\<<run setup.choice("[[->Transformation_Incubus_Level1_1_3]]");>>

::Transformation_Incubus_Level1_1_3 <475,10100>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 1)>>







\<<run setup.choice("[[->Transformation_Incubus_Level1_2]]");>>

::Transformation_Incubus_Level1_2 <600,10100>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 2)>>



""




\<<run setup.choice("[[->Transformation_Incubus_Level1_2_1]]");>>

::Transformation_Incubus_Level1_2_1 <725,10100>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 2)>>








\<<run setup.choice("[[->Transformation_Incubus_Level1_2_2]]");>>

::Transformation_Incubus_Level1_2_2 <850,10100>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 2)>>
"You made the right choice."





\<<run setup.choice("[[->Transformation_Incubus_Level1_2_3]]");>>

::Transformation_Incubus_Level1_2_3 <975,10100>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 2)>>






\<<run setup.choice("[[->Transformation_Incubus_Level1_3]]");>>

::Transformation_Incubus_Level1_3 <1100,10100>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 3)>>






\<<run setup.choice("[[->Transformation_Incubus_Level1_3_1]]");>>

::Transformation_Incubus_Level1_3_1 <1225,10100>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 3)>>




<<print setup.getLength(setup.getStatValue($CharacterSheet_Player, "cock"))>>


\<<run setup.choice("[[->Transformation_Incubus_Level1_3_2]]");>>

::Transformation_Incubus_Level1_3_2 <100,10225>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 3)>>

<<print setup.getHornsSize($CharacterSheet_Player)>>



\<<run setup.changeLimb($CharacterSheet_Player.info.anatomy, "horns", setup.RacePool.INCUBUS)>>



\<<run setup.choice("[[->Transformation_Incubus_Level1_4]]");>>

::Transformation_Incubus_Level1_4 <225,10225>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 4)>>
\<<run $CharacterSheet_Player.applyAbilityRuntimeData(setup.Ability_DemonicCorruption);>>
\<<run setup.upgradeEthrexStats(1)>>


<<print setup.getLength(setup.getStatValue($CharacterSheet_Player, "cock"))>>



""



<<print setup.getFightReward($CharacterSheet_Ethrex)>>

\<<run setup.choice("[[->Transformation_Incubus_Level1_5]]");>>

::Transformation_Incubus_Level1_5 <350,10225>
\<<run setup.stopRealizationPackages(["CharacterSheet_Player"])>>






""


\<<run setup.changeLimb($CharacterSheet_Player.info.anatomy, "teeths", setup.RacePool.INCUBUS)>>
\<<run setup.changeLimb($CharacterSheet_Player.info.anatomy, "jaws", setup.RacePool.INCUBUS)>>
\<<run setup.changeLimb($CharacterSheet_Player.info.anatomy, "horns", setup.RacePool.INCUBUS)>>
\<<run setup.changeLimb($CharacterSheet_Player.info.anatomy, "tongues", setup.RacePool.INCUBUS)>>
\<<run setup.colourLimb($CharacterSheet_Player.info.anatomy, "tongues", setup.ColourPool.PURPLE)>>
\<<run setup.changeLimb($CharacterSheet_Player.info.anatomy, "eyes", setup.RacePool.INCUBUS)>>
\<<run setup.colourLimb($CharacterSheet_Player.info.anatomy, "eyes", setup.ColourPool.PURPLE)>>
\<<run setup.changeLimb($CharacterSheet_Player.info.anatomy, "cocks", setup.RacePool.INCUBUS)>>
\<<run setup.colourLimb($CharacterSheet_Player.info.anatomy, "cocks", setup.ColourPool.PURPLE)>>
\<<run setup.changeLimb($CharacterSheet_Player.info.anatomy, "balls", setup.RacePool.INCUBUS)>>
\<<run setup.colourLimb($CharacterSheet_Player.info.anatomy, "balls", setup.ColourPool.PURPLE)>>
\<<run setup.choice("[[Return Home->Village]]");>>

::Transformation_Incubus_Level2_1 <475,10225>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 1)>>





""



\<<run setup.choice("[[->Transformation_Incubus_Level2_1_1]]");>>

::Transformation_Incubus_Level2_1_1 <600,10225>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 1)>>

<<print setup.getLength(setup.getStatValue($CharacterSheet_Ethrex, "height"))>>



"  "

\<<run setup.choice("[[Grant him Essense->Transformation_Incubus_Level2_1_2]]");>>

::Transformation_Incubus_Level2_1_2 <725,10225>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 1)>>



""




<<print setup.getLength(setup.applyGrowth($CharacterSheet_Ethrex, "cock", 8))>>

\<<run setup.choice("[[->Transformation_Incubus_Level2_2]]");>>

::Transformation_Incubus_Level2_2 <850,10225>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 2)>>


""




\<<run setup.choice("[[->Transformation_Incubus_Level2_2_1]]");>>

::Transformation_Incubus_Level2_2_1 <975,10225>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 2)>>



""

\<<run setup.choice("[[->Transformation_Incubus_Level2_2_2]]");>>

::Transformation_Incubus_Level2_2_2 <1100,10225>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 2)>>






\<<run setup.choice("[[->Transformation_Incubus_Level2_2_3]]");>>

::Transformation_Incubus_Level2_2_3 <1225,10225>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 2)>>




\<<set setup.applyGrowth($CharacterSheet_Ethrex, "cock", 4)>>
<<print setup.getLength(setup.getStatValue($CharacterSheet_Ethrex, "cock"))>>

\<<run setup.choice("[[->Transformation_Incubus_Level2_3]]");>>

::Transformation_Incubus_Level2_3 <100,10350>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 3)>>







\<<run setup.choice("[[->Transformation_Incubus_Level2_3_1]]");>>

::Transformation_Incubus_Level2_3_1 <225,10350>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 3)>>







\<<run setup.choice("[[->Transformation_Incubus_Level2_4]]");>>

::Transformation_Incubus_Level2_4 <350,10350>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 3)>>







\<<run setup.choice("[[->Transformation_Incubus_Level2_4_1]]");>>

::Transformation_Incubus_Level2_4_1 <475,10350>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 3)>>






\<<run setup.choice("[[->Transformation_Incubus_Level2_4_2]]");>>

::Transformation_Incubus_Level2_4_2 <600,10350>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 4)>>





\<<run setup.choice("[[->Transformation_Incubus_Level2_4_3]]");>>

::Transformation_Incubus_Level2_4_3 <725,10350>
\<<run setup.stopRealizationPackages(["CharacterSheet_Player"])>>



<<print setup.processFlavours($CharacterSheet_Player, "@[all|cocks|noverb]")>>



\<<run setup.choice("[[->Transformation_Incubus_Level2_4_4]]");>>

::Transformation_Incubus_Level2_4_4 <850,10350>


\<<run $CharacterSheet_Player.applyAbilityRuntimeData(setup.Ability_DemonicCorruption);>>
<<print setup.getLength(setup.getStatValue($CharacterSheet_Player, "height"))>><<print setup.getLength(setup.getStatValue($CharacterSheet_Player, "cock"))>>






""
""


<<print setup.getFightReward($CharacterSheet_Ethrex)>>
\<<run setup.upgradeEthrexStats(2)>>
\<<run setup.changeLimb($CharacterSheet_Player.info.anatomy, "arms", setup.RacePool.INCUBUS)>>
\<<run setup.colourLimb($CharacterSheet_Player.info.anatomy, "arms", setup.ColourPool.BLACK)>>
\<<run setup.changeLimb($CharacterSheet_Player.info.anatomy, "hands", setup.RacePool.INCUBUS)>>
\<<run setup.changeLimb($CharacterSheet_Player.info.anatomy, "legs", setup.RacePool.INCUBUS)>>
\<<run setup.colourLimb($CharacterSheet_Player.info.anatomy, "hands", setup.ColourPool.BLACK)>>
\<<run setup.colourLimb($CharacterSheet_Player.info.anatomy, "legs", setup.ColourPool.BLACK)>>
\<<run setup.changeLimb($CharacterSheet_Player.info.anatomy, "tails", setup.RacePool.INCUBUS)>>
\<<run setup.colourLimb($CharacterSheet_Player.info.anatomy, "tails", setup.ColourPool.BLACK)>>

\<<run setup.choice("[[->Village]]");>>

::Transformation_Incubus_Level3_1 <975,10350>
\<<run setup.playSoundActionParams(["action_Suck"], true)>>







\<<run setup.choice("[[->Transformation_Incubus_Level3_1_2]]");>>

::Transformation_Incubus_Level3_1_2 <1100,10350>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 1)>>
<<print setup.getLength(setup.getStatValue($CharacterSheet_Player, "cock"))>> 




\<<run setup.choice("[[->Transformation_Incubus_Level3_1_2_1]]");>>

::Transformation_Incubus_Level3_1_2_1 <1225,10350>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 1)>>








\<<run setup.choice("[[->Transformation_Incubus_Level3_2]]");>>

::Transformation_Incubus_Level3_2 <100,10475>
\<<run setup.playSoundActionParams(["action_Suck"], true)>>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 1)>>







\<<run setup.choice("[[->Transformation_Incubus_Level3_2_1]]");>>

::Transformation_Incubus_Level3_2_1 <225,10475>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 1)>>



\<<run setup.applyGrowth($CharacterSheet_Ethrex, "cock", setup.getStatValue($CharacterSheet_Ethrex, "cock") * 4)>>
""
<<print setup.getLength(setup.getStatValue($CharacterSheet_Ethrex, "cock"))>>

""

"<<print $CharacterSheet_Player.info.name>>"

\<<run setup.choice("[[->Transformation_Incubus_Level3_2_2]]");>>

::Transformation_Incubus_Level3_2_2 <350,10475>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 1)>>



<<print setup.getLength(30)>>.




\<<run setup.choice("[[->Transformation_Incubus_Level3_2_3]]");>>

::Transformation_Incubus_Level3_2_3 <475,10475>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 2)>>
""




""

\<<run setup.choice("[[->Transformation_Incubus_Level3_2_4]]");>>

::Transformation_Incubus_Level3_2_4 <600,10475>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 2)>>
\<<run setup.applyGrowth($CharacterSheet_Ethrex, "height", setup.getStatValue($CharacterSheet_Ethrex, "height") * 1.5)>>
<<print setup.getLength(setup.getStatValue($CharacterSheet_Ethrex, "height"))>><<print setup.getLength(setup.getStatValue($CharacterSheet_Ethrex, "height"))>>





\<<run setup.choice("[[->Transformation_Incubus_Level3_3]]");>>

::Transformation_Incubus_Level3_3 <725,10475>
\<<run setup.stopSoundActions()>>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 3)>>

<<print setup.getLength(setup.getStatValue($CharacterSheet_Ethrex, "cock"))>>






\<<run setup.choice("[[->Transformation_Incubus_Level3_3_1]]");>>

::Transformation_Incubus_Level3_3_1 <850,10475>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 3)>>






\<<run setup.choice("[[->Transformation_Incubus_Level3_3_2]]");>>

::Transformation_Incubus_Level3_3_2 <975,10475>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 3)>>





\<<run setup.choice("[[->Transformation_Incubus_Level3_3_3]]");>>

::Transformation_Incubus_Level3_3_3 <1100,10475>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 4)>>
"   "

<h1>" "</h1>








\<<run setup.choice("[[->Transformation_Incubus_Level3_4]]");>>

::Transformation_Incubus_Level3_4 <1225,10475>
\<<run setup.stopRealizationPackages(["CharacterSheet_Player"]);>>
\<<run $CharacterSheet_Player.applyAbilityRuntimeData(setup.Ability_DemonicCorruption);>>








\<<run setup.choice("[[->Transformation_Incubus_Level3_4_1]]");>>

::Transformation_Incubus_Level3_4_1 <100,10600>







\<<run setup.choice("[[->Transformation_Incubus_Level3_4_2]]");>>

::Transformation_Incubus_Level3_4_2 <225,10600>



\<<run setup.changeLimbNumber($CharacterSheet_Player.info.anatomy, "horns", 2, "add")>>



\<<run setup.choice("[[->Transformation_Incubus_Level3_4_3]]");>>

::Transformation_Incubus_Level3_4_3 <350,10600>





<<print setup.getLength(setup.getStatValue($CharacterSheet_Player, "cock"))>>






\<<run setup.upgradeEthrexStats(3)>>
\<<run setup.transformEntireAnatomy($CharacterSheet_Player.info.anatomy, setup.RacePool.LORD_OF_LUST, true)>>
\<<run setup.colourLimb($CharacterSheet_Player.info.anatomy, "pecs", setup.ColourPool.BLACK)>>
\<<run setup.colourLimb($CharacterSheet_Player.info.anatomy, "heads", setup.ColourPool.BLACK)>>
\<<run setup.colourLimb($CharacterSheet_Player.info.anatomy, "abdominals", setup.ColourPool.BLACK)>>
\<<run setup.colourLimb($CharacterSheet_Player.info.anatomy, "tongues", setup.ColourPool.PURPLE)>>
\<<run setup.colourLimb($CharacterSheet_Player.info.anatomy, "eyes", setup.ColourPool.PURPLE)>>
\<<run setup.colourLimb($CharacterSheet_Player.info.anatomy, "cocks", setup.ColourPool.PURPLE)>>
\<<run setup.colourLimb($CharacterSheet_Player.info.anatomy, "balls", setup.ColourPool.PURPLE)>>
\<<run setup.colourLimb($CharacterSheet_Player.info.anatomy, "arms", setup.ColourPool.BLACK)>>
\<<run setup.colourLimb($CharacterSheet_Player.info.anatomy, "hands", setup.ColourPool.BLACK)>>
\<<run setup.colourLimb($CharacterSheet_Player.info.anatomy, "legs", setup.ColourPool.BLACK)>>
\<<run setup.colourLimb($CharacterSheet_Player.info.anatomy, "tails", setup.ColourPool.BLACK)>>
<<print setup.getFightReward($CharacterSheet_Ethrex)>>

""
""


\<<run setup.choice("[[->Transformation_Incubus_Level3_4_4]]");>>

::Transformation_Incubus_Level3_4_4 <475,10600>







\<<run setup.choice("[[->Village]]");>>

::Encounter_Intro_Ethrex_LowRela <600,10600>





\<<run setup.choice("[[->Encounter_Intro_Ethrex_LowRela_2]]");>>
\<<run setup.choice("[[->Village]]");>>

::Encounter_Intro_Ethrex_LowRela_2 <725,10600>




<<print setup.getLength(setup.getStatValue($CharacterSheet_Ethrex, "cock"))>>

\<<run setup.choice("[[->Encounter_Intro_Ethrex_LowRela_3]]");>>

::Encounter_Intro_Ethrex_LowRela_3 <850,10600>





\<<run setup.choice("[[->Encounter_Intro_Ethrex_LowRela_4]]");>>

::Encounter_Intro_Ethrex_LowRela_4 <975,10600>







<<print setup.getFightStartPassages($CharacterSheet_Ethrex)>>

::Encounter_Loss_Ethrex_0 <1100,10600>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 2)>>






<<include setup.getNextNarativeEventPassage(setup.StorySheet_Ethrex.encounterLossFlavour)>>

\<<run setup.choice("[[->Encounter_Loss_Ethrex_0_1]]");>>

::Encounter_Loss_Ethrex_0_Flavour_LowRela <1225,10600>

\

::Encounter_Loss_Ethrex_0_Flavour_MinorDemon <100,10725>

\

::Encounter_Loss_Ethrex_0_Flavour_MajorDemon <225,10725>

\

::Encounter_Loss_Ethrex_0_Flavour_LordOfLust <350,10725>

\

::Encounter_Loss_Ethrex_0_1 <475,10725>







<<print setup.getLength(setup.applyGrowth($CharacterSheet_Ethrex, "height", 10))>>
<<print setup.getLength(setup.applyGrowth($CharacterSheet_Ethrex, "cock", 12))>>
<<print setup.getLength(setup.applyGrowth($CharacterSheet_Ethrex, "balls", 4))>>



\<<run setup.choice("[[->Encounter_Loss_Ethrex_0_2]]");>>
\<<run setup.choice("[[->Village]]");>>

::Encounter_Loss_Ethrex_0_2 <600,10725>





\<<run setup.choice("[[->Encounter_Loss_Ethrex_1]]");>>

::Encounter_Loss_Ethrex_1 <725,10725>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 3)>>





\<<run setup.choice("[[->Encounter_Loss_Ethrex_1_1]]");>>

::Encounter_Loss_Ethrex_1_1 <850,10725>

 

 


\<<run setup.choice("[[->Encounter_Loss_Ethrex_2]]");>>

::Encounter_Loss_Ethrex_2 <975,10725>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 3)>>






\<<run setup.choice("[[->Encounter_Loss_Ethrex_2_1]]");>>

::Encounter_Loss_Ethrex_2_1 <1100,10725>
<<print setup.getLength(setup.getStatValue($CharacterSheet_Player, "cock") + 31)>>






<<print setup.getLength(setup.applyGrowth($CharacterSheet_Ethrex, "cock", 3))>>
 
\<<run setup.choice("[[->Encounter_Loss_Ethrex_3]]");>>

::Encounter_Loss_Ethrex_3 <1225,10725>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 4)>>




<<print setup.getLength(setup.getStatValue($CharacterSheet_Player, "cock") + 31)>>

\<<run setup.choice("[[->Encounter_Loss_Ethrex_4]]");>>

::Encounter_Loss_Ethrex_4 <100,10850>





\<<run setup.choice("[[->Encounter_Loss_Ethrex_5]]");>>

::Encounter_Loss_Ethrex_5 <225,10850>





""

<<print setup.getFightReward($CharacterSheet_Ethrex, true)>>

\<<run setup.choice("[[->Village]]");>>

::Encounter_Intro_Ethrex_LowRela_Win <350,10850>
\<<set $CharacterSheet_Ethrex.quest.beatenOnce = true>>








\<<run setup.choice("[[->Encounter_Intro_Ethrex_LowRela_Win_2]]");>>

::Encounter_Intro_Ethrex_LowRela_Win_2 <475,10850>








\<<run setup.choice("[[->Encounter_Intro_Ethrex_LowRela_Win_3]]");>>

::Encounter_Intro_Ethrex_LowRela_Win_3 <600,10850>





\<<run setup.choice("[[->Encounter_Intro_Ethrex_LowRela_Win_4]]");>>

::Encounter_Intro_Ethrex_LowRela_Win_4 <725,10850>





\<<run setup.choice("[[->Encounter_Intro_Ethrex_LowRela_Win_5]]");>>

::Encounter_Intro_Ethrex_LowRela_Win_5 <850,10850>








\<<if $Essence >= setup.getDemonicTFCost($CharacterSheet_Player)>>
    <<print "[[("+setup.getDemonicTFCost($CharacterSheet_Player)+" Essence)->"+setup.getDemonicTFPassage($CharacterSheet_Player)+"][$Essence -= "+setup.getDemonicTFCost($CharacterSheet_Player)+"]]">>
\<<else>>
    <<print "<span class = 'inactive'>[[("+setup.getDemonicTFCost($CharacterSheet_Player)+" Essence)->"+setup.getDemonicTFPassage($CharacterSheet_Player)+"]]</span>">>
\<</if>>
[[Refuse->Encounter_Intro_Ethrex_LowRela_Win_Leave]]

::Encounter_Intro_Ethrex_LowRela_Win_Leave <975,10850>







\<<run setup.choice("[[->Encounter_Intro_Ethrex_LowRela_Win_Leave_2]]");>>

::Encounter_Intro_Ethrex_LowRela_Win_Leave_2 <1100,10850>







\<<run setup.choice("[[->Village]]");>>

::Encounter_Intro_Ethrex_MidRela <1225,10850>







\<<run setup.choice("[[->Encounter_Intro_Ethrex_MidRela_2]]");>>
\<<run setup.choice("[[->Village]]");>>

::Encounter_Intro_Ethrex_MidRela_2 <100,10975>






\<<run setup.choice("[[->Encounter_Intro_Ethrex_MidRela_3]]");>>

::Encounter_Intro_Ethrex_MidRela_3 <225,10975>



""



<<print setup.getFightStartPassages($CharacterSheet_Ethrex)>>

::Encounter_Ethrex_MidRela_Win <350,10975>






\<<run setup.choice("[[->Encounter_Ethrex_MidRela_Win_1_2]]");>>

::Encounter_Ethrex_MidRela_Win_1_2 <475,10975>







\<<run setup.choice("[[->Encounter_Ethrex_MidRela_Win_2]]");>>

::Encounter_Ethrex_MidRela_Win_2 <600,10975>





\<<run setup.choice("[[->Encounter_Ethrex_MidRela_Win_3]]");>>

::Encounter_Ethrex_MidRela_Win_3 <725,10975>







\<<if $Essence >= setup.getDemonicTFCost($CharacterSheet_Player)>>
    <<print "[[("+setup.getDemonicTFCost($CharacterSheet_Player)+" Essence)->"+setup.getDemonicTFPassage($CharacterSheet_Player)+"][$Essence -= "+setup.getDemonicTFCost($CharacterSheet_Player)+"]]">>
\<<else>>
    <<print "<span class = 'inactive'>[[("+setup.getDemonicTFCost($CharacterSheet_Player)+" Essence)->"+setup.getDemonicTFPassage($CharacterSheet_Player)+"]]</span>">>
\<</if>>
[[->Encounter_Intro_Ethrex_LowRela_Win_Leave]]

::Encounter_Ethrex_MidRela_Win_Leave <850,10975>







\<<run setup.choice("[[->Encounter_Ethrex_MidRela_Win_Leave_2]]");>>

::Encounter_Ethrex_MidRela_Win_Leave_2 <975,10975>





\<<run setup.choice("[[->Village]]");>>

::Encounter_Intro_Ethrex_Teammate <1100,10975>






\<<run setup.choice("[[->Encounter_Intro_Ethrex_Teammate_2]]");>>
\<<run setup.choice("[[->Village]]");>>

::Encounter_Intro_Ethrex_Teammate_2 <1225,10975>

<<print setup.getLength(setup.getStatValue($CharacterSheet_Jorm, "height"))>>



\<<run setup.choice("[[->Encounter_Intro_Ethrex_Teammate_Menu]]");>>

::Encounter_Intro_Ethrex_Teammate_Menu <100,11100>




\<<run setup.choice("[[->Ethrex_Teammate_ChangeAttackTiming]]");>>
\<<run setup.choice("[[->Ethrex_Teammate_Fight]]");>>
\<<run setup.choice("[[->Village]]");>>

::Ethrex_Teammate_ChangeAttackTiming <225,11100>
""

<<print setup.displayAttackTimingDescription($CharacterSheet_Ethrex)>>

[[->Encounter_Intro_Ethrex_Teammate_Menu][$CharacterSheet_Ethrex.fight.teammateSettings.attackTiming = setup.AttackTiming.BEFORE_PLAYER]]
[[->Encounter_Intro_Ethrex_Teammate_Menu][$CharacterSheet_Ethrex.fight.teammateSettings.attackTiming = setup.AttackTiming.BETWEEN_PLAYER_AND_ENEMY]]
[[->Encounter_Intro_Ethrex_Teammate_Menu][$CharacterSheet_Ethrex.fight.teammateSettings.attackTiming = setup.AttackTiming.AFTER_ENEMY]]

::Ethrex_Teammate_Fight <350,11100>


<<print setup.getFightStartPassages($CharacterSheet_Ethrex)>>

::Encounter_Ethrex_FinalRela_Win_Teammate <475,11100>





\<<run setup.choice("[[->Encounter_Ethrex_FinalRela_Win_Teammate_2]]");>>

::Encounter_Ethrex_FinalRela_Win_Teammate_2 <600,11100>








""
\<<run $CharacterSheet_Player.applyAbilityRuntimeData(setup.Ability_LustIncarnate)>>

\<<run setup.choice("[[->Encounter_Intro_Ethrex_Teammate_Menu]]");>>

::Encounter_Intro_God_Beast <725,11100>
\<<run setup.choice("[[->FightLogic]]");>>

::Encounter_Start_God_Beast <850,11100>


::Encounter_Win_God_Beast <975,11100>
\<<run setup.choice("[[->Village]]");>>

::Encounter_Loss_God_Beast <1100,11100>
\<<run setup.choice("[[->Village]]");>>

::Village_Herald_Loss <1225,11100>




\<<run setup.choice("[[->Village_Herald_Loss_1]]");>>

::Village_Herald_Loss_1 <100,11225>




""

\<<run setup.choice("[[->Village_Exiled]]");>>

::Village_Herald_Win <225,11225>
\<<run setup.completeAchievement("Achievement_MemoriesOfTheLost");>>
<<print setup.getFightReward($CharacterSheet_Herald)>>






\<<run setup.choice("[[->Village_Herald_Win_1]]");>>

::Village_Herald_Win_1 <350,11225>



 





\<<run setup.choice("[[->Village_Herald_Win_2]]");>>

::Village_Herald_Win_2 <475,11225>



 








\<<run setup.choice("[[->Village_Herald_Win_3]]");>>

::Village_Herald_Win_3 <600,11225>






\<<run setup.choice("[[->Village_Herald_Win_4]]");>>

::Village_Herald_Win_4 <725,11225>




\<<run setup.choice("[[->Village_Herald_Win_5]]");>>

::Village_Herald_Win_5 <850,11225>




\<<run setup.choice("[[->Village_Herald_Win_6]]");>>

::Village_Herald_Win_6 <975,11225>








\<<run setup.choice("[[->Village_Herald_Win_7]]");>>

::Village_Herald_Win_7 <1100,11225>







\<<run setup.choice("[[->Village_Herald_Win_8]]");>>

::Village_Herald_Win_8 <1225,11225>







\<<run setup.choice("[[->Village_Herald_Win_9]]");>>

::Village_Herald_Win_9 <100,11350>









\<<run setup.choice("[[->Village_Herald_Win_10]]");>>

::Village_Herald_Win_10 <225,11350>
 





\<<run setup.choice("[[->Village_Herald_Win_11]]");>>

::Village_Herald_Win_11 <350,11350>








\<<run setup.choice("[[->Village_Herald_Win_12]]");>>

::Village_Herald_Win_12 <475,11350>
 









\<<run setup.choice("[[->Village_Herald_Win_13]]");>>

::Village_Herald_Win_13 <600,11350>
<<print setup.displayEncounterImage("https://sombreve.github.io/Dawn-of-Corruption-Site/Images/Scenes/lost_ending_lowres.png","https://sombreve.github.io/Dawn-of-Corruption-Site/Images/Scenes/lost_ending.png", undefined, true)>>




 

\<<run setup.choice("[[->Village_Herald_Win_14]]");>>

::Village_Herald_Win_14 <725,11350>
<<print setup.displayEncounterImage("https://sombreve.github.io/Dawn-of-Corruption-Site/Images/Scenes/lost_ending_lowres.png","https://sombreve.github.io/Dawn-of-Corruption-Site/Images/Scenes/lost_ending.png", undefined, true)>>

 



 







\<<run setup.choice("[[->Village_Herald_Win_15]]");>>

::Village_Herald_Win_15 <850,11350>
<<print setup.displayEncounterImage("https://sombreve.github.io/Dawn-of-Corruption-Site/Images/Scenes/lost_ending_lowres.png","https://sombreve.github.io/Dawn-of-Corruption-Site/Images/Scenes/lost_ending.png", undefined, true)>>






\<<run setup.choice("[[->Village_Herald_Win_16]]");>>

::Village_Herald_Win_16 <975,11350>
<<print setup.displayEncounterImage("https://sombreve.github.io/Dawn-of-Corruption-Site/Images/Scenes/lost_ending_lowres.png","https://sombreve.github.io/Dawn-of-Corruption-Site/Images/Scenes/lost_ending.png", undefined, true)>>














<span class="glitch nyx fucked" data-text="GROW GROW GROW GROW">[[->Village_Herald_Win_17]]</span>

::Village_Herald_Win_17 <1100,11350>
<<print setup.displayEncounterImage("https://sombreve.github.io/Dawn-of-Corruption-Site/Images/Scenes/lost_ending_lowres.png","https://sombreve.github.io/Dawn-of-Corruption-Site/Images/Scenes/lost_ending.png", undefined, true)>>





+

\<<run setup.choice("[[->Village_Herald_Win_18]]");>>

::Village_Herald_Win_18 <1225,11350>
<<print setup.displayEncounterImage("https://sombreve.github.io/Dawn-of-Corruption-Site/Images/Scenes/lost_ending_lowres.png","https://sombreve.github.io/Dawn-of-Corruption-Site/Images/Scenes/lost_ending.png", undefined, true)>>






\<<run setup.choice("[[->Village_Herald_Win_19]]");>>

::Village_Herald_Win_19 <100,11475>
<<print setup.displayEncounterImage("https://sombreve.github.io/Dawn-of-Corruption-Site/Images/Scenes/lost_ending_lowres.png","https://sombreve.github.io/Dawn-of-Corruption-Site/Images/Scenes/lost_ending.png", undefined, true)>>











\<<run setup.choice("[[->Village_Herald_Win_20]]");>>

::Village_Herald_Win_20 <225,11475>
<<print setup.displayEncounterImage("https://sombreve.github.io/Dawn-of-Corruption-Site/Images/Scenes/lost_ending_lowres.png","https://sombreve.github.io/Dawn-of-Corruption-Site/Images/Scenes/lost_ending.png", undefined, true)>>








\<<run setup.choice("[[->Village_Herald_Win_21]]");>>

::Village_Herald_Win_21 <350,11475>
<<print setup.displayEncounterImage("https://sombreve.github.io/Dawn-of-Corruption-Site/Images/Scenes/lost_ending_2_lowres.png","https://sombreve.github.io/Dawn-of-Corruption-Site/Images/Scenes/lost_ending_2.png", undefined, true)>>










\<<run setup.choice("[[->Village_Herald_Win_22]]");>>

::Village_Herald_Win_22 <475,11475>
<<print setup.displayEncounterImage("https://sombreve.github.io/Dawn-of-Corruption-Site/Images/Scenes/lost_ending_2_lowres.png","https://sombreve.github.io/Dawn-of-Corruption-Site/Images/Scenes/lost_ending_2.png", undefined, true)>>







\<<run setup.choice("[[->Village_Herald_Win_23]]");>>

::Village_Herald_Win_23 <600,11475>






\<<run setup.choice("[[->Ending]]");>>

::Encounter_Intro_Imp <725,11475>
<<include setup.getNextNarativeEventPassage(setup.StorySheet_Imp.encounterPassages)>>

::Encounter_Start_Imp <850,11475>
<<print setup.getFlavourBasedDescription($CharacterSheet_Imp, 'encounterStartFlavour')>>

::Encounter_Win_Imp <975,11475>
<<print setup.getFightReward($CharacterSheet_Imp)>>

<<include setup.getNextNarativeEventPassage(setup.StorySheet_Imp.postFightPassagesWin)>>

::Encounter_Loss_Imp <1100,11475>
<<print setup.getFightReward($CharacterSheet_Imp, true)>>

<<include setup.getNextNarativeEventPassage(setup.StorySheet_Imp.postFightPassagesLoss)>>

::Imp_FirstMeeting_Intro <1225,11475>
\<<set $CharacterSheet_Imp.info.known = setup.EncounterKnownState.KNOWN>>


\<<run setup.choice("[[->Imp_FirstMeeting_Intro_2]]");>>

::Imp_FirstMeeting_Intro_2 <100,11600>




\<<run setup.choice("[[->Imp_FirstMeeting_Intro_3]]");>>

::Imp_FirstMeeting_Intro_3 <225,11600>







\<<run setup.choice("[[->Imp_FirstMeeting_Intro_4]]");>>

::Imp_FirstMeeting_Intro_4 <350,11600>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Imp, "normal")>>



"" 



\<<run setup.choice("[[->Imp_FirstMeeting_Intro_5]]");>>

::Imp_FirstMeeting_Intro_5 <475,11600>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Imp, "normal")>>



""



""

<<print setup.getFightStartPassages($CharacterSheet_Imp)>>

::Imp_EncounterStart_Growth_Cock_1To2 <600,11600>
\<<set $CharacterSheet_Imp.quest.available_encounterPassages_growthCock1to2 = false>>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Imp, "normal")>>





\<<run setup.choice("[[->Imp_EncounterStart_Growth_Cock_1To2_2]]");>>
\<<run setup.choice("[[->Village]]");>>

::Imp_EncounterStart_Growth_Cock_1To2_2 <725,11600>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Imp, "normal")>>



\<<run setup.choice("[[->Imp_EncounterStart_Growth_Cock_1To2_3]]");>>
\<<run setup.choice("[[->Village]]");>>

::Imp_EncounterStart_Growth_Cock_1To2_3 <850,11600>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Imp, "normal")>>





"" 



\<<run setup.choice("[[->Imp_EncounterStart_Growth_Cock_1To2_4]]");>>

::Imp_EncounterStart_Growth_Cock_1To2_4 <975,11600>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Imp, "blushing")>>

"~"



"~"



<<print setup.getFightStartPassages($CharacterSheet_Imp)>>

::Imp_EncounterStart_Growth_Cock_2To3 <1100,11600>
\<<set $CharacterSheet_Imp.quest.available_encounterPassages_growthCock2to3 = false>>




\<<run setup.choice("[[->Imp_EncounterStart_Growth_Cock_2To3_2]]");>>

::Imp_EncounterStart_Growth_Cock_2To3_2 <1225,11600>
\<<run setup.playRealizationPackage(["CharacterSheet_Imp"], 1)>>






\<<run setup.choice("[[->Imp_EncounterStart_Growth_Cock_2To3_3]]");>>
\<<run setup.choice("[[->Village]]");>>

::Imp_EncounterStart_Growth_Cock_2To3_3 <100,11725>
\<<run setup.playRealizationPackage(["CharacterSheet_Imp"], 2)>>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Imp, "blushing")>>


\


"" 

\<<run setup.choice("[[->Imp_EncounterStart_Growth_Cock_2To3_4]]");>>

::Imp_EncounterStart_Growth_Cock_2To3_4 <225,11725>
\<<run setup.stopRealizationPackages(["CharacterSheet_Imp"])>>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Imp, "normal")>>




""



""



<<print setup.getFightStartPassages($CharacterSheet_Imp)>>

::Imp_EncounterStart_Growth_Cock_3To4 <350,11725>
\<<run setup.playRealizationPackage(["CharacterSheet_Imp"], 1)>>
\<<set $CharacterSheet_Imp.quest.available_encounterPassages_growthCock3to4 = false>>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Imp, "normal")>>












\<<run setup.choice("[[->Imp_EncounterStart_Growth_Cock_3To4_2]]");>>
\<<run setup.choice("[[->Village]]");>>

::Imp_EncounterStart_Growth_Cock_3To4_2 <475,11725>
\<<run setup.playRealizationPackage(["CharacterSheet_Imp"], 1)>>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Imp, "normal")>>




""

\<<run setup.choice("[[->Imp_EncounterStart_Growth_Cock_3To4_3]]");>>

::Imp_EncounterStart_Growth_Cock_3To4_3 <600,11725>
\<<run setup.playRealizationPackage(["CharacterSheet_Imp"], 2)>>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Imp, "normal")>>



"" 



<<print setup.getFightStartPassages($CharacterSheet_Imp)>>

::Imp_EncounterStart_Growth_Cock_4To5 <725,11725>
\<<run setup.playRealizationPackage(["CharacterSheet_Imp"], 2)>>
\<<set $CharacterSheet_Imp.quest.available_encounterPassages_growthCock4to5 = false>>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Imp, "cumming")>>

"" 



"" 

<<print setup.getFightStartPassages($CharacterSheet_Imp)>>

::Imp_EncounterStart_Growth_Cock_5To6 <850,11725>
\<<run setup.playRealizationPackage(["CharacterSheet_Imp"], 1)>>


 




\<<run setup.choice("[[->Imp_EncounterStart_Growth_Cock_5To6_2]]");>>

::Imp_EncounterStart_Growth_Cock_5To6_2 <975,11725>
\<<run setup.playRealizationPackage(["CharacterSheet_Imp"], 1)>>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Imp, "normal")>>






\<<run setup.choice("[[->Imp_EncounterStart_Growth_Cock_5To6_3]]");>>
\<<run setup.choice("[[->Village]]");>>

::Imp_EncounterStart_Growth_Cock_5To6_3 <1100,11725>
\<<run setup.playRealizationPackage(["CharacterSheet_Imp"], 2)>>
\<<set $CharacterSheet_Imp.quest.available_encounterPassages_growthCock5to6 = false>>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Imp, "normal")>>

 






\<<run setup.choice("[[->Imp_EncounterStart_Growth_Cock_5To6_4]]");>>

::Imp_EncounterStart_Growth_Cock_5To6_4 <1225,11725>
\<<run setup.playRealizationPackage(["CharacterSheet_Imp"], 2)>>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Imp, "blushing")>>

\




\<<run setup.choice("[[->Imp_EncounterStart_Growth_Cock_5To6_5]]");>>

::Imp_EncounterStart_Growth_Cock_5To6_5 <100,11850>
\<<run setup.playRealizationPackage(["CharacterSheet_Imp"], 2)>>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Imp, "cumming")>>
\




\<<run setup.choice("[[->Imp_EncounterStart_Growth_Cock_5To6_6]]");>>

::Imp_EncounterStart_Growth_Cock_5To6_6 <225,11850>
\<<run setup.stopRealizationPackages(["CharacterSheet_Imp"])>>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Imp, "normal")>>


"" 

<<print setup.getFightStartPassages($CharacterSheet_Imp)>>

::Imp_EncounterStart_Growth_Body_MediumToLarge <350,11850>
\<<set $CharacterSheet_Imp.quest.available_encounterPassages_growthBodyMediumToLarge = false>>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Imp, "normal")>>







\<<run setup.choice("[[->Imp_EncounterStart_Growth_Body_MediumToLarge_2]]");>>

::Imp_EncounterStart_Growth_Body_MediumToLarge_2 <475,11850>
\<<run setup.playRealizationPackage(["CharacterSheet_Imp"], 1)>>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Imp, "cumming")>>






"" 

\<<run setup.choice("[[->Imp_EncounterStart_Growth_Body_MediumToLarge_3]]");>>

::Imp_EncounterStart_Growth_Body_MediumToLarge_3 <600,11850>
\<<run setup.playRealizationPackage(["CharacterSheet_Imp"], 2)>>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Imp, "normal")>>

"" 




<<print setup.getFightStartPassages($CharacterSheet_Imp)>>

::Imp_EndingLoop <725,11850>
\<<set $CharacterSheet_Imp.info.name = "Kanathar">>
\<<run setup.completeAchievement("Achievement_WordOfPower");>>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Imp, "blushing")>>













\<<run setup.choice("[[->Imp_EndingLoop_2]]");>>

::Imp_EndingLoop_2 <850,11850>
\<<run setup.playRealizationPackage(["CharacterSheet_Imp"], 1)>>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Imp, "blushing")>>



""



""

\<<run setup.choice("[[->Imp_EndingLoop_3]]");>>

::Imp_EndingLoop_3 <975,11850>
\<<run setup.playRealizationPackage(["CharacterSheet_Imp"], 2)>>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Imp, "normal")>>





""""


<<print setup.getLength(setup.applyGrowth($CharacterSheet_Imp, "height", 12 * 12))>>
\<<set $growth = setup.applyGrowth($CharacterSheet_Imp, "muscles", 90)>>
<<print setup.getMusclesDescriptor($CharacterSheet_Imp)>>(+$growth).

\<<run setup.choice("[[->Imp_EndingLoop_4]]");>>

::Imp_EndingLoop_4 <1100,11850>
\<<run setup.playRealizationPackage(["CharacterSheet_Imp"], 3)>>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Imp, "normal")>>

"!"



<<print setup.getLength(setup.applyGrowth($CharacterSheet_Imp, "cock", 11 * 12))>>
<<print setup.getLength(setup.applyGrowth($CharacterSheet_Imp, "balls", 9 * 12))>>

\<<run setup.choice("[[->Imp_EndingLoop_5]]");>>

::Imp_EndingLoop_5 <1225,11850>
\<<run setup.playRealizationPackage(["CharacterSheet_Imp"], 3)>>
\<<run setup.applyCorruption($CharacterSheet_Imp, 100)>>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Imp, "normal")>>

"!!!"






100

\<<run setup.choice("[[->Imp_EndingLoop_6]]");>>

::Imp_EndingLoop_6 <100,11975>
\<<run setup.playRealizationPackage(["CharacterSheet_Imp"], 4)>>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Imp, "cumming", true)>>




"" 


""

\<<run $CharacterSheet_Imp.applyAbilityRuntimeData(setup.Ability_NeverendingGrowth)>>
""

\<<run setup.choice("[[->Village]]");>>

::Imp_Low_Rela_EncounterStart <225,11975>
\<<run setup.buffImpEncounter()>>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Imp, "normal")>>



"" 





<<print setup.getFightStartPassages($CharacterSheet_Imp)>>

::Imp_Low_Rela_Win_Idle <350,11975>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Imp, "normal")>>



""



""



\<<run setup.choice("[[->Imp_Low_Rela_Win_Idle_2]]");>>

::Imp_Low_Rela_Win_Idle_2 <475,11975>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 2)>>
\<<set $CharacterSheet_Imp.quest.relationshipScoring++>>




""




""

\<<run setup.choice("[[->Imp_Low_Rela_Win_Idle_3]]");>>

::Imp_Low_Rela_Win_Idle_3 <600,11975>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 4)>>




\<<run setup.choice("[[->Village]]");>>

::Imp_Low_Rela_Loss_Idle <725,11975>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Imp, "normal")>>


"" 

""

\<<run setup.choice("[[->Imp_Low_Rela_Loss_Idle_2]]");>>

::Imp_Low_Rela_Loss_Idle_2 <850,11975>
\<<set $CharacterSheet_Imp.quest.relationshipScoring++>>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Imp, "blushing")>>


""

"~" 





\<<run setup.choice("[[->Village]]");>>

::Imp_Low_Rela_Win_EnterMidRela <975,11975>
\<<set $CharacterSheet_Imp.quest.available_postFightPassagesWin_lowRelaEnterMidRela = false>>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Imp, "normal")>>


"Eclipse"



""



\<<run setup.choice("[[->Imp_Low_Rela_Win_EnterMidRela_No]]");>>
\<<run setup.choice("[[->Imp_Low_Rela_Win_EnterMidRela_Yes]]");>>

::Imp_Low_Rela_Win_EnterMidRela_Yes <1100,11975>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Imp, "normal")>>

"" 

""

\<<run setup.choice("[[->Imp_Low_Rela_Win_EnterMidRela_2]]");>>

::Imp_Low_Rela_Win_EnterMidRela_No <1225,11975>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Imp, "normal")>>

"" 

""

\<<run setup.choice("[[->Imp_Low_Rela_Win_EnterMidRela_2]]");>>

::Imp_Low_Rela_Win_EnterMidRela_2 <100,12100>
\<<set $CharacterSheet_Imp.quest.relationshipScoring++>>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Imp, "blushing")>>


"" 

"" 





\<<run setup.choice("[[->Village]]");>>

::Imp_MasterChoice <225,12100>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Imp, "normal")>>
""

""

" "

\<<if State.variables.CharacterSheet_Imp.quest.masterScoring >= 3>>
\<<run setup.choice("[[->Imp_MasterChoice_Positive]]");>>
\<<run setup.choice("[[->Imp_MasterChoice_Positive]]");>>
\<<run setup.choice("[[->Imp_MasterChoice_Negative]]");>>
\<</if>>
\<<if State.variables.CharacterSheet_Imp.quest.servantScoring >= 3>>
\<<run setup.choice("[[->Imp_Loss_ServantChoice_2]]");>>
\<</if>>

::Imp_MasterChoice_Negative <350,12100>
"" 

""



\<<run setup.choice("[[->Village]]");>>

::Imp_MasterChoice_Positive <475,12100>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Imp, "blushing")>>


"~" 

"" 






""

\<<run setup.choice("[[->Imp_MasterChoice_2]]");>>
\<<run setup.choice("[[->Imp_MasterChoice_Negative]]");>>

::Imp_MasterChoice_2 <600,12100>
\<<run setup.playRealizationPackage(["CharacterSheet_Imp"], 1)>>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Imp, "blushing")>>
""

""





\<<run setup.choice("[[->Imp_MasterChoice_3]]");>>

::Imp_MasterChoice_3 <725,12100>
\<<run setup.playRealizationPackage(["CharacterSheet_Imp"], 2)>>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Imp, "cumming")>>


""

\<<run setup.choice("[[->Imp_MasterChoice_4]]");>>

::Imp_MasterChoice_4 <850,12100>
\<<run setup.playSoundActionParams(["action_Suck"], true)>>
\<<run setup.stopRealizationPackages(["CharacterSheet_Imp"])>>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 2)>>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Imp, "cumming", true)>>
"" 



""



"" 

  

""

\<<run setup.choice("[[->Imp_MasterChoice_5]]");>>

::Imp_MasterChoice_5 <975,12100>
\<<run setup.stopSoundActions()>>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 3)>>







\<<run setup.choice("[[->Imp_MasterChoice_6]]");>>

::Imp_MasterChoice_6 <1100,12100>
\<<run setup.playSoundActionParams(["action_Suck"], true)>>
\<<run setup.stopRealizationPackages(["CharacterSheet_Player"])>>






\
\
 



\<<run setup.choice("[[->Imp_MasterChoice_7][setup.stopSoundActions();]]");>>

::Imp_MasterChoice_7 <1225,12100>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 4)>>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Imp, "cumming", true)>>








""

\<<if $CharacterSheet_Player.hasAbility("Achievement_MemoriesOfKanathar")>>
\<<run setup.impJoinsPlayer()>>




\<<run setup.choice('[[->Imp_EndingLoop][setup.stopRealizationPackages(["CharacterSheet_Player"])]]');>>
<span class = 'inactive'>[[->Imp_MasterChoice_8]]</span>
\<<else>>
\<<run setup.choice("[[->Imp_MasterChoice_8]]");>>
\<</if>>

::Imp_MasterChoice_8 <100,12225>
\<<run setup.playRealizationPackage(["CharacterSheet_Imp", "CharacterSheet_Player"], 1)>>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Imp, "cumming", true)>>
\<<run setup.impJoinsPlayer()>>
"" 



"" 



: 
: 

\<<run setup.choice("[[->Village][setup.stopRealizationPackages(['CharacterSheet_Imp', 'CharacterSheet_Player'])]]");>>

::Imp_Mid_Rela_EncounterStart <225,12225>
\<<run setup.buffImpEncounter()>>





\<<run setup.choice("[[->Imp_Mid_Rela_EncounterStart_2]]");>>

::Imp_Mid_Rela_EncounterStart_2 <350,12225>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Imp, "normal")>>

"" 

"~"



<<print setup.getFightStartPassages($CharacterSheet_Imp)>>

::Imp_Mid_Rela_Loss_Idle <475,12225>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Imp, "normal")>>




"" 



\<<run setup.choice("[[->Imp_Mid_Rela_Loss_Idle_2]]");>>

::Imp_Mid_Rela_Loss_Idle_2 <600,12225>
\<<run setup.playRealizationPackage(["CharacterSheet_Imp"], 1)>>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Imp, "blushing")>>

""

\<<run setup.choice("[[->Imp_Mid_Rela_Loss_Idle_3]]");>>

::Imp_Mid_Rela_Loss_Idle_3 <725,12225>
\<<set $CharacterSheet_Imp.quest.relationshipScoring++>>
\<<run setup.playRealizationPackage(["CharacterSheet_Imp"], 1)>>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Imp, "normal")>>
""






"~" 

: <<print setup.getLength(setup.applyGrowth($CharacterSheet_Imp, "cock", 3))>>
: <<print setup.getLength(setup.applyGrowth($CharacterSheet_Imp, "balls", 1))>>

: 

\<<run setup.choice("[[->Imp_Mid_Rela_Loss_IncreaseServant]]");>>
\<<run setup.choice("[[->Imp_Mid_Rela_Win_Idle_IncreaseMaster]]");>>
\<<run setup.choice("[[->Village]]");>>

::Imp_Mid_Rela_Win_Idle <850,12225>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 1)>>
\<<set $CharacterSheet_Imp.quest.relationshipScoring++>>




\
\
<<print setup.getLength(setup.getStatValue($CharacterSheet_Player, "cock"))>> <<print setup.processFlavours($CharacterSheet_Player, "@[all|cocks|noverb]")>> \



\<<run setup.choice("[[->Imp_Mid_Rela_Win_Idle_2]]");>>

::Imp_Mid_Rela_Win_Idle_2 <975,12225>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Imp, "blushing")>>

"" 

: 

\<<run setup.choice("[[->Imp_Mid_Rela_Loss_IncreaseServant]]");>>
\<<run setup.choice("[[->Imp_Mid_Rela_Win_Idle_IncreaseMaster]]");>>
\<<run setup.choice("[[->Village]]");>>

::Imp_Mid_Rela_Win_Idle_IncreaseMaster <1100,12225>
\<<set $CharacterSheet_Imp.quest.relationshipScoring++>>
\<<set $CharacterSheet_Imp.quest.masterScoring++>>
\<<run setup.playRealizationPackage(["CharacterSheet_Imp"], 2)>>
\<<set $growth = setup.applyGrowth($CharacterSheet_Player, "muscles", 4)>>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Imp, "blushing")>>
\


"" 



<<print setup.processFlavours($CharacterSheet_Player, "@[all|pecs|noverb]")>>\
<<print setup.processFlavours($CharacterSheet_Player, "@[all|pecs|noverb]")>>

\<<run setup.choice("[[->Imp_Mid_Rela_Win_Idle_IncreaseMaster_2]]");>>

::Imp_Mid_Rela_Win_Idle_IncreaseMaster_2 <1225,12225>
\<<run setup.playRealizationPackage(["CharacterSheet_Imp", "CharacterSheet_Player"], 4)>>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Imp, "cumming", true)>>


"" \


\

 

: <<print setup.getLength(setup.applyGrowth($CharacterSheet_Player, "height", 7))>>
: <<print setup.getMusclesDescriptor($CharacterSheet_Player)>>(+$growth)

: 

\<<run setup.choice("[[->Imp_Mid_Rela_Win_Idle_IncreaseMaster_3]]");>>

::Imp_Mid_Rela_Win_Idle_IncreaseMaster_3 <100,12350>
\<<run setup.stopRealizationPackages(["CharacterSheet_Imp", "CharacterSheet_Player"])>>






""



\<<run setup.choice("[[->Village]]");>>

::Imp_Mid_Rela_Loss_IncreaseServant <225,12350>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 1)>>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Imp, "normal")>>


"" ""

\


"" 

\<<run setup.choice("[[->Imp_Mid_Rela_Loss_IncreaseServant_2]]");>>

::Imp_Mid_Rela_Loss_IncreaseServant_2 <350,12350>
\<<run setup.playRealizationPackage(["CharacterSheet_Imp"], 1)>>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 2)>>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Imp, "normal")>>



 

""

\<<run setup.choice("[[->Imp_Mid_Rela_Loss_IncreaseServant_3]]");>>

::Imp_Mid_Rela_Loss_IncreaseServant_3 <475,12350>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 4)>>
\<<run setup.playRealizationPackage(["CharacterSheet_Imp"], 4)>>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Imp, "cumming", true)>>


\<<run setup.choice("[[->Imp_Mid_Rela_Loss_IncreaseServant_4]]");>>

::Imp_Mid_Rela_Loss_IncreaseServant_4 <600,12350>
\<<run setup.stopRealizationPackages(["CharacterSheet_Imp", "CharacterSheet_Player"])>>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Imp, "cumming", true)>>








\<<run setup.choice("[[->Imp_Mid_Rela_Loss_IncreaseServant_5]]");>>

::Imp_Mid_Rela_Loss_IncreaseServant_5 <725,12350>
\<<set $CharacterSheet_Imp.quest.servantScoring++>>




:  <<print setup.getLength(setup.applyGrowth($CharacterSheet_Player, "cock", 3))>>
: <<print setup.getLength(setup.applyGrowth($CharacterSheet_Player, "balls", 1))>>

: 

\<<run setup.choice("[[->Village]]");>>

::Imp_Servant_EncounterStart <850,12350>
\<<run setup.buffImpEncounter()>>







\<<run setup.choice("[[->Imp_Servant_EncounterStart_2]]");>>

::Imp_Servant_EncounterStart_2 <975,12350>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Imp, "normal")>>
"~" 

\


<<print setup.getFightStartPassages($CharacterSheet_Imp)>>

::Imp_Loss_ServantChoice <1100,12350>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Imp, "normal")>>




"" 

""

\<<if State.variables.CharacterSheet_Imp.quest.masterScoring >= 3>>
\<<run setup.choice("[[->Imp_MasterChoice_2]]");>>
\<</if>>
\<<if State.variables.CharacterSheet_Imp.quest.servantScoring >= 3>>
\<<run setup.choice("[[->Imp_Loss_ServantChoice_2]]");>>
\<</if>>

::Imp_Loss_ServantChoice_2 <1225,12350>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Imp, "normal")>>


"" 

""

\<<run setup.choice("[[->Imp_Loss_ServantChoice_Yes]]");>>
\<<run setup.choice("[[->Imp_Loss_ServantChoice_No]]");>>

::Imp_Loss_ServantChoice_Yes <100,12475>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Imp, "normal")>>
"" 

"~"

\<<run setup.choice("[[->Imp_Loss_ServantChoice_Yes_2]]");>>

::Imp_Loss_ServantChoice_Yes_2 <225,12475>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Imp, "normal")>>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 1)>>


 

\<<run setup.choice("[[->Imp_Loss_ServantChoice_Yes_3]]");>>

::Imp_Loss_ServantChoice_Yes_3 <350,12475>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Imp, "normal")>>
\<<run setup.stopRealizationPackages(["CharacterSheet_Player"])>>
\<<run setup.playRealizationPackage(["CharacterSheet_Imp"], 1)>>
\<<run setup.playSoundActionParams(["action_Suck"], true)>>



""



"" 

"" 

\<<run setup.choice("[[->Imp_Loss_ServantChoice_Yes_4]]");>>

::Imp_Loss_ServantChoice_Yes_4 <475,12475>
\<<run setup.playRealizationPackage(["CharacterSheet_Imp"], 2)>>
\<<run setup.playSoundActionParams(["action_Suck"], true)>>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Imp, "normal")>>


"" 

\
\


\


"//~//"

\<<run setup.choice("[[->Imp_Loss_ServantChoice_Yes_5]]");>>

::Imp_Loss_ServantChoice_Yes_5 <600,12475>
\<<run setup.playRealizationPackage(["CharacterSheet_Imp"], 2)>>
\<<run setup.playSoundActionParams(["action_Suck"], true)>>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Imp, "blushing")>>

""

 \




\<<run setup.choice("[[->Imp_Loss_ServantChoice_Yes_6]]");>>

::Imp_Loss_ServantChoice_Yes_6 <725,12475>
\<<run setup.playRealizationPackage(["CharacterSheet_Imp"], 3)>>
\<<run setup.playSoundActionParams(["action_Suck"], true)>>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Imp, "normal")>>


"""" \


""

 \


\<<if $CharacterSheet_Player.hasAbility("Achievement_MemoriesOfKanathar")>>

\<<set $CharacterSheet_Player.applyAbilityRuntimeData(setup.Ability_ServantOfKanathar)>>
""
\<<set $CharacterSheet_Imp.quest.storylineProgress = setup.StorylineProgress_Imp.SERVANT>>

\<<run setup.choice("[[->Imp_EndingLoop][setup.stopSoundActions();]]");>>
<span class = 'inactive'>[[->Imp_Loss_ServantChoice_Yes_7]]</span>
\<<else>>
\<<run setup.choice("[[->Imp_Loss_ServantChoice_Yes_7][setup.stopSoundActions();]]");>>
\<</if>>

::Imp_Loss_ServantChoice_Yes_7 <850,12475>
\<<run setup.playRealizationPackage(["CharacterSheet_Imp"], 4)>>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Imp, "cumming", true)>>


""

""

\<<set $CharacterSheet_Imp.info.name = "Kanathar">>
\<<set $CharacterSheet_Player.applyAbilityRuntimeData(setup.Ability_ServantOfKanathar)>>
\<<run $CharacterSheet_Imp.applyAbilityRuntimeData(setup.Ability_NeverendingGrowth)>>
\<<set $growth = setup.applyGrowth($CharacterSheet_Imp, "muscles", 22)>>
: "Never-ending Growth"
: <<print setup.getLength(setup.applyGrowth($CharacterSheet_Imp, "height", 25))>>
: <<print setup.getMusclesDescriptor($CharacterSheet_Imp)>>(+$growth)
: <<print setup.getLength(setup.applyGrowth($CharacterSheet_Imp, "cock", 10))>>
: <<print setup.getLength(setup.applyGrowth($CharacterSheet_Imp, "balls", 6))>>

""
\<<set $CharacterSheet_Imp.quest.storylineProgress = setup.StorylineProgress_Imp.SERVANT>>

\<<run setup.choice("[[->Village]]");>>

::Imp_Loss_ServantChoice_No <975,12475>
\<<run setup.stopRealizationPackages(["CharacterSheet_Imp", "CharacterSheet_Player"])>>


""

""



\<<run setup.choice("[[->Village]]");>>

::Imp_Loss_MasterPath <1100,12475>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Imp, "normal")>>
""

""

\<<run setup.choice("[[->Village_MeetImp]]");>>

::Imp_Loss_ServantPath <1225,12475>
\<<set $CharacterSheet_Imp.quest.servantLosses++>>
\<<set $CharacterSheet_Player.applyAbilityRuntimeData(setup.Ability_ServantOfKanathar)>>
\<<run $CharacterSheet_Imp.applyAbilityRuntimeData(setup.Ability_NeverendingGrowth)>>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Imp, "normal")>>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 3)>>


"" 

""



\<<run setup.choice("[[->Imp_Loss_ServantPath_2]]");>>

::Imp_Loss_ServantPath_2 <100,12600>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 4)>>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Imp, "normal")>>
 "" 

""





\<<set $growth = setup.applyGrowth($CharacterSheet_Imp, "muscles", 4)>>
: "Never-ending Growth"
: <<print setup.getLength(setup.applyGrowth($CharacterSheet_Imp, "height", 7))>>
: <<print setup.getMusclesDescriptor($CharacterSheet_Imp)>>(+$growth)
: <<print setup.getLength(setup.applyGrowth($CharacterSheet_Imp, "cock", 3))>>
: <<print setup.getLength(setup.applyGrowth($CharacterSheet_Imp, "balls", 1))>>

: ""

\<<run setup.choice("[[->Imp_Loss_ServantPath_3]]");>>

::Imp_Loss_ServantPath_3 <225,12600>
\<<run setup.stopRealizationPackages(["CharacterSheet_Player"])>>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Imp, "normal")>>
"" 



\<<run setup.choice("[[->Village]]");>>

::Imp_Win_MasterPath <350,12600>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Imp, "blushing")>>
"" 

""

\<<run setup.choice("[[->Village_MeetImp]]");>>

::Imp_Win_ServantPath <475,12600>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 1)>>
\<<set $CharacterSheet_Imp.quest.servantWins++>>
\<<set $CharacterSheet_Player.applyAbilityRuntimeData(setup.Ability_ServantOfKanathar)>>
\<<run $CharacterSheet_Imp.applyAbilityRuntimeData(setup.Ability_NeverendingGrowth)>>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Imp, "normal")>>


"" 

""



\<<run setup.choice("[[->Imp_Win_ServantPath_1_1]]");>>

::Imp_Win_ServantPath_1_1 <600,12600>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 2)>>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Imp, "normal")>>
"" 

""

\<<run setup.choice("[[->Imp_Win_ServantPath_1_2]]");>>

::Imp_Win_ServantPath_1_2 <725,12600>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Imp, "normal")>>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 4)>>




\<<set $growth = setup.applyGrowth($CharacterSheet_Imp, "muscles", 4)>>

: "Never-ending Growth"
: <<print setup.getLength(setup.applyGrowth($CharacterSheet_Imp, "height", 7))>>
: <<print setup.getMusclesDescriptor($CharacterSheet_Imp)>>(+$growth).
: <<print setup.getLength(setup.applyGrowth($CharacterSheet_Imp, "cock", 3))>>
: <<print setup.getLength(setup.applyGrowth($CharacterSheet_Imp, "balls", 1))>>
 
: ""

\<<run setup.choice("[[->Imp_Win_ServantPath_2]]");>>

::Imp_Win_ServantPath_2 <850,12600>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 1)>>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Imp, "normal")>>

"" 



\<<run setup.choice("[[->Village]]");>>

::Encounter_Intro_Harbinger <975,12600>
!

\<<run setup.choice("[[->Village]]");>>

::Encounter_Intro_Lost_Naga <1100,12600>
\<<set $CharacterSheet_Lost_Naga.quest.met = true>>
\<<set $CharacterSheet_Lost_Naga.info.known = setup.EncounterKnownState.KNOWN>>









\<<run setup.choice("[[->Encounter_Intro_Lost_Naga_2]]");>>

::Encounter_Intro_Lost_Naga_2 <1225,12600>
<<print setup.displayEncounterImage($CharacterSheet_Lost_Naga.info.picture)>>




<<print setup.getFightStartPassages($CharacterSheet_Lost_Naga)>>

::Encounter_Start_Lost_Naga <100,12725>


::Encounter_Win_Lost_Naga <225,12725>




\<<if setup.removeCurseOfTheNaga()>>

$CharacterSheet_Player.symbiote.name


""



<<set $growth = setup.applyGrowth($CharacterSheet_Player, "muscles", Math.ceil(setup.getStatValue($CharacterSheet_Player, "muscles") * 0.1))>>
<<print setup.getMusclesDescriptor($CharacterSheet_Player)>>(+$growth)
<<print setup.getLength(setup.applyGrowth($CharacterSheet_Player, "height", Math.ceil(setup.getStatValue($CharacterSheet_Player, "height") * 0.1)))>>

""




\<<run setup.applyGrowth($CharacterSheet_Player, "cock", Math.ceil(setup.getStatValue($CharacterSheet_Player, "cock") * 0.1))>>
<<print setup.getLength(setup.getStatValue($CharacterSheet_Player, "cock"))>>
\<</if>>


<<print setup.getFightReward($CharacterSheet_Lost_Naga)>>

\<<run setup.choice("[[->Encounter_Win_Lost_Naga_Fuck_1]]");>>
\<<run setup.choice("[[->Village]]");>>

::Encounter_Win_Lost_Naga_Fuck_1 <350,12725>

 






\<<set $CharacterSheet_Lost_Naga.quest.fuckedByPlayer = true>>
\<<if setup.sizeCharactercomparison($CharacterSheet_Player, $CharacterSheet_Lost_Naga) >= setup.Comparators.EQUAL>>
\<<run setup.choice("[[->Encounter_Win_Lost_Naga_Fuck_PlayerBigger_1]]");>>
<span class = 'inactive'>[[->Encounter_Win_Lost_Naga_Fuck_NagaBigger_1]]</span>
\<<else>>
<span class = 'inactive'>[[->Encounter_Win_Lost_Naga_Fuck_PlayerBigger_1]]</span>
\<<run setup.choice("[[->Encounter_Win_Lost_Naga_Fuck_NagaBigger_1]]");>>
<</if>>
\<<run setup.choice("[[->Village]]");>>

\<<if setup.getStatValue($CharacterSheet_Player, "corruption") >= 75>>
\<<run setup.choice("[[75->Encounter_Win_Lost_Naga_Fuck_Absorb_1]]");>>
\<</if>>

::Encounter_Win_Lost_Naga_Fuck_Absorb_1 <475,12725>










\<<run setup.choice("[[->Encounter_Win_Lost_Naga_Fuck_Absorb_2]]");>>

::Encounter_Win_Lost_Naga_Fuck_Absorb_2 <600,12725>

<<SymbioteName>>







\<<set $growth = setup.applyGrowth($CharacterSheet_Player, "muscles", 4)>>

<<print setup.getLength(setup.applyGrowth($CharacterSheet_Player, "height", 7))>>
<<print setup.getMusclesDescriptor($CharacterSheet_Player)>>(+$growth)


<<print setup.getLength(setup.applyGrowth($CharacterSheet_Player, "cock", 5))>>
\<<run setup.getLength(setup.applyGrowth($CharacterSheet_Player, "balls", 2))>>


<<SymbioteColor>>



\<<run setup.applyCorruption($CharacterSheet_Player, 5)>>
\<<set $CharacterSheet_Lost_Naga.quest.hasBeenVored = true>>
: 5

\<<run setup.choice("[[->Village]]");>>

::Encounter_Win_Lost_Naga_Fuck_PlayerBigger_1 <725,12725>









 


<<print setup.getLength(setup.applyGrowth($CharacterSheet_Player, "height", 4))>>
<<print setup.getLength(setup.applyGrowth($CharacterSheet_Player, "cock", 3))>>
\<<run setup.getLength(setup.applyGrowth($CharacterSheet_Player, "balls", 1))>>

\<<run setup.choice("[[->Encounter_Win_Lost_Naga_Fuck_PlayerBigger_2]]");>>

::Encounter_Win_Lost_Naga_Fuck_PlayerBigger_2 <850,12725>



$CharacterSheet_Player.symbiote.color








\<<run setup.choice("[[->Village]]");>>

::Encounter_Win_Lost_Naga_Fuck_NagaBigger_1 <975,12725>












\<<run setup.choice("[[->Encounter_Win_Lost_Naga_Fuck_NagaBigger_2]]");>>

::Encounter_Win_Lost_Naga_Fuck_NagaBigger_2 <1100,12725>





<<print setup.getLength(setup.applyGrowth($CharacterSheet_Player, "height", 4))>>
<<print setup.getLength(setup.applyGrowth($CharacterSheet_Player, "cock", 3))>>
\<<run setup.getLength(setup.applyGrowth($CharacterSheet_Player, "balls", 1))>>








\<<run setup.choice("[[->Village]]");>>

::Encounter_Loss_Lost_Naga_1 <1225,12725>
 



"" 






\<<run setup.choice("[[->Encounter_Loss_Lost_Naga_2]]");>>

::Encounter_Loss_Lost_Naga_2 <100,12850>




"" 



\<<set $curseStatus = setup.applyCurseOfTheNaga()>>
\<<if $curseStatus == "Cursed">>




\<</if>>



"" 



\<<run setup.choice("[[->Encounter_Loss_Lost_Naga_3]]");>>

::Encounter_Loss_Lost_Naga_3 <225,12850>
\<<if $curseStatus == "Cursed">>


<<print setup.getMusclesDescriptor($CharacterSheet_Player)>> (-<<print $CharacterSheet_Player.quest.curseOfTheNagaStatDrain.muscles>>).
<<print setup.getLength($CharacterSheet_Player.quest.curseOfTheNagaStatDrain.height)>>.
<<print setup.getLength($CharacterSheet_Player.quest.curseOfTheNagaStatDrain.cock)>>.
\<<elseif $curseStatus == "AlreadyCursed">>

\<<else>>

\<</if>>

\<<run setup.choice("[[->Death]]");>>

::Encounter_Intro_Swarm <350,12850>
\<<set $CharacterSheet_Swarm.quest.met = true>>
\<<include Swarm_Flavours>>
\<<run setup.setRandomRace($CharacterSheet_Swarm.info.anatomy)>> 
\<<run $CharacterSheet_Swarm.info.name = "" + setup.getRace($CharacterSheet_Swarm.info.anatomy, true)>>
\<<run $Encounter_Target=$CharacterSheet_Swarm>>







<<print setup.getRace($CharacterSheet_Swarm.info.anatomy, true)>> <<print setup.processFlavours(
    $CharacterSheet_Lost_Entity,
    "" + 
    "@[all| heads|noverb],@[1| tongues| noverb]@[all| cocks| noverb]\n"
)>>

\<<if setup.sizeCharactercomparison($CharacterSheet_Swarm, $CharacterSheet_Player) > setup.Comparators.BIGGER>>
\<<print setup.getFlavourBasedDescription($CharacterSheet_Swarm, "swarmEncounter", 1, $CharacterSheet_Player)>>
\<<else>>
\<<print setup.getFlavourBasedDescription($CharacterSheet_Player, "swarmEncounter", 1, $CharacterSheet_Swarm)>>
\<</if>>


\<<run setup.choice("[[->Village]]");>>

::Swarm_Flavours <475,12850>
\<<nobr>>
<<run $CharacterSheet_Swarm.addHeightFlavourText(
    "swarmEncounter",
    1,
    "" +
    "" +
    "\n\n"
)>>

<<run $CharacterSheet_Swarm.addHeightFlavourText(
    "swarmEncounter",
    2,
    "" +
    "" +
    "" +
    "\n\n"
)>>

<<run $CharacterSheet_Swarm.addHeightFlavourText(
    "swarmEncounter",
    3,
    "" +
    "" +
    " @[all|cocks|noverb]! " +
    "\n\n"
)>>

<<run $CharacterSheet_Swarm.addHeightFlavourText(
    "swarmEncounter",
    4,
    "" +
    "" +
    ""+
    "" +
    "" +
    " " +
    " \n\n"
)>>

<<run $CharacterSheet_Player.addHeightFlavourText(
    "swarmEncounter",
    1,
    "" +
    "" +
    "\n\n"
)>>

<<run $CharacterSheet_Player.addHeightFlavourText(
    "swarmEncounter",
    2,
    ""+
    "" +
    "\n\n"
)>>

<<run $CharacterSheet_Player.addHeightFlavourText(
    "swarmEncounter",
    3,
    ""+
    "\n\n\n\n" +
    "" +
    "\n\n" + 
    ""
)>>

<<run $CharacterSheet_Player.addHeightFlavourText(
    "swarmEncounter",
    4,
    ""+
    "" +
    "\n\n\n\n" +
    "\n\n" + 
    ""
)>>
\<</nobr>>

::Quest_MQ002_Entrance_PlayerWins <600,12850>
<<ImageMinoClothedGateBG>>



""

\<<set $CharacterSheet_MQ002_Guard.quest.beaten = true>>
\<<print setup.getFightReward($CharacterSheet_MQ002_Guard)>>

\<<run setup.choice("[[->Quest_MQ002_Entrance_PlayerWins_2]]");>>

::Quest_MQ002_Entrance_PlayerWins_2 <725,12850>
<<ImageMinoClothedGateBG>>


"" 

\<<run setup.choice("[[->Quest_MQ002_Entrance_PlayerWins_3]]");>>

::Quest_MQ002_Entrance_PlayerWins_3 <850,12850>


"" 



\<<run setup.choice("[[->Quest_MQ002_Entrance_NoGuard]]");>>

::Quest_MQ002_Entrance_PlayerLoses <975,12850>





\<<run setup.choice("[[->Quest_MQ002_Entrance_PlayerLoses_1]]");>>

::Quest_MQ002_Entrance_PlayerLoses_1 <1100,12850>
<<ImageMinoClothedGateBG>>

""

\<<run setup.choice("[[->Village]]");>>

::Quest_MQ002_NyxParasiteEncounter_FightIntro <1225,12850>
\<<set $CharacterSheet_MQ002_NyxParasite.quest.met = true>>
<<print setup.getFightStartPassages($CharacterSheet_MQ002_NyxParasite)>>

::Quest_MQ002_NyxParasiteEncounter_PlayerWins <100,12975>
<<print setup.getLength(setup.getStatValue($CharacterSheet_MQ002_NyxParasite, "height"))>>



<<print setup.getFightReward($CharacterSheet_MQ002_NyxParasite)>>

\<<if $CharacterSheet_Player.quest.nyxParasiteInfections <= 0>>
\<<run setup.choice("[[->Quest_MQ002_NyxParasiteEncounter_KillIt]]");>>
\<<else>>
<span class="glitch nyx fucked" data-text="">[[->Quest_MQ002_NyxParasiteEncounter_KillIt]]</span>
\<<endif>>
\<<run setup.choice("[[->Quest_MQ002_NyxParasiteEncounter_ConsentualInfest]]");>>

::Quest_MQ002_NyxParasiteEncounter_ConsentualInfest <225,12975>
\<<if $CharacterSheet_Player.quest.nyxParasiteInfections <= 0>>





\<<else>>



\<</if>>

<<print setup.getLength(setup.getStatValue($CharacterSheet_Player, "cock"))>>
\<<set $NyxParasiteEncounter_Won = true>>
<<include Quest_MQ002_NyxParasiteEncounter_Infection>>

::Quest_MQ002_NyxParasiteEncounter_Infection <350,12975>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 1)>>

\<<if $NyxParasiteEncounter_Won>>







\<<else>>










\<<endif>>

\<<run setup.choice("[[->Quest_MQ002_NyxParasiteEncounter_Infection_2]]");>>

::Quest_MQ002_NyxParasiteEncounter_Infection_2 <475,12975>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 2)>>



 




\<<run setup.choice("[[->Quest_MQ002_NyxParasiteEncounter_Infection_3]]");>>

::Quest_MQ002_NyxParasiteEncounter_Infection_3 <600,12975>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 3)>>
\<<if $CharacterSheet_Player.quest.nyxParasiteInfections <= 0>>

\<<else>>

\<</if>>




\<<run setup.choice("[[->Quest_MQ002_NyxParasiteEncounter_Infection_3_1]]");>>

::Quest_MQ002_NyxParasiteEncounter_Infection_3_1 <725,12975>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 4)>>





\<<run setup.choice("[[->Quest_MQ002_NyxParasiteEncounter_Infection_4]]");>>

::Quest_MQ002_NyxParasiteEncounter_Infection_4 <850,12975>
\<<run setup.stopRealizationPackages(["CharacterSheet_Player"])>>


\<<if $CharacterSheet_Player.quest.nyxParasiteInfections <= 0>>

\<<else>>

\<</if>>

: 8
\<<run setup.applyCorruption($CharacterSheet_Player, 8)>>
\<<run setup.MQ002_AddNyxParasiteInfection()>>
: ""
\

\<<print setup.clearWestWingRoom("WestWing_NyxSpawnFight")>>

<<print setup.getNextManorDestination()>>

::Quest_MQ002_NyxParasiteEncounter_KillIt <975,12975>





 





\<<print setup.clearWestWingRoom("WestWing_NyxSpawnFight")>>

<<print setup.getNextManorDestination()>>

::Quest_MQ002_NyxParasiteEncounter_PlayerLoses <1100,12975>
\<<print setup.getFightReward($CharacterSheet_MQ002_NyxParasite, true)>>





\<<run setup.choice("[[->Quest_MQ002_NyxParasiteEncounter_Submit]]");>>
\<<if $CharacterSheet_Player.quest.nyxParasiteInfections <= 0>>
\<<run setup.choice("[[->Quest_MQ002_NyxParasiteEncounter_Escape]]");>>
\<<else>>
<span class="glitch nyx fucked" data-text="T">[[->Quest_MQ002_NyxParasiteEncounter_Escape]]</span>
\<<endif>>

::Quest_MQ002_NyxParasiteEncounter_Submit <1225,12975>
\<<set $NyxParasiteEncounter_Won = false>>


<<include Quest_MQ002_NyxParasiteEncounter_Infection>>

::Quest_MQ002_NyxParasiteEncounter_Escape <100,13100>







<<print setup.getNextManorDestination()>>

::Encounter_Intro_Shard_Ring <225,13100>



\<<run setup.choice("[[->Shard_Ring_Intro_2]]");>>

::Encounter_Start_Shard_Ring <350,13100>


::Encounter_Win_Shard_Ring <475,13100>
<<print setup.getFightReward($CharacterSheet_Shard_Ring)>>

<<include setup.getNextNarativeEventPassage(setup.StorySheet_Shard_Ring.postFightPassagesWin)>>

::Encounter_Loss_Shard_Ring <600,13100>
<<print setup.getFightReward($CharacterSheet_Shard_Ring, true)>>

<<include setup.getNextNarativeEventPassage(setup.StorySheet_Shard_Ring.postFightPassagesLoss)>>

::Shard_Ring_Intro_2 <725,13100>





\<<run setup.choice("[[->Shard_Ring_Intro_3]]");>>

::Shard_Ring_Intro_3 <850,13100>




<<include setup.getNextNarativeEventPassage(setup.StorySheet_Shard_Ring.encounterIntro)>>

::Shard_Ring_LowScoring_Intro <975,13100>



<span class='bind1'>""</span> <span class='bind2'>""</span>

\<<run setup.choice("[[->Shard_Ring_LowScoring_Intro_2]]");>>

::Shard_Ring_LowScoring_Intro_2 <1100,13100>
Y

<span class='bind1'>""</span> <span class='bind2'>""</span>

<<print setup.getFightStartPassages($CharacterSheet_Shard_Ring)>>

::Shard_Ring_FullDom_Intro <1225,13100>





\<<run setup.choice("[[->Shard_Ring_FullDom_Intro_2]]");>>

::Shard_Ring_FullDom_Intro_2 <100,13225>


<span class='bind1'>""</span> <span class='bind2'>" "</span>



<span class='bind1'>""</span><span class='bind2'>""</span>

<<print setup.getFightStartPassages($CharacterSheet_Shard_Ring)>>

::Shard_Ring_FullSub_Intro <225,13225>






\<<run setup.choice("[[->Shard_Ring_FullSub_Intro_2]]");>>

::Shard_Ring_FullSub_Intro_2 <350,13225>
<span class='bind1'>""</span> <span class='bind2'>""</span>



<<print setup.getFightStartPassages($CharacterSheet_Shard_Ring)>>

::Shard_Ring_FirstMeeting_Intro <475,13225>


\<<run setup.choice("[[->Shard_Ring_FirstMeeting_Intro_1]]");>>

::Shard_Ring_FirstMeeting_Intro_1 <600,13225>
<<print setup.displayEncounterImage("https://sombreve.github.io/Dawn-of-Corruption-Site/Images/Scenes/bind_ring_lowres.jpg","https://sombreve.github.io/Dawn-of-Corruption-Site/Images/Scenes/bind_ring.jpg", undefined, true)>>



\<<run setup.choice("[[->Shard_Ring_FirstMeeting_Intro_2]]");>>
\<<run setup.choice("[[->Village]]");>>

::Shard_Ring_FirstMeeting_Intro_2 <725,13225>
\<<if setup.getStatValue($CharacterSheet_Player, "strength") > 20>>





\<<run setup.choice("[[->Shard_Ring_FirstMeeting_Intro_3]]");>>
\<<else>>





\<<run setup.choice("[[->Village]]");>>
\<</if>>

::Shard_Ring_FirstMeeting_Intro_3 <850,13225>
\<<set $CharacterSheet_Shard_Ring.info.known = setup.EncounterKnownState.KNOWN>>




\<<run setup.choice("[[->Shard_Ring_FirstMeeting_Intro_4]]");>>

::Shard_Ring_FirstMeeting_Intro_4 <975,13225>







\<<run setup.choice("[[->Shard_Ring_FirstMeeting_Intro_4_1]]");>>

::Shard_Ring_FirstMeeting_Intro_4_1 <1100,13225>


<span class='bind1'>""</span>



<span class='bind1'>""</span>



\<<run setup.choice("[[->Shard_Ring_FirstMeeting_Intro_5]]");>>

::Shard_Ring_FirstMeeting_Intro_5 <1225,13225>






\<<run setup.choice("[[->Shard_Ring_FirstMeeting_Intro_6]]");>>

::Shard_Ring_FirstMeeting_Intro_6 <100,13350>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Shard_Ring, "normal")>>




<span class='bind1'>""</span> <span class='bind2'>""</span>

\<<run setup.choice("[[->Shard_Ring_FirstMeeting_Intro_7]]");>>

::Shard_Ring_FirstMeeting_Intro_7 <225,13350>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Shard_Ring, "normal")>>





<span class='bind1'>""</span> <span class='bind2'>""</span>

<<print setup.getFightStartPassages($CharacterSheet_Shard_Ring)>>

::Shard_Ring_Low_Rela_Win_Idle <350,13350>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Shard_Ring, "normal")>>
\




\<<run setup.choice("[[->Shard_Ring_Low_Rela_Win_Idle_2]]");>>

::Shard_Ring_Low_Rela_Win_Idle_2 <475,13350>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Shard_Ring, "normal")>>
\


<span class='bind1'>""</span> <span class='bind2'>""</span>





\<<run setup.choice("[[->Shard_Ring_Low_Rela_Win_Idle_3]]");>>

::Shard_Ring_Low_Rela_Win_Idle_3 <600,13350>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Shard_Ring, "normal")>>
\
<span class='bind1'>""</span> <span class='bind2'>" "</span>




<span class='bind1'>""</span> <span class='bind2'>""</span>

[[->Shard_Ring_Win_Dominant_Idle]]
[[->ShardRing_Win_Sub_Idle]]
\<<run setup.choice("[[->Village]]");>>

::Shard_Ring_Low_Rela_Loss <725,13350>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Shard_Ring, "normal")>>
\



<span class='bind1'>""</span> <span class='bind2'>""</span>

\<<run setup.choice("[[->Shard_Ring_Low_Rela_Loss_2]]");>>

::Shard_Ring_Low_Rela_Loss_2 <850,13350>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Shard_Ring, "normal")>>
\





\<<run setup.choice("[[->Village]]");>>

::Shard_Ring_Win_Dominant_Idle <975,13350>
\<<set $CharacterSheet_Shard_Ring.quest.relationshipScoring++>>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Shard_Ring, "normal")>>
\


<span class='bind1'>""</span> <span class='bind2'>""</span>



\<<run setup.choice("[[->Shard_Ring_Win_Dominant_Idle_2]]");>>

::Shard_Ring_Win_Dominant_Idle_2 <1100,13350>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Shard_Ring, "normal")>>
\
<span class='bind1'>""</span> <span class='bind2'>""</span>




<span class='bind1'>""</span> <span class='bind2'>""</span>



\<<run setup.choice("[[->Shard_Ring_Win_Dominant_Idle_3]]");>>

::Shard_Ring_Win_Dominant_Idle_3 <1225,13350>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 1)>>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Shard_Ring, "normal")>>
\


<span class='bind1'>""</span>

 


\<<run setup.choice("[[->Shard_Ring_Win_Dominant_Idle_4]]");>>

::Shard_Ring_Win_Dominant_Idle_4 <100,13475>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 2)>>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Shard_Ring, "normal")>>
\




<<print setup.getLength(setup.applyGrowth($CharacterSheet_Player, "cock", 1))>>



\<<run setup.choice("[[->Shard_Ring_Win_Dominant_Idle_5]]");>>

::Shard_Ring_Win_Dominant_Idle_5 <225,13475>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 3)>>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Shard_Ring, "normal")>>
\



<span class='bind1'>""</span>

\<<run setup.choice("[[->Shard_Ring_Win_Dominant_Idle_6]]");>>

::Shard_Ring_Win_Dominant_Idle_6 <350,13475>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 4)>>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Shard_Ring, "normal")>>
\



<span class='bind1'>""</span>

\<<run setup.choice("[[->Shard_Ring_Win_Dominant_Idle_7]]");>>

::Shard_Ring_Win_Dominant_Idle_7 <475,13475>
<<include setup.getNextNarativeEventPassage(setup.StorySheet_Shard_Ring.dominantExit)>>

::Shard_Ring_Low_Rela_Win_Dominant_NormalExit <600,13475>
\<<run setup.stopRealizationPackages(["CharacterSheet_Player"]);>>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Shard_Ring, "normal")>>
\







: <<print setup.getLength(setup.applyGrowth($CharacterSheet_Player, "cock", 1))>>
: 

\<<run setup.choice("[[->Village]]");>>

::Shard_Ring_Low_Rela_Win_Dominant_Final <725,13475>
\<<run setup.stopRealizationPackages(["CharacterSheet_Player"]);>>
\<<set State.variables.CharacterSheet_Shard_Ring.quest.fullDom = true>>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Shard_Ring, "normal")>>
\




<span class='bind1'>""</span>

\<<run setup.choice("[[->Shard_Ring_Low_Rela_Win_Dominant_Final_2]]");>>

::Shard_Ring_Low_Rela_Win_Dominant_Final_2 <850,13475>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Shard_Ring, "normal")>>
\



<span class='bind1'>""</span> <span class='bind2'>"~"</span>

\<<run setup.choice("[[->Shard_Ring_Low_Rela_Win_Dominant_Final_3]]");>>

::Shard_Ring_Low_Rela_Win_Dominant_Final_3 <975,13475>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Shard_Ring, "normal")>>
\





\<<run setup.choice("[[->Shard_Ring_Low_Rela_Win_Dominant_Final_4]]");>>

::Shard_Ring_Low_Rela_Win_Dominant_Final_4 <1100,13475>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Shard_Ring, "normal")>>
\


<span class='bind1'>""</span>




\<<run setup.choice("[[-->Shard_Ring_Low_Rela_Win_Dominant_Final_5]]");>>

::Shard_Ring_Low_Rela_Win_Dominant_Final_5 <1225,13475>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Shard_Ring, "normal")>>
\


<span class='bind1'>""</span> <span class='bind2'>"~"</span>

: <<print setup.getLength(setup.applyGrowth($CharacterSheet_Player, "cock", 4))>>
: ""
\<<run $CharacterSheet_Player.applyAbilityRuntimeData(setup.Ability_CockRingOfTheBind)>>
\<<run setup.completeAchievement("Achievement_CockRingOfTheBind");>>

\<<run setup.choice("[[->Village]]");>>

::Shard_Ring_Low_Rela_Win_Dominant_Idle <100,13600>
\<<run setup.stopRealizationPackages(["CharacterSheet_Player"]);>>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Shard_Ring, "normal")>>
\


 

<span class='bind1'>""</span> <span class='bind2'>""</span>

\<<run setup.choice("[[->Shard_Ring_Low_Rela_Win_Dominant_Idle_2]]");>>

::Shard_Ring_Low_Rela_Win_Dominant_Idle_2 <225,13600>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Shard_Ring, "normal")>>
\


<span class='bind1'>""</span> <span class='bind2'>"~"</span>



\<<run setup.choice("[[->Shard_Ring_Low_Rela_Win_Dominant_Idle_3]]");>>

::Shard_Ring_Low_Rela_Win_Dominant_Idle_3 <350,13600>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Shard_Ring, "normal")>>
\





\<<run setup.choice("[[->Shard_Ring_Low_Rela_Win_Dominant_Idle_4]]");>>

::Shard_Ring_Low_Rela_Win_Dominant_Idle_4 <475,13600>


<span class='bind1'>""</span> <span class='bind2'>""</span>

: <<print setup.getLength(setup.applyGrowth($CharacterSheet_Player, "cock", 4))>>
: ""
\<<run $CharacterSheet_Player.applyAbilityRuntimeData(setup.Ability_CockRingOfTheBind)>>

\<<run setup.choice("[[->Village]]");>>

::Shard_Ring_Dom_Loss <600,13600>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Shard_Ring, "normal")>>
\

 

<span class='bind1'>""</span> <span class='bind2'>""</span>




\<<run setup.choice("[[->Village]]");>>

::ShardRing_Win_Sub_Idle <725,13600>
\<<set $CharacterSheet_Shard_Ring.quest.relationshipScoring-->>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Shard_Ring, "normal")>>
\


<span class='bind1'>""</span> <span class='bind2'>""</span>

\<<run setup.choice("[[->ShardRing_Win_Sub_Idle_2]]");>>

::ShardRing_Win_Sub_Idle_2 <850,13600>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Shard_Ring, "normal")>>
\

 



\<<run setup.choice("[[->ShardRing_Win_Sub_Idle_3]]");>>

::ShardRing_Win_Sub_Idle_3 <975,13600>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Shard_Ring, "normal")>>
\





\<<run setup.choice("[[->ShardRing_Win_Sub_Idle_4]]");>>

::ShardRing_Win_Sub_Idle_4 <1100,13600>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 1)>>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Shard_Ring, "normal")>>
\





\<<run setup.choice("[[->ShardRing_Win_Sub_Idle_5]]");>>

::ShardRing_Win_Sub_Idle_5 <1225,13600>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 2)>>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Shard_Ring, "normal")>>
\





<span class='bind1'>""</span>

\<<run setup.choice("[[->ShardRing_Win_Sub_Idle_6]]");>>

::ShardRing_Win_Sub_Idle_6 <100,13725>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 3)>>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Shard_Ring, "normal")>>
\





<<include setup.getNextNarativeEventPassage(setup.StorySheet_Shard_Ring.subExit)>>

::Shard_Ring_Low_Rela_Win_Sub_NormalExitChoice <225,13725>
\<<run setup.choice("[[->Shard_Ring_Low_Rela_Win_Sub_LowRelaExit]]");>>
<span class = 'inactive'>[[->Village]] (The Bind still feels some restraint within you.)</span>

::Shard_Ring_Low_Rela_Win_Sub_FinalExitChoice <350,13725>
\<<run setup.choice("[[->Shard_Ring_Low_Rela_Win_Sub_LowRelaExit]]");>>
\<<run setup.choice("[[->Shard_Ring_Low_Rela_Win_Sub_FinalExitChoice_2]]");>>

::Shard_Ring_Low_Rela_Win_Sub_LowRelaExit <475,13725>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 4)>>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Shard_Ring, "normal")>>
\



 



: <<print setup.getLength(setup.applyGrowth($CharacterSheet_Shard_Ring, "cock", 1))>>
: 

\<<run setup.choice("[[->Village]]");>>

::Shard_Ring_Low_Rela_Win_Sub_FinalExitChoice_2 <600,13725>
\<<set State.variables.CharacterSheet_Shard_Ring.quest.fullSub = true>>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 4)>>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Shard_Ring, "normal")>>
\








\<<run setup.choice("[[->Shard_Ring_Low_Rela_Win_Sub_FinalExitChoice_3]]");>>

::Shard_Ring_Low_Rela_Win_Sub_FinalExitChoice_3 <725,13725>
\<<run setup.stopRealizationPackages(["CharacterSheet_Player"]);>>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Shard_Ring, "normal")>>
\




<span class='bind1'>""</span> <span class='bind2'>""</span>

\<<run setup.choice("[[->Shard_Ring_Low_Rela_Win_Sub_FinalExitChoice_4]]");>>

::Shard_Ring_Low_Rela_Win_Sub_FinalExitChoice_4 <850,13725>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Shard_Ring, "normal")>>
\


<span class='bind1'>""</span> <span class='bind2'>""</span> 





""

\<<run setup.choice("[[->Shard_Ring_Low_Rela_Win_Sub_FinalExitChoice_5]]");>>

::Shard_Ring_Low_Rela_Win_Sub_FinalExitChoice_5 <975,13725>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Shard_Ring, "normal")>>
\


<span class='bind1'>""</span>


 

\<<run setup.choice("[[->Shard_Ring_Low_Rela_Win_Sub_FinalExitChoice_6]]");>>

::Shard_Ring_Low_Rela_Win_Sub_FinalExitChoice_6 <1100,13725>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Shard_Ring, "normal")>>
\

 

<span class='bind1'>""</span>

\<<run setup.choice("[[->Shard_Ring_Low_Rela_Win_Sub_FinalExitChoice_7]]");>>

::Shard_Ring_Low_Rela_Win_Sub_FinalExitChoice_7 <1225,13725>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Shard_Ring, "normal")>>
\






\<<run setup.choice("[[->Shard_Ring_Low_Rela_Win_Sub_FinalExitChoice_8]]");>>

::Shard_Ring_Low_Rela_Win_Sub_FinalExitChoice_8 <100,13850>





: 
: ""
\<<run $CharacterSheet_Player.applyAbilityRuntimeData(setup.Ability_CollarOfTheBind)>>
\<<run setup.completeAchievement("Achievement_CollarOfTheBind");>>

\<<run setup.choice("[[->Village]]");>>

::Shard_Ring_Low_Rela_Win_Sub_IdleExit <225,13850>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Shard_Ring, "normal")>>
\





<span class='bind1'>""</span> <span class='bind2'>""</span>

\<<run setup.choice("[[->Shard_Ring_Low_Rela_Win_Sub_IdleExit_2]]");>>

::Shard_Ring_Low_Rela_Win_Sub_IdleExit_2 <350,13850>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Shard_Ring, "normal")>>
\
<span class='bind1'>""</span> <span class='bind2'>"!!"</span>






\<<run setup.choice("[[->Shard_Ring_Low_Rela_Win_Sub_IdleExit_3]]");>>

::Shard_Ring_Low_Rela_Win_Sub_IdleExit_3 <475,13850>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Shard_Ring, "normal")>>
\




: ""
\<<run $CharacterSheet_Player.applyAbilityRuntimeData(setup.Ability_CollarOfTheBind)>>

\<<run setup.choice("[[->Village]]");>>

::Shard_Ring_Sub_Loss <600,13850>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Shard_Ring, "normal")>>
\


<span class='bind1'>""</span> <span class='bind2'>""</span>

 

\<<run setup.choice("[[->Shard_Ring_Sub_Loss_2]]");>>

::Shard_Ring_Sub_Loss_2 <725,13850>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 1)>>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Shard_Ring, "normal")>>
\


<span class='bind1'>""</span> <span class='bind2'>""</span>




<span class='bind1'>""</span> <span class='bind2'>""</span>

\<<run setup.choice("[[->Shard_Ring_Sub_Loss_3]]");>>

::Shard_Ring_Sub_Loss_3 <850,13850>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 2)>>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Shard_Ring, "normal")>>
\




\<<run setup.choice("[[->Shard_Ring_Sub_Loss_3]]");>>

::Shard_Ring_Sub_Loss_4 <975,13850>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 4)>>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Shard_Ring, "normal")>>
\


<span class='bind1'>""</span> <span class='bind2'>""</span>

 




\<<run setup.choice("[[->Shard_Ring_Sub_Loss_5]]");>>

::Shard_Ring_Sub_Loss_5 <1100,13850>
\<<run setup.stopRealizationPackages(["CharacterSheet_Player"]);>>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Shard_Ring, "normal")>>
\



<<print setup.bindLossSubEffect()>>

\<<run setup.choice("[[->Shard_Ring_Sub_Loss_6]]");>>

::Shard_Ring_Sub_Loss_6 <1225,13850>




\<<run setup.choice("[[->Village]]");>>

::Encounter_Intro_Slime <100,13975>
\<<set $CharacterSheet_Slime.info.known = setup.EncounterKnownState.KNOWN>>
\<<if setup.sizecomparison(setup.getStatValue($CharacterSheet_Player, "height"), setup.getStatValue($CharacterSheet_Slime, "height")) >= setup.Comparators.FITS_ON_FINGER>>





<<print setup.getFightReward($CharacterSheet_Slime)>>

\<<run setup.choice("[[->Village]]");>>
\<<else>>
\<<if $Essence < 200>>




\<<run setup.choice("[[->Encounter_Intro_Slime_EssenceLow_1]]");>>
\<<run setup.choice("[[->Village]]");>>
\<<elseif $Essence >= 200 && $Essence < 600>>




\<<run setup.choice("[[->Encounter_Intro_Slime_EssenceMedium_1]]");>>
\<<run setup.choice("[[->Encounter_Intro_Slime_EssenceMedium_Leave]]");>>
\<<elseif $Essence >= 600>>






<<print setup.getFightStartPassages($CharacterSheet_Slime)>>
\<</if>>
\<</if>>

::Encounter_Intro_Slime_EssenceMedium_1 <225,13975>


<<print setup.getFightStartPassages($CharacterSheet_Slime)>>

::Encounter_Intro_Slime_EssenceMedium_Leave <350,13975>




\<<run setup.choice("[[->Village]]");>>

::Encounter_Intro_Slime_EssenceLow_1 <475,13975>


<<print setup.getLength(setup.getStatValue($CharacterSheet_Slime, "height"))>>



<<print setup.getFightStartPassages($CharacterSheet_Slime)>>

::Encounter_Start_Slime <600,13975>


::Encounter_Win_Slime <725,13975>




<<SymbioteName>>



<<print setup.getFightReward($CharacterSheet_Slime)>>

\<<run setup.choice("[[->Encounter_Win_Slime_Reshape_Race]]");>>
\<<run setup.choice("[[->Village]]");>>

::Encounter_Win_Slime_Reshape_Race <850,13975>






[[->Encounter_Win_Slime_Reshape_Humanoid][$ReshapeRace = "Humanoid"]]
[[->Encounter_Win_Slime_Reshape_Naga][$ReshapeRace = "Naga"]]
[[->Encounter_Win_Slime_Reshape_Minotaur][$ReshapeRace = "Minotaur"]]
[[->Encounter_Win_Slime_Reshape_Werewolf][$ReshapeRace = "Werewolf"]]

::Encounter_Win_Slime_Reshape_Displacer <975,13975>
<<SymbioteName>> 

 





<<include Encounter_Win_Slime_Size>>

::Encounter_Win_Slime_Reshape_Werewolf <1100,13975>


<<SymbioteName>>







<<include Encounter_Win_Slime_Size>>

::Encounter_Win_Slime_Reshape_Minotaur <1225,13975>


<<SymbioteName>>

 




<<include Encounter_Win_Slime_Size>>

::Encounter_Win_Slime_Reshape_Naga <100,14100>


<<SymbioteName>>

 




<<include Encounter_Win_Slime_Size>>

::Encounter_Win_Slime_Reshape_Humanoid <225,14100>



<<include Encounter_Win_Slime_Size>>

::Encounter_Win_Slime_Size <350,14100>
5

[[->Encounter_Win_Slime_Size_Slim][$ReshapeSize = "Slim"]]
[[->Encounter_Win_Slime_Size_Muscular][$ReshapeSize = "Muscular"]]
[[->Encounter_Win_Slime_Size_Chubby][$ReshapeSize = "Chubby"]]
[[->Encounter_Win_Slime_Size_Hyper][$ReshapeSize = "Hyper"]]

::Encounter_Win_Slime_Size_Slim <475,14100>



<<include Encounter_Win_Slime_SexualOrgans>>

::Encounter_Win_Slime_Size_Muscular <600,14100>



\<<if $ReshapeRace == "Displacer">>

\<<else>>

\<</if>>


\<<if $ReshapeRace == "Naga">>

\<<else>>

\<</if>>





<<include Encounter_Win_Slime_SexualOrgans>>

::Encounter_Win_Slime_Size_Chubby <725,14100>
 





\<<if $ReshapeRace == "Naga">>

\<<else>>

\<</if>>








<<include Encounter_Win_Slime_SexualOrgans>>

::Encounter_Win_Slime_Size_Hyper <850,14100>
<<run setup.applyGrowth($CharacterSheet_Slime, "height", setup.getStatValue($CharacterSheet_Slime, "height"))>>


<<print setup.getLength(setup.getStatValue($CharacterSheet_Slime, "height"))>> 


\<<if $ReshapeRace == "Displacer">>

\<</if>>


\<<if $ReshapeRace == "Naga">>

\<<else>>

\<</if>>

;
\<<if setup.sizecomparison(setup.getStatValue($CharacterSheet_Player, "height"), setup.getStatValue($CharacterSheet_Slime, "height") * 2.5) >= setup.Comparators.MUCH_BIGGER>>

\<</if>>

<<include Encounter_Win_Slime_SexualOrgans>>

::Encounter_Win_Slime_SexualOrgans <975,14100>


[[->Encounter_Win_Slime_SexualOrgans_Penis][$ReshapeSexualOrgan = "Penis"]]
[[->Encounter_Win_Slime_SexualOrgans_Vagina][$ReshapeSexualOrgan = "Vagina"]]
[[->Encounter_Win_Slime_SexualOrgans_OnlyAss][$ReshapeSexualOrgan = "None"]]

::Encounter_Win_Slime_SexualOrgans_Intro <1100,14100>


::Encounter_Win_Slime_SexualOrgans_OnlyAss <1225,14100>
<<include Encounter_Win_Slime_SexualOrgans_Intro>>





<<include Encounter_Win_Slime_Sex>>

::Encounter_Win_Slime_SexualOrgans_Vagina <100,14225>
<<include Encounter_Win_Slime_SexualOrgans_Intro>>






<<include Encounter_Win_Slime_Sex>>

::Encounter_Win_Slime_SexualOrgans_Penis <225,14225>
<<include Encounter_Win_Slime_SexualOrgans_Intro>>


\<<if $ReshapeSize == "Hyper">>

\<</if>>



<<include Encounter_Win_Slime_Sex>>

::Encounter_Win_Slime_Sex <350,14225>


\<<if $ReshapeSexualOrgan == "Penis" && setup.hasLimb($CharacterSheet_Player.info.anatomy, "vaginas")>>
\<<run setup.choice("[[->Encounter_Win_Slime_Sex_RideVaginal]]");>>
\<</if>>
\<<if $ReshapeSexualOrgan == "Penis">>
\<<run setup.choice("[[->Encounter_Win_Slime_Sex_RideAnal]]");>>
\<</if>>
\<<if setup.sizecomparison(setup.getStatValue($CharacterSheet_Player, "cock"), setup.getStatValue($CharacterSheet_Slime, "height")) >= setup.Comparators.BIGGER>>
\<<run setup.choice("[->Encounter_Win_Slime_Sex_TooBig]]");>>
\<<else>>
\<<if $ReshapeSexualOrgan == "Vagina">>
\<<run setup.choice("[[->Encounter_Win_Slime_Sex_PenetrateVagina]]");>>
\<</if>>
\<<run setup.choice("[[->Encounter_Win_Slime_Sex_PenetrateAss]]");>>
\<</if>>
\<<run setup.choice("[[->Encounter_Win_Slime_Sex_Abandon]]");>>

::Encounter_Win_Slime_Sex_Intro <475,14225>

\<<if $ReshapeSize == "Hyper">>

\<</if>>



\<<if $ReshapeRace == "Naga">>

\<<elseif $ReshapeRace == "Displacer">>

\<<else>>

\<</if>>

<<include Encounter_Win_Slime_ShapeDescription>>

::Encounter_Win_Slime_Sex_RideVaginal <600,14225>
<<include Encounter_Win_Slime_Sex_Intro>>

\<<if $ReshapeSize == "Hyper">>

\<</if>>


 
\<<if $ReshapeRace == "Naga">>

\<<elseif $ReshapeRace == "Displacer">>

\<<else>>

\<</if>>

<<include Encounter_Win_Slime_ShapeDescription>>








\<<run setup.choice("[[->Encounter_Win_Slime_Sex_RideVaginal_2]]");>>

::Encounter_Win_Slime_Sex_RideVaginal_2 <725,14225>






\<<if $ReshapeRace == "Naga" || $ReshapeRace == "Minotaur" >>

\<<elseif $ReshapeRace == "Displacer">>

\<</if>>





\<<run setup.choice("[[->Encounter_Win_Slime_Sex_RideVaginal_3]]");>>

::Encounter_Win_Slime_Sex_RideVaginal_3 <850,14225>










\<<if setup.hasLimb($CharacterSheet_Player.info.anatomy, "cocks")>>

\<</if>>

\<<run setup.choice("[[->Encounter_Win_Slime_Sex_RideVaginal_4]]");>>

::Encounter_Win_Slime_Sex_RideVaginal_4 <975,14225>







\<<run setup.choice("[[->Encounter_Win_Slime_Sex_RideVaginal_5]]");>>

::Encounter_Win_Slime_Sex_RideVaginal_5 <1100,14225>



\<<run setup.choice("[[->Village]]");>>

::Encounter_Win_Slime_ShapeDescription <1225,14225>
 \
\<<if $ReshapeSize == "Slim">>

\<<elseif $ReshapeRace == "Muscular">>

\<<elseif $ReshapeRace == "Hyper">>

\<</if>>

::Encounter_Win_Slime_Sex_RideAnal <100,14350>
<<include Encounter_Win_Slime_Sex_Intro>>

 
\<<if $ReshapeSize == "Hyper">>

\<<else>>

\<</if>>



\<<run setup.choice("[[->Encounter_Win_Slime_Sex_RideAnal_2]]");>>

::Encounter_Win_Slime_Sex_RideAnal_2 <225,14350>
 



\<<if $ReshapeRace == "Naga" || $ReshapeRace == "Minotaur">> 

\<<elseif $ReshapeRace == "Displacer">>

\<</if>>


\<<if setup.hasLimb($CharacterSheet_Player.info.anatomy, "cocks")>>


\<<elseif setup.hasLimb($CharacterSheet_Player.info.anatomy, "vaginas")>>

\<</if>>

\<<run setup.choice("[[->Encounter_Win_Slime_Sex_RideAnal_3]]");>>

::Encounter_Win_Slime_Sex_RideAnal_3 <350,14350>




 

 
\<<if setup.hasLimb($CharacterSheet_Player.info.anatomy, "cocks")>>

\<<elseif setup.hasLimb($CharacterSheet_Player.info.anatomy, "vaginas")>>

\<</if>>


\<<if setup.hasLimb($CharacterSheet_Player.info.anatomy, "cocks")>>

\<<elseif setup.hasLimb($CharacterSheet_Player.info.anatomy, "vaginas")>>

\<</if>>

\<<run setup.choice("[[->Encounter_Win_Slime_Sex_RideAnal_4]]");>>

::Encounter_Win_Slime_Sex_RideAnal_4 <475,14350>






\<<run setup.choice("[[->Encounter_Win_Slime_Sex_RideAnal_5]]");>>

::Encounter_Win_Slime_Sex_RideAnal_5 <600,14350>



\<<run setup.choice("[[->Village]]");>>

::Encounter_Win_Slime_Sex_PenetrateVagina <725,14350>

\<<if $ReshapeSize == "Hyper">>

\<</if>>


\<<if $ReshapeRace == "Naga">>

\<<else>>

\<</if>>



\<<run setup.choice("[[->Encounter_Win_Slime_Sex_PenetrateVagina_2]]");>>

::Encounter_Win_Slime_Sex_PenetrateVagina_2 <850,14350>


\<<if $ReshapeRace == "Naga" || $ReshapeRace == "Minotaur">>

\<<elseif $ReshapeRace == "Displacer">>

\<</if>>









\<<run setup.choice("[[->Encounter_Win_Slime_Sex_PenetrateVagina_3]]");>>

::Encounter_Win_Slime_Sex_PenetrateVagina_3 <975,14350>






\<<run setup.choice("[[->Village]]");>>

::Encounter_Win_Slime_Sex_PenetrateAss <1100,14350>

\<<if $ReshapeSize == "Hyper">>

\<</if>>




\<<if $ReshapeRace == "Naga" || $ReshapeRace == "Minotaur">>

\<<elseif $ReshapeRace == "Displacer">>

\<<else>>

\<</if>>

\<<run setup.choice("[[->Encounter_Win_Slime_Sex_PenetrateAss_2]]");>>

::Encounter_Win_Slime_Sex_PenetrateAss_2 <1225,14350>







 


\<<run setup.choice("[[->Encounter_Win_Slime_Sex_PenetrateAss_3]]");>>

::Encounter_Win_Slime_Sex_PenetrateAss_3 <100,14475>


\<<if setup.hasLimb($CharacterSheet_Slime.info.anatomy, "cocks")>>

\<</if>>






\<<run setup.choice("[[->Village]]");>>

::Encounter_Win_Slime_Sex_TooBig <225,14475>


\<<run setup.choice("[[->Encounter_Win_Slime_Sex_TooBig_PenileMasturbation]]");>>
\<<run setup.choice("[[->Encounter_Win_Slime_Sex_TooBig_VaginalMasturbation]]");>>
\<<run setup.choice("[[->Encounter_Win_Slime_Sex_TooBig_Hurl]]");>>

::Encounter_Win_Slime_Sex_TooBig_PenileMasturbation <350,14475>


\<<if setup.getStatValue($CharacterSheet_Player, "cock") > 120 && setup.getStatValue($CharacterSheet_Player, "cock") > setup.getStatValue($CharacterSheet_Slime, "height")>>

\<<else>>

\<</if>>





.









\<<run setup.choice("[[->Village]]");>>

::Encounter_Win_Slime_Sex_TooBig_VaginalMasturbation <475,14475>














 

\<<if setup.hasLimb($CharacterSheet_Player.info.anatomy, "cocks")>>

\<</if>>




\<<run setup.choice("[[->Village]]");>>

::Encounter_Win_Slime_Sex_TooBig_Hurl <600,14475>









\<<run setup.choice("[[->Village]]");>>

::Encounter_Win_Slime_Sex_Abandon <725,14475>


\<<run setup.choice("[[->Village]]");>>

::Encounter_Loss_Slime <850,14475>
<<print setup.getFightReward($CharacterSheet_Slime, true)>>



\<<run setup.choice("[[->Encounter_Loss_Slime_Escape]]");>>
\<<run setup.choice("[[->Encounter_Loss_Slime_Submit]]");>>

::Encounter_Loss_Slime_Escape <975,14475>


\<<run setup.choice("[[->Village]]");>>

::Encounter_Loss_Slime_Submit <1100,14475>


\<<run setup.choice("[[->Encounter_Loss_Slime_Submit_Penis]]");>>
\<<run setup.choice("[[->Encounter_Loss_Slime_Submit_Chest]]");>>
\<<run setup.choice("[[->Encounter_Loss_Slime_Submit_Rear]]");>>

::Encounter_Loss_Slime_Submit_Penis <1225,14475>







 







 





\<<run setup.choice("[[->Village]]");>>

::Encounter_Loss_Slime_Submit_Chest <100,14600>






 













 





\<<run setup.choice("[[->Village]]");>>

::Encounter_Loss_Slime_Submit_Rear <225,14600>












 









\<<run setup.choice("[[->Village]]");>>

::Encounter_Intro_Torgar <350,14600>
<<include setup.getNextNarativeEventPassage(setup.StorySheet_Torgar.encounterPassages)>>

::Encounter_Start_Torgar <475,14600>


::Encounter_Win_Torgar <600,14600>
<<print setup.getFightReward($CharacterSheet_Torgar)>>

<<include setup.getNextNarativeEventPassage(setup.StorySheet_Torgar.postFightPassagesWin)>>

::Encounter_Loss_Torgar <725,14600>
<<print setup.getFightReward($CharacterSheet_Torgar, true)>>

<<include setup.getNextNarativeEventPassage(setup.StorySheet_Torgar.postFightPassagesLoss)>>

::Torgar_FirstMeeting_Intro <850,14600>




\<<run setup.choice("[[->Torgar_FirstMeeting_Intro_1]]");>>

::Torgar_FirstMeeting_Intro_1 <975,14600>




\<<run setup.choice("[[->Torgar_FirstMeeting_Intro_2]]");>>

::Torgar_FirstMeeting_Intro_2 <1100,14600>
<<print setup.getLength(12)>>



\<<run setup.choice("[[->Torgar_FirstMeeting_Intro_3]]");>>
\<<run setup.choice("[[->Village]]");>>

::Torgar_FirstMeeting_Intro_3 <1225,14600>
\<<set $CharacterSheet_Torgar.info.known = setup.EncounterKnownState.KNOWN>>
\<<set $CharacterSheet_Torgar.quest.relationshipScoring++>>




\<<run setup.choice("[[->Torgar_FirstMeeting_Intro_3_1]]");>>

::Torgar_FirstMeeting_Intro_3_1 <100,14725>




\<<run setup.choice("[[->Torgar_FirstMeeting_Intro_4]]");>>

::Torgar_FirstMeeting_Intro_4 <225,14725>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "normal")>>






""

\<<run setup.choice("[[->Torgar_FirstMeeting_Intro_5]]");>>

::Torgar_FirstMeeting_Intro_5 <350,14725>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "smiling")>>




""



\<<run setup.choice("[[->Torgar_FirstMeeting_Intro_6]]");>>

::Torgar_FirstMeeting_Intro_6 <475,14725>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "smiling")>>


""



\<<run setup.choice("[[->Torgar_FirstMeeting_Intro_7_ShakeHand]]");>>
\<<run setup.choice("[[->Torgar_FirstMeeting_Intro_7_DistantGreet]]");>>

::Torgar_FirstMeeting_Intro_7_ShakeHand <600,14725>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "smiling")>>


""

<<include Torgar_FirstMeeting_Intro_7>>

::Torgar_FirstMeeting_Intro_7_DistantGreet <725,14725>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "normal")>>
""



<<include Torgar_FirstMeeting_Intro_7>>

::Torgar_FirstMeeting_Intro_7 <850,14725>
""



""



\<<run setup.choice("[[->Torgar_FirstMeeting_Intro_8]]");>>

::Torgar_FirstMeeting_Intro_8 <975,14725>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "angry")>>

""

<<print setup.getFightStartPassages($CharacterSheet_Torgar)>>

::Torgar_Ascended_Path_Trigger_EncounterStart <1100,14725>






<<print setup.getFightStartPassages($CharacterSheet_Torgar)>>

::Torgar_Ascended_Path_Trigger_Win <1225,14725>














()

\<<run setup.choice("[[->Village]]");>>

::Torgar_Ascended_Path_Trigger_Loss <100,14850>



//up lost scoring

\<<run setup.choice("[[->Village]]");>>

::Torgar_Low_Rela_EncounterStart_Converse <225,14850>





\<<run setup.choice("[[->Torgar_Low_Rela_EncounterStart_Converse_2]]");>>
\<<run setup.choice("[[->Village]]");>>

::Torgar_Low_Rela_EncounterStart_Converse_2 <350,14850>





""

\<<run setup.choice("[[->Torgar_Low_Rela_EncounterStart_Converse_3]]");>>

::Torgar_Low_Rela_EncounterStart_Converse_3 <475,14850>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "smiling")>>







\<<run setup.choice("[[->Torgar_Low_Rela_EncounterStart_Converse_4]]");>>

::Torgar_Low_Rela_EncounterStart_Converse_4 <600,14850>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "normal")>>

""





<<print setup.displayTorgarConverse()>>

<<print setup.getFightStartPassages($CharacterSheet_Torgar)>>

::Torgar_Low_Rela_EncounterStart_GotBig <725,14850>
\<<set $CharacterSheet_Torgar.quest.available_encounterPassages_lowRelaIdle_GotBig = false>>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "smiling")>>

"\
"



\<<run setup.choice("[[->Torgar_Low_Rela_EncounterStart_GotBig_2]]");>>

::Torgar_Low_Rela_EncounterStart_GotBig_2 <850,14850>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "blushing")>>



""

\<<run setup.choice("[[->Torgar_Low_Rela_EncounterStart_GotBig_3]]");>>

::Torgar_Low_Rela_EncounterStart_GotBig_3 <975,14850>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "horny")>>



""

<<print setup.getFightStartPassages($CharacterSheet_Torgar)>>

::Torgar_Low_Rela_EncounterStart_Carry <1100,14850>
\<<set $CharacterSheet_Torgar.quest.available_encounterPassages_lowRelaIdle_Carry = false>>
\
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "smiling")>>

""




\<<run setup.choice("[[->Torgar_Low_Rela_EncounterStart_Carry_2]]");>>

::Torgar_Low_Rela_EncounterStart_Carry_2 <1225,14850>
\<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "smiling")>>

""



""

\<<run setup.choice("[[->Torgar_Low_Rela_EncounterStart_Carry_3]]");>>

::Torgar_Low_Rela_EncounterStart_Carry_3 <100,14975>
\<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "angry")>>



""



""

\<<run setup.choice("[[->Torgar_Low_Rela_EncounterStart_Carry_3_AntiCorr]]");>>
\<<run setup.choice("[[->Torgar_Low_Rela_EncounterStart_Carry_3_ProCorr]]");>>

::Torgar_Low_Rela_EncounterStart_Carry_3_AntiCorr <225,14975>
\<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "sad")>>
\<<set $CharacterSheet_Torgar.quest.pureScoring++>>
""



\<<run setup.choice("[[->Torgar_Low_Rela_EncounterStart_Carry_3_Fight]]");>>

::Torgar_Low_Rela_EncounterStart_Carry_3_Fight <350,14975>
\<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "smiling")>>

""





<<print setup.getFightStartPassages($CharacterSheet_Torgar)>>

::Torgar_Low_Rela_EncounterStart_Carry_3_ProCorr <475,14975>
\<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "horny")>>

""



""

\<<run setup.choice("[[->Torgar_Low_Rela_EncounterStart_Carry_3_ProCorr_2_NotACityBoy]]");>>
\<<run setup.choice("[[->Torgar_Low_Rela_EncounterStart_Carry_3_ProCorr_2_Curious]]");>>

::Torgar_Low_Rela_EncounterStart_Carry_3_ProCorr_2_NotACityBoy <600,14975>
\<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "normal")>>

""



""

\<<run setup.choice("[[->Torgar_Low_Rela_EncounterStart_Carry_3_Fight]]");>>

::Torgar_Low_Rela_EncounterStart_Carry_3_ProCorr_2_Curious <725,14975>
\<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "smiling")>>
\<<set $CharacterSheet_Torgar.quest.ascendedScoring++>>

""



\<<run setup.choice("[[->Torgar_Low_Rela_EncounterStart_Carry_3_Fight]]");>>

::Torgar_Low_Rela_EncounterStart_Origin <850,14975>
\<<set $CharacterSheet_Torgar.quest.available_encounterPassages_lowRelaIdle_Origin = false>>
\<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "sad")>>

""



""

\<<run setup.choice("[[->Torgar_Low_Rela_EncounterStart_Origin_2]]");>>

::Torgar_Low_Rela_EncounterStart_Origin_2 <975,14975>
\<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "angry")>>

""



<<print setup.getFightStartPassages($CharacterSheet_Torgar)>>

::Torgar_Low_Rela_EncounterStart <1100,14975>









\<<run setup.choice("[[->Torgar_Low_Rela_EncounterStart_2]]");>>

::Torgar_Low_Rela_EncounterStart_2 <1225,14975>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "horny")>>


""

\<<run setup.choice("[[->Torgar_Low_Rela_EncounterStart_3]]");>>

::Torgar_Low_Rela_EncounterStart_3 <100,15100>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "blushing")>>


""



<<print setup.getFightStartPassages($CharacterSheet_Torgar)>>

::Torgar_Low_Rela_Win_Idle <225,15100>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "horny")>>

\<<if setup.getAvailableStoreFightMoveIDs($CharacterSheet_Player).length < 3>>
""
\<<else>>
"" 
\<</if>>



""

\<<run setup.choice("[[->Torgar_Low_Rela_Win_Idle_2]]");>>

::Torgar_Low_Rela_Win_Idle_2 <350,15100>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "smiling")>>
""



""



""

\<<run setup.choice("[[->Torgar_Buy_Sigils]]");>>
\<<run setup.choice("[[->Village]]");>>

::Torgar_Buy_Sigils <475,15100>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "smiling")>>
""  



""

<<print setup.displayFightMoveStore()>>

\<<run setup.choice("[[->Village]]");>>

::Buy_First_Sigil_1 <600,15100>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "smiling")>>



""

\<<run setup.choice("[[->Buy_First_Sigil_2]]");>>

::Buy_First_Sigil_2 <725,15100>




\<<run setup.choice("[[->Buy_First_Sigil_3]]");>>

::Buy_First_Sigil_3 <850,15100>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "horny")>>

$SigilColor


""



\<<run setup.choice("[[->Buy_First_Sigil_4]]");>>

::Buy_First_Sigil_4 <975,15100>
\<<run setup.playRealizationPackage(["CharacterSheet_Player", "CharacterSheet_Torgar"], 1)>>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "blushing")>>







""

\<<run setup.choice("[[->Buy_First_Sigil_5]]");>>

::Buy_First_Sigil_5 <1100,15100>
\<<run setup.playRealizationPackage(["CharacterSheet_Player", "CharacterSheet_Torgar"], 2)>>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "blushing")>>








\<<run setup.choice("[[->Buy_First_Sigil_6]]");>>

::Buy_First_Sigil_6 <1225,15100>
\<<run setup.playRealizationPackage(["CharacterSheet_Player", "CharacterSheet_Torgar"], 3)>>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "horny")>>






""

\<<run setup.choice("[[->Buy_First_Sigil_7]]");>>

::Buy_First_Sigil_7 <100,15225>
\<<run setup.playRealizationPackage(["CharacterSheet_Player", "CharacterSheet_Torgar"], 4)>>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "cumming", true)>>





""

\<<run setup.choice("[[->Buy_First_Sigil_8]]");>>

::Buy_First_Sigil_8 <225,15225>
\<<run setup.playRealizationPackage(["CharacterSheet_Player", "CharacterSheet_Torgar"], 1)>>
\<<run setup.stopSoundActions();>>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "cumming", true)>>





""




\<<run setup.choice("[[->Buy_First_Sigil_9]]");>>

::Buy_First_Sigil_9 <350,15225>
\<<run setup.stopRealizationPackages(["CharacterSheet_Player", "CharacterSheet_Torgar"]);>>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "smiling", true)>>



"\
"


 
""

<<print ": "+ setup.getLength(setup.applyGrowth($CharacterSheet_Player, "balls", 1.5)) + "" >>
<<print ": " >>

\<<run setup.choice("[[->Village]]");>>

::Buy_More_Sigil <475,15225>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "horny")>>
"" 



""

\<<run setup.choice("[[->Buy_More_Sigil_2]]");>>
\<<run setup.choice("[[->Buy_First_Sigil_1]]");>>

::Buy_More_Sigil_2 <600,15225>
\<<set $CharacterSheet_Torgar.quest.usedVialOnPlayerDick = true>>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "horny")>>


""

\<<run setup.choice("[[->Buy_More_Sigil_3]]");>>

::Buy_More_Sigil_3 <725,15225>
\<<run setup.playRealizationPackage(["CharacterSheet_Player", "CharacterSheet_Torgar"], 1)>>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "blushing")>>





\<<run setup.choice("[[->Buy_More_Sigil_4]]");>>

::Buy_More_Sigil_4 <850,15225>
\<<run setup.playRealizationPackage(["CharacterSheet_Player", "CharacterSheet_Torgar"], 2)>>
$SigilColor


 


\<<run setup.choice("[[->Buy_First_Sigil_5]]");>>

::Buy_Sigil_Used_Vial_On_Dick <975,15225>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "horny")>>

""

\<<run setup.choice("[[->Buy_First_Sigil_1]]");>>
\<<run setup.choice("[[->Buy_More_Sigil_2]]");>>

::Buy_Sigil_Growth <1100,15225>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "horny")>>
""
 


""



""
\<<set $linkDesc = ""+setup.FightMove_Sigil_Growth.essenceCost+"">>
\<<set $linkPath = setup.getSigilBoughtPassage()>>

\<<run setup.choice("[[$linkDesc->$linkPath][setup.buyFightMove($CharacterSheet_Player, setup.FightMove_Sigil_Growth.id)]]");>>
\<<run setup.choice("[[->Torgar_Buy_Sigils]]");>>

<<set $SigilColor = "golden">>

::Buy_Sigil_Pain <1225,15225>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "horny")>>


""


\<<set $linkDesc = ""+setup.FightMove_Sigil_Pain.essenceCost+"">>
\<<set $linkPath = setup.getSigilBoughtPassage()>>

\<<run setup.choice("[[$linkDesc->$linkPath][setup.buyFightMove($CharacterSheet_Player, setup.FightMove_Sigil_Pain.id)]]");>>
\<<run setup.choice("[[->Torgar_Buy_Sigils]]");>>

<<set $SigilColor = "">>

::Buy_Sigil_Vitality <100,15350>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "horny")>>


""
\<<set $linkDesc = ""+setup.FightMove_Sigil_Vitality.essenceCost+"">>
\<<set $linkPath = setup.getSigilBoughtPassage()>>

\<<run setup.choice("[[$linkDesc->$linkPath][setup.buyFightMove($CharacterSheet_Player, setup.FightMove_Sigil_Vitality.id)]]");>>
\<<run setup.choice("[[->Torgar_Buy_Sigils]]");>>

<<set $SigilColor = "turquoise">>

::Torgar_Low_Rela_Loss_Idle <225,15350>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "horny")>>

""


""

""




\<<run setup.choice("[[->Torgar_Low_Rela_Loss_Idle_2]]");>>
\<<run setup.choice("[[->Torgar_Low_Rela_Loss_Idle_PassOut]]");>>

::Torgar_Low_Rela_Loss_Idle_2 <350,15350>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "smiling")>>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 1)>>


""



""

 




\<<run setup.choice("[[->Torgar_Low_Rela_Loss_Idle_3]]");>>

::Torgar_Low_Rela_Loss_Idle_3 <475,15350>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 2)>>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "cumming")>>

""



\<<run setup.choice("[[->Torgar_Low_Rela_Loss_Idle_4]]");>>

::Torgar_Low_Rela_Loss_Idle_4 <600,15350>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 3)>>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "cumming", true)>>




""

\<<run setup.choice("[[->Torgar_Low_Rela_Loss_Idle_5]]");>>

::Torgar_Low_Rela_Loss_Idle_5 <725,15350>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 4)>>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "cumming", true)>>






\<<run setup.choice("[[->Torgar_Low_Rela_Loss_Idle_6]]");>>

::Torgar_Low_Rela_Loss_Idle_6 <850,15350>
\<<run $CharacterSheet_Player.applyAbilityRuntimeData(setup.Ability_EmpoweringDrink)>>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "smiling", true)>>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 1)>>

""



""





: ""

\<<run setup.choice("[[->Village]]");>>

::Torgar_Low_Rela_Loss_Idle_PassOut <975,15350>


\<<run setup.choice("[[->Torgar_Low_Rela_Loss_Idle_PassOut_2]]");>>

::Torgar_Low_Rela_Loss_Idle_PassOut_2 <1100,15350>





\<<run setup.choice("[[->Village]]");>>

::Torgar_Low_Rela_Mid_Rela_Trigger_EncounterStart <1225,15350>





\<<run setup.choice("[[->Torgar_Low_Rela_Mid_Rela_Trigger_EncounterStart_1]]");>>
\<<run setup.choice("[[->Village]]");>>

::Torgar_Low_Rela_Mid_Rela_Trigger_EncounterStart_1 <100,15475>
\<<set $CharacterSheet_Torgar.quest.available_encounterPassages_lowRelaMidRelaTrigger = false>>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "smiling")>>

""

""

<<print setup.getFightStartPassages($CharacterSheet_Torgar)>>

::Torgar_Low_Rela_Mid_Rela_Trigger_Win <225,15475>
\<<set $CharacterSheet_Torgar.quest.available_postFightPassagesWin_lowRelaMidRelaTrigger = false>>
\<<set $CharacterSheet_Torgar.quest.available_postFightPassagesLoss_lowRelaMidRelaTrigger = false>>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "sad")>>





""

""

\<<run setup.choice("[[->Torgar_Low_Rela_Mid_Rela_Trigger_Choices]]");>>

::Torgar_Low_Rela_Mid_Rela_Trigger_Loss <350,15475>
\<<set $CharacterSheet_Torgar.quest.available_postFightPassagesWin_lowRelaMidRelaTrigger = false>>
\<<set $CharacterSheet_Torgar.quest.available_postFightPassagesLoss_lowRelaMidRelaTrigger = false>>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "sad")>>






""

""

\<<run setup.choice("[[->Torgar_Low_Rela_Mid_Rela_Trigger_Choices]]");>>

::Torgar_Low_Rela_Mid_Rela_Trigger_Choices <475,15475>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "angry")>>



""



<h2>CRACK</h2>

""

\<<run setup.choice("[[->Torgar_Low_Rela_Mid_Rela_Trigger_Choices_Warn]]");>>
\<<run setup.choice("[[->Torgar_Low_Rela_Mid_Rela_Trigger_Choices_NoWarn]]");>>

::Torgar_Low_Rela_Mid_Rela_Trigger_Choices_Warn <600,15475>
\<<set $CharacterSheet_Torgar.quest.lostScoring-->>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "horny")>>



\<<run setup.choice("[[->Torgar_Low_Rela_Mid_Rela_Trigger_Choices_2]]");>>

::Torgar_Low_Rela_Mid_Rela_Trigger_Choices_NoWarn <725,15475>
\<<set $CharacterSheet_Torgar.quest.lostScoring-->>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "angry")>>




\<<run setup.choice("[[->Torgar_Low_Rela_Mid_Rela_Trigger_Choices_2]]");>>

::Torgar_Low_Rela_Mid_Rela_Trigger_Choices_2 <850,15475>
\<<run setup.playRealizationPackage(["CharacterSheet_Torgar"], 1)>>


""




"" 

\<<run setup.choice("[[->Torgar_Low_Rela_Mid_Rela_Trigger_Choices_3]]");>>

::Torgar_Low_Rela_Mid_Rela_Trigger_Choices_3 <975,15475>
\<<run setup.playRealizationPackage(["CharacterSheet_Torgar"], 2)>>
""

""




\<<run setup.choice("[[->Torgar_Low_Rela_Mid_Rela_Trigger_Choices_4]]");>>

::Torgar_Low_Rela_Mid_Rela_Trigger_Choices_4 <1100,15475>
\<<run setup.playRealizationPackage(["CharacterSheet_Torgar"], 3)>>


""

\<<run setup.choice("[[->Torgar_Low_Rela_Mid_Rela_Trigger_Choices_5]]");>>

::Torgar_Low_Rela_Mid_Rela_Trigger_Choices_5 <1225,15475>
\<<run setup.playRealizationPackage(["CharacterSheet_Torgar"], 2)>>
\<<set $CharacterSheet_Torgar.quest.progress = setup.TorgarProgress.INFECTED>>


""




"" 

\<<run setup.choice("[[->Torgar_Low_Rela_Mid_Rela_Trigger_Choices_6]]");>>

::Torgar_Low_Rela_Mid_Rela_Trigger_Choices_6 <100,15600>
\<<run setup.playRealizationPackage(["CharacterSheet_Torgar"], 2)>>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "blushing")>>

""



\<<run setup.choice("[[->Torgar_Low_Rela_Mid_Rela_Trigger_Choices_7]]");>>

::Torgar_Low_Rela_Mid_Rela_Trigger_Choices_7 <225,15600>
\<<run setup.playRealizationPackage(["CharacterSheet_Torgar"], 2)>>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "horny")>>

""




""

\<<run setup.choice("[[->Torgar_Low_Rela_Mid_Rela_Trigger_Choices_8]]");>>

::Torgar_Low_Rela_Mid_Rela_Trigger_Choices_8 <350,15600>
\<<run setup.playRealizationPackage(["CharacterSheet_Torgar"], 3)>>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "cumming")>>



""





""

\<<run setup.choice("[[->Torgar_Low_Rela_Mid_Rela_Trigger_Choices_9]]");>>

::Torgar_Low_Rela_Mid_Rela_Trigger_Choices_9 <475,15600>
\<<run setup.playRealizationPackage(["CharacterSheet_Torgar"], 3)>>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "smiling")>>



""

;\




\<<run setup.choice("[[->Torgar_Low_Rela_Mid_Rela_Trigger_Choices_10]]");>>

::Torgar_Low_Rela_Mid_Rela_Trigger_Choices_10 <600,15600>
\<<run setup.playRealizationPackage(["CharacterSheet_Torgar"], 3)>>
<<set $CharacterSheet_Torgar.quest.blackVeinsOnDick = true>>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "cumming")>>

<h2>""</h2>




\<<run setup.choice("[[->Torgar_Low_Rela_Mid_Rela_Trigger_Choices_10_1]]");>>

::Torgar_Low_Rela_Mid_Rela_Trigger_Choices_10_1 <725,15600>
\<<run setup.playRealizationPackage(["CharacterSheet_Torgar"], 3)>>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "cumming")>>
<h2>""</h2>



""



\<<run setup.choice("[[->Torgar_Low_Rela_Mid_Rela_Trigger_Choices_11]]");>>

::Torgar_Low_Rela_Mid_Rela_Trigger_Choices_11 <850,15600>
\<<run setup.playRealizationPackage(["CharacterSheet_Torgar"], 4)>>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "cumming")>>

<h2>""</h2>



<h2>""</h2>

\<<run setup.choice("[[->Torgar_Low_Rela_Mid_Rela_Trigger_Choices_12]]");>>

::Torgar_Low_Rela_Mid_Rela_Trigger_Choices_12 <975,15600>
\<<run setup.playRealizationPackage(["CharacterSheet_Torgar"], 4)>>
\<<set $CharacterSheet_Torgar.fight.hp += 80>>
\<<set $CharacterSheet_Torgar.fight.stamina += 100>>
\<<set $CharacterSheet_Torgar.fight.strength += 45>>
\<<run setup.applyCorruption($CharacterSheet_Torgar, 500)>>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "cumming", true)>>



<h2>""</h2>



: <<print setup.getLength(setup.applyGrowth($CharacterSheet_Torgar, "height", 5*12))>>
: <<print setup.getLength(setup.applyGrowth($CharacterSheet_Torgar, "cock", 2*12))>>
: <<print setup.getLength(setup.applyGrowth($CharacterSheet_Torgar, "balls", 0.8*12))>>
: (<<print setup.applyGrowth($CharacterSheet_Torgar, "muscles", 40)>>)
: 45
: 80
: 100
: 50

\<<run setup.choice("[[->Torgar_Low_Rela_Mid_Rela_Trigger_Choices_13]]");>>

::Torgar_Low_Rela_Mid_Rela_Trigger_Choices_13 <1100,15600>
\<<run setup.playRealizationPackage(["CharacterSheet_Torgar"], 1)>>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "smiling", true)>>

""

""



\<<run setup.choice("[[->Torgar_Low_Rela_Mid_Rela_Trigger_Choices_Pure]]");>>
\<<run setup.choice("[[->Torgar_Low_Rela_Mid_Rela_Trigger_Choices_Corrupt]]");>>
\<<run setup.choice("[[->Torgar_Low_Rela_Mid_Rela_Trigger_Choices_Ascended]]");>>

::Torgar_Low_Rela_Mid_Rela_Trigger_Choices_Pure <1225,15600>
\<<run setup.stopRealizationPackages(["CharacterSheet_Torgar"])>>
\<<set $CharacterSheet_Torgar.quest.pureScoring++>>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "sad", true)>>

\


""



\<<run setup.choice("[[->Torgar_Low_Rela_Mid_Rela_Trigger_Choices_Pure_1]]");>>

::Torgar_Low_Rela_Mid_Rela_Trigger_Choices_Pure_1 <100,15725>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "normal", true)>>

""





\<<run setup.choice("[[->Village]]");>>

::Torgar_Low_Rela_Mid_Rela_Trigger_Choices_Corrupt <225,15725>
\<<run setup.playRealizationPackage(["CharacterSheet_Torgar"], 1)>>
\<<set $CharacterSheet_Torgar.quest.lostScoring++>>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "horny", true)>>

""



"~"

\<<run setup.choice("[[->Torgar_Low_Rela_Mid_Rela_Trigger_Choices_Corrupt_1]]");>>

::Torgar_Low_Rela_Mid_Rela_Trigger_Choices_Corrupt_1 <350,15725>
\<<run setup.stopRealizationPackages(["CharacterSheet_Torgar"])>>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "horny", true)>>
 

""





\<<run setup.choice("[[->Village]]");>>

::Torgar_Low_Rela_Mid_Rela_Trigger_Choices_Ascended <475,15725>
\<<run setup.stopRealizationPackages(["CharacterSheet_Torgar"])>>
\<<set $CharacterSheet_Torgar.quest.ascendedScoring++>>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "normal", true)>>



""



\<<run setup.choice("[[->Torgar_Low_Rela_Mid_Rela_Trigger_Choices_Ascended_1]]");>>

::Torgar_Low_Rela_Mid_Rela_Trigger_Choices_Ascended_1 <600,15725>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "horny", true)>>

""

 



\<<run setup.choice("[[->Village]]");>>

::Torgar_Mid_Rela_Idle_EncounterStart <725,15725>





\<<run setup.choice("[[->Torgar_Mid_Rela_Idle_EncounterStart_2]]");>>
\<<run setup.choice("[[->Village]]");>>

::Torgar_Mid_Rela_Idle_EncounterStart_2 <850,15725>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "horny")>>

""

\




\<<run setup.choice("[[->Torgar_Mid_Rela_Idle_EncounterStart_2_HowDoing]]");>>
\<<run setup.choice("[[wink->Torgar_Mid_Rela_Idle_EncounterStart_2_Wink]]");>>

::Torgar_Mid_Rela_Idle_EncounterStart_2_HowDoing <975,15725>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "smiling")>>
\<<set $CharacterSheet_Torgar.quest.pureScoring++>>
\<<set $CharacterSheet_Torgar.quest.ascendedScoring++>>


""

\<<run setup.choice("[[->Torgar_Mid_Rela_Idle_EncounterStart_2_HowDoing_2]]");>>

::Torgar_Mid_Rela_Idle_EncounterStart_2_HowDoing_2 <1100,15725>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "horny")>>
""



""

\<<run setup.choice("[[->Torgar_Mid_Rela_Idle_EncounterStart_3]]");>>

::Torgar_Mid_Rela_Idle_EncounterStart_2_Wink <1225,15725>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "horny")>>
\<<set $CharacterSheet_Torgar.quest.lostScoring++>>
"" 






\<<run setup.choice("[[->Torgar_Mid_Rela_Idle_EncounterStart_3]]");>>

::Torgar_Mid_Rela_Idle_EncounterStart_3 <100,15850>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "normal")>>


""

\<<run setup.choice("[[->Torgar_Mid_Rela_Idle_EncounterStart_4]]");>>

::Torgar_Mid_Rela_Idle_EncounterStart_4 <225,15850>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "angry")>>
""



<<print setup.getFightStartPassages($CharacterSheet_Torgar)>>

::Torgar_Mid_Rela_Win_Idle <350,15850>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "horny")>>
\<<set $CharacterSheet_Torgar.quest.relationshipScoring++>>
""




\<<run setup.choice("[[->Torgar_Mid_Rela_Win_Idle_Ask]]");>>
\<<run setup.choice("[[->Village]]");>>

::Torgar_Mid_Rela_Loss_Idle <475,15850>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "horny")>>
\<<set $CharacterSheet_Torgar.quest.relationshipScoring++>>
""




\<<run setup.choice("[[->Torgar_Mid_Rela_Win_Idle_Ask]]");>>
\<<run setup.choice("[[->Village]]");>>

::Torgar_Mid_Rela_Win_Idle_Ask <600,15850>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "normal")>>


""



""

\<<run setup.choice("[[->Torgar_Mid_Rela_Win_Idle_Ask_Reject]]");>>
\<<run setup.choice("[[->Torgar_Mid_Rela_Win_Idle_Ask_Study]]");>>

::Torgar_Mid_Rela_Win_Idle_Ask_Reject <725,15850>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "normal")>>

""



\<<run setup.choice("[[->Torgar_Mid_Rela_Win_Idle_Ask_Reject_2]]");>>

::Torgar_Mid_Rela_Win_Idle_Ask_Reject_2 <850,15850>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "sad")>>
""



""

\<<run setup.choice("[[->Torgar_Mid_Rela_Win_Idle_Ask_Reject_Hold]]");>>
\<<run setup.choice("[[->Village]]");>>

::Torgar_Mid_Rela_Win_Idle_Ask_Reject_Hold <975,15850>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "blushing")>>










\<<run setup.choice("[[->Torgar_Mid_Rela_Win_Idle_Ask_Reject_Hold_2]]");>>

::Torgar_Mid_Rela_Win_Idle_Ask_Reject_Hold_2 <1100,15850>
\<<set $CharacterSheet_Torgar.quest.pureScoring++>>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "smiling")>>



""

""



\<<run setup.choice("[[->Village]]");>>

::Torgar_Mid_Rela_Win_Idle_Ask_Study <1225,15850>
\<<set $CharacterSheet_Torgar.quest.ascendedScoring++>>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "normal")>>

""




""

\<<run setup.choice("[[->Torgar_Mid_Rela_Win_Idle_Ask_Study_2]]");>>

::Torgar_Mid_Rela_Win_Idle_Ask_Study_2 <100,15975>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "smiling")>>


""



""

\<<run setup.choice("[[->Village]]");>>

::Torgar_Mid_Rela_Path_Change_EncounterStart <225,15975>
\<<set $CharacterSheet_Torgar.quest.available_encounterPassages_midRelaPathChange = false>>
\<<set $CharacterSheet_Torgar.quest.progress = setup.evaluateTorgarPath()>>
\
\<<if $CharacterSheet_Torgar.quest.progress == setup.TorgarProgress.LOST>>
<<include Torgar_Mid_Rela_Path_Change_EncounterStart_Lost>>
\<<elseif $CharacterSheet_Torgar.quest.progress == setup.TorgarProgress.REDEEMED>>
<<include Torgar_Mid_Rela_Path_Change_EncounterStart_Redeemed>>
\<<else>>
<<include Torgar_Mid_Rela_Path_Change_EncounterStart_Ascended>>
\<</if>>

::Torgar_Mid_Rela_Path_Change_EncounterStart_Lost <350,15975>





\<<run setup.choice("[[->Torgar_Mid_Rela_Path_Change_EncounterStart_Lost_2]]");>>
\<<run setup.choice("[[->Village]]");>>

::Torgar_Mid_Rela_Path_Change_EncounterStart_Lost_2 <475,15975>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "horny")>>



 


""



<<print setup.getFightStartPassages($CharacterSheet_Torgar)>>

::Torgar_Mid_Rela_Path_Change_EncounterStart_Ascended <600,15975>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "horny")>>

()
()

<<print setup.getFightStartPassages($CharacterSheet_Torgar)>>

::Torgar_Mid_Rela_Path_Change_Win <725,15975>
\<<if $CharacterSheet_Torgar.quest.progress == setup.TorgarProgress.LOST>>
<<include Torgar_Mid_Rela_Path_Change_Win_Lost>>
\<<elseif $CharacterSheet_Torgar.quest.progress == setup.TorgarProgress.REDEEMED>>
<<include Torgar_Mid_Rela_Path_Change_Win_Redeemed>>
\<<else>>
()
()

\<<run setup.choice("[[->Torgar_Mid_Rela_Path_Change_EmbracePath]]");>>
\<<run setup.choice("[[->Torgar_Mid_Rela_Path_Change_RedemptionPath]]");>>
\<<run setup.choice("[[->Village]]");>>
\<</if>>

::Torgar_Mid_Rela_Path_Change_Loss <850,15975>
\<<if $CharacterSheet_Torgar.quest.progress == setup.TorgarProgress.LOST>>
<<include Torgar_Mid_Rela_Path_Change_Loss_Lost>>
\<<elseif $CharacterSheet_Torgar.quest.progress == setup.TorgarProgress.REDEEMED>>
<<include Torgar_Mid_Rela_Path_Change_Loss_Redeemed>>
\<<else>>
()
()

\<<run setup.choice("[[->Torgar_Mid_Rela_Path_Change_EmbracePath]]");>>
\<<run setup.choice("[[->Torgar_Mid_Rela_Path_Change_RedemptionPath]]");>>
\<<run setup.choice("[[->Village]]");>>
\<</if>>

::Torgar_Mid_Rela_Path_Change_EncounterStart_Redeemed <975,15975>






\<<run setup.choice("[[->Torgar_Mid_Rela_Path_Change_EncounterStart_Redeemed_2]]");>>

::Torgar_Mid_Rela_Path_Change_EncounterStart_Redeemed_2 <1100,15975>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "horny")>>

""



""

<<print setup.getFightStartPassages($CharacterSheet_Torgar)>>

::Torgar_Mid_Rela_Path_Change_Win_Redeemed <1225,15975>
<<include Torgar_Mid_Rela_Path_Change_RedemptionPath>>

::Torgar_Mid_Rela_Path_Change_Loss_Redeemed <100,16100>
<<include Torgar_Mid_Rela_Path_Change_RedemptionPath>>

::Torgar_Mid_Rela_Path_Change_RedemptionPath <225,16100>
\<<set $CharacterSheet_Torgar.quest.available_postFightPassagesWin_midRelaPathChange = false>>
\<<set $CharacterSheet_Torgar.quest.available_postFightPassagesLoss_midRelaPathChange = false>>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "horny")>>






""

\<<run setup.choice("[[->Torgar_Mid_Rela_Path_Change_RedemptionPath_2]]");>>

::Torgar_Mid_Rela_Path_Change_RedemptionPath_2 <350,16100>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "angry")>>

""



""

\<<run setup.choice("[[->Village]]");>>
\<<run setup.choice("[[->Torgar_Mid_Rela_Path_Change_RedemptionPath_Tease]]");>>

::Torgar_Mid_Rela_Path_Change_RedemptionPath_Tease <475,16100>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "normal")>>


""



\<<run setup.choice("[[->Torgar_Lost_Path_Trigger_Win_Accept_Tease]]");>>
\<<run setup.choice("[[->Village]]");>>

::Torgar_Pure_Path_Trigger_EncounterStart <600,16100>


\<<run setup.choice("[[->Torgar_Pure_Path_Trigger_EncounterStart_2]]");>>

::Torgar_Pure_Path_Trigger_EncounterStart_2 <725,16100>




\<<run setup.choice("[[->Torgar_Pure_Path_Trigger_EncounterStart_3]]");>>
\<<run setup.choice("[[->Village]]");>>

::Torgar_Pure_Path_Trigger_EncounterStart_3 <850,16100>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "normal")>>






""

\<<run setup.choice("[[->Torgar_Pure_Path_Trigger_EncounterStart_4]]");>>

::Torgar_Pure_Path_Trigger_EncounterStart_4 <975,16100>
\<<run $CharacterSheet_Torgar.fight.fightMoveIDs.push(setup.FightMove_TonicOfStillness.id)>>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "horny")>>


""

: ""

<<print setup.getFightStartPassages($CharacterSheet_Torgar)>>

::Torgar_Pure_Path_Trigger_Win <1100,16100>
<<include Torgar_Pure_Path_Trigger_PostFight>>

::Torgar_Pure_Path_Trigger_Loss <1225,16100>
<<include Torgar_Pure_Path_Trigger_PostFight>>

::Torgar_Pure_Path_Trigger_PostFight <100,16225>
\<<set $CharacterSheet_Torgar.quest.available_encounterPassages_purePathTrigger = false>>
\<<set $CharacterSheet_Torgar.quest.available_postFightPassagesLoss_purePathTrigger = false>>
\<<set $CharacterSheet_Torgar.quest.available_postFightPassagesWin_purePathTrigger = false>>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "blushing")>>




\<<run setup.choice("[[->Torgar_Pure_Path_Trigger_PostFight_FuckHim]]");>>
\<<run setup.choice("[[->Torgar_Pure_Path_Trigger_PostFight_PostSex]]");>>

::Torgar_Pure_Path_Trigger_PostFight_FuckHim <225,16225>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "horny")>>
\<<run setup.playRealizationPackage(["CharacterSheet_Player", "CharacterSheet_Torgar"], 1)>>




"<<PlayerName>>" 

\<<run setup.choice("[[->Torgar_Pure_Path_Trigger_PostFight_FuckHim_2]]");>>

::Torgar_Pure_Path_Trigger_PostFight_FuckHim_2 <350,16225>
\<<run setup.playRealizationPackage(["CharacterSheet_Player", "CharacterSheet_Torgar"], 2)>>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "cumming")>>

<<print setup.processFlavours($CharacterSheet_Player, "@[all|cocks|noverb]")>>


\<<run setup.choice("[[->Torgar_Pure_Path_Trigger_PostFight_FuckHim_3]]");>>

::Torgar_Pure_Path_Trigger_PostFight_FuckHim_3 <475,16225>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "cumming")>>
\<<run setup.playRealizationPackage(["CharacterSheet_Player", "CharacterSheet_Torgar"], 3)>>


"" 



\<<run setup.choice("[[->Torgar_Pure_Path_Trigger_PostFight_FuckHim_4]]");>>

::Torgar_Pure_Path_Trigger_PostFight_FuckHim_4 <600,16225>
\<<run setup.playRealizationPackage(["CharacterSheet_Player", "CharacterSheet_Torgar"], 4)>>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "cumming")>>

<h2>""</h2>



\<<run setup.choice("[[->Torgar_Pure_Path_Trigger_PostFight_PostSex]]");>>

::Torgar_Pure_Path_Trigger_PostFight_PostSex <725,16225>
\<<run setup.playRealizationPackage(["CharacterSheet_Player", "CharacterSheet_Torgar"], 4)>>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "cumming")>>



""



\<<run setup.choice("[[->Torgar_Pure_Path_Trigger_PostFight_PostSex_2]]");>>

::Torgar_Pure_Path_Trigger_PostFight_PostSex_2 <850,16225>
\<<run setup.playRealizationPackage(["CharacterSheet_Player", "CharacterSheet_Torgar"], 4)>>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "cumming", true)>>
<h2>""</h2>




\<<run setup.choice("[[->Torgar_Pure_Path_Trigger_PostFight_PostSex_3]]");>>

::Torgar_Pure_Path_Trigger_PostFight_PostSex_3 <975,16225>
\<<run setup.playRealizationPackage(["CharacterSheet_Player", "CharacterSheet_Torgar"], 1)>>
<<set $CharacterSheet_Torgar.quest.blackVeinsOnDick = false>>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "cumming", true)>>





\<<run setup.choice("[[->Torgar_Pure_Path_Trigger_PostFight_PostSex_4]]");>>

::Torgar_Pure_Path_Trigger_PostFight_PostSex_4 <1100,16225>
\<<run setup.playRealizationPackage(["CharacterSheet_Player", "CharacterSheet_Torgar"], 1)>>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "horny", true)>>




""

\<<run setup.choice("[[->Torgar_Pure_Path_Trigger_PostFight_PostSex_5]]");>>

::Torgar_Pure_Path_Trigger_PostFight_PostSex_5 <1225,16225>
\<<run setup.stopRealizationPackages(["CharacterSheet_Player", "CharacterSheet_Torgar"])>>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "horny", true)>>
\<<set $CharacterSheet_Torgar.quest.progress = setup.TorgarProgress.REDEEMED_TEAMMATE>>



""

\<<run setup.choice("[[->Village]]");>>

::Torgar_Redeemed_Path_Idle_Win_Epilogue <100,16350>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "normal")>>



\<<run setup.choice("[[->Torgar_Redeemed_Path_Idle_Win_Epilogue_2]]");>>

::Torgar_Redeemed_Path_Idle_Win_Epilogue_2 <225,16350>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "smiling")>>



""




""

\<<run setup.choice("[[->Torgar_Redeemed_Path_Idle_Win_Epilogue_Join]]");>>
\<<run setup.choice("[[->Torgar_Redeemed_Path_Idle_Win_Epilogue_End]]");>>

::Torgar_Redeemed_Path_Idle_Win_Epilogue_Join <350,16350>
\<<run setup.playRealizationPackage(["CharacterSheet_Player", "CharacterSheet_Torgar"], 1)>>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "blushing")>>




"PlayerName>>"



\<<run setup.choice("[[->Torgar_Redeemed_Path_Idle_Win_Epilogue_End]]");>>

::Torgar_Redeemed_Path_Idle_Win_Epilogue_End <475,16350>
\<<set $CharacterSheet_Torgar.quest.available_encounterPassages_redeemedTeammateFirstTime = false>>
\<<run setup.completeAchievement("Achievement_Redemption");>>
\<<run setup.torgarJoinsPlayer()>>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "sad")>>






"Xi"

\<<run setup.choice("[[->Torgar_Redeemed_Path_Idle_Win_Epilogue_End_2]]");>>

::Torgar_Redeemed_Path_Idle_Win_Epilogue_End_2 <600,16350>
\<<run setup.stopRealizationPackages(["CharacterSheet_Player", "CharacterSheet_Torgar"])>>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "blushing")>>



: 

\<<run setup.choice("[[->Village]]");>>

::Torgar_Redeemed_Teammate_Path_Idle <725,16350>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "horny")>>



\<<run setup.choice("[[->Torgar_Redeemed_Teammate_Path_Idle_Menu]]");>>

::Torgar_Redeemed_Teammate_Path_Idle_Menu <850,16350>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "smiling")>>


\<<run setup.choice("[[->Torgar_Redeemed_Teammate_Path_Idle_Menu_ShatteredPeak]]");>>
\<<run setup.choice("[[->Torgar_Redeemed_Teammate_ChangeAttackTiming]]");>>

\<<run setup.choice("[[->Village]]");>>

::Torgar_Redeemed_Teammate_ChangeAttackTiming <975,16350>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "smiling")>>

""

<<print setup.displayAttackTimingDescription($CharacterSheet_Torgar)>>

[[Attack before me->Torgar_Redeemed_Teammate_Path_Idle_Menu][$CharacterSheet_Torgar.fight.teammateSettings.attackTiming = setup.AttackTiming.BEFORE_PLAYER]]
[[Attack after me, but before our enemy->Torgar_Redeemed_Teammate_Path_Idle_Menu][$CharacterSheet_Torgar.fight.teammateSettings.attackTiming = setup.AttackTiming.BETWEEN_PLAYER_AND_ENEMY]]
[[Attack after me, but after our enemy->Torgar_Redeemed_Teammate_Path_Idle_Menu][$CharacterSheet_Torgar.fight.teammateSettings.attackTiming = setup.AttackTiming.AFTER_ENEMY]]

\<<run setup.choice("[[->Torgar_Redeemed_Teammate_Path_Idle_Menu]]");>>

::Torgar_Redeemed_Teammate_Path_Idle_Menu_ShatteredPeak <1100,16350>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "normal")>>

""



""

\<<run setup.choice("[[->Torgar_Redeemed_Teammate_Path_Idle_Menu_ShatteredPeak_2]]");>>

::Torgar_Redeemed_Teammate_Path_Idle_Menu_ShatteredPeak_2 <1225,16350>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "sad")>>

""

\<<run setup.choice("[[->Torgar_Redeemed_Teammate_Ptah_Idle_Menu_ShatteredPeak_3]]");>>
\<<run setup.choice("[[->Torgar_Redeemed_Teammate_Path_Idle_Menu]]");>>

::Torgar_Redeemed_Teammate_Ptah_Idle_Menu_ShatteredPeak_3 <100,16475>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "sad")>>



""

\<<run setup.choice("[[->Torgar_Redeemed_Teammate_Ptah_Idle_Menu_ShatteredPeak_4]]");>>
\<<run setup.choice("[[->Torgar_Redeemed_Teammate_Ptah_Idle_Menu_ShatteredPeak_4]]");>>

::Torgar_Redeemed_Teammate_Ptah_Idle_Menu_ShatteredPeak_4 <225,16475>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "normal")>>
""

\<<run setup.choice("[[->Torgar_Redeemed_Teammate_Path_Idle_Menu]]");>>

::Torgar_Mid_Rela_Path_Change_Win_Lost <350,16475>
<<include Torgar_Mid_Rela_Path_Change_EmbracePath>>

::Torgar_Mid_Rela_Path_Change_Loss_Lost <475,16475>
<<include Torgar_Mid_Rela_Path_Change_EmbracePath>>

::Torgar_Mid_Rela_Path_Change_EmbracePath <600,16475>
\<<set $CharacterSheet_Torgar.quest.available_postFightPassagesWin_midRelaPathChange = false>>
\<<set $CharacterSheet_Torgar.quest.available_postFightPassagesLoss_midRelaPathChange = false>>
\<<set $CharacterSheet_Torgar.quest.lostScoring = 9999>>
\<<set $CharacterSheet_Torgar.quest.progress = setup.TorgarProgress.LOST>>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "horny")>>



""



\<<run setup.choice("[[->Torgar_Mid_Rela_Path_Change_EmbracePath_2]]");>>

::Torgar_Mid_Rela_Path_Change_EmbracePath_2 <725,16475>




<h2>""</h2>



\<<run setup.choice("[[->Village]]");>>

::Torgar_Lost_Path_Trigger_EncounterStart <850,16475>




\<<run setup.choice("[[->Torgar_Lost_Path_Trigger_EncounterStart_2]]");>>
\<<run setup.choice("[[->Village]]");>>

::Torgar_Lost_Path_Trigger_EncounterStart_2 <975,16475>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "horny")>>




""

"" 

\<<run setup.choice("[[->Torgar_Lost_Path_Trigger_EncounterStart_3]]");>>

::Torgar_Lost_Path_Trigger_EncounterStart_3 <1100,16475>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "cumming")>>



""



\<<run setup.choice("[[->Torgar_Lost_Path_Trigger_EncounterStart_3_1]]");>>

::Torgar_Lost_Path_Trigger_EncounterStart_3_1 <1225,16475>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "cumming")>>


""

\<<run setup.choice("[[->Torgar_Lost_Path_Trigger_EncounterStart_4]]");>>

::Torgar_Lost_Path_Trigger_EncounterStart_4 <100,16600>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "horny")>>


""

<<print setup.getFightStartPassages($CharacterSheet_Torgar)>>

::Torgar_Lost_Path_Trigger_Win <225,16600>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "horny")>>


""




""

\<<run setup.choice("[[->Torgar_Lost_Path_Trigger_Win_Accept]]");>>
\<<run setup.choice("[[->Torgar_Lost_Path_Trigger_Win_Refuse]]");>>

::Torgar_Lost_Path_Trigger_Win_Refuse <350,16600>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "angry")>>
""



""

\<<run setup.choice("[[->Village]]");>>

::Torgar_Lost_Path_Trigger_Win_Accept <475,16600>
\<<set $CharacterSheet_Torgar.quest.available_encounterPassages_lostPathTrigger = false>>
\<<set $CharacterSheet_Torgar.quest.available_postFightPassagesLoss_lostPathTrigger = false>>
\<<set $CharacterSheet_Torgar.quest.available_postFightPassagesWin_lostPathTrigger = false>>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "cumming")>>
""




""

\<<run setup.choice("[[->Torgar_Lost_Path_Trigger_Win_Accept_Kiss]]");>>
\<<run setup.choice("[[->Torgar_Lost_Path_Trigger_Win_Accept_Tease]]");>>

::Torgar_Lost_Path_Trigger_Win_Accept_Kiss <600,16600>
\<<run setup.playRealizationPackage(["CharacterSheet_Player", "CharacterSheet_Torgar"], 1)>>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "cumming")>>
\<<if setup.sizecomparison(setup.getStatValue($CharacterSheet_Player, "height"), setup.getStatValue($CharacterSheet_Torgar, "height")) >= setup.Comparators.MUCH_BIGGER>>

\<<else>>

\<</if>>



\<<run setup.choice("[[->Torgar_Lost_Path_Trigger_Win_Accept_2]]");>>

::Torgar_Lost_Path_Trigger_Win_Accept_Tease <725,16600>
\<<run setup.playRealizationPackage(["CharacterSheet_Player", "CharacterSheet_Torgar"], 1)>>
\<<set $CharacterSheet_Torgar.quest.available_encounterPassages_lostPathTrigger = false>>
\<<set $CharacterSheet_Torgar.quest.available_postFightPassagesLoss_lostPathTrigger = false>>
\<<set $CharacterSheet_Torgar.quest.available_postFightPassagesWin_lostPathTrigger = false>>
\<<set $CharacterSheet_Torgar.quest.lostScoring = 9999>>
\<<set $CharacterSheet_Torgar.quest.progress = setup.TorgarProgress.LOST>>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "horny")>>


""

\<<if setup.sizecomparison(setup.getStatValue($CharacterSheet_Player, "height"), setup.getStatValue($CharacterSheet_Torgar, "height")) >= setup.Comparators.MUCH_BIGGER>>

\<<else>>

\<</if>>

\<<run setup.choice("[[->Torgar_Lost_Path_Trigger_Win_Accept_2]]");>>

::Torgar_Lost_Path_Trigger_Win_Accept_2 <850,16600>
\<<run setup.playRealizationPackage(["CharacterSheet_Player", "CharacterSheet_Torgar"], 1)>>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "cumming")>>


<h2>""</h2>



""




\<<run setup.choice("[[->Torgar_Lost_Path_Trigger_Win_Accept_2_TorgarSpread][$bottom = false]]");>>
\<<run setup.choice("[[->Torgar_Lost_Path_Trigger_Win_Accept_2_TorgarSpread][$bottom = true]]");>>

::Torgar_Lost_Path_Trigger_Win_Accept_2_TorgarSpread <975,16600>
\<<run setup.playRealizationPackage(["CharacterSheet_Player", "CharacterSheet_Torgar"], 2)>>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "cumming")>>
\<<if $bottom == true>>


""
\<<else>>



""
\<</if>>





""

\<<run setup.choice("[[->Torgar_Lost_Path_Trigger_Win_Accept_2_TorgarSpread_2]]");>>

::Torgar_Lost_Path_Trigger_Win_Accept_2_TorgarSpread_2 <1100,16600>
\<<run setup.playRealizationPackage(["CharacterSheet_Player", "CharacterSheet_Torgar"], 3)>>
\<<set $CharacterSheet_Torgar.quest.lost_FullyCovered = true>>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "cumming")>>



<h2>!</h2>

\<<run setup.choice("[[->Torgar_Lost_Path_Trigger_Win_Accept_2_TorgarSpread_3]]");>>

::Torgar_Lost_Path_Trigger_Win_Accept_2_TorgarSpread_3 <1225,16600>
\<<run setup.playRealizationPackage(["CharacterSheet_Player", "CharacterSheet_Torgar"], 4)>>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "cumming", true)>>
\<<if $bottom == true>>


\<<else>>


\<</if>>







\<<run setup.choice("[[->Torgar_Lost_Path_Trigger_Win_Accept_3]]");>>

::Torgar_Lost_Path_Trigger_Win_Accept_3 <100,16725>
\<<run setup.playRealizationPackage(["CharacterSheet_Player", "CharacterSheet_Torgar"], 1)>>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "horny", true)>>




""

""

\<<run setup.choice("[[->Torgar_Lost_Path_Trigger_Win_Accept_4]]");>>

::Torgar_Lost_Path_Trigger_Win_Accept_4 <225,16725>
\<<run setup.playRealizationPackage(["CharacterSheet_Player", "CharacterSheet_Torgar"], 1)>>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "horny", true)>>

""



"~"

: <<print setup.getLength(setup.applyGrowth($CharacterSheet_Torgar, "cock", 7))>>
: <<print setup.getLength(setup.applyGrowth($CharacterSheet_Torgar, "height", 3))>>
: (<<print setup.applyGrowth($CharacterSheet_Torgar, "muscles", 5)>>)
\<<run setup.applyCorruption($CharacterSheet_Torgar, 200)>>
: 20

: <<print setup.getLength(setup.applyGrowth($CharacterSheet_Player, "cock", 7))>>
: <<print setup.getLength(setup.applyGrowth($CharacterSheet_Player, "height", 3))>>
: (<<print setup.applyGrowth($CharacterSheet_Player, "muscles", 5)>>)
\<<run setup.applyCorruption($CharacterSheet_Player, 15)>>
: 20
: ""
\<<run $CharacterSheet_Player.applyAbilityRuntimeData(setup.Ability_TorgarsBond)>>

\<<run setup.choice("[[->Village]]");>>

::Torgar_Lost_Path_Trigger_Loss <350,16725>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "horny", true)>>




\<<run setup.choice("[[->Village]]");>>

::Torgar_Lost_Path_Idle_EncounterStart <475,16725>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "horny")>>







\<<run setup.choice("[[->Torgar_Lost_Path_Idle_EncounterStart_2]]");>>

::Torgar_Lost_Path_Idle_EncounterStart_2 <600,16725>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "horny", true)>>




""




<<print setup.getFightStartPassages($CharacterSheet_Torgar)>>

::Torgar_Lost_Path_Idle_Win <725,16725>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "angry")>>
 


""

\<<run setup.choice("[[->Torgar_Lost_Path_Idle_Win_2]]");>>

::Torgar_Lost_Path_Idle_Win_2 <850,16725>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "cumming")>>





\<<run setup.choice("[[->Torgar_Lost_Path_Idle_Win_3]]");>>
\<<run setup.choice("[[->Village]]");>>

::Torgar_Lost_Path_Idle_Win_3 <975,16725>
\<<run setup.playRealizationPackage(["CharacterSheet_Player", "CharacterSheet_Torgar"], 1)>>
\<<set $CharacterSheet_Torgar.quest.relationshipScoring++>>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "angry")>>


""



\<<if setup.sizecomparison(setup.getStatValue($CharacterSheet_Player, "height"), setup.getStatValue($CharacterSheet_Torgar, "height")) >= setup.Comparators.MUCH_BIGGER>>



\<</if>>
\
\<<run setup.choice("[[->Torgar_Lost_Path_Idle_Win_3_1]]");>>

::Torgar_Lost_Path_Idle_Win_3_1 <1100,16725>
\<<run setup.playRealizationPackage(["CharacterSheet_Player", "CharacterSheet_Torgar"], 2)>>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "cumming")>>
<<print setup.processFlavours($CharacterSheet_Player, "@[all|cocks|noverb]")>>

<h2></h2>



\<<run setup.choice("[[->Torgar_Lost_Path_Idle_Win_4]]");>>

::Torgar_Lost_Path_Idle_Win_4 <1225,16725>
\<<run setup.playRealizationPackage(["CharacterSheet_Player", "CharacterSheet_Torgar"], 2)>>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "cumming", true)>>

<<print setup.processFlavours($CharacterSheet_Player, "@[all|cocks|noverb]")>>

<h2>""</h2>




\<<run setup.choice("[[->Torgar_Lost_Path_Idle_Win_5]]");>>

::Torgar_Lost_Path_Idle_Win_5 <100,16850>
\<<run setup.playRealizationPackage(["CharacterSheet_Player", "CharacterSheet_Torgar"], 3)>>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "cumming", true)>>



<h2>""</h2>

\<<run setup.choice("[[->Torgar_Lost_Path_Idle_Win_6]]");>>

::Torgar_Lost_Path_Idle_Win_6 <225,16850>
\<<run setup.playRealizationPackage(["CharacterSheet_Player", "CharacterSheet_Torgar"], 3)>>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "cumming", true)>>






\<<run setup.choice("[[->Torgar_Lost_Path_Idle_Win_7]]");>>

::Torgar_Lost_Path_Idle_Win_7 <350,16850>
\<<run setup.playRealizationPackage(["CharacterSheet_Player", "CharacterSheet_Torgar"], 3)>>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "cumming", true)>>





\<<run setup.choice("[[->Torgar_Lost_Path_Idle_Win_7_1]]");>>

::Torgar_Lost_Path_Idle_Win_7_1 <475,16850>
\<<run setup.playRealizationPackage(["CharacterSheet_Player", "CharacterSheet_Torgar"], 3)>>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "cumming", true)>>


<h2>""</h2>

<h2></h2>



\<<run setup.choice("[[->Torgar_Lost_Path_Idle_Win_8]]");>>

::Torgar_Lost_Path_Idle_Win_8 <600,16850>
\<<run setup.playRealizationPackage(["CharacterSheet_Player", "CharacterSheet_Torgar"], 4)>>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "cumming", true)>>



<h2>"" </h2>




\<<run setup.choice("[[->Torgar_Lost_Path_Idle_Win_9]]");>>

::Torgar_Lost_Path_Idle_Win_9 <725,16850>
\<<run setup.playRealizationPackage(["CharacterSheet_Player", "CharacterSheet_Torgar"], 1)>>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "horny", true)>>


 

""

\<<run setup.choice("[[->Torgar_Lost_Path_Idle_Win_10]]");>>

::Torgar_Lost_Path_Idle_Win_10 <850,16850>
\<<run setup.playRealizationPackage(["CharacterSheet_Player", "CharacterSheet_Torgar"], 1)>>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "horny", true)>>
""




: <<print setup.getLength(setup.applyGrowth($CharacterSheet_Torgar, "cock", 7))>>
: <<print setup.getLength(setup.applyGrowth($CharacterSheet_Torgar, "height", 3))>>
: (<<print setup.applyGrowth($CharacterSheet_Torgar, "muscles", 5)>>)
\<<run setup.applyCorruption($CharacterSheet_Torgar, 200)>>
: 200

: <<print setup.getLength(setup.applyGrowth($CharacterSheet_Player, "cock", 7))>>
: <<print setup.getLength(setup.applyGrowth($CharacterSheet_Player, "height", 3))>>
: (<<print setup.applyGrowth($CharacterSheet_Player, "muscles", 5)>>)
\<<run setup.applyCorruption($CharacterSheet_Player, 15)>>
: 15
: ""
\<<run $CharacterSheet_Player.applyAbilityRuntimeData(setup.Ability_TorgarsBond)>>

\<<if $CharacterSheet_Torgar.quest.relationshipScoring >= 11>>
\<<run setup.choice("[[->Torgar_Lost_Path_Idle_Win_Epilogue]]");>>
\<<else>>
\<<run setup.choice("[[->Village]]");>>
\<</if>>

::Torgar_Lost_Path_Idle_Win_Epilogue <975,16850>
\<<run setup.stopRealizationPackages(["CharacterSheet_Player", "CharacterSheet_Torgar"])>>
\<<set $CharacterSheet_Torgar.quest.progress = setup.TorgarProgress.LOST_TEAMMATE>>
\<<run setup.torgarJoinsPlayer()>>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "horny")>>
"

"



""



\<<run setup.choice("[[->Village]]");>>

::Torgar_Lost_Path_Idle_Loss <1100,16850>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "horny")>>


""

\<<run setup.choice("[[->Torgar_Lost_Path_Idle_Loss_2]]");>>

::Torgar_Lost_Path_Idle_Loss_2 <1225,16850>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "horny")>>






""



\<<run setup.choice("[[->Village]]");>>

::Torgar_Lost_Teammate_EncounterStart <100,16975>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "horny")>>


\<<run setup.choice("[[->Torgar_Lost_Teammate_ChangeAttackTiming]]");>>

\<<run setup.choice("[[->Village]]");>>

::Torgar_Lost_Teammate_ChangeAttackTiming <225,16975>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Torgar, "smiling")>>

""

<<print setup.displayAttackTimingDescription($CharacterSheet_Torgar)>>

\<<run setup.choice("[[->Torgar_Lost_Teammate_EncounterStart][$CharacterSheet_Torgar.fight.teammateSettings.attackTiming = setup.AttackTiming.BEFORE_PLAYER]]");>>
\<<run setup.choice("[[->Torgar_Lost_Teammate_EncounterStart][$CharacterSheet_Torgar.fight.teammateSettings.attackTiming = setup.AttackTiming.BETWEEN_PLAYER_AND_ENEMY]]");>>
\<<run setup.choice("[[->Torgar_Lost_Teammate_EncounterStart][$CharacterSheet_Torgar.fight.teammateSettings.attackTiming = setup.AttackTiming.AFTER_ENEMY]]");>>

\<<run setup.choice("[[->Torgar_Lost_Teammate_EncounterStart]]");>>

::town_guard_fight_start <350,16975>
<<set $CharacterSheet_town_guard.quest.met = true>>\
<<SymbioteName>>



""

::town_guard_fight_won <475,16975>




<<print setup.getFightReward($CharacterSheet_town_guard)>>
<<set $CharacterSheet_town_guard.quest.beatenOnce = true>>

\<<run setup.choice("[[->leave_guard]]");>>
\<<run setup.choice("[[->knock_guard]]");>>
<<if $CharacterSheet_Player.hasAbility("Ability_MemoriesOfNyx")>>\
\<<run setup.choice("[[->corrupt_guard]]");>>
<</if>>\

::leave_guard <600,16975>
<<set $CharacterSheet_town_guard.quest.fled = true>>\
""

""

\<<run setup.choice("[[->abel_gets_better_look_guard_alive]]");>>

::knock_guard <725,16975>






\<<run setup.choice("[[->abel_gets_better_look_guard_unconscious]]");>>

::corrupt_guard <850,16975>
<<set $CharacterSheet_town_guard.quest.corrupted = true>>\





<span class="glitch nyx fucked" data-text="GROW"></span><span class="glitch nyx" data-text="SPREAD"></span><span class="glitch nyx fucked" data-text="CORRUPT"></span>


<<print setup.processFlavours($CharacterSheet_Player, "@[all|arms|noverb]@[all|cocks|noverb]", true)>> 





\


""

\<<run setup.choice("[[->abel_gets_better_look_guard_corrupted]]");>>

::town_guard_fight_lost <975,16975>


""

\<<run setup.choice("[[->Quest_MQ001_EchoPostMerge_3_Meet_Abel_aggressive]]");>>

::abel_gets_better_look_guard_alive <1100,16975>




"$CharacterSheet_Player.info.name"""

""""

[]

\<<run setup.choice("[[->Village]]");>>

::abel_gets_better_look_guard_unconscious <1225,16975>




"$CharacterSheet_Player.info.name"""

""



"$CharacterSheet_Player.info.name"""

[]

\<<run setup.choice("[[->Village]]");>>

::abel_gets_better_look_guard_corrupted <100,17100>




"$CharacterSheet_Player.info.name """

""""

""""

[]

\<<run setup.choice("[[->Village]]");>>

::StoryInit_EndingSheet <225,17100>
<<include Ending_OneWithApothus>>
<<include Ending_OneWithNyx>>
<<include Ending_MemoriesOfCray>>
<<include Ending_NyxChosenAscension>>

<<set $EndingSheet =
[
    $Ending_OneWithApothus,
    $Ending_MemoriesOfCray,
    $Ending_NyxChosenAscension,
    $Ending_OneWithNyx,
];>>

::Ending_MemoriesOfCray <350,17100>
<<set $Ending_MemoriesOfCray = 
{
    id: "Ending_MemoriesOfCray",
    unlocked: false,
    onPostWorldReset: function()
    {
    },
    onPreWorldReset: function()
    {
        setup.completeAchievement("Ability_MemoriesOfCray");
    }
};>>

::Ending_NyxChosenAscension <475,17100>
<<set $Ending_NyxChosenAscension = 
{
    id: "Ending_NyxChosenAscension",
    unlocked: false,
    onPostWorldReset: function()
    {
        State.variables.CharacterSheet_Player.applyAbilityRuntimeData(setup.Ability_MemoriesOfTheChosen);
    }
};>>

::Ending_OneWithApothus <600,17100>
<<set $Ending_OneWithApothus = 
{
    id: "Ending_OneWithApothus",
    unlocked: false,
    onPostWorldReset: function()
    {
    },
    onPreWorldReset: function()
    {
        setup.completeAchievement("Ability_MemoriesOfApothus");
    }
};>>

::Ending_OneWithNyx <725,17100>
<<set $Ending_OneWithNyx = 
{
    id: "Ending_OneWithNyx",
    unlocked: false,
    onPostWorldReset: function()
    {
        
    },
    onPreWorldReset: function()
    {
        setup.completeAchievement("Ability_MemoriesOfNyx");
    }
};>>

::Ending_UncertainFate [Overworld] <850,17100>
(+)

\<<run setup.choice("[[()->Ending_UncertainFate_2]]");>>
\<<run setup.choice("[[->Village]]");>>

::Ending_UncertainFate_2 <975,17100>
\<<run setup.completeAchievement("Achievement_IncompleteMemories");>>
<<include Ending>>

::Planetary69Ending <1100,17100>
((!))
\<<run setup.choice("[[->Village]]");>>

::Death_NyxDungeon <1225,17100>





\<<run setup.choice("[[->Death_NyxDungeon_2]]");>>

::Death_NyxDungeon_2 <100,17225>






\<<run setup.choice("[[->Death_NyxDungeon_3]]");>>

::Death_NyxDungeon_3 <225,17225>




\<<run setup.choice("[[->Quest_MQ002_Manor_MainHall]]");>>

::Death <350,17225>
\<<run $CharacterSheet_Player.removeAbilityRuntimeData(setup.Ability_EmbracedByNyxsLight);>>


\<<if $DeathText == setup.DeathTextEnum.POST_APOTHUS>>

\<</if>>

\<<run setup.choice("[[->Death 2]]");>>
\<<if $DeathText != setup.DeathTextEnum.POST_APOTHUS>>
\<<run setup.choice("[[->Village]]");>>
\<</if>>

::Death 2 <475,17225>


\<<if $DeathText == setup.DeathTextEnum.POST_APOTHUS>>

\<</if>>

\<<if $DeathText == setup.DeathTextEnum.POST_APOTHUS>>
\<<run setup.choice("[[->Death_Post_Apothus]]");>>
\<<else>>
\<<run setup.choice("[[->Death 3]]");>>
\<</if>>

::Death 3 <600,17225>








\<<run setup.choice("[[->Village]]");>>

::Death_Post_Apothus <725,17225>










\<<run setup.choice("[[->Village]]");>>

::Intro01 <850,17225>
 











;




\<<run setup.choice("[[->Intro02]]");>>

::Intro02 <975,17225>
 



 







\<<run setup.choice("[[->Intro03]]");>>

::Intro03 <1100,17225>

 

 
 
 


 
\<<run setup.choice("[[->Intro04]]");>>

::Intro04 <1225,17225>













 

 
\<<run setup.choice("[[->Intro05]]");>>

::Intro05 <100,17350>
 
 


 

 
\<<run setup.choice("[[->Intro06]]");>>

::Intro06 <225,17350>




-






\<<run setup.choice("[[->Intro06_2]]");>>

::Intro06_2 <350,17350>
 





\<<run setup.choice("[[->Intro06_3]]");>>

::Intro06_3 <475,17350>















\<<run setup.choice("[[->Intro06_4]]");>>

::Intro06_4 <600,17350>

 

 



 











 
[[->Intro07][setup.setRace($CharacterSheet_Player.symbiote.anatomy, setup.RacePool.SYMBIOTE)]]
[[->Intro07][setup.setRace($CharacterSheet_Player.symbiote.anatomy, setup.RacePool.NAGA)]]
[[->Intro07][setup.setRace($CharacterSheet_Player.symbiote.anatomy, setup.RacePool.MINOTAUR)]]
[[->Intro07][setup.setRace($CharacterSheet_Player.symbiote.anatomy, setup.RacePool.WOLF)]]

::Intro07 <725,17350>
\<<if (setup.getRace($CharacterSheet_Player.symbiote.anatomy) == "Symbiote")>>
 
 





;





\<<elseif (setup.getRace($CharacterSheet_Player.symbiote.anatomy) == "Naga")>>












<<print setup.getLength(70)>>


\<<elseif (setup.getRace($CharacterSheet_Player.symbiote.anatomy) == "Minotaur")>>







 


;V 
 




\<<elseif (setup.getRace($CharacterSheet_Player.symbiote.anatomy) == "Werewolf")>>








 




 









\<</if>>

\<<run setup.choice("[[->Intro07_2]]");>>

::Intro07_2 <850,17350>
<<SymbioteRace>>

 




<<SymbioteRace>>


<<SymbioteRace>><<print setup.getLength(12)>>
 


 

 
[[->Intro08][$SymbioteBoost = "cock"]]
[[->Intro08][$SymbioteBoost = "muscles"]]
[[->Intro08][$SymbioteBoost = "height"]]

::Intro08 <975,17350>
\<<if $SymbioteBoost == "cock">>
<<SymbioteRace>>


\<<elseif $SymbioteBoost == "muscles">>



\<<elseif $SymbioteBoost == "height">>
<<SymbioteRace>><<SymbioteRace>>
<<print setup.getLength(90)>>
\<</if>> 
 


 


<<SymbioteRace>>

[[->Intro09][$CharacterSheet_Player.symbiote.color = setup.ColourPool.AMBER; setup.colourLimb($CharacterSheet_Player.info.anatomy, "eyes", setup.ColourPool.AMBER)]] 
[[->Intro09][$CharacterSheet_Player.symbiote.color = setup.ColourPool.BEIGE; setup.colourLimb($CharacterSheet_Player.info.anatomy, "eyes", setup.ColourPool.BEIGE)]] 
[[->Intro09][$CharacterSheet_Player.symbiote.color = setup.ColourPool.BLACK; setup.colourLimb($CharacterSheet_Player.info.anatomy, "eyes", setup.ColourPool.BLACK)]] 
[[->Intro09][$CharacterSheet_Player.symbiote.color = setup.ColourPool.BLUE; setup.colourLimb($CharacterSheet_Player.info.anatomy, "eyes", setup.ColourPool.BLUE)]] 
[[->Intro09][$CharacterSheet_Player.symbiote.color = setup.ColourPool.BROWN; setup.colourLimb($CharacterSheet_Player.info.anatomy, "eyes", setup.ColourPool.BROWN)]] 
[[->Intro09][$CharacterSheet_Player.symbiote.color = setup.ColourPool.CRIMSON; setup.colourLimb($CharacterSheet_Player.info.anatomy, "eyes", setup.ColourPool.CRIMSON)]] 
[[->Intro09][$CharacterSheet_Player.symbiote.color = setup.ColourPool.EMERALD; setup.colourLimb($CharacterSheet_Player.info.anatomy, "eyes", setup.ColourPool.EMERALD)]] 
[[->Intro09][$CharacterSheet_Player.symbiote.color = setup.ColourPool.GOLDEN; setup.colourLimb($CharacterSheet_Player.info.anatomy, "eyes", setup.ColourPool.GOLDEN)]] 
[[->Intro09][$CharacterSheet_Player.symbiote.color = setup.ColourPool.GREEN; setup.colourLimb($CharacterSheet_Player.info.anatomy, "eyes", setup.ColourPool.GREEN)]] 
[[->Intro09][$CharacterSheet_Player.symbiote.color = setup.ColourPool.GREY; setup.colourLimb($CharacterSheet_Player.info.anatomy, "eyes", setup.ColourPool.GREY)]] 
[[->Intro09][$CharacterSheet_Player.symbiote.color = setup.ColourPool.INDIGO; setup.colourLimb($CharacterSheet_Player.info.anatomy, "eyes", setup.ColourPool.INDIGO)]] 
[[->Intro09][$CharacterSheet_Player.symbiote.color = setup.ColourPool.OBSIDIAN; setup.colourLimb($CharacterSheet_Player.info.anatomy, "eyes", setup.ColourPool.OBSIDIAN)]] 
[[->Intro09][$CharacterSheet_Player.symbiote.color = setup.ColourPool.ORANGE; setup.colourLimb($CharacterSheet_Player.info.anatomy, "eyes", setup.ColourPool.ORANGE)]] 
[[->Intro09][$CharacterSheet_Player.symbiote.color = setup.ColourPool.PINK; setup.colourLimb($CharacterSheet_Player.info.anatomy, "eyes", setup.ColourPool.PINK)]] 
[[->Intro09][$CharacterSheet_Player.symbiote.color = setup.ColourPool.PURPLE; setup.colourLimb($CharacterSheet_Player.info.anatomy, "eyes", setup.ColourPool.PURPLE)]] 
[[->Intro09][$CharacterSheet_Player.symbiote.color = setup.ColourPool.RED; setup.colourLimb($CharacterSheet_Player.info.anatomy, "eyes", setup.ColourPool.RED)]] 
[[->Intro09][$CharacterSheet_Player.symbiote.color = setup.ColourPool.SAPPHIRE; setup.colourLimb($CharacterSheet_Player.info.anatomy, "eyes", setup.ColourPool.SAPPHIRE)]] 
[[->Intro09][$CharacterSheet_Player.symbiote.color = setup.ColourPool.VIOLET; setup.colourLimb($CharacterSheet_Player.info.anatomy, "eyes", setup.ColourPool.VIOLET)]] 
[[->Intro09][$CharacterSheet_Player.symbiote.color = setup.ColourPool.TAN; setup.colourLimb($CharacterSheet_Player.info.anatomy, "eyes", setup.ColourPool.TAN)]] 
[[->Intro09][$CharacterSheet_Player.symbiote.color = setup.ColourPool.WHITE; setup.colourLimb($CharacterSheet_Player.info.anatomy, "eyes", setup.ColourPool.WHITE)]] 
[[->Intro09][$CharacterSheet_Player.symbiote.color = setup.ColourPool.YELLOW; setup.colourLimb($CharacterSheet_Player.info.anatomy, "eyes", setup.ColourPool.YELLOW)]]

::Intro09 <1100,17350>
\<<run setup.colourAllLimbs($CharacterSheet_Player.symbiote.anatomy, $CharacterSheet_Player.symbiote.color)>>\
 
<<SymbioteColor>>
 

 

 
<<SymbioteRace>>
<<SymbioteRace>>
<<SymbioteColor>>

\<<run setup.choice("[[->Intro10]]");>>

::Intro10 <1225,17350>



 
<<print setup.getLength(86)>>
<<SymbioteColor>>
 
<<print setup.getLength(86)>><<SymbioteRace>>
 

 
<<textbox "$CharacterSheet_Player.symbiote.name" "Echo">>
 
\<<run setup.choice("[[->Intro11]]");>>

::Intro11_Cock <100,17475>

 
\<<run setup.applyGrowth($CharacterSheet_Player, "cock", 4)>>
<<PlayerCock>>

::Intro11_Muscles <225,17475>


 
\<<run setup.applyGrowth($CharacterSheet_Player, "muscles", 8)>>

::Intro11_Height <350,17475>
\<<run setup.applyGrowth($CharacterSheet_Player, "cock", 1)>>\
\<<run setup.applyGrowth($CharacterSheet_Player, "height", 7)>>\

<<print setup.getLength(setup.getStatValue($CharacterSheet_Player, "height"))>>

::Intro11 <475,17475>


 
\<<if $SymbioteBoost == "cock">>
<<include Intro11_Cock>>
\<<elseif $SymbioteBoost == "muscles">>
<<include Intro11_Muscles>>
\<<elseif $SymbioteBoost == "height">>
<<include Intro11_Height>>
\<</if>> 

 

 

...

 




15

\<<run setup.choice("[[->Intro12]]");>>

::Intro12 <600,17475>
 

 
10
 

 

 


\<<run setup.choice("[[->Intro13]]");>>

::Intro13 <725,17475>
<<run setup.addDays(1)>>

 

 

 

 
.
 
\<<run setup.choice("[[->Village]]");>>

::intro_start <850,17475>
\<<if $CharacterSheet_Player.info.name == "Kanathar">>
<<include Kanathar_EasterEgg>>
\<<else>>






\<<run setup.choice("[[->intro_start_2]]");>>
\<</if>>

::Kanathar_EasterEgg <975,17475>
"... "

\<<run setup.choice("[[->Kanathar_EasterEgg_2]]");>>

::Kanathar_EasterEgg_2 <1100,17475>
<<print setup.displayEncounterImage("https://sombreve.github.io/Dawn-of-Corruption-Site/Images/Scenes/voidlesky_dawn_of_corruption_9_1_lowres.jpg","https://sombreve.github.io/Dawn-of-Corruption-Site/Images/Scenes/voidlesky_dawn_of_corruption_9_1.jpg", undefined, true)>>
""

\<<run setup.choice("[[->Kanathar_EasterEgg_3]]");>>

::Kanathar_EasterEgg_3 <1225,17475>
<<print setup.displayEncounterImage("https://sombreve.github.io/Dawn-of-Corruption-Site/Images/Scenes/voidlesky_dawn_of_corruption_9_1_lowres.jpg","https://sombreve.github.io/Dawn-of-Corruption-Site/Images/Scenes/voidlesky_dawn_of_corruption_9_1.jpg", undefined, true)>>

""

\<<run setup.choice("[[->Quest_MQ002_ApothusRealm_ImpInvasion_Loss_3][$CharacterSheet_Player.info.name = 'Perovsky']]");>>

::intro_start_2 <100,17600>





\<<run setup.choice("[[->intro_start_3]]");>>

::intro_start_3 <225,17600>





\<<run setup.choice("[[->intro_start_4]]");>>

::intro_start_4 <350,17600>





\<<run setup.choice("[[->intro_start_5]]");>>

::intro_start_5 <475,17600>





\<<run setup.choice("[[->intro_start_6]]");>>

::intro_start_6 <600,17600>





\<<run setup.choice("[[->intro_start_7]]");>>

::intro_start_7 <725,17600>
 






\<<run setup.choice("[[->intro_start_8]]");>>

::intro_start_8 <850,17600>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Abel, "angry")>>
""

 \


\<<run setup.choice("[[->intro_start_9]]");>>

::intro_start_9 <975,17600>


<<print setup.displayEncounterImage("https://sombreve.github.io/Dawn-of-Corruption-Site/Images/Scenes/voidlesky_dawn_of_corruption_1_nsfw_16x9_lowres.jpg","https://sombreve.github.io/Dawn-of-Corruption-Site/Images/Scenes/voidlesky_dawn_of_corruption_1.jpg", undefined, true)>>

"" 

\<<run setup.choice("[[->intro_monster_ambush_2]]");>>

::intro_monster_ambush_2 <1100,17600>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Abel, "angry")>>



""

\<<run setup.choice("[[->FightLogic][$Encounter_Target = $CharacterSheet_Wounded_Lost]]");>>

::intro_fight_won <1225,17600>


""

\<<run setup.choice("[[->intro_fight_won_2]]");>>

::intro_fight_won_2 <100,17725>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Abel, "normal")>>




""



""

\<<run setup.choice("[[->intro_first_crossroads]]");>>

::intro_fight_lost <225,17725>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Abel, "angry")>>

""




""



\<<run setup.choice("[[->intro_fight_lost_2]]");>>

::intro_fight_lost_2 <350,17725>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Abel, "angry")>>






""

\<<run setup.choice("[[->intro_first_crossroads]]");>>

::intro_first_crossroads <475,17725>






\<<run setup.choice("[[->intro_inspect_monster]]");>>
\<<run setup.choice("[[->intro_get_moving]]");>>

::intro_inspect_monster <600,17725>
\


\
 \


\
\






 \


" "

\<<run setup.choice("[[->intro_corruption]]");>>
\<<run setup.choice("[[->intro_first_crossroads]]");>>

::intro_corruption <725,17725>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Abel, "blushing")>>

""

""

 ""

\<<run setup.choice("[[->intro_hot]]");>>
\<<run setup.choice("[[->intro_disgusting]]");>>

::intro_hot <850,17725>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Abel, "blushing")>>

"" ""

\<<run setup.choice("[[->intro_first_crossroads]]");>>

::intro_disgusting <975,17725>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Abel, "worried")>>



""

\<<run setup.choice("[[->intro_first_crossroads]]");>>

::intro_get_moving <1100,17725>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Abel, "normal")>>

""

"\
"



""

\<<run setup.choice("[[->intro_hold_up]]");>>

::intro_hold_up <1225,17725>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Abel, "angry")>>



 \


""""

\<<run setup.choice("[[->intro_hide_in_rubble]]");>>
\<<run setup.choice("[[->intro_fight_it]]");>>

::intro_hide_in_rubble <100,17850>


"" 

\<<run setup.choice("[[->intro_play_dead]]");>>
\<<run setup.choice("[[->intro_rubble_hide]]");>>

::intro_play_dead <225,17850>
""

 \






\<<run setup.choice("[[->intro_play_dead_2]]");>>

::intro_play_dead_2 <350,17850>


"""" 





\<<run setup.choice("[[->intro_hold_breath_play_dead]]");>>

::intro_hold_breath_play_dead <475,17850>


 \
 





\<<run setup.choice("[[->intro_hold_breath_play_dead_2]]");>>

::intro_hold_breath_play_dead_2 <600,17850>
 \


 \






\<<run setup.choice("[[->intro_playdead_resist]]");>>
\<<run setup.choice("[[->intro_playdead_give_in]]");>>

::intro_playdead_resist <725,17850>








\<<run setup.choice("[[->intro_playdead_resist_2]]");>>

::intro_playdead_resist_2 <850,17850>






!

\<<run setup.choice("[[->intro_cray_kill]]");>>

::intro_playdead_give_in <975,17850>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 1)>>




 \


\<<run setup.choice("[[->intro_playdead_give_in_2]]");>>

::intro_playdead_give_in_2 <1100,17850>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 2)>>
\<<run setup.playSoundActionParams(["action_Suck"], true)>>






\<<run $CharacterSheet_Player.applyAbilityRuntimeData(setup.Ability_TaintedByTheLost)>>






\<<run setup.choice("[[->intro_cray_kill]]");>>

::intro_rubble_hide <1225,17850>
""""







\<<run setup.choice("[[->intro_peer]]");>>

::intro_peer <100,17975>
 \








\<<run setup.choice("[[->intro_rubble_hide_p2]]");>>

::intro_rubble_hide_p2 <225,17975>








\<<run setup.choice("[[->intro_hold_breath_1]]");>>

::intro_hold_breath_1 <350,17975>


\<<run setup.choice("[[->intro_hold_breath_2]]");>>
\<<run setup.choice("[[->intro_breathe]]");>>

::intro_hold_breath_2 <475,17975>




\<<run setup.choice("[[->intro_hold_breath_3]]");>>
\<<run setup.choice("[[->intro_breathe]]");>>

::intro_hold_breath_3 <600,17975>


!

\<<run setup.choice("[[->intro_breathe]]");>>

::intro_breathe <725,17975>






\<<run setup.choice("[[->intro_cray_kill]]");>>

::intro_fight_it <850,17975>


 \


""

 \


"""?"

\<<set $IntroCountdown = 3>>
\<<set $InspectedHead = 0>>
\<<set $InspectedArms = 0>>
\<<set $InspectedLegs = 0>>
\<<set $InspectedCock = 0>>
\<<set $drank_corruption = 0>>
<<include intro_attack_choices>>

::intro_attack_choices <975,17975>
\<<if $InspectedLegs == 0>>
\<<run setup.choice("[[->intro_inspect_legs]]");>>
\<<else>>
\<<run setup.choice("[[->intro_attack_wrong_choice_legs]]");>>
\<</if>>
\<<if $InspectedArms == 0>>
\<<run setup.choice("[[->intro_inspect_arms]]");>>
\<<else>>
\<<run setup.choice("[[->intro_attack_arms]]");>>
\<</if>>
\<<if $InspectedCock == 0>>
\<<run setup.choice("[[->intro_inspect_cock]]");>>
\<<else>>
\<<run setup.choice("[[->intro_attack_wrong_choice]]");>>
\<</if>>
\<<if $InspectedHead == 0>>
\<<run setup.choice("[[->intro_inspect_head]]");>>
\<<else>>
\<<run setup.choice("[[->intro_attack_head]]");>>
\<</if>>

::intro_inspect_head <1100,17975>
\<<set $InspectedHead = 1>>
 \


 \


\<<include intro_timer_passage>>
<<include intro_attack_choices>>

::intro_inspect_arms <1225,17975>
\<<set $InspectedArms = 1>>
 \










\<<include intro_timer_passage>>
<<include intro_attack_choices>>

::intro_inspect_legs <100,18100>
\<<set $InspectedLegs = 1>>


 \




\<<include intro_timer_passage>>
<<include intro_attack_choices>>

::intro_inspect_cock <225,18100>
\<<set $InspectedCock = 1>>
 \


 \




""""

\<<include intro_timer_passage>>
<<include intro_attack_choices>>

::intro_attack_head_on <350,18100>












""







\<<run setup.choice("[[->intro_cray_kill]]");>>

::intro_attack_head <475,18100>


""



""





!









\<<run setup.choice("[[->intro_cray_kill]]");>>

::intro_attack_arms <600,18100>
,

""







""







\<<run setup.choice("[[->intro_cray_kill]]");>>

::intro_attack_wrong_choice_legs <725,18100>








\<<run setup.choice("[[->intro_attack_wrong_choice]]");>>

::intro_attack_wrong_choice <1100,16725>


<<include intro_fail>>

::intro_out_of_time <1225,16725>


<<include intro_fail>>

::intro_fail <100,16850>

\<<run setup.choice("[[->intro_attack_wrong_choice]]");>>

::intro_attack_wrong_choice <850,18100>


<<include intro_fail>>

::intro_out_of_time <975,18100>


<<include intro_fail>>

::intro_fail <1100,18100>






\<<run setup.choice("[[->intro_drink_corruption]]");>>
\<<run setup.choice("[[->intro_resist_drinking]]");>>

::intro_drink_corruption <1225,18100>
\<<set $drank_corruption = 1>>








\<<run $CharacterSheet_Player.applyAbilityRuntimeData(setup.Ability_TaintedByTheLost)>>
[]







\<<run setup.choice("[[->intro_cray_kill]]");>>

::intro_resist_drinking <100,18225>










\<<run setup.choice("[[->intro_cray_kill]]");>>

::intro_cray_kill <225,18225>
\<<run setup.stopRealizationPackages(["CharacterSheet_Player"])>>
\<<run setup.stopSoundActions();>>

""



""



\<<if $drank_corruption == 1>>


\<<run setup.choice("[[->intro_cray_gets_jealous]]");>>
\<<else>>
\<<run setup.choice("[[->intro_cray_leaves]]");>>
\<<run setup.choice("[[->intro_cray_leaves]]");>>
\<</if>>

::intro_cray_gets_jealous <350,18225>
""

\<<run setup.choice("[[->intro_cray_leaves]]");>>

::intro_cray_leaves <475,18225>






""



""

" """

\<<run setup.choice("[[->intro_cray_leaves_2]]");>>
\<<run setup.choice("[[->intro_cray_knockout]]");>>

::intro_cray_leaves_2 <600,18225>
















<<include intro_post_cray_encounter>>

::intro_cray_knockout <725,18225>


\<<if $drank_corruption == 1>>
""
\<<else>>

\<</if>>





""



""""





<<include intro_post_cray_encounter>>

::intro_post_cray_encounter <850,18225>
\<<if !$CharacterSheet_Player.hasAbility("Ability_TaintedByTheLost")>>
\<<run $CharacterSheet_Player.applyAbilityRuntimeData(setup.Ability_SurvivorOfTheFirstEclipse)>>
\<</if>>

\<<run setup.choice("[[->intro_sleep]]");>>

::intro_timer_passage <975,18225>
\<<set $IntroCountdown = $IntroCountdown - 1>>
\<<if $IntroCountdown == 2>>

\<<elseif $IntroCountdown == 1>>

\<<elseif $IntroCountdown == 0>>
<<goto [[intro_out_of_time]]>>
\<</if>>

::intro_sleep <1100,18225>




""

"" \
"$CharacterSheet_Player.info.name"



\<<run setup.choice("[[->intro_wake_up]]");>>

::intro_wake_up <1225,18225>












\<<run setup.choice("[[->intro_get_dressed]]");>>

::intro_get_dressed <100,18350>






\<<run setup.choice("[[->intro_inhale_cloth]]");>>
\<<run setup.choice("[[->intro_throw_away_cloth]]");>>

::intro_inhale_cloth <225,18350>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 2)>>








\<<run setup.choice("[[->intro_inhale_cloth_1]]");>>

::intro_inhale_cloth_1 <350,18350>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 4)>>





\<<set $growth = setup.applyGrowth($CharacterSheet_Player, "muscles", 2)>>

\<<run setup.applyCorruption($CharacterSheet_Player, 10)>>
:10

\<<run setup.choice("[[->intro_leave_home][setup.stopRealizationPackages(['CharacterSheet_Player'])]]");>>

::intro_throw_away_cloth <475,18350>








\<<if $CharacterSheet_Player.hasAbility("Achievement_MemoriesOfTheLost")>>
\<<run setup.choice("[[->intro_no_herald]]");>>
\<<else>>
\<<run setup.choice("[[->intro_leave_home]]");>>
\<</if>>

::intro_no_herald <600,18350>

    


<span class="glitch nyx fucked" data-text="CORRUPT"></span>

\<<run setup.choice("[[->Village]]");>>

::intro_leave_home <725,18350>


""""



"$CharacterSheet_Player.info.name"

\<<run setup.choice("[[->intro_approach_herald]]");>>

::intro_approach_herald <850,18350>


""



"$CharacterSheet_Player.info.name""" \
""

\<<run setup.choice("[[->intro_approach_herald_2]]");>>

::intro_approach_herald_2 <975,18350>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Abel, "normal")>>

""""

""""



""""

\<<run setup.choice("[[->intro_abel_company]]");>>
\<<run setup.choice("[[->intro_depart]]");>>

::intro_abel_company <1100,18350>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Abel, "normal")>>

"" \

""



\<<run setup.choice("[[->Village]]");>>

::intro_depart <1225,18350>




\<<run setup.choice("[[->Village]]");>>

::Name Setup [Name] <24,1579>
<<include MeasurementSystem>>

<<include ChoicesWindowSettings>>

<<textbox "$CharacterSheet_Player.info.name" $CharacterSheet_Player.info.name>>. 


<<print setup.displayVoiceRadio($CharacterSheet_Player, ["AudioSheet_Voice1_Player","AudioSheet_Voice2_Player"])>>


[[->$Intro_Passage][setup.setRace($CharacterSheet_Player.info.anatomy, setup.RacePool.DEFAULT); setup.stopTestVoices();]]  <span title=""><<click "">><<toggleclass "#humandescription" "hidden">><</click>></span>
<div id="humandescription" class="hidden expandInfo"> <<print setup.getRaceDescriptor(setup.RacePoolObjects.DEFAULT) >></div> \
[[->$Intro_Passage][setup.setRace($CharacterSheet_Player.info.anatomy, setup.RacePool.WOLF); setup.stopTestVoices();]]  <span title=""><<click "">><<toggleclass "#wolfdescription" "hidden">><</click>></span>
<div id="wolfdescription" class="hidden expandInfo"> <<print setup.getRaceDescriptor(setup.RacePoolObjects.WOLF) >></div> \
[[->$Intro_Passage][setup.setRace($CharacterSheet_Player.info.anatomy, setup.RacePool.MINOTAUR); setup.stopTestVoices();]]  <span title=""><<click "">><<toggleclass "#minodescription" "hidden">><</click>></span>
<div id="minodescription" class="hidden expandInfo"> <<print setup.getRaceDescriptor(setup.RacePoolObjects.MINOTAUR) >></div> \
[[->$Intro_Passage][setup.setRace($CharacterSheet_Player.info.anatomy, setup.RacePool.DRAGONBORN); setup.stopTestVoices();]]  <span title=""><<click "">><<toggleclass "#dragonborndescription" "hidden">><</click>></span>
<div id="dragonborndescription" class="hidden expandInfo"> <<print setup.getRaceDescriptor(setup.RacePoolObjects.DRAGONBORN) >></div> \
[[->$Intro_Passage][setup.setRace($CharacterSheet_Player.info.anatomy, setup.RacePool.BEHEMOTH); setup.stopTestVoices();]]  <span title=""><<click "">><<toggleclass "#behemothdescription" "hidden">><</click>></span>
<div id="behemothdescription" class="hidden expandInfo"> <<print setup.getRaceDescriptor(setup.RacePoolObjects.BEHEMOTH) >></div> \
[[->$Intro_Passage][setup.setRace($CharacterSheet_Player.info.anatomy, setup.RacePool.HALFORC); setup.stopTestVoices();]]  <span title=""><<click "">><<toggleclass "#halforcdescription" "hidden">><</click>></span>
<div id="halforcdescription" class="hidden expandInfo"> <<print setup.getRaceDescriptor(setup.RacePoolObjects.HALFORC) >></div> \


\<<if $Debug>>
[[->CustomRaceDisclaimer]]
\<</if>>

::CustomRaceDisclaimer <225,18475>
<<run setup.stopTestVoices()>>



-
-

[[->CustomRaceCreator]]
[[->Name Setup]]

::CustomRaceCreator <350,18475>



','


My race's name is <<textbox "$CustomRace.name" "Kobold">>

I have <<textbox "$CustomRace.heads.defaultNumber" "1">> <<textbox "$CustomRace.heads.raceTexture" "scaly, spiky">> head/heads
I have <<textbox "$CustomRace.eyes.defaultNumber" "2">> <<textbox "$CustomRace.eyes.raceTexture" "glossy">> eye/eyes
I have <<textbox "$CustomRace.jaws.defaultNumber" "1">> <<textbox "$CustomRace.jaws.raceTexture" "scaled">> set of jaws
I have <<textbox "$CustomRace.teeths.defaultNumber" "1">> <<textbox "$CustomRace.teeths.raceTexture" "jagged">> set of teeth
I have <<textbox "$CustomRace.hands.defaultNumber" "2">> <<textbox "$CustomRace.hands.raceTexture" "scaled">> hand/hands
I have <<textbox "$CustomRace.horns.defaultNumber" "2">> <<textbox "$CustomRace.horns.raceTexture" "ridged">> horn/horns
I have<<textbox "$CustomRace.wings.defaultNumber" "0">> <<textbox "$CustomRace.wings.raceTexture" "bat-like">> wing/wings
I have<<textbox "$CustomRace.tongues.defaultNumber" "1">> <<textbox "$CustomRace.tongues.raceTexture" "forked">> tongue/tongues
I have<<textbox "$CustomRace.arms.defaultNumber" "2">> <<textbox "$CustomRace.arms.raceTexture" "scaled">> arm/arms
I have<<textbox "$CustomRace.pecs.defaultNumber" "2">> <<textbox "$CustomRace.pecs.raceTexture" "scaled">> pec/pecs
I have<<textbox "$CustomRace.breasts.defaultNumber" "0">> <<textbox "$CustomRace.breasts.raceTexture" "">> boob/boobs
I have<<textbox "$CustomRace.cocks.defaultNumber" "1">> <<textbox "$CustomRace.cocks.raceTexture" "tapered">> cock/cocks
I have<<textbox "$CustomRace.vaginas.defaultNumber" "0">> <<textbox "$CustomRace.vaginas.raceTexture" "">> vagina/vaginas
I have<<textbox "$CustomRace.balls.defaultNumber" "2">> <<textbox "$CustomRace.balls.raceTexture" "scaly">> ball/balls
I have<<textbox "$CustomRace.legs.defaultNumber" "2">> <<textbox "$CustomRace.legs.raceTexture" "scaled">> leg/legs
I have<<textbox "$CustomRace.tails.defaultNumber" "1">> <<textbox "$CustomRace.tails.raceTexture" "spiked">> tail/tails
I have a <<textbox "$CustomRace.abdominals.defaultNumber" "6">> pack of <<textbox "$CustomRace.abdominals.raceTexture" "scaled">> abs

I am <<textbox "$CharacterSheet_Player.info.height" 68>> inches tall.
I have a muscles value of <<textbox "$CharacterSheet_Player.info.muscles" 0>>.
I have a <<textbox "$CharacterSheet_Player.info.cock" 6>> inches cock.
I have <<textbox "$CharacterSheet_Player.info.balls" 2>> inches balls.

[[->$Intro_Passage][console.log($CustomRace); console.log(setup.RacePoolObjects); setup.parseIntStats(); setup.setRace(State.variables.CharacterSheet_Player.info.anatomy, setup.RacePool.CUSTOM, "herm")]]

::RandomEcounter <167,1844>
\<<if !$Encounter_Target>>


\<<run setup.choice("[[->Village]]");>>
\<<elseif setup.hasKnownEncounter()>>
<<print setup.displayPlaceholderImage("https://sombreve.github.io/Dawn-of-Corruption-Site/Images/Scenes/northern_barrens.jpg", undefined, undefined, true)>>


\<<run setup.choice("[[->KnownEncounter]]");>>
<<print setup.displayKnownEncounters()>>

\<<else>>
<<include KnownEncounter>>
\<</if>>

::KnownEncounter <600,18475>
<<print $Encounter_Target.fight.encounterIntroText>>

::Travelling <725,18475>
<<set $Explore_Destination = setup.getExploreDestination(0)>>

<<run setup.choice("[[->$Explore_Destination]]");>>

::Change_Combo_Moves_Menu [Overworld] <850,18475>

\<<set $FightMovesLeft = 5>>
<<print setup.displayChangeFightMoves()>>

::ChartPage [Overworld] <975,18475>


<<print setup.renderGraph()>>

\<<run setup.choice("[[->Home]]");>>

::Home [Overworld] <1100,18475>
\<<if $CharacterSheet_Player.quest.corruptionVillageExiled == true>>




<<print setup.displayVideo("https://sombreve.github.io/Dawn-of-Corruption-Site/Images/Scenes/Exiles_Rest.mp4", false)>>
\<<else>>
<<print setup.getFlavourBasedDescription($CharacterSheet_Player, "homeFlavour")>>
\<</if>>

[[->mirror_player]]
\<<if $CharacterSheet_Player.hasAbility("Ability_HostOfEcho")>>
[[->mirror_symbiote]]
\<</if>>
[[->ChartPage]]
[[->Journal]]

\<<run setup.choice("[[->Village]]");>>

::Journal [Overworld] <1225,18475>
<<print setup.displayJournal()>>

\<<run setup.choice("[[->Home]]");>>

::mirror_player [Overworld] <100,18600>
<<print setup.getFlavourBasedDescription($CharacterSheet_Player, "mirror_player_Flavour", 1)>>

<<print setup.displayStatValue($CharacterSheet_Player, "height", true)>><<print setup.getRace($CharacterSheet_Player.info.anatomy)>><<print setup.getMusclesDescriptor($CharacterSheet_Player)>>

\<<run setup.choice("[[->mirror_player_2]]");>>

::mirror_player_2 [Overworld] <225,18600>
<<print setup.getFlavourBasedDescription($CharacterSheet_Player, "mirror_player_HeadFlavour", 1)>>
<<if $CharacterSheet_Player.info.anatomy.horns != undefined && $CharacterSheet_Player.info.anatomy.horns.number >= 1>>
<<print setup.getFlavourBasedDescription($CharacterSheet_Player, "mirror_player_HornsFlavour",1 )>>
<</if>>


\<<run setup.choice("[[->mirror_player_3]]");>>

::mirror_player_3 [Overworld] <350,18600>
<<print setup.getFlavourBasedDescription($CharacterSheet_Player, "mirror_player_UpperBodyFlavour", 1)>>
<<if $CharacterSheet_Player.info.anatomy.wings != undefined && $CharacterSheet_Player.info.anatomy.wings.number >= 1>>
<<print setup.getFlavourBasedDescription($CharacterSheet_Player, "mirror_player_WingsFlavour",1 )>>
<</if>>

\<<run setup.choice("[[->mirror_player_4]]");>>

::mirror_player_4 [Overworld] <475,18600>
<<print setup.getFlavourBasedDescription($CharacterSheet_Player, "mirror_player_LowerBodyFlavour", 1)>>
<<if $CharacterSheet_Player.info.anatomy.tails != undefined && $CharacterSheet_Player.info.anatomy.tails.number >= 1>>
<<print setup.getFlavourBasedDescription($CharacterSheet_Player, "mirror_player_TailFlavour", 1)>>
<</if>>


\<<run setup.choice("[[->mirror_player_5]]");>>

::mirror_player_5 [Overworld] <600,18600>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 1)>>
<<print setup.getFlavourBasedDescription($CharacterSheet_Player, "mirror_player_CrotchFlavour", 1)>>

\<<run setup.choice("[[->Home][setup.stopRealizationPackages(['CharacterSheet_Player'])]]");>>

::mirror_symbiote <725,18600>
\<<if $CharacterSheet_Player.hasAbility("Ability_ToLiveForEcho")>>
<<print "<<SymbioteName>>">>
\<</if>>
\<<if setup.getStatValue($CharacterSheet_Player, "corruption") <= setup.CorruptionComparators.PURE>>
<<print "<<SymbioteName>>">>
\<<elseif setup.getStatValue($CharacterSheet_Player, "corruption") <= setup.CorruptionComparators.NEUTRAL>>
<<print "">>
\<<elseif setup.getStatValue($CharacterSheet_Player, "corruption") <= setup.CorruptionComparators.TAINTED>>
<<print "<<SymbioteName>>">>\
\<<else>>
<<print "">>
\<</if>>\

\<<if $CharacterSheet_Player.hasAbility("Ability_OrgasmicGrowth")>>\
<<print "">>
\<</if>>

<<print setup.getFlavourBasedDescription($CharacterSheet_Player, "mirror_symbiote_Flavour", 1, undefined, true)>>

<<print "<<SymbioteName>>" + setup.displayStatValue($CharacterSheet_Player, "height", true) + "<<SymbioteRace>> "+ setup.getMusclesDescriptor($CharacterSheet_Player) + "">>  

\<<if $CharacterSheet_Player.hasAbility("Ability_ToLiveForEcho")>>
<<print setup.processFlavours($CharacterSheet_Player, "<<SymbioteName>>@[all| heads| noverb]<<SymbioteName>><<SymbioteName>>@[all|eyes|noverb]@[all| jaws | noverb]@[all| tongues| noverb]@[all| teeths| noverb]<<SymbioteName>>")>>
\<<else>>
<<print setup.processFlavours($CharacterSheet_Player, "<<SymbioteName>>@[all| heads| noverb]@[all|eyes|noverb]@[all| jaws | noverb]@[all| tongues| noverb]@[all| teeths| noverb]")>>
\<</if>>

<<print setup.getFlavourBasedDescription($CharacterSheet_Player, "mirror_symbiote_HeadFlavour", 1, undefined, true)>>
\<<if $CharacterSheet_Player.symbiote.anatomy.horns != undefined && $CharacterSheet_Player.symbiote.anatomy.horns.number >= 1>>
<<print setup.getFlavourBasedDescription($CharacterSheet_Player, "mirror_symbiote_HornsFlavour", 1, undefined, true)>>
\<</if>>

\<<if $CharacterSheet_Player.hasAbility("Ability_ToLiveForEcho")>>
<<print setup.getFlavourBasedDescription($CharacterSheet_Player, "mirror_symbiote_UpperBodyFlavour_LiveForEcho", 1, undefined, true)>>
\<<else>>
<<print setup.getFlavourBasedDescription($CharacterSheet_Player, "mirror_symbiote_UpperBodyFlavour", 1, undefined, true)>>
\<</if>>
<<if $CharacterSheet_Player.symbiote.anatomy.wings != undefined && $CharacterSheet_Player.symbiote.anatomy.wings.number >= 1>>
\<<if $CharacterSheet_Player.hasAbility("Ability_ToLiveForEcho")>>
<<print setup.getFlavourBasedDescription($CharacterSheet_Player, "mirror_symbiote_WingsFlavour_LiveForEcho", 1, undefined, true)>>
\<<else>>
<<print setup.getFlavourBasedDescription($CharacterSheet_Player, "mirror_symbiote_WingsFlavour", 1, undefined, true)>>
\<</if>>
<</if>>
\<<if $CharacterSheet_Player.hasAbility("Ability_ToLiveForEcho")>>
<<print setup.getFlavourBasedDescription($CharacterSheet_Player, "mirror_symbiote_LowerBodyFlavour_LiveForEcho", 1, undefined, true)>>
\<<else>>
<<print setup.getFlavourBasedDescription($CharacterSheet_Player, "mirror_symbiote_LowerBodyFlavour", 1, undefined, true)>>
\<</if>>
<<if $CharacterSheet_Player.symbiote.anatomy.tails != undefined && $CharacterSheet_Player.symbiote.anatomy.tails.number >= 1>>
\<<if $CharacterSheet_Player.hasAbility("Ability_ToLiveForEcho")>>
<<print setup.getFlavourBasedDescription($CharacterSheet_Player, "mirror_symbiote_TailFlavour_LiveForEcho", 1, undefined, true)>>
\<<else>>
<<print setup.getFlavourBasedDescription($CharacterSheet_Player, "mirror_symbiote_TailFlavour", 1, undefined, true)>>
\<</if>>
<</if>>
<<SymbioteName>>

<<print setup.getFlavourBasedDescription($CharacterSheet_Player, "mirror_symbiote_CrotchFlavour", 1, undefined, true)>>

<<print "<<SymbioteName>><<PlayerRace>>">>

\<<run setup.choice("[[->Home]]");>>

::player_visitHouse_heightFlavour_small <850,18600>






::player_visitHouse_heightFlavour_medium <975,18600>


@[one|legs|noverb]





::player_visitHouse_heightFlavour_large <1100,18600>






::player_visitHouse_heightFlavour_huge <1225,18600>






::player_abelHouseMenu_heightFlavour_small <100,18725>
\

::player_abelHouseMenu_heightFlavour_medium <225,18725>
\

::player_abelHouseMenu_heightFlavour_large <350,18725>
\

::player_abelHouseMenu_heightFlavour_huge <475,18725>
\

::Village_AbelHouse_Intro [Overworld] <600,18725>
<<print setup.getFlavourBasedDescription($CharacterSheet_Player, "visitHouse")>>

\<<run setup.choice("[[->Village_AbelHouse]]");>>

::Village_AbelHouse [Overworld] <725,18725>
<<if setup.hasAvailableNarativeEvent(setup.StorySheet_Abel.houseIntro);>>\
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Abel, "worried")>>


""

<<include setup.getNextNarativeEventPassage(setup.StorySheet_Abel.houseIntro)>>
<<else>>\
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Abel, "normal")>>

<<print setup.getFlavourBasedDescription($CharacterSheet_Player, "abelHouseMenu")>>

<<print setup.getNextNarativeEventPassageListText(setup.StorySheet_Abel.flavourDialogue, 3)>>\

\<<run setup.choice("[[->abelHouseDialogue_outro]]");>>
<</if>>\

::abelHouseDialogue_aboutCray_link <850,18725>
[[->abelHouseDialogue_aboutCray]]

::abelHouseDialogue_aboutCray <975,18725>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Abel, "worried")>>

""

""

<<print setup.getNextNarativeEventPassageListText(setup.StorySheet_Abel.crayDialogue, 3)>>

[[->Village_AbelHouse]]

::abelHouseDialogue_aboutCray_whereabouts_link <1100,18725>
[[->abelHouseDialogue_aboutCray_whereabouts]]

::abelHouseDialogue_aboutCray_whereabouts <1225,18725>
<<set $CharacterSheet_Abel.quest.available_crayDialogue_whereabouts = false>>\
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Abel, "worried")>>

""""

""

"" 

[[->abelHouseDialogue_aboutCray_whereabouts_2]]

::abelHouseDialogue_aboutCray_whereabouts_2 <100,18850>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Abel, "angry")>>

""

""

""

""

<<print setup.getNextNarativeEventPassageListText(setup.StorySheet_Abel.crayDialogue, 3)>>

[[->Village_AbelHouse]]

::abelHouseDialogue_aboutCray_dayLeft_link <225,18850>
[[->abelHouseDialogue_aboutCray_dayLeft]]

::abelHouseDialogue_aboutCray_dayLeft <350,18850>
<<set $CharacterSheet_Abel.quest.available_crayDialogue_dayLeft = false>>\
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Abel, "worried")>>

""

""

<<print setup.getNextNarativeEventPassageListText(setup.StorySheet_Abel.crayDialogue, 3)>>

[[->Village_AbelHouse]]

::abelHouseDialogue_aboutCray_motives_link <475,18850>
[[->abelHouseDialogue_aboutCray_motives]]

::abelHouseDialogue_aboutCray_motives <600,18850>
<<set $CharacterSheet_Abel.quest.available_crayDialogue_motives = false>>\
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Abel, "normal")>>

""""

""



\<<run setup.choice("[[->abelHouseDialogue_aboutCray_motives_2]]");>>

::abelHouseDialogue_aboutCray_motives_2 <725,18850>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Abel, "worried")>>

""

<<print setup.getNextNarativeEventPassageListText(setup.StorySheet_Abel.crayDialogue, 3)>>

[[->Village_AbelHouse]]

::abelHouseDialogue_aboutCray_villageLife_link <850,18850>
[[->abelHouseDialogue_aboutCray_villageLife]]

::abelHouseDialogue_aboutCray_villageLife <975,18850>
<<set $CharacterSheet_Abel.quest.available_crayDialogue_villageLife = false>>\
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Abel, "normal")>>

""""

"""007"

<<print setup.getNextNarativeEventPassageListText(setup.StorySheet_Abel.crayDialogue, 3)>>

[[->Village_AbelHouse]]

::abelHouseDialogue_aboutTheBind_link <1100,18850>
[[->abelHouseDialogue_aboutTheBind]]

::abelHouseDialogue_aboutTheBind <1225,18850>
<<set $CharacterSheet_Abel.quest.available_flavourDialogue_talkAboutTheBind = false>>\
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Abel, "normal")>>

""

""

\<<run setup.choice("[[->abelHouseDialogue_aboutTheBind_2]]");>>

::abelHouseDialogue_aboutTheBind_2 <100,18975>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Abel, "normal")>>

""

\<<run setup.choice("[[->abelHouseDialogue_aboutTheBind_3]]");>>

::abelHouseDialogue_aboutTheBind_3 <225,18975>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Abel, "worried")>>

""

<<print setup.getNextNarativeEventPassageListText(setup.StorySheet_Abel.crayDialogue, 3)>>

[[->Village_AbelHouse]]

::abelHouseDialogue_aboutCray_achievements_link <350,18975>
[[->abelHouseDialogue_aboutCray_achievements]]

::abelHouseDialogue_aboutCray_achievements <475,18975>
<<set $CharacterSheet_Abel.quest.available_crayDialogue_achievements = false>>\
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Abel, "normal")>>

""""

"" ""

<<print setup.getNextNarativeEventPassageListText(setup.StorySheet_Abel.crayDialogue, 3)>>

[[->Village_AbelHouse]]

::abelHouseDialogue_aboutCray_scavengerLife_link <600,18975>
[[->abelHouseDialogue_aboutCray_scavengerLife]]

::abelHouseDialogue_aboutCray_scavengerLife <725,18975>
<<set $CharacterSheet_Abel.quest.available_crayDialogue_scavengerLife = false>>\
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Abel, "normal")>>

""""

""

<<print setup.getNextNarativeEventPassageListText(setup.StorySheet_Abel.crayDialogue, 3)>>

[[->Village_AbelHouse]]

::abelHouseDialogue_Herald_link <850,18975>
[[->abelHouseDialogue_Herald]]

::abelHouseDialogue_Herald <975,18975>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Abel, "normal")>>

()
""

""

<<print setup.getNextNarativeEventPassageListText(setup.StorySheet_Abel.heraldDialogue, 2)>>

[[->Village_AbelHouse]]

::abelHouseDialogue_Herald_duty_link <1100,18975>
[[->abelHouseDialogue_Herald_duty]]

::abelHouseDialogue_Herald_duty <1225,18975>
<<set $CharacterSheet_Abel.quest.available_heraldDialogue_duty = false>>\
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Abel, "normal")>>

""

""""

<<print setup.getNextNarativeEventPassageListText(setup.StorySheet_Abel.heraldDialogue, 2)>>

[[->Village_AbelHouse]]

::abelHouseDialogue_Herald_eldest_link <100,19100>
[[->abelHouseDialogue_Herald_eldest]]

::abelHouseDialogue_Herald_eldest <225,19100>
<<set $CharacterSheet_Abel.quest.available_heraldDialogue_eldest = false>>\
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Abel, "worried")>>

""

""""

[[->abelHouseDialogue_Herald_eldest_2]]
<<print setup.getNextNarativeEventPassageListText(setup.StorySheet_Abel.heraldDialogue, 2)>>

[[->Village_AbelHouse]]

::abelHouseDialogue_Herald_eldest_2 <350,19100>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Abel, "worried")>>

""""

""""

<<print setup.getNextNarativeEventPassageListText(setup.StorySheet_Abel.heraldDialogue, 2)>>

[[->Village_AbelHouse]]

::abelHouseDialogue_outro <475,19100>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Abel, "worried")>>



""

\<<run setup.choice("[[->Village]]");>>

::abelHouseIntro_firstDialogueAttackedGuard_link <600,19100>
[[->abelHouseIntro_firstDialogueAttackedGuard]]

::abelHouseIntro_firstDialogueAttackedGuard <725,19100>
<<set $CharacterSheet_Abel.quest.available_houseIntro_attackGuard = false>>\
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Abel, "worried")>>

""



\<<if $CharacterSheet_town_guard.quest.beatenOnce == false>>


""""
\<</if>>

\<<run setup.choice("[[->abelHouseIntro_firstDialogueAttackedGuard_2]]");>>

::abelHouseIntro_firstDialogueAttackedGuard_2 <850,19100>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Abel, "angry")>>

""""

[[->abelHouseIntro_attackGuardSelfDefense]]
[[->abelHouseIntro_attackGuardFeltRight]]

::abelHouseIntro_attackGuardSelfDefense <975,19100>




\<<run setup.choice("[[->abelHouseIntro_attackGuardSelfDefense_2]]");>>

::abelHouseIntro_attackGuardSelfDefense_2 <1100,19100>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Abel, "worried")>>



""



""

\<<if $CharacterSheet_town_guard.quest.fled == true>>
""""
\<<else>>
""""
\<</if>>

""""

\<<run setup.choice("[[->abelHouseIntro_firstDialogue]]");>>

::abelHouseIntro_attackGuardFeltRight <1225,19100>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Abel, "angry")>>



""

\<<if $CharacterSheet_town_guard.quest.fled == true>>
""""
\<<else>>
""""
\<</if>>

""""

\<<run setup.choice("[[->abelHouseIntro_firstDialogue]]");>>

::abelHouseIntro_attackGuardAngry <100,19225>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Abel, "angry")>>

""

""""

\<<if $CharacterSheet_town_guard.quest.fled == true>>
""""
\<<else>>
"""$CharacterSheet_Player.info.name"
\<</if>>

""""

\<<run setup.choice("[[->abelHouseIntro_firstDialogue]]");>>

::abelHouseIntro_firstDialogue_link <225,19225>
[[->abelHouseIntro_firstDialogue]]

::abelHouseIntro_firstDialogue <350,19225>
<<set $CharacterSheet_Abel.quest.available_houseIntro_baseFirstDialogue = false>>\
<<set $CharacterSheet_Abel.quest.playedHouseIntro = true>>\
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Abel, "worried")>>

""""

""

""""






""

\<<run setup.choice("[[->Village_AbelHouse]]");>>

::abelHouseIntro_tellAll_link <475,19225>
[[->abelHouseIntro_tellAll]]

::abelHouseIntro_tellAll <600,19225>
<<set $CharacterSheet_Abel.quest.available_flavourDialogue_introTellAll = false>>\
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Abel, "worried")>>







""

""

""

""

[[->abelHouse_tellAll_GivingIn]]
[[->abelHouse_tellAll_resisting]]
[[->abelHouse_tellAll_unsure]]

::abelHouse_tellAll_GivingIn <725,19225>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Abel, "worried")>>







"""$CharacterSheet_Player.info.name"

[[->abelHouse_tellAll_disagree]]
[[->abelHouse_tellAll_agree]]

::abelHouse_tellAll_agree <850,19225>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Abel, "normal")>>





"""

""

\<<run setup.choice("[[->Village_AbelHouse]]");>>

::abelHouse_tellAll_disagree <975,19225>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Abel, "angry")>>



""

[[->abelHouse_tellAll_disagree_itHasUses]]
[[->abelHouse_tellAll_disagree_wantMore]]
[[->abelHouse_tellAll_disagree_forThePeople]]
[[->abelHouse_tellAll_disagree_forAbel]]

::abelHouse_tellAll_disagree_forAbel <1100,19225>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Abel, "blushing")>>





""""

[[->abelHouse_protectAbel_agree]]
[[->abelHouse_protectAbel_disagree]]
[[->abelHouse_protectAbel_hug]]

<<if $CharacterSheet_Player.hasAbility("Ability_MemoriesOfNyx")>>\
<span class="glitch" data-text="">[[->abelHouse_protectAbel_corrupt]]</span>
<</if>>\

::abelHouse_protectAbel_agree <1225,19225>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Abel, "normal")>>



""""

\<<run setup.choice("[[->abelHouse_protectAbel_agree_2]]");>>

::abelHouse_protectAbel_agree_2 <100,19350>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Abel, "blushing")>>

""

\<<run setup.choice("[[->Village_AbelHouse]]");>>

::abelHouse_protectAbel_disagree <225,19350>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Abel, "blushing")>>





"$CharacterSheet_Player.info.name"

\<<run setup.choice("[[->Village_AbelHouse]]");>>

::abelHouse_protectAbel_hug <350,19350>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Abel, "blushing")>>





""""

\<<run setup.choice("[[->Village_AbelHouse]]");>>

::abelHouse_protectAbel_kiss <475,19350>
//







""""

""

\<<run setup.choice("[[->Village_AbelHouse]]");>>

::abelHouse_protectAbel_corrupt <600,19350>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Abel, "blushing")>>


<span class="glitch nyx fucked" data-text="GROW"></span><span class="glitch nyx" data-text="SPREAD"></span><span class="glitch nyx fucked" data-text="CORRUPT"></span>

 


\<<run setup.choice("[[->abelHouse_protectAbel_corrupt_2]]");>>

::abelHouse_protectAbel_corrupt_2 <725,19350>
\<<set $CharacterSheet_Abel.quest.corrupted = true>>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Abel, "corrupted")>>




""""



\<<run setup.choice("[[->Village_AbelHouse]]");>>

::abelHouse_tellAll_disagree_itHasUses <850,19350>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Abel, "normal")>>







"''"

\<<run setup.choice("[[->Village_AbelHouse]]");>>

::abelHouse_tellAll_disagree_wantMore <975,19350>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Abel, "worried")>>

<<print setup.processFlavours($CharacterSheet_Player, "@[one|arms|noverb]")>>







""

\<<run setup.choice("[[->Village_AbelHouse]]");>>

::abelHouse_tellAll_disagree_forThePeople <1100,19350>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Abel, "worried")>>





""

""

\<<run setup.choice("[[->Village_AbelHouse]]");>>

::abelHouse_tellAll_unsure <1225,19350>




\<<run setup.choice("[[->abelHouse_tellAll_unsure_2]]");>>

::abelHouse_tellAll_unsure_2 <100,19475>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Abel, "normal")>>

""

""

\<<run setup.choice("[[->Village_AbelHouse]]");>>

::abelHouse_tellAll_resisting <225,19475>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Abel, "normal")>>







""

\<<run setup.choice("[[->Village_AbelHouse]]");>>

::Select_Teammate [Overworld] <350,19475>


<<print setup.displaySelectTeammate()>>

\<<run setup.choice("[[->Village]]");>>

::Village [Overworld] <0,0>
\<<run setup.stopAllRealizationPackages()>>
\<<run setup.stopSoundActions();>>
\<<include setup.getNextNarativeEventPassage(setup.StorySheet_Player.enterVillage)>>

::Village_Normal [Overworld] <600,19475>
\<<print setup.getVillageDescriptor()>>

\<<if $CharacterSheet_Player.quest.corruptionVillageExiled == true>>
<<print setup.displayVideo("https://sombreve.github.io/Dawn-of-Corruption-Site/Images/Scenes/Exiles_Rest.mp4", false)>>
\<<else>>
<<print setup.displayEncounterImage("https://sombreve.github.io/Dawn-of-Corruption-Site/Images/Scenes/golden_bastion_lowres.jpg","https://sombreve.github.io/Dawn-of-Corruption-Site/Images/Scenes/golden_bastion.jpg", undefined, true)>>
\<</if>>
\
\<<include Village_Menu>>
\

::Village_Menu [Overworld] <725,19475>
\<<if setup.canLevelUp($Level) >>
\<<run setup.choice("[[->Level Up]]");>>
\<</if>>
\
\<<if $CharacterSheet_Player.quest.corruptionVillageExiled == true>>
\<<run setup.choice("[[->Home]]");>>
\<<else>>
\<<run setup.choice("[[->Home]]");>>
\<</if>>
\
\<<if $CharacterSheet_Player.hasAbility("Ability_HostOfEcho")>>
[[->Modify_Metabolism]]
\<</if>>
\
[[->Change_Combo_Moves_Menu]]
\
[[->GameplaySettings]]
\
<<print setup.getVillagePassages()>>
\<<if $CharacterSheet_Player.hasAbility("Ability_HostOfEcho") && $CharacterSheet_Player.quest.corruptionVillageExiled == false>>
\<<run setup.choice("[[->Village_AbelHouse_Intro]]");>>
\<</if>>
\
\<<if $CharacterSheet_Player.fight.unlockedTeammates.length > 0>>
[[->Select_Teammate]]
\<</if>>
\
\<<if $WorldState.cultManor.monolithBroken>>
\   <<if setup.getNextNarativeEventPassage(setup.StorySheet_Jorm.encounterPassages) != undefined>>
\<<run setup.choice("[[->Encounter_Jorm]]");>>
\   <<else>>
\<<run setup.choice("[[->Ending_UncertainFate]]");>>
\   <</if>>
\<</if>>
\
\<<set $Explore_Destination = setup.getExploreDestination()>>
\<<if setup.canExplore() >>
    \<<set $NorthGateEvent = setup.getNextNarativeEventPassage(setup.StorySheet_Player.exploration.villageGateNorth)>>
    \
    \<<if $NorthGateEvent != undefined && $CharacterSheet_Player.quest.corruptionVillageExiled == false>>
        \<<run setup.choice("[[->$NorthGateEvent]]");>>
    \<<else>>
        \<<run setup.choice("[[->$Explore_Destination][$Encounter_Target = setup.getRandomEncounter(0)]]");>>
    \<</if>>
    \
    \<<set $EastGateEvent = setup.getNextNarativeEventPassage(setup.StorySheet_Player.exploration.villageGateEast)>>
    \<<if $EastGateEvent != undefined && $CharacterSheet_Player.quest.corruptionVillageExiled == false>>
        \<<run setup.choice("[[->$EastGateEvent]]");>>
    \<<else>>
        \<<run setup.choice("[[->$Explore_Destination][$Encounter_Target = setup.getRandomEncounter(1)]]");>>
    \<</if>>
\<<else>>
<span class = "inactive"><<link "" $Explore_Destination>><</link>></span>
\<</if>>
\<<if $Debug>>
\<<run setup.choice("[[->DebugMenu]]");>>
\<</if>>

::Village_MeetImp_Examine [Overworld] <850,19475>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Imp, "normal")>>
<<print setup.getFlavourBasedDescription($CharacterSheet_Imp, 'goMeetImp_Height', 1)>>

::Village_MeetImp_Examine_Size_Small [Overworld] <975,19475>
<<ImpHeight>>



\<<run setup.choice("[[->Village_MeetImp_Examine_Muscles]]");>>

::Village_MeetImp_Examine_Size_Large [Overworld] <1100,19475>
 \


""

<<ImpHeight>>

\<<run setup.choice("[[->Village_MeetImp_Examine_Muscles]]");>>

::Village_MeetImp_Examine_Size_Huge [Overworld] <1225,19475>






 

<<ImpHeight>> \


\<<run setup.choice("[[->Village_MeetImp_Examine_Muscles]]");>>

::Village_MeetImp_Examine_Muscles [Overworld] <100,19600>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Imp, "normal")>>


<<print setup.getFlavourBasedDescription($CharacterSheet_Imp, 'goMeetImp_Muscles', 1)>>

::Village_MeetImp_Examine_Muscles_Small [Overworld] <225,19600>
 \






\<<run setup.choice("[[->Village_MeetImp_Examine_Genitals]]");>>

::Village_MeetImp_Examine_Muscles_Large [Overworld] <350,19600>
 

 \


 \




\<<run setup.choice("[[->Village_MeetImp_Examine_Genitals]]");>>

::Village_MeetImp_Examine_Muscles_Huge [Overworld] <475,19600>
 \


 \
 \
 \

; \
 

\<<run setup.choice("[[->Village_MeetImp_Examine_Muscles_Huge_2]]");>>

::Village_MeetImp_Examine_Muscles_Huge_2 [Overworld] <600,19600>
 \


 \




 \


 \


\<<run setup.choice("[[-->Village_MeetImp_Examine_Genitals]]");>>

::Village_MeetImp_Examine_Genitals [Overworld] <725,19600>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Imp, "blushing")>>

 \


<<print setup.getFlavourBasedDescription($CharacterSheet_Imp, 'goMeetImp_Genitals', 1)>>

::Village_MeetImp_Examine_Genitals_Small [Overworld] <850,19600>
<<ImpCockLength>> 

<<ImpBallsSize>> 



\<<run setup.choice("[[->Village_MeetImp]]");>>

::Village_MeetImp_Examine_Genitals_Large [Overworld] <975,19600>
<<ImpCockLength>>

<<ImpBallsSize>> \
 \
 



\<<run setup.choice("[[->Village_MeetImp]]");>>

::Village_MeetImp_Examine_Genitals_Huge [Overworld] <1100,19600>


<<ImpBallsSize>>

 \


<<ImpCockLength>> \


 





\<<run setup.choice("[[->Village_MeetImp]]");>>

::Village_Corruption_FirstWarning [Overworld] <1225,19600>


\<<run setup.choice("[[->Village_Corruption_FirstWarning_1]]");>>

::Village_Corruption_FirstWarning_1 [Overworld] <100,19725>





"<<PlayerName>>"



\<<run setup.choice("[[->Village_Exiled]]");>>
\<<run setup.choice("[[->Village_Confrontation]]");>>

::Village_Corruption_Warning_Idle [Overworld] <225,19725>
 


\<<run setup.choice("[[->Village_Corruption_Warning_Idle_1]]");>>

::Village_Corruption_Warning_Idle_1 [Overworld] <350,19725>


\<<if setup.getStatValue(State.variables.CharacterSheet_Player, "corruption") <= setup.CorruptionComparators.NEUTRAL>>
\<<run setup.choice("[[->Village_Corruption_Return]]");>>
\<<else>>
""

\<<run setup.choice("[[->Village_Exiled]]");>>
\<<run setup.choice("[[->Village_Confrontation]]");>>
\<</if>>

::Village_Corruption_Return [Overworld] <475,19725>
\<<set $CharacterSheet_Player.quest.corruptionVillageExiled = false>>

 




""



""

\<<run setup.choice("[[->Village_Normal]]");>>

::Village_Confrontation [Overworld] <600,19725>



""



""

<<print setup.getFightStartPassages($CharacterSheet_Herald)>>

::Village_Exiled_FirstTime <725,19725>
\<<set $CharacterSheet_Player.quest.corruptionVillageExiled = true>>




\<<run setup.choice("[[->Village_Exiled]]");>>

::Village_Exiled <850,19725>
\<<if $CharacterSheet_Player.quest.corruptionVillageExiled == false>>
<<include Village_Exiled_FirstTime>>
\<<else>>
<<include Village_Exiled_Menu>>
\<</if>>

::Village_Exiled_Menu <975,19725>
\<<print setup.getFlavourBasedDescription($CharacterSheet_Player, "village_exiled_menu", 1)>>

<<include Village_Normal>>

\<<run setup.choice("[[->Village_Corruption_Warning_Idle]]");>>

::Village_Exiled_Menu_Corruption_Header_Under_Threshold <1100,19725>
The 

\<<print setup.getFlavourBasedDescription($CharacterSheet_Player, "village_exiled_menu_underThreshold", 1)>>

::Village_Exiled_Menu_Corruption_Header_Under_Threshold_Large <1225,19725>


::Village_Exiled_Menu_Corruption_Header_Under_Threshold_Huge <100,19850>


::Village_Exiled_Menu_Corruption_Header_Over_Threshold <225,19850>




::Village_Exiled_Menu_Corruption_Header_Max_Corruption <350,19850>







::Village_GoMeetImp [Overworld] <475,19850>
<<print setup.getFlavourBasedDescription($CharacterSheet_Imp, 'goMeetImp_Intro', 1)>>

::GoMeetImp_heightFlavour_small [Overworld] <600,19850>
\
""



""""



\<<run setup.choice("[[->GoMeetImp_2]]");>>

::GoMeetImp_heightFlavour_large [Overworld] <725,19850>
\
 

"" \


\<<run setup.choice("[[->GoMeetImp_2]]");>>

::GoMeetImp_heightFlavour_huge [Overworld] <850,19850>
\
 \


 \






\<<run setup.choice("[[->GoMeetImp_2]]");>>

::GoMeetImp_2 [Overworld] <975,19850>
 \


\<<run setup.choice("[[->Village_MeetImp_Appears]]");>>

::Village_MeetImp_Appears [Overworld] <1100,19850>
""

 \


\<<run setup.choice("[[->Village_MeetImp]]");>>

::Village_MeetImp [Overworld] <1225,19850>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Imp, "normal")>>



\<<run setup.choice("[[->Village_MeetImp_Examine]]");>>
\<<run setup.choice("[[->Village_MeetImp_Chat]]");>>

\<<run setup.choice("[[->Village_MeetImp_Spar]]");>>
\<<run setup.choice("[[->Village_MeetImp_ChangeFightingStyle]]");>>
\<<run setup.choice("[[->Village_MeetImp_DecideWhenTheImpAttacks]]");>>

<<print setup.displayImpModsPassages()>>

\<<run setup.choice("[[->Village_MeetImp_Leave]]");>>

::Village_MeetImp_Spar [Overworld] <100,19975>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Imp, "normal")>>

"~"



\<<run setup.choice("[[->FightLogic][$Encounter_Target = $CharacterSheet_Imp]]");>>

::Village_MeetImp_ChangeFightingStyle [Overworld] <225,19975>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Imp, "normal")>>

""


 
""

[[->Village_MeetImp][setup.impSetAggressiveMoveset()]]
[[->Village_MeetImp][setup.impSetSigilMoveset()]]
[[->Village_MeetImp][setup.impSetGrowthMoveset()]]

\<<run setup.choice("[[->Village_MeetImp]]");>>

::Village_MeetImp_DecideWhenTheImpAttacks [Overworld] <350,19975>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Imp, "normal")>>

""

<<print setup.displayAttackTimingDescription($CharacterSheet_Imp)>>

\<<run setup.choice("[[->Village_MeetImp][$CharacterSheet_Imp.fight.teammateSettings.attackTiming = setup.AttackTiming.BEFORE_PLAYER]]
\<<run setup.choice("[[->Village_MeetImp][$CharacterSheet_Imp.fight.teammateSettings.attackTiming = setup.AttackTiming.BETWEEN_PLAYER_AND_ENEMY]]
\<<run setup.choice("[[->Village_MeetImp][$CharacterSheet_Imp.fight.teammateSettings.attackTiming = setup.AttackTiming.AFTER_ENEMY]]

\<<run setup.choice("[[->Village_MeetImp]]");>>

::Village_MeetImp_Chat [Overworld] <475,19975>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Imp, "normal")>>

""

\<<run setup.choice("[[->Village_MeetImp_Chat_Tree]]");>>
\<<if !$CharacterSheet_Player.hasAbility("Achievement_MemoriesOfKanathar")>>
\<<run setup.choice("[[->Village_MeetImp_Chat_Name]]");>>
\<</if>>
\<<run setup.choice("[[->Village_MeetImp]]");>>

::Village_MeetImp_Chat_Tree <600,19975>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Imp, "normal")>>
""

""



""



\<<run setup.choice("[[->Village_MeetImp_Chat]]");>>

::Village_MeetImp_Chat_Name <725,19975>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Imp, "normal")>>

""

""

\<<run setup.choice("[[->Village_MeetImp_Chat_Name_2]]");>>

::Village_MeetImp_Chat_Name_2 <850,19975>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Imp, "normal")>>

""  



\<<run setup.choice("[[->Village_MeetImp_Chat]]");>>

::Village_MeetImp_GrowHim [Overworld] <975,19975>
<<print setup.getFlavourBasedDescription($CharacterSheet_Imp, 'goMeetImp_GrowImp', 1)>>

::Village_MeetImp_GrowHim_Large <1100,19975>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Imp, "normal")>>

 \


"-"

\<<run setup.choice("[[->Village_MeetImp_GrowHim_Large_2]]");>>

::Village_MeetImp_GrowHim_Large_2 <1225,19975>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Imp, "blushing")>>
\<<run setup.playRealizationPackage(["CharacterSheet_Imp"], 1)>>


<<Hands>> \


 



\<<run setup.choice("[[->Village_MeetImp_GrowHim_Large_3]]");>>

::Village_MeetImp_GrowHim_Large_3 <100,20100>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Imp, "blushing")>>
\<<run setup.playRealizationPackage(["CharacterSheet_Imp"], 1)>>
 

 
<<print setup.processFlavours($CharacterSheet_Player, "@[all|cocks|noverb]@[all|cocks|noverb]")>> 

\<<run setup.choice("[[->Village_MeetImp_GrowHim_Large_4]]");>>

::Village_MeetImp_GrowHim_Large_4 <225,20100>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Imp, "cumming")>>
\<<run setup.playRealizationPackage(["CharacterSheet_Imp"], 2)>>
"" 

 
 \
 

\<<run setup.choice("[[->Village_MeetImp_GrowHim_Large_5]]");>>

::Village_MeetImp_GrowHim_Large_5 <350,20100>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Imp, "cumming")>>
\<<run setup.playRealizationPackage(["CharacterSheet_Imp"], 3)>>
 \
 



<<print setup.growImp()>>




<<Hands>> \
 

\<<run setup.choice("[[->Village_MeetImp_GrowHim_Large_6]]");>>

::Village_MeetImp_GrowHim_Large_6 <475,20100>
\<<run setup.playRealizationPackage(["CharacterSheet_Imp"], 4)>>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Imp, "cumming")>>
 \
 \
 

 \
<<PlayerBalls>><<Balls>> 

\<<run setup.choice("[[->Village_MeetImp_GrowHim_Large_7]]");>>

::Village_MeetImp_GrowHim_Large_7 <600,20100>
\<<run setup.playRealizationPackage(["CharacterSheet_Imp"], 5)>>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Imp, "cumming", true)>>
 
 




<<print setup.growImp()>>

\<<run setup.choice("[[->Village_MeetImp_GrowHim_Large_8]]");>>

::Village_MeetImp_GrowHim_Large_8 <725,20100>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Imp, "cumming", true)>>
\<<run setup.playRealizationPackage(["CharacterSheet_Imp"], 1)>>









\<<run setup.choice("[[->Village_MeetImp_GrowHim_Final]]");>>

::Village_MeetImp_GrowHim_Huge <850,20100>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Imp, "normal")>>
 


 \


\<<run setup.choice("[[->Village_MeetImp_GrowHim_Huge_2]]");>>

::Village_MeetImp_GrowHim_Huge_2 <975,20100>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Imp, "normal")>>


"-" 

\<<run setup.choice("[[->Village_MeetImp_GrowHim_Huge_3]]");>>

::Village_MeetImp_GrowHim_Huge_3 <1100,20100>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Imp, "blushing")>>




"-" 

\<<run setup.choice("[[->Village_MeetImp_GrowHim_Huge_4]]");>>

::Village_MeetImp_GrowHim_Huge_4 <1225,20100>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Imp, "cumming", true)>>


 \

 \

<<print setup.growImp()>>

\<<run setup.choice("[[->Village_MeetImp_GrowHim_Huge_5]]");>>

::Village_MeetImp_GrowHim_Huge_5 <100,20225>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Imp, "cumming", true)>>
 \


 \
 



"--" \


\<<run setup.choice("[[->Village_MeetImp_GrowHim_Huge_6]]");>>

::Village_MeetImp_GrowHim_Huge_6 <225,20225>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Imp, "cumming", true)>>

"~~~"

\<<run setup.choice("[[->Village_MeetImp_GrowHim_Final]]");>>

::Village_MeetImp_GrowHim_Final <350,20225>
\<<if setup.getStatValue($CharacterSheet_Imp, "height") > setup.getStatValue($CharacterSheet_Player, "height")>>
<<include Village_MeetImp_GrowHim_Final_PlayerSmaller>>
\<<else>>
<<include Village_MeetImp_GrowHim_Final_PlayerBigger>>
\<</if>>

::Village_MeetImp_GrowHim_Final_PlayerSmaller <475,20225>
\<<run setup.playRealizationPackage(["CharacterSheet_Imp"], 1)>>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Imp, "cumming", true)>>





\<<run setup.choice("[[->Village_MeetImp_GrowHim_Final_PlayerSmaller_2]]");>>

::Village_MeetImp_GrowHim_Final_PlayerSmaller_2 <600,20225>
\<<run setup.playRealizationPackage(["CharacterSheet_Imp"], 2)>>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Imp, "cumming", true)>>





 \
 

"~"

\<<run setup.choice("[[->Village_MeetImp_GrowHim_Final_PlayerSmaller_3]]");>>

::Village_MeetImp_GrowHim_Final_PlayerSmaller_3 <725,20225>
\<<run setup.playRealizationPackage(["CharacterSheet_Imp"], 4)>>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Imp, "cumming", true)>>



 



\<<run setup.choice("[[->Village_MeetImp_GrowHim_Final_PlayerSmaller_4]]");>>

::Village_MeetImp_GrowHim_Final_PlayerSmaller_4 <850,20225>
\<<run setup.playRealizationPackage(["CharacterSheet_Imp"], 5)>>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Imp, "cumming", true)>>
 \


<<ImpHeight>>



<<print setup.growImp()>>
<<include Village_MeetImp_GrowHim_Final_StatUp>>

::Village_MeetImp_GrowHim_Final_PlayerBigger <975,20225>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Imp, "cumming", true)>>
 



\<<run setup.choice("[[->Village_MeetImp_GrowHim_Final_PlayerBigger_2]]");>>

::Village_MeetImp_GrowHim_Final_PlayerBigger_2 <1100,20225>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Imp, "cumming", true)>>
<<print setup.processFlavours($CharacterSheet_Player, "@[all|cocks|noverb]")>> 
 \
<<print setup.processFlavours($CharacterSheet_Player, "@[1|hands|noverb]")>> 



\<<run setup.choice("[[->Village_MeetImp_GrowHim_Final_PlayerBigger_3]]");>>

::Village_MeetImp_GrowHim_Final_PlayerBigger_3 <1225,20225>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Imp, "cumming", true)>>




"~~~"

\<<run setup.choice("[[->Village_MeetImp_GrowHim_Final_PlayerBigger_4]]");>>

::Village_MeetImp_GrowHim_Final_PlayerBigger_4 <100,20350>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Imp, "cumming", true)>>
<<ImpHeight>>




 


\<<run setup.choice("[[->Village_MeetImp_GrowHim_Final_PlayerBigger_5]]");>>

::Village_MeetImp_GrowHim_Final_PlayerBigger_5 <225,20350>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Imp, "cumming", true)>>




 



<<print setup.growImp()>>
<<include Village_MeetImp_GrowHim_Final_StatUp>>

::Village_MeetImp_GrowHim_Final_StatUp <725,18850>
\<<set $levelUpResult = setup.levelUpImp()>>
<<print ""+$CharacterSheet_Imp.info.name+ ""+ $levelUpResult.hp + "">>
<<print ""+$CharacterSheet_Imp.info.name+ ""+ $levelUpResult.stamina + "">>
<<print ""+$CharacterSheet_Imp.info.name+ ""+ $levelUpResult.staminaRecovery + "">>
<<print ""+$CharacterSheet_Imp.info.name+ ""+ $levelUpResult.strength + "">>
<<print ""+$CharacterSheet_Imp.info.name+ ""+ $levelUpResult.critChance + "">>
<<print ""+$CharacterSheet_Imp.info.name+ ""+ $levelUpResult.critDamage + "">>
\<<unset $levelUpResult>>

\<<run setup.choice("[[->Village_MeetImp]]");>>

::Village_MeetImp_Leave [Overworld] <475,20350>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Imp, "normal")>>


"" 

"~"

\<<run setup.choice("[[->Village_MeetImp_Leave_2]]");>>

::Village_MeetImp_Leave_2 <600,20350>
<<print setup.getFlavourBasedDescription($CharacterSheet_Imp, 'leaveImp', 1)>>

::Village_MeetImp_Leave_Small <725,20350>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Imp, "normal")>>
 \
 

 

 



\<<run setup.choice("[[->Village]]");>>

::Village_MeetImp_Leave_Large <850,20350>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Imp, "normal")>>
 \


 \
 

 \
 

\<<run setup.choice("[[->Village_MeetImp_Leave_Large_2]]");>>

::Village_MeetImp_Leave_Large_2 <975,20350>


 



\<<run setup.choice("[[->Village]]");>>

::Village_MeetImp_Leave_Huge <1100,20350>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Imp, "normal")>>



 





\<<run setup.choice("[[->Village]]");>>

::Modify_Metabolism [Overworld] <100,0>
\<h1>
</h1>

[[->Modify_Metabolism_Overgrowth]]
[[->Modify_Metabolism_LimitBreak]]

\<<run setup.choice("[[->Village]]");>>

::Modify_Metabolism_Overgrowth [Overworld] <100,20475>
\<h2><<SymbioteName>></h2>
<<print setup.getOvergrowthToEssence()>>

\<<run setup.choice("[[->Modify_Metabolism][setup.convertOvergrowthToEssence()]]");>>
\<<run setup.choice("[[->Modify_Metabolism]]");>>

::Modify_Metabolism_LimitBreak [Overworld] <225,20475>
<<nobr>>

<<set $ModifyMetabolismParams = 
{
    points : State.variables.CharacterSheet_Player.info.limitBreaks.points,
    cap : {
        height: State.variables.CharacterSheet_Player.info.limitBreaks.cap.height,
        muscles: State.variables.CharacterSheet_Player.info.limitBreaks.cap.muscles,
        balls: State.variables.CharacterSheet_Player.info.limitBreaks.cap.balls,
        cock: State.variables.CharacterSheet_Player.info.limitBreaks.cap.cock,
    },
}>>

<</nobr>>
\<h1><<SymbioteName>></h1>

<div id="ModifyMetabolismContent">
\<<include Modify_Metabolism_LimitBreak_Show>>
</div>

\<<run setup.choice("[[->Modify_Metabolism][setup.applyModifyMetabolism($CharacterSheet_Player, $ModifyMetabolismParams)]]");>>
\<<run setup.choice("[[->Modify_Metabolism]]");>>

::Modify_Metabolism_LimitBreak_Show <350,20475>
$ModifyMetabolismParams.points 

<<nobr>>
<div class="ModifyMetabolismTable">
    <div class="ModifyMetabolismRow">
        <div class="ModifyMetabolismElementStatName">
        
        </div>
        <div class="ModifyMetabolismElementStatValue">
        <<print setup.getMusclesDescriptorForValue(setup.getStatSizeCap("muscles", $ModifyMetabolismParams.cap.muscles)) + " ("+ setup.getStatSizeCap("muscles", $ModifyMetabolismParams.cap.muscles) + ")">>
        </div>
        <div class="ModifyMetabolismElementRight">
        <<print setup.onClickMetabolismChange("-", "if($ModifyMetabolismParams.cap.muscles > 0) {$ModifyMetabolismParams.points++; $ModifyMetabolismParams.cap.muscles--;}")>>
        </div>
        <div class="ModifyMetabolismElementRight">
        <<print setup.onClickMetabolismChange("+", "if($ModifyMetabolismParams.points > 0 && $ModifyMetabolismParams.cap.muscles < 50) {$ModifyMetabolismParams.points--; $ModifyMetabolismParams.cap.muscles++;}")>>
        </div>
        <div class="ModifyMetabolismElementRight">
        $ModifyMetabolismParams.cap.muscles
        </div>
    </div>
    <div class="ModifyMetabolismRow">
        <div class="ModifyMetabolismElementStatName">
        
        </div>
        <div class="ModifyMetabolismElementStatValue">
        <<print setup.getLength(setup.getStatSizeCap("height", $ModifyMetabolismParams.cap.height))>>
        </div>
        <div class="ModifyMetabolismElementRight">
        <<print setup.onClickMetabolismChange("-", "if($ModifyMetabolismParams.cap.height > 0) {$ModifyMetabolismParams.points++; $ModifyMetabolismParams.cap.height--;}")>>
        </div>
        <div class="ModifyMetabolismElementRight">
        <<print setup.onClickMetabolismChange("+", "if($ModifyMetabolismParams.points > 0 && $ModifyMetabolismParams.cap.height < 50) {$ModifyMetabolismParams.points--; $ModifyMetabolismParams.cap.height++;}")>>
        </div>
        <div class="ModifyMetabolismElementRight">
        $ModifyMetabolismParams.cap.height
        </div>
    </div>
    <div class="ModifyMetabolismRow">
        <div class="ModifyMetabolismElementStatName">
        
        </div>
        <div class="ModifyMetabolismElementStatValue">
        <<print setup.getLength(setup.getStatSizeCap("cock", $ModifyMetabolismParams.cap.cock))>>
        </div>
        <div class="ModifyMetabolismElementRight">
        <<print setup.onClickMetabolismChange("-", "if($ModifyMetabolismParams.cap.cock > 0) {$ModifyMetabolismParams.points++; $ModifyMetabolismParams.cap.cock--;}")>>
        </div>
        <div class="ModifyMetabolismElementRight">
        <<print setup.onClickMetabolismChange("+", "if($ModifyMetabolismParams.points > 0 && $ModifyMetabolismParams.cap.cock < 50) {$ModifyMetabolismParams.points--; $ModifyMetabolismParams.cap.cock++;}")>>
        </div>
        <div class="ModifyMetabolismElementRight">
        $ModifyMetabolismParams.cap.cock
        </div>
    </div>
    <div class="ModifyMetabolismRow">
        <div class="ModifyMetabolismElementStatName">
        
        </div>
        <div class="ModifyMetabolismElementStatValue">
        <<print setup.getLength(setup.getStatSizeCap("balls", $ModifyMetabolismParams.cap.balls))>>
        </div>
        <div class="ModifyMetabolismElementRight">
        <<print setup.onClickMetabolismChange("-", "if($ModifyMetabolismParams.cap.balls > 0) {$ModifyMetabolismParams.points++; $ModifyMetabolismParams.cap.balls--;}")>>
        </div>
        <div class="ModifyMetabolismElementRight">
        <<print setup.onClickMetabolismChange("+", "if($ModifyMetabolismParams.points > 0 && $ModifyMetabolismParams.cap.balls < 50) {$ModifyMetabolismParams.points--; $ModifyMetabolismParams.cap.balls++;}")>>
        </div>
        <div class="ModifyMetabolismElementRight">
        $ModifyMetabolismParams.cap.balls
        </div>
    </div>
</div>

<</nobr>>

::Quest_MQ001_EchoFirstEncounter <475,20475>
<<set $Quest_MQ001_01 = 
{
    id:"MQ001_01",
    description: "",
    villagePassage: "[[->Quest_MQ001_EchoFirstEncounter_InvestigateImpact]]",
    onComplete: function()
    {
        State.variables.Explore_Destinations.push("Quest_MQ002_Entrance_FirstTime");
    }
}>>

::Quest_MQ001_EchoFirstEncounter_SeeSmoke [Explore] <600,20475>
<<run $Quest_InProgress.push($Quest_MQ001_01)>>
\<<run setup.removeExplorationDestination("Quest_MQ001_EchoFirstEncounter_SeeSmoke")>>










\<<run setup.choice("[[->Quest_MQ001_EchoFirstEncounter_InvestigateImpact]]");>>
\<<run setup.choice("[[->Village]]");>>

::Quest_MQ001_EchoFirstEncounter_InvestigateImpact <725,20475>


















\<<run setup.choice("[[->Quest_MQ001_EchoFirstEncounter_InvestigateImpact_2]]");>>
\<<run setup.choice("[[->Village]]");>>

::Quest_MQ001_EchoFirstEncounter_InvestigateImpact_2 <850,20475>








\<<run setup.choice("[[->Quest_MQ001_EchoFirstEncounter_InvestigateImpact_3]]");>>

::Quest_MQ001_EchoFirstEncounter_InvestigateImpact_3 <975,20475>


 









\<<run setup.choice("[[->Quest_MQ001_EchoFirstEncounter_InvestigateImpact_4]]");>>

::Quest_MQ001_EchoFirstEncounter_InvestigateImpact_4 <1100,20475>






\<<run setup.choice("[[->Quest_MQ001_EchoFirstEncounter_InvestigateImpact_5]]");>>

::Quest_MQ001_EchoFirstEncounter_InvestigateImpact_5 <1225,20475>




 











\<<run setup.choice("[[->Quest_MQ001_EchoFirstEncounter_InvestigateImpact_6]]");>>

::Quest_MQ001_EchoFirstEncounter_InvestigateImpact_6 <100,20600>


 

 

 












 
[[->Quest_MQ001_EchoFirstEncounter_InvestigateImpact_7_behemoth][setup.setRace($CharacterSheet_Player.symbiote.anatomy, setup.RacePool.BEHEMOTH)]]
[[->Quest_MQ001_EchoFirstEncounter_InvestigateImpact_7_dragonborn][setup.setRace($CharacterSheet_Player.symbiote.anatomy, setup.RacePool.DRAGONBORN)]]
[[->Quest_MQ001_EchoFirstEncounter_InvestigateImpact_7_naga][setup.setRace($CharacterSheet_Player.symbiote.anatomy, setup.RacePool.NAGA)]]
[[->Quest_MQ001_EchoFirstEncounter_InvestigateImpact_7_minotaur][setup.setRace($CharacterSheet_Player.symbiote.anatomy, setup.RacePool.MINOTAUR)]]
[[->Quest_MQ001_EchoFirstEncounter_InvestigateImpact_7_symbiote][setup.setRace($CharacterSheet_Player.symbiote.anatomy, setup.RacePool.SYMBIOTE)]]
[[->Quest_MQ001_EchoFirstEncounter_InvestigateImpact_7_werewolf][setup.setRace($CharacterSheet_Player.symbiote.anatomy, setup.RacePool.WOLF)]]

::Quest_MQ001_EchoFirstEncounter_InvestigateImpact_7_behemoth <225,20600>














\<<run setup.choice("[[->Quest_MQ001_EchoFirstEncounter_InvestigateImpact_8]]");>>

::Quest_MQ001_EchoFirstEncounter_InvestigateImpact_7_dragonborn <350,20600>












\<<run setup.choice("[[->Quest_MQ001_EchoFirstEncounter_InvestigateImpact_8]]");>>

::Quest_MQ001_EchoFirstEncounter_InvestigateImpact_7_naga <475,20600>


 







<<print setup.getLength(70)>>

\<<run setup.choice("[[->Quest_MQ001_EchoFirstEncounter_InvestigateImpact_8]]");>>

::Quest_MQ001_EchoFirstEncounter_InvestigateImpact_7_minotaur <600,20600>




 





 



\<<run setup.choice("[[->Quest_MQ001_EchoFirstEncounter_InvestigateImpact_8]]");>>

::Quest_MQ001_EchoFirstEncounter_InvestigateImpact_7_symbiote <725,20600>


 











\<<run setup.choice("[[->Quest_MQ001_EchoFirstEncounter_InvestigateImpact_8]]");>>

::Quest_MQ001_EchoFirstEncounter_InvestigateImpact_7_werewolf <850,20600>




 

 

  









\<<run setup.choice("[[->Quest_MQ001_EchoFirstEncounter_InvestigateImpact_8]]");>>

::Quest_MQ001_EchoFirstEncounter_InvestigateImpact_7_custom <975,20600>
<<print setup.processFlavours(
    $CharacterSheet_Player,
    "\n\n" +
    "@[all|heads|noverb]@[all|teeths|noverb]@[all|eyes|noverb]",
    true
)>> 

\<<if $CharacterSheet_Player.symbiote.anatomy.horns != undefined && $CharacterSheet_Player.symbiote.anatomy.horns.number >= 1>>
<<print setup.processFlavours(
    $CharacterSheet_Player,
    " @[all|horns|noverb]",
    true
)>> 
\<</if>>

<<print setup.processFlavours(
    $CharacterSheet_Player,
    "@[all|arms|noverb]@[all|pecs|noverb]@[all|abdominals|noverb]\n\n" +
    "@[all|legs|noverb]",
    true
)>> 

\<<if $CharacterSheet_Player.symbiote.anatomy.wings != undefined && $CharacterSheet_Player.symbiote.anatomy.wings.number >= 1>>
<<print setup.processFlavours(
    $CharacterSheet_Player,
    "@[all|wings|noverb]",
    true
)>> 
\<</if>>

\<<if $CharacterSheet_Player.symbiote.anatomy.tails != undefined && $CharacterSheet_Player.symbiote.anatomy.tails.number >= 1>>
<<print setup.processFlavours(
    $CharacterSheet_Player,
    "@[all|tails|noverb]",
    true
)>> 
\<</if>>

\<<run setup.choice("[[->Quest_MQ001_EchoFirstEncounter_InvestigateImpact_8]]");>>

::Quest_MQ001_EchoFirstEncounter_InvestigateImpact_8 <1100,20600>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 1)>>
<<SymbioteRace>>






 

 
[[->Quest_MQ001_EchoFirstEncounter_InvestigateImpact_9][$SymbioteBoost = "cock"]]
[[->Quest_MQ001_EchoFirstEncounter_InvestigateImpact_9][$SymbioteBoost = "muscles"]]
[[->Quest_MQ001_EchoFirstEncounter_InvestigateImpact_9][$SymbioteBoost = "height"]]

::Quest_MQ001_EchoFirstEncounter_InvestigateImpact_9 <1225,20600>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 2)>>
\<<if $SymbioteBoost == "cock">>
<<print setup.processFlavours($CharacterSheet_Player,
"@[all|cocks|noverb]\n\n ",
    true
)>> 
\<<run setup.applyGrowth($CharacterSheet_Player, "cock", 4)>>
\<<elseif $SymbioteBoost == "muscles">>
<<print setup.processFlavours($CharacterSheet_Player,
"@[all|abdominals|noverb]@[all|arms|noverb]" +
"\n\n@[all|pecs|noverb]",
    true
)>> 
\<<run setup.applyGrowth($CharacterSheet_Player, "muscles", 8)>>
\<<elseif $SymbioteBoost == "height">>
<<SymbioteRace>><<SymbioteRace>>
<<print setup.getLength(90)>>
\<<run setup.applyGrowth($CharacterSheet_Player, "cock", 1)>>\
\<<run setup.applyGrowth($CharacterSheet_Player, "height", 7)>>\
\<</if>> 















[[->Quest_MQ001_EchoFirstEncounter_InvestigateImpact_10][$CharacterSheet_Player.symbiote.color = setup.ColourPool.AMBER; setup.colourLimb($CharacterSheet_Player.info.anatomy, "eyes", setup.ColourPool.AMBER)]] 
[[->Quest_MQ001_EchoFirstEncounter_InvestigateImpact_10][$CharacterSheet_Player.symbiote.color = setup.ColourPool.BEIGE; setup.colourLimb($CharacterSheet_Player.info.anatomy, "eyes", setup.ColourPool.BEIGE)]] 
[[->Quest_MQ001_EchoFirstEncounter_InvestigateImpact_10][$CharacterSheet_Player.symbiote.color = setup.ColourPool.BLACK; setup.colourLimb($CharacterSheet_Player.info.anatomy, "eyes", setup.ColourPool.BLACK)]] 
[[->Quest_MQ001_EchoFirstEncounter_InvestigateImpact_10][$CharacterSheet_Player.symbiote.color = setup.ColourPool.BLUE; setup.colourLimb($CharacterSheet_Player.info.anatomy, "eyes", setup.ColourPool.BLUE)]] 
[[->Quest_MQ001_EchoFirstEncounter_InvestigateImpact_10][$CharacterSheet_Player.symbiote.color = setup.ColourPool.BROWN; setup.colourLimb($CharacterSheet_Player.info.anatomy, "eyes", setup.ColourPool.BROWN)]] 
[[->Quest_MQ001_EchoFirstEncounter_InvestigateImpact_10][$CharacterSheet_Player.symbiote.color = setup.ColourPool.CRIMSON; setup.colourLimb($CharacterSheet_Player.info.anatomy, "eyes", setup.ColourPool.CRIMSON)]] 
[[->Quest_MQ001_EchoFirstEncounter_InvestigateImpact_10][$CharacterSheet_Player.symbiote.color = setup.ColourPool.EMERALD; setup.colourLimb($CharacterSheet_Player.info.anatomy, "eyes", setup.ColourPool.EMERALD)]] 
[[->Quest_MQ001_EchoFirstEncounter_InvestigateImpact_10][$CharacterSheet_Player.symbiote.color = setup.ColourPool.GOLDEN; setup.colourLimb($CharacterSheet_Player.info.anatomy, "eyes", setup.ColourPool.GOLDEN)]] 
[[->Quest_MQ001_EchoFirstEncounter_InvestigateImpact_10][$CharacterSheet_Player.symbiote.color = setup.ColourPool.GREEN; setup.colourLimb($CharacterSheet_Player.info.anatomy, "eyes", setup.ColourPool.GREEN)]] 
[[->Quest_MQ001_EchoFirstEncounter_InvestigateImpact_10][$CharacterSheet_Player.symbiote.color = setup.ColourPool.GREY; setup.colourLimb($CharacterSheet_Player.info.anatomy, "eyes", setup.ColourPool.GREY)]] 
[[->Quest_MQ001_EchoFirstEncounter_InvestigateImpact_10][$CharacterSheet_Player.symbiote.color = setup.ColourPool.INDIGO; setup.colourLimb($CharacterSheet_Player.info.anatomy, "eyes", setup.ColourPool.INDIGO)]] 
[[->Quest_MQ001_EchoFirstEncounter_InvestigateImpact_10][$CharacterSheet_Player.symbiote.color = setup.ColourPool.OBSIDIAN; setup.colourLimb($CharacterSheet_Player.info.anatomy, "eyes", setup.ColourPool.OBSIDIAN)]] 
[[->Quest_MQ001_EchoFirstEncounter_InvestigateImpact_10][$CharacterSheet_Player.symbiote.color = setup.ColourPool.ORANGE; setup.colourLimb($CharacterSheet_Player.info.anatomy, "eyes", setup.ColourPool.ORANGE)]] 
[[->Quest_MQ001_EchoFirstEncounter_InvestigateImpact_10][$CharacterSheet_Player.symbiote.color = setup.ColourPool.PINK; setup.colourLimb($CharacterSheet_Player.info.anatomy, "eyes", setup.ColourPool.PINK)]] 
[[->Quest_MQ001_EchoFirstEncounter_InvestigateImpact_10][$CharacterSheet_Player.symbiote.color = setup.ColourPool.PURPLE; setup.colourLimb($CharacterSheet_Player.info.anatomy, "eyes", setup.ColourPool.PURPLE)]] 
[[->Quest_MQ001_EchoFirstEncounter_InvestigateImpact_10][$CharacterSheet_Player.symbiote.color = setup.ColourPool.RED; setup.colourLimb($CharacterSheet_Player.info.anatomy, "eyes", setup.ColourPool.RED)]] 
[[->Quest_MQ001_EchoFirstEncounter_InvestigateImpact_10][$CharacterSheet_Player.symbiote.color = setup.ColourPool.SAPPHIRE; setup.colourLimb($CharacterSheet_Player.info.anatomy, "eyes", setup.ColourPool.SAPPHIRE)]] 
[[->Quest_MQ001_EchoFirstEncounter_InvestigateImpact_10][$CharacterSheet_Player.symbiote.color = setup.ColourPool.VIOLET; setup.colourLimb($CharacterSheet_Player.info.anatomy, "eyes", setup.ColourPool.VIOLET)]] 
[[->Quest_MQ001_EchoFirstEncounter_InvestigateImpact_10][$CharacterSheet_Player.symbiote.color = setup.ColourPool.TAN; setup.colourLimb($CharacterSheet_Player.info.anatomy, "eyes", setup.ColourPool.TAN)]] 
[[->Quest_MQ001_EchoFirstEncounter_InvestigateImpact_10][$CharacterSheet_Player.symbiote.color = setup.ColourPool.WHITE; setup.colourLimb($CharacterSheet_Player.info.anatomy, "eyes", setup.ColourPool.WHITE)]] 
[[->Quest_MQ001_EchoFirstEncounter_InvestigateImpact_10][$CharacterSheet_Player.symbiote.color = setup.ColourPool.YELLOW; setup.colourLimb($CharacterSheet_Player.info.anatomy, "eyes", setup.ColourPool.YELLOW)]]

::Quest_MQ001_EchoFirstEncounter_InvestigateImpact_10 <100,20725>
\<<unset $SymbioteBoost>>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 2)>>
\<<run setup.colourAllLimbs($CharacterSheet_Player.symbiote.anatomy, $CharacterSheet_Player.symbiote.color)>>\
 
<<SymbioteColor>>
 


<<print setup.processFlavours($CharacterSheet_Player,
    "@[all|cocks|noverb]",
    true
)>> 



<<print setup.processFlavours($CharacterSheet_Player,
    "<<SymbioteRace>>@[all|cocks|one=grows~more=grow] " +
    "<<SymbioteRace>> " +
    "<<SymbioteColor>>"
)>> 

\<<run setup.choice("[[->Quest_MQ001_EchoFirstEncounter_InvestigateImpact_11]]");>>

::Quest_MQ001_EchoFirstEncounter_InvestigateImpact_11 <225,20725>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 3)>>
 



<<print setup.processFlavours($CharacterSheet_Player,
    "@[all|cocks|noverb]"
)>> 

<<print setup.getLength(86)>>

<<SymbioteColor>> 
 

 
 
 
<<textbox "$CharacterSheet_Player.symbiote.name" "Echo">>
\<<run setup.completeQuest($Quest_MQ001_01)>>
\<<run $CharacterSheet_Player.applyAbilityRuntimeData(setup.Ability_EchoForm)>>
 
\<<run setup.choice("[[->Quest_MQ001_EchoPostMerge][$CharacterSheet_Player.applyAbilityRuntimeData(setup.Ability_HostOfEcho)]]");>>

::Quest_MQ001_EchoPostMerge <350,20725>
\<<run setup.stopRealizationPackages(["CharacterSheet_Player"])>>







\<<if $CharacterSheet_Player.quest.corruptionVillageExiled == false>>
\<<run setup.choice("[[->Quest_MQ001_EchoPostMerge_1]]");>>
\<<else>>
\<<run setup.choice("[[->Village]]");>>
\<</if>>

::Quest_MQ001_EchoPostMerge_1 <475,20725>


""

""



\<<run setup.choice("[[->Quest_MQ001_EchoPostMerge_2_who_are_you]]");>>

::Quest_MQ001_EchoPostMerge_2_who_are_you <600,20725>




"$CharacterSheet_Player.info.name"



"$CharacterSheet_Player.info.name"

\<<run setup.choice("[[->Quest_MQ001_EchoPostMerge_2_Truth]]");>>
\<<run setup.choice("[[->Quest_MQ001_EchoPostMerge_3_Lie]]");>>
\<<run setup.choice("[[->Quest_MQ001_EchoPostMerge_2_Eldest]]");>>
\<<run setup.choice("[[->FightLogic][$Encounter_Target=$CharacterSheet_town_guard]]");>>

::Quest_MQ001_EchoPostMerge_2_Truth <725,20725>
 

"$CharacterSheet_Player.info.name"""

""

\<<run setup.choice("[[->Quest_MQ001_EchoPostMerge_3_Meet_Abel_aggressive]]");>>

::Quest_MQ001_EchoPostMerge_3_Lie <850,20725>




""

\<<run setup.choice("[[->Quest_MQ001_EchoPostMerge_3_Lie_mildred]]");>>

::Quest_MQ001_EchoPostMerge_3_Lie_mildred <975,20725>


""

\<<run setup.choice("[[->Quest_MQ001_EchoPostMerge_3_Lie_Abel]]");>>
\<<run setup.choice("[[->Quest_MQ001_EchoPostMerge_3_senna]]");>>
\<<run setup.choice("[[->Quest_MQ001_EchoPostMerge_3_Lie_Trent]]");>>

::Quest_MQ001_EchoPostMerge_3_Lie_Trent <1100,20725>


"""$CharacterSheet_Player.info.name"

""

\<<run setup.choice("[[->Quest_MQ001_EchoPostMerge_3_Meet_Abel_passive]]");>>

::Quest_MQ001_EchoPostMerge_3_senna <1225,20725>


""""

"$CharacterSheet_Player.info.name"""

\<<run setup.choice("[[->Quest_MQ001_EchoPostMerge_3_Meet_Abel_passive]]");>>

::Quest_MQ001_EchoPostMerge_3_Lie_Abel <100,20850>


""

""

\<<run setup.choice("[[->Quest_MQ001_EchoPostMerge_3_Meet_Abel_aggressive]]");>>

::Quest_MQ001_EchoPostMerge_2_Eldest <225,20850>


""""



\<<run setup.choice("[[->Quest_MQ001_EchoPostMerge_2_Eldest_2]]");>>

::Quest_MQ001_EchoPostMerge_2_Eldest_2 <350,20850>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Abel, "normal")>>







\<<run setup.choice("[[->Quest_MQ001_EchoPostMerge_3_Meet_Abel_p2]]");>>

::Quest_MQ001_EchoPostMerge_3_Meet_Abel_aggressive <475,20850>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Abel, "angry")>>

""

"""$CharacterSheet_Player.info.name"

""""

"$CharacterSheet_Player.info.name"

"$CharacterSheet_Player.info.name"

\<<run setup.choice("[[->Quest_MQ001_EchoPostMerge_3_Meet_Abel_p2]]");>>

::Quest_MQ001_EchoPostMerge_3_Meet_Abel_passive <600,20850>
""

""

\<<run setup.choice("[[->Quest_MQ001_EchoPostMerge_3_Meet_Abel_passive_2]]");>>

::Quest_MQ001_EchoPostMerge_3_Meet_Abel_passive_2 <725,20850>


""



\<<run setup.choice("[[->Quest_MQ001_EchoPostMerge_3_Meet_Abel_p2]]");>>

::Quest_MQ001_EchoPostMerge_3_Meet_Abel_p2 <850,20850>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Abel, "normal")>>

"$CharacterSheet_Player.info.name~"

""

""""



\<<run setup.choice("[[->Village]]");>>

::Quest_MQ002_ApothusRealm_Entrance <975,20850>











\<<if setup.MQ002_Manor_IsCorruptedInManor($CharacterSheet_Player)>>
 
\<<else>>
 
 
\<</if>>

""
\<<run $CharacterSheet_Player.applyAbilityRuntimeData(setup.Ability_EmbracedByNyxsLight);>>
\<<run setup.MQ002_LeavingManor($CharacterSheet_Player)>>

\<<if $CharacterSheet_Imp.quest.knowsAboutNyx>>
\<<run setup.choice("[[->Quest_MQ002_ApothusRealm_ImpInvasion]]");>>
\<<elseif $CharacterSheet_Player.quest.apothusRealmFirstTime>>
\<<run setup.choice("[[->Quest_MQ002_ApothusRealm_ApproachStructure]]");>>
\<<else>>
\<<run setup.choice("[[->Quest_MQ002_ApothusRealm_ApothusMenu]]");>>
\<</if>>

::Quest_MQ002_ApothusRealm_Exit <1100,20850>
\<<run setup.MQ002_GiveNyxLightAbility()>>
\<<run $CharacterSheet_Player.removeAbilityRuntimeData(setup.Ability_EmbracedByNyxsLight);>>


\<<run setup.choice("[[->Quest_MQ002_Manor_MainHall]]");>>

::Quest_MQ002_ApothusRealm_ApproachStructure <1225,20850>


\<<if setup.MQ002_Manor_IsMassiveInManor($CharacterSheet_Player)>>
 

\<<elseif setup.MQ002_Manor_IsGiganticInManor($CharacterSheet_Player)>>
 


\<</if>>





 



<<print setup.displayEncounterImage("https://sombreve.github.io/Dawn-of-Corruption-Site/Images/Scenes/voidlesky_dawn_of_corruption_2_lowres.jpg","https://sombreve.github.io/Dawn-of-Corruption-Site/Images/Scenes/voidlesky_dawn_of_corruption_2.jpg", undefined, true)>>

\<<run setup.choice("[[->Quest_MQ002_ApothusRealm_ApproachStructure_2]]");>>

::Quest_MQ002_ApothusRealm_ApproachStructure_2 <100,20975>
 


 




\<<run setup.choice("[[->Quest_MQ002_ApothusRealm_ApproachStructure_2_2]]");>>

::Quest_MQ002_ApothusRealm_ApproachStructure_2_2 <225,20975>



 
 

\<<run setup.choice("[[->Quest_MQ002_ApothusRealm_ApproachStructure_2_1]]");>>

::Quest_MQ002_ApothusRealm_ApproachStructure_2_1 <350,20975>



""

\<<run setup.choice("[[->Quest_MQ002_ApothusRealm_ApproachStructure_3]]");>>

::Quest_MQ002_ApothusRealm_ApproachStructure_3 <475,20975>
\<<if setup.MQ002_Manor_IsMassiveInManor($CharacterSheet_Player)>>

\<<else>>

\<</if>>

<<print setup.getLength(12 * 12)>>



\<<if setup.MQ002_HasBrokenSeal()>>
""
\<<else>>
""
\<</if>>

\<<run setup.choice("[[->Quest_MQ002_ApothusRealm_ApproachStructure_4]]");>>

::Quest_MQ002_ApothusRealm_ApproachStructure_4 <600,20975>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Apothus, "normal")>>






\<<run setup.choice("[[->Quest_MQ002_ApothusRealm_ApproachStructure_5]]");>>

::Quest_MQ002_ApothusRealm_ApproachStructure_5 <725,20975>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Apothus, "normal")>>

""



""
<<include Quest_MQ002_ApothusRealm_ApothusMenu>>

::Quest_MQ002_ApothusRealm_ApothusMenu <850,20975>
\<<if $CharacterSheet_Player.quest.apothusRealmFirstTime>>
\<<set $CharacterSheet_Player.quest.apothusRealmFirstTime = false>>
\<<else>>

<<print setup.processFlavours($CharacterSheet_Player, "@[all|cocks|noverb]")>>



    \<<if $WorldState.apothusTransformed>>

    \<<else>>
 


    \<</if>>
\<</if>>

\<<if $WorldState.apothusTransformed>>
[[->FightLogic][$Encounter_Target = $CharacterSheet_Apothus_2nd_Form]]
\<<else>>
[[->Quest_MQ002_ApothusRealm_AskAboutHim]]
[[->Quest_MQ002_ApothusRealm_AskAboutTheLosts]]
[[->Quest_MQ002_ApothusRealm_HereToSaveCray]]
    \<<if $CharacterSheet_Player.quest.oaths.apothus == setup.Oath.NONE>>

[[->Quest_MQ002_ApothusRealm_HereToKillThem]]
    \<<else>>

[[->Quest_MQ002_ApothusRealm_Feed_The_Chosen]]
    \<</if>>

    \<<if $CharacterSheet_Player.quest.oaths.apothus != setup.Oath.ACTIVE>>
[[->Quest_MQ002_ApothusRealm_HereToUnleashNyx]]
    \<</if>>
    \<<if $CharacterSheet_Player.quest.oaths.apothus == setup.Oath.ACTIVE && setup.getStatValue($CharacterSheet_Player, "corruption")>>
[[->Quest_MQ002_ApothusRealm_ChallengeApothus]]

    \<</if>>
\<</if>>
\<<run setup.choice("[[->Quest_MQ002_ApothusRealm_Exit]]");>>

::Quest_MQ002_ApothusRealm_AskAboutHim <975,20975>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Apothus, "normal")>>


"" 

"" 

  
\<<if !setup.MQ002_Manor_IsCorruptedInManor($CharacterSheet_Player)>>

\<</if>>

"" 

\<<run setup.choice("[[->Quest_MQ002_ApothusRealm_AskAboutHim_2]]");>>

::Quest_MQ002_ApothusRealm_AskAboutHim_2 <1100,20975>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Apothus, "mischievious")>>

","

";,"

"" 
\<<if setup.MQ002_Manor_IsCorruptedInManor($CharacterSheet_Player)>>

<<print setup.getLength(setup.getStatValue($CharacterSheet_Player, "cock"))>>
\<</if>>

"" 

\<<set $CharacterSheet_Apothus.quest.askedAboutHim = true>>
\<<run setup.choice("[[->Quest_MQ002_ApothusRealm_ApothusMenu]]");>>

::Quest_MQ002_ApothusRealm_AskAboutTheLosts <1225,20975>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Apothus, "normal")>>

" 
"



""

\<<run setup.choice("[[->Quest_MQ002_ApothusRealm_ApothusMenu]]");>>

::Quest_MQ002_ApothusRealm_HereToSaveCray <100,21100>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Apothus, "mischievious")>>


",," 

""

\<<run setup.choice("[[->Quest_MQ002_ApothusRealm_HereToSaveCray_2]]");>>

::Quest_MQ002_ApothusRealm_HereToSaveCray_2 <225,21100>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Apothus, "normal")>>

""

""

\<<run setup.choice("[[->Quest_MQ002_ApothusRealm_ApothusMenu]]");>>

::Quest_MQ002_ApothusRealm_HereToKillThem <350,21100>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Apothus, "mischievious")>>



"" 

\<<run setup.choice("[[->Quest_MQ002_ApothusRealm_HereToKillThem_2]]");>>

::Quest_MQ002_ApothusRealm_HereToKillThem_2 <475,21100>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Apothus, "grumpy")>>

"" 



\<<run setup.choice("[[->Quest_MQ002_ApothusRealm_HereToKillThem_3]]");>>

::Quest_MQ002_ApothusRealm_HereToKillThem_3 <600,21100>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Apothus, "angry")>>

""



""

\<<run setup.choice("[[->FightLogic][$Encounter_Target = $CharacterSheet_Apothus]]");>>

::Quest_MQ002_ApothusRealm_HereToUnleashNyx <725,21100>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Apothus, "licky")>>
;;
\<<if $CharacterSheet_Player.quest.nyxParasiteInfections > 0>>

\<</if>>



\<<run setup.choice("[[->Quest_MQ002_ApothusRealm_HereToUnleashNyx_1]]");>>

::Quest_MQ002_ApothusRealm_HereToUnleashNyx_1 <850,21100>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Apothus, "blushing")>>
\<<if setup.MQ002_Manor_IsMassiveInManor($CharacterSheet_Player)>>


\<</if>>




 


\<<run setup.choice("[[->Quest_MQ002_ApothusRealm_HereToUnleashNyx_1_2]]");>>

::Quest_MQ002_ApothusRealm_HereToUnleashNyx_1_2 <975,21100>
\<<set $CharacterSheet_Apothus.quest.arousalProgress = setup.Apothus_Arousal.REVEALING>>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Apothus, "mischievious")>>




<<print setup.getLength(setup.getStatValue($CharacterSheet_Player, "cock"))>>



""

\<<run setup.choice("[[->Quest_MQ002_ApothusRealm_HereToUnleashNyx_2]]");>>

::Quest_MQ002_ApothusRealm_HereToUnleashNyx_2 <1100,21100>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Apothus, "licky")>>


""

, 


\<<run setup.choice("[[->Quest_MQ002_ApothusRealm_HereToUnleashNyx_2_1]]");>>

::Quest_MQ002_ApothusRealm_HereToUnleashNyx_2_1 <1225,21100>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Apothus, "mischievious")>>



;  
 

\<<run setup.choice("[[->Quest_MQ002_ApothusRealm_HereToUnleashNyx_2_2]]");>>

::Quest_MQ002_ApothusRealm_HereToUnleashNyx_2_2 <100,21225>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Apothus, "licky")>>


"$CharacterSheet_Player.info.name" 

\<<run setup.choice("[[->Quest_MQ002_ApothusRealm_HereToUnleashNyx_3]]");>>

::Quest_MQ002_ApothusRealm_HereToUnleashNyx_3 <225,21225>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Apothus, "licky")>>
 
""

 
 

\<<run setup.choice("[[->Quest_MQ002_ApothusRealm_HereToUnleashNyx_3_1]]");>>

::Quest_MQ002_ApothusRealm_HereToUnleashNyx_3_1 <350,21225>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Apothus, "licky")>>

 

;

""

\<<run setup.choice("[[->Quest_MQ002_ApothusRealm_HereToUnleashNyx_4]]");>>

::Quest_MQ002_ApothusRealm_HereToUnleashNyx_4 <475,21225>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Apothus, "mischievious")>>
\<<set $CharacterSheet_Apothus.quest.arousalProgress = setup.Apothus_Arousal.NAKED>>


 








\<<run setup.choice("[[->Quest_MQ002_ApothusRealm_HereToUnleashNyx_4_2]]");>>

::Quest_MQ002_ApothusRealm_HereToUnleashNyx_4_2 <600,21225>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Apothus, "mischievious")>>

<<print setup.processFlavours($CharacterSheet_Player,"@[all|cock|noverb]")>>, 
, <<print setup.processFlavours($CharacterSheet_Player,"@[all|cocks|noverb]")>>






\<<run setup.choice("[[->Quest_MQ002_ApothusRealm_HereToUnleashNyx_5]]");>>

::Quest_MQ002_ApothusRealm_HereToUnleashNyx_5 <725,21225>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Apothus, "normal")>>

""



""
\<<set $CharacterSheet_Player.quest.oaths.apothus = setup.Oath.ACTIVE>>
\<<run $CharacterSheet_Player.applyAbilityRuntimeData(setup.Ability_Oath_Nyx);>>

\<<run setup.choice("[[->Quest_MQ002_ApothusRealm_ApothusMenu]]");>>

::Quest_MQ002_ApothusRealm_ChallengeApothus <850,21225>
;






. 





\<<run setup.choice("[[->FightLogic][$Encounter_Target = $CharacterSheet_Apothus]]");>>

::Quest_MQ002_ApothusRealm_Feed_The_Chosen <975,21225>
<<print setup.getNyxChosenCocoonSize()>>\


<<print setup.processFlavours($CharacterSheet_Player, " @[all|hands|noverb]; ")>> \


;

\<<if $WorldState.apothusChosen.essenceLevel == 0>>
    \<<if $Essence >= setup.getNyxChosenFeedEssenceCost($CharacterSheet_Player)>>
<<print "[[("+setup.getNyxChosenFeedEssenceCost($CharacterSheet_Player)+")->Feed_The_Chosen_Level1][$Essence -= "+setup.getNyxChosenFeedEssenceCost($CharacterSheet_Player)+"]]">>
    \<<else>>
<<print "<span class = 'inactive'>[[("+setup.getNyxChosenFeedEssenceCost($CharacterSheet_Player)+")->Feed_The_Chosen_Level1]]</span>">>
    \<</if>>
\<<elseif $WorldState.apothusChosen.essenceLevel == 1>>
    \<<if $Essence >= setup.getNyxChosenFeedEssenceCost($CharacterSheet_Player)>>
<<print "[[("+setup.getNyxChosenFeedEssenceCost($CharacterSheet_Player)+")->Feed_The_Chosen_Level2][$Essence -= "+setup.getNyxChosenFeedEssenceCost($CharacterSheet_Player)+"]]">>
    \<<else>>
<<print "<span class = 'inactive'>[[("+setup.getNyxChosenFeedEssenceCost($CharacterSheet_Player)+")->Feed_The_Chosen_Level2]]</span>">>
    \<</if>>
\<<elseif $WorldState.apothusChosen.essenceLevel == 2>>
    \<<if $Essence >= setup.getNyxChosenFeedEssenceCost($CharacterSheet_Player)>>
<<print "[[("+setup.getNyxChosenFeedEssenceCost($CharacterSheet_Player)+")->Feed_The_Chosen_Final][$Essence -= "+setup.getNyxChosenFeedEssenceCost($CharacterSheet_Player)+"]]">>
    \<<else>>
<<print "<span class = 'inactive'>[[("+setup.getNyxChosenFeedEssenceCost($CharacterSheet_Player)+")->Feed_The_Chosen_Final]]</span>">>
    \<</if>>
\<</if>>
\<<run setup.choice("[[->Quest_MQ002_ApothusRealm_ApothusMenu]]");>>

::Feed_The_Chosen_Level1 <1100,21225>
<<print setup.processFlavours($CharacterSheet_Player, "@[all|arms|noverb]")>> \




 


\<<set $WorldState.apothusChosen.essenceLevel = 1>>

<<print setup.getNyxChosenCocoonSize()>>

\<<run setup.choice("[[->Quest_MQ002_ApothusRealm_ApothusMenu]]");>>

::Feed_The_Chosen_Level2 <1225,21225>
\
 
 
\
<<print setup.processFlavours($CharacterSheet_Player, "@[all|hands|noverb], ")>> \

 

\<<set $WorldState.apothusChosen.essenceLevel = 2>>
 


<<print setup.getNyxChosenCocoonSize()>>, 

\<<run setup.choice("[[->Quest_MQ002_ApothusRealm_ApothusMenu]]");>>

::Feed_The_Chosen_Final <100,21350>
\<<set $WorldState.apothusChosen.essenceLevel = 3>>














 

\<<run setup.choice("[[->Feed_The_Chosen_Final_2]]");>>

::Feed_The_Chosen_Final_2 <225,21350>
 \
 

""



 \


""



  \
 ; 

\<<run setup.choice("[[->Feed_The_Chosen_Final_3]]");>>

::Feed_The_Chosen_Final_3 <350,21350>
;  \
;



\<<run setup.choice("[[->Feed_The_Chosen_Final_4]]");>>

::Feed_The_Chosen_Final_4 <475,21350>
\<<run setup.applyGrowth($CharacterSheet_Player, "muscles", 35)>>\





\
  \
<<if setup.sizecomparison(setup.getStatValue($CharacterSheet_Player, "height"), 16896) >= setup.Comparators.BIGGER>>\

<<else>>\

<</if>>\

""






 \




\<<run setup.choice("[[->Feed_The_Chosen_Final_5]]");>>

::Feed_The_Chosen_Final_5 <600,21350>
 

  \






 \
 

""





\<<run setup.choice("[[->Feed_The_Chosen_Final_HelpHim]]");>>
\<<if $CharacterSheet_MQ002_Guard.quest.nyxPromise == true>>
\<<run setup.choice("[[->Feed_The_Chosen_Final_Minotaur]]");>>
\<</if>>

::Feed_The_Chosen_Final_HelpHim <725,21350>






\<<run setup.choice("[[->Feed_The_Chosen_Final_HelpHim_2]]");>>

::Feed_The_Chosen_Final_HelpHim_2 <850,21350>


; . 





""



\<<run setup.choice("[[->Feed_The_Chosen_Final_HelpHim_3]]");>>

::Feed_The_Chosen_Final_HelpHim_3 <975,21350>
 

\


<<SymbioteColor>>, 

\




<<if $CharacterSheet_Player.hasAbility("Ability_TaintedByTheLost")>>\
""
<<else>>\
""
<</if>>\



<<if setup.sizecomparison(setup.getStatValue($CharacterSheet_Player, "height"), 16896) >= setup.Comparators.BIGGER>>\
<<print setup.getLength(setup.getStatValue($CharacterSheet_Player, "height"))>>
<<else>>\
<<run setup.applyGrowth($CharacterSheet_Player, "cock", 1495)>>\
<<run setup.applyGrowth($CharacterSheet_Player, "balls", 528)>>\
<<run setup.applyGrowth($CharacterSheet_Player, "height", 16896)>>\
<<run setup.applyGrowth($CharacterSheet_Player, "muscles", 250)>>\


"" 


<</if>>\

<<SymbioteName>>

\<<run setup.choice("[[->Feed_The_Chosen_Final_OnlyGrowPath]]");>>
\<<run setup.choice("[[->Feed_The_Chosen_Final_CorruptEverything]]");>>

::Feed_The_Chosen_Final_OnlyGrowPath <1100,21350>
<<SymbioteName>>







\<<run setup.choice("[[->Feed_The_Chosen_Final_OnlyGrowPath_2]]");>>

::Feed_The_Chosen_Final_OnlyGrowPath_2 <1225,21350>
<<print setup.processFlavours($CharacterSheet_Player, "@[all|arms|noverb]")>> \
<<print setup.processFlavours($CharacterSheet_Player, "<<SymbioteColor>> ")>>

\
<<SymbioteRace>>

<<print setup.processFlavours($CharacterSheet_Player, ";@[all|cocks|noverb]")>>





\<<run setup.choice("[[->Feed_The_Chosen_Final_OnlyGrowPath_3]]");>>

::Feed_The_Chosen_Final_OnlyGrowPath_3 <100,21475>
<<run setup.applyGrowth($CharacterSheet_Player, "cock", setup.getStatValue($CharacterSheet_Player, "cock"))>>\
<<run setup.applyGrowth($CharacterSheet_Player, "balls", setup.getStatValue($CharacterSheet_Player, "balls"))>>\
<<run setup.applyGrowth($CharacterSheet_Player, "height", setup.getStatValue($CharacterSheet_Player, "height"))>>\
<<run setup.applyGrowth($CharacterSheet_Player, "muscles", setup.getStatValue($CharacterSheet_Player, "muscles"))>>\






"!" 



; <<print setup.getLength(setup.getStatValue($CharacterSheet_Player, "height"))>>

\<<run setup.choice("[[->Feed_The_Chosen_Final_OnlyGrowPath_4]]");>>

::Feed_The_Chosen_Final_OnlyGrowPath_4 <225,21475>
<<run setup.applyGrowth($CharacterSheet_Player, "cock", setup.getStatValue($CharacterSheet_Player, "cock"))>>\
<<run setup.applyGrowth($CharacterSheet_Player, "balls", setup.getStatValue($CharacterSheet_Player, "balls"))>>\
<<run setup.applyGrowth($CharacterSheet_Player, "height", setup.getStatValue($CharacterSheet_Player, "height"))>>\
<<run setup.applyGrowth($CharacterSheet_Player, "muscles", setup.getStatValue($CharacterSheet_Player, "muscles"))>>\
\
 \



""\


\<<run setup.choice("[[->Feed_The_Chosen_Final_OnlyGrowPath_5]]");>>

::Feed_The_Chosen_Final_OnlyGrowPath_5 <350,21475>
<<run setup.applyGrowth($CharacterSheet_Player, "cock", setup.getStatValue($CharacterSheet_Player, "cock"))>>\
<<run setup.applyGrowth($CharacterSheet_Player, "balls", setup.getStatValue($CharacterSheet_Player, "balls"))>>\
<<run setup.applyGrowth($CharacterSheet_Player, "height", setup.getStatValue($CharacterSheet_Player, "height"))>>\
<<run setup.applyGrowth($CharacterSheet_Player, "muscles", setup.getStatValue($CharacterSheet_Player, "muscles"))>>\
;

  ; 





"!"

<<print setup.processFlavours($CharacterSheet_Player, "@[all|heads|noverb].")>>





\<<run setup.choice("[[->Feed_The_Chosen_Final_OnlyGrowPath_6]]");>>

::Feed_The_Chosen_Final_OnlyGrowPath_6 <475,21475>
<<run setup.applyGrowth($CharacterSheet_Player, "cock", setup.getStatValue($CharacterSheet_Player, "cock"))>>\
<<run setup.applyGrowth($CharacterSheet_Player, "balls", setup.getStatValue($CharacterSheet_Player, "balls"))>>\
<<run setup.applyGrowth($CharacterSheet_Player, "height", setup.getStatValue($CharacterSheet_Player, "height"))>>\
<<run setup.applyGrowth($CharacterSheet_Player, "muscles", setup.getStatValue($CharacterSheet_Player, "muscles"))>>\
 \






"!"

<<print setup.processFlavours($CharacterSheet_Player, "@[all|cocks|noverb]")>>
; 

"!"

<<print setup.processFlavours($CharacterSheet_Player, " @[all|heads|noverb] ")>>

\<<run setup.choice("[[->Feed_The_Chosen_Final_OnlyGrowPath_7]]");>>

::Feed_The_Chosen_Final_OnlyGrowPath_7 <600,21475>
<<run setup.applyGrowth($CharacterSheet_Player, "cock", setup.getStatValue($CharacterSheet_Player, "cock"))>>\
<<run setup.applyGrowth($CharacterSheet_Player, "balls", setup.getStatValue($CharacterSheet_Player, "balls"))>>\
<<run setup.applyGrowth($CharacterSheet_Player, "height", setup.getStatValue($CharacterSheet_Player, "height"))>>\
<<run setup.applyGrowth($CharacterSheet_Player, "muscles", setup.getStatValue($CharacterSheet_Player, "muscles"))>>\


"!"

 <<SymbioteColor>>   \




""

<<print setup.processFlavours($CharacterSheet_Player, "@[all|cocks|noverb],@[all|cocks|noverb]")>>

; 

; , !

\<<run setup.choice("[[->Feed_The_Chosen_Final_OnlyGrowPath_8]]");>>

::Feed_The_Chosen_Final_OnlyGrowPath_8 <725,21475>
<<run setup.applyGrowth($CharacterSheet_Player, "cock", setup.getStatValue($CharacterSheet_Player, "cock"))>>\
<<run setup.applyGrowth($CharacterSheet_Player, "balls", setup.getStatValue($CharacterSheet_Player, "balls"))>>\
<<run setup.applyGrowth($CharacterSheet_Player, "height", setup.getStatValue($CharacterSheet_Player, "height"))>>\
<<run setup.applyGrowth($CharacterSheet_Player, "muscles", setup.getStatValue($CharacterSheet_Player, "muscles"))>>\
<<print setup.processFlavours($CharacterSheet_Player, ",@[all|legs|noverb]")>>
<<print setup.processFlavours($CharacterSheet_Player, " @[all|pecs|noverb], ")>> \



<<print setup.processFlavours($CharacterSheet_Player, "@[all|cocks|noverb], ")>>



\<<run setup.choice("[[->Feed_The_Chosen_Final_OnlyGrowPath_9]]");>>

::Feed_The_Chosen_Final_OnlyGrowPath_9 <850,21475>
 





<<print setup.processFlavours($CharacterSheet_Player, "@[all|cocks|noverb] ; ")>>

"!"



\<<run setup.choice("[[->Feed_The_Chosen_Final_OnlyGrowPath_10]]");>>

::Feed_The_Chosen_Final_OnlyGrowPath_10 <975,21475>
 



<<print setup.processFlavours($CharacterSheet_Player, "@[all|cocks|noverb];")>>



\<<run setup.triggerEnding("Ending_MemoriesOfCray")>>
\<<run setup.choice("[[->Ending]]");>>

::Feed_The_Chosen_Final_CorruptEverything <1100,21475>




;

\




\<<run setup.choice("[[->Feed_The_Chosen_Final_CorruptEverything_2]]");>>

::Feed_The_Chosen_Final_CorruptEverything_2 <1225,21475>




\
\
 \
\
, <span class="glitch nyx" data-text=""></span>

\<<run setup.choice("[[->Feed_The_Chosen_Final_CorruptEverything_3]]");>>

::Feed_The_Chosen_Final_CorruptEverything_3 <100,21600>
\
\
, <span class="glitch nyx" data-text=""></span>

<span class="glitch nyx fucked" data-text=""></span>,\
 \
<span class="glitch nyx" data-text=""></span>.

<span class="glitch nyx" data-text="con quering  the  planet"></span>. \
\
\
<span class="glitch nyx fucked" data-text="feeding the cycle and spread"></span>

\<<run setup.choice("[[->Feed_The_Chosen_Final_CorruptEverything_4]]");>>

::Feed_The_Chosen_Final_CorruptEverything_4 <225,21600>
<<run setup.colourLimb($CharacterSheet_Player.info.anatomy, "eyes", setup.ColourPool.PURPLE)>>\
  \
 \
<span class="glitch nyx fucked" data-text="conquering the planet"></span>. \


<<print setup.processFlavours($CharacterSheet_Player, "@[all|arms|noverb]")>>. \
<<print setup.processFlavours($CharacterSheet_Player, "@[all|hands|noverb]")>><span class="glitch nyx" data-text=""></span> \
 <span class="glitch nyx fucked" data-text="seek   o ut"></span>!

<span class="corruptText75"> <span class="glitch nyx fucked" data-text="exultation  and  depravity"></span>, \
<span class="glitch nyx fucked" data-text="glowing,  purple  eyes"></span> , <<print setup.processFlavours($CharacterSheet_Player, "@[all|eyes|noverb]")>> <span class="glitch nyx" data-text="endless   power   and   corruption"></span>, \
<span class="glitch nyx fucked" data-text="SEARING  PURPLE  GAZE."></span></span>

<span class="glitch nyx fucked" data-text="Usher   in   a   New   Age">[[->Feed_The_Chosen_Final_CorruptEverything_5]]</span>\

::Feed_The_Chosen_Final_CorruptEverything_5 <350,21600>
\<<set $CorruptSidebar = true>>
<span class="corruptText100">\
<span class="glitch nyx fucked" data-text="GROW"></span>\
<span class="glitch nyx" data-text="SPREAD"></span>\
<span class="glitch nyx fucked" data-text="CORRUPT">[[->Feed_The_Chosen_Final_CorruptEverything_6]]</span>\
</span>
\<<run setup.applyCorruption($CharacterSheet_Player, 9999999)>>

::Feed_The_Chosen_Final_CorruptEverything_6 <600,20100>
<span class="corruptText100">\
<span class="glitch nyx fucked" data-text="CORRUPT"></span>\
<span class="glitch nyx" data-text="SPREAD"></span>\
<span class="glitch nyx fucked" data-text="GROW"> [[->Feed_The_Chosen_Final_CorruptEverything_7]]</span>\
</span>

::Feed_The_Chosen_Final_CorruptEverything_7 <725,20100>
<span class="corruptText100">\
<span class="glitch nyx fucked" data-text="CORRUPT"></span>\
<span class="glitch nyx" data-text="SPREAD"></span>\
<span class="glitch nyx fucked" data-text="GROW"> [[->Feed_The_Chosen_Final_CorruptEverything_8]]</span>\
</span>

::Feed_The_Chosen_Final_CorruptEverything_8 <850,20100>
<span class="corruptText100">\
<span class="glitch nyx fucked" data-text="CORRUPT">[[->Ending][State.variables.CorruptSidebar = undefined]]</span>\
<<print setup.displayRandomNyxGibberish(1000)>>


\<<run setup.triggerEnding("Ending_OneWithNyx")>>

::Quest_MQ002 <850,21600>
<<set $Quest_MQ002 = 
{
    id:"MQ002",
    description: "",
    villagePassage: '[[->Quest_MQ002_Entrance]]',
    onComplete: function()
    {
    }
}>>

::Quest_MQ002_Entrance_FirstTime <975,21600>






\<<run setup.choice("[[->Quest_MQ002_Entrance_FirstTime_2]]");>>
\<<run setup.choice("[[->Village]]");>>

::Quest_MQ002_Entrance_FirstTime_2 <1100,21600>






\<<run setup.choice("[[->Quest_MQ002_Entrance_FirstTime_3]]");>>

::Quest_MQ002_Entrance_FirstTime_3 <1225,21600>
\<<run $Quest_InProgress.push($Quest_MQ002)>>



<<print setup.displayPlaceholderImage("https://sombreve.github.io/Dawn-of-Corruption-Site/Images/Scenes/chasm_lowres.png","https://sombreve.github.io/Dawn-of-Corruption-Site/Images/Scenes/chasm.png", undefined, true)>>



\<<run setup.choice("[[->Village]]");>>

<<script>>
var i;

for(i = 0; i < State.variables.Explore_Destinations.length; i++)
{
    if(State.variables.Explore_Destinations[i] == "Quest_MQ002_Entrance_FirstTime")
    {
        State.variables.Explore_Destinations.splice(i, 1);
        break;
    }
}
<</script>>

::Quest_MQ002_Entrance <100,21725>



<<print setup.displayPlaceholderImage("https://sombreve.github.io/Dawn-of-Corruption-Site/Images/Scenes/chasm_lowres.png","https://sombreve.github.io/Dawn-of-Corruption-Site/Images/Scenes/chasm.png", undefined, true)>>

\<<run setup.choice("[[->Quest_MQ002_Entrance_2]]");>>
\<<run setup.choice("[[->Village]]");>>

::Quest_MQ002_Entrance_2 <225,21725>





\<<run setup.choice("[[->Quest_MQ002_Entrance_3]]");>>

::Quest_MQ002_Entrance_3 <350,21725>





\<<run setup.choice("[[->Quest_MQ002_Entrance_4]]");>>

::Quest_MQ002_Entrance_4 <475,21725>


<<print setup.displayPlaceholderImage("https://sombreve.github.io/Dawn-of-Corruption-Site/Images/Scenes/nyx_realm_lowres.png","https://sombreve.github.io/Dawn-of-Corruption-Site/Images/Scenes/nyx_realm.png", undefined, true)>>



\<<run setup.choice("[[->Quest_MQ002_Entrance_5]]");>>

::Quest_MQ002_Entrance_5 <600,21725>







\<<run setup.choice("[[->Quest_MQ002_Entrance_6]]");>>

::Quest_MQ002_Entrance_6 <725,21725>





\<<if !$CharacterSheet_MQ002_Guard.quest.beaten>>
\<<run setup.choice("[[->Quest_MQ002_Entrance_Guard]]");>>
\<<else>>
\<<run setup.choice("[[->Quest_MQ002_Entrance_NoGuard]]");>>
\<</if>>

::Quest_MQ002_Entrance_Guard <850,21725>

<<print setup.getLength(setup.getStatValue($CharacterSheet_MQ002_Guard, "height"))>> 



\<<run setup.choice("[[->Quest_MQ002_Entrance_Guard_2]]");>>

::Quest_MQ002_Entrance_Guard_2 <975,21725>
<<ImageMinoClothedGateBG>>



\<<run setup.choice("[[->Quest_MQ002_Entrance_Guard_3]]");>>

::Quest_MQ002_Entrance_Guard_3 <1100,21725>
<<ImageMinoClothedGateBG>>



""

\<<run setup.choice("[[->Quest_MQ002_Entrance_Guard_Prompt]]");>>
\<<run setup.choice("[[->Village]]");>>

::Quest_MQ002_Entrance_Guard_Prompt <1225,21725>
<<ImageMinoClothedGateBG>>

<<textbox "$WorldState.minoWords" "">>

\<<set $CharacterSheet_MQ002_Guard.quest.met = true>>

\<<run setup.choice("[[->Quest_MQ002_Entrance_Answer]]");>>

::Quest_MQ002_Entrance_Answer <100,21850>
<<include setup.getMinoPromptPassage($WorldState.minoWords)>>

::Quest_MQ002_Entrance_Answer_Invalid <225,21850>
<<ImageMinoClothedGateBG>>



\<<run setup.choice("[[->Quest_MQ002_Entrance_Answer_Invalid_2]]");>>

::Quest_MQ002_Entrance_Answer_Invalid_2 <350,21850>
<<ImageMinoClothedGateBG>>

 



\<<run setup.choice("[[->FightLogic][$Encounter_Target = $CharacterSheet_MQ002_Guard]]");>>

::Quest_MQ002_Entrance_Answer_Nyx <475,21850>
<<ImageMinoClothedGateBG>>

"  "

 

""

\<<run setup.choice("[[->FightLogic][$Encounter_Target = $CharacterSheet_MQ002_Guard]]");>>

::Quest_MQ002_Entrance_Answer_Cray <600,21850>
<<ImageMinoClothedGateBG>>

""



""

\<<run setup.choice("[[->FightLogic][$Encounter_Target = $CharacterSheet_MQ002_Guard]]");>>

::Quest_MQ002_Entrance_Answer_Kanathar <725,21850>
<<ImageMinoClothedGateBG>>

&""



\<<run setup.choice("[[->Quest_MQ002_Entrance_Answer_Kanathar_2]]");>>

::Quest_MQ002_Entrance_Answer_Kanathar_2 <850,21850>
<<ImageMinoClothedGateBG>>

""



"."

\<<run setup.choice("[[->FightLogic][$Encounter_Target = $CharacterSheet_MQ002_Guard]]");>>

::Quest_MQ002_Entrance_Answer_Tiadane <975,21850>




""

\<<run setup.choice("[[->Quest_MQ002_Entrance_Answer_Tiadane_2]]");>>

::Quest_MQ002_Entrance_Answer_Tiadane_2 <1100,21850>
<<ImageMinoClothedGateBG>>

""



\<<run setup.choice("[[->Quest_MQ002_Entrance_Answer_Tiadane_3]]");>>

::Quest_MQ002_Entrance_Answer_Tiadane_3 <1225,21850>
<<ImageMinoClothedGateBG>>



""

 


\<<run setup.choice("[[->Quest_MQ002_Entrance_Answer_Tiadane_4]]");>>

::Quest_MQ002_Entrance_Answer_Tiadane_4 <100,21975>
<<ImageMinoClothedGateBG>>




\<<run setup.choice("[[->Quest_MQ002_Entrance_Answer_Tiadane_5]]");>>

::Quest_MQ002_Entrance_Answer_Tiadane_5 <225,21975>
<<ImageMinoClothedGateBG>>


 


""



\<<set $CharacterSheet_MQ002_Guard.quest.beaten = true>>
\<<set $CharacterSheet_MQ002_Guard.info.name = "Tiadane">>
\<<run setup.completeAchievement("Achievement_SafePassage");>>
\<<run setup.tiadaneJoinsPlayer()>>
\<<run setup.choice("[[->Quest_MQ002_Entrance_PlayerWins_2]]");>>

::Quest_MQ002_Entrance_Answer_Apothus <350,21975>
<<ImageMinoClothedGateBG>>



" "



""

\<<run setup.choice("[[->FightLogic][$Encounter_Target = $CharacterSheet_MQ002_Guard]]");>>

::Quest_MQ002_Entrance_Answer_Sombreve <475,21975>
<<ImageMinoClothedGateBG>>



\<<run setup.choice("[[->FightLogic][$Encounter_Target = $CharacterSheet_MQ002_Guard]]");>>

::Quest_MQ002_Entrance_NoGuard <600,21975>


\<<run setup.choice("[[->Quest_MQ002_MoveInsideGate]]");>>
\<<run setup.choice("[[->Village]]");>>

<<run setup.MQ002_LeavingManor($CharacterSheet_Player)>>

::Imp_ServantPath_NyxHint <725,21975>
\<<set $CharacterSheet_Imp.quest.available_encounterPassages_nyxHint = false>>







\<<run setup.choice("[[->Imp_ServantPath_NyxHint_2]]");>>

::Imp_ServantPath_NyxHint_2 <850,21975>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Imp, "normal")>>



""



""

\<<run setup.choice("[[->Imp_ServantPath_NyxHint_2_Share]]");>>
\<<run setup.choice("[[->Imp_ServantPath_NyxHint_2_Hide]]");>>

::Imp_ServantPath_NyxHint_2_Share <975,21975>
\<<set $CharacterSheet_Imp.quest.knowsAboutNyx = true>>
\<<run setup.completeAchievement("Achievement_DamnatoryKnowledge");>>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Imp, "normal")>>


 

\<<run setup.choice("[[->Imp_ServantPath_NyxHint_2_Share_2]]");>>

::Imp_ServantPath_NyxHint_2_Share_2 <1100,21975>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Imp, "blushing")>>


", "

<<print setup.getFightStartPassages($CharacterSheet_Imp)>>

::Imp_ServantPath_NyxHint_2_Hide <1225,21975>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Imp, "normal")>>

"~"

<<print setup.getFightStartPassages($CharacterSheet_Imp)>>

::Quest_MQ002_ApothusRealm_ImpInvasion <100,22100>






\<<run setup.choice("[[->Quest_MQ002_ApothusRealm_ImpInvasion_2]]");>>

::Quest_MQ002_ApothusRealm_ImpInvasion_2 <225,22100>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Imp, "normal")>>



",."

; 

", "

\<<run setup.choice("[[->Quest_MQ002_ApothusRealm_ImpInvasion_3]]");>>

::Quest_MQ002_ApothusRealm_ImpInvasion_3 <350,22100>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Imp, "blushing")>>

 



""

;

""

\<<run setup.choice("[[->Quest_MQ002_ApothusRealm_ImpInvasion_4]]");>>

::Quest_MQ002_ApothusRealm_ImpInvasion_4 <475,22100>
<<print setup.displayEncounterImage("https://sombreve.github.io/Dawn-of-Corruption-Site/Images/Scenes/voidlesky_dawn_of_corruption_2_lowres.jpg","https://sombreve.github.io/Dawn-of-Corruption-Site/Images/Scenes/voidlesky_dawn_of_corruption_2.jpg", undefined, true)>>





 




\<<run setup.choice("[[->Quest_MQ002_ApothusRealm_ImpInvasion_5]]");>>

::Quest_MQ002_ApothusRealm_ImpInvasion_5 <600,22100>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Imp, "normal")>>



""

;

"?"





""

\<<run setup.choice("[[->Quest_MQ002_ApothusRealm_ImpInvasion_6]]");>>

::Quest_MQ002_ApothusRealm_ImpInvasion_6 <725,22100>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Imp, "cumming")>>




""



\<<run setup.choice("[[->Quest_MQ002_ApothusRealm_ImpInvasion_7]]");>>

::Quest_MQ002_ApothusRealm_ImpInvasion_7 <850,22100>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Imp, "normal")>>
\<<run setup.playRealizationPackage(["CharacterSheet_Imp"], 1)>>

"!"

100
;


"! !"



\<<run setup.choice("[[->Quest_MQ002_ApothusRealm_ImpInvasion_8]]");>>

::Quest_MQ002_ApothusRealm_ImpInvasion_8 <975,22100>


""



\<<run setup.choice("[[->Quest_MQ002_ApothusRealm_ImpInvasion_9]]");>>

::Quest_MQ002_ApothusRealm_ImpInvasion_9 <1100,22100>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Apothus, "angry")>>





"! !"

\<<run setup.choice("[[->Quest_MQ002_ApothusRealm_ImpInvasion_10]]");>>

::Quest_MQ002_ApothusRealm_ImpInvasion_10 <1225,22100>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Imp, "normal")>>
\<<run setup.playRealizationPackage(["CharacterSheet_Imp"], 2)>>

\<<run setup.applyCorruption($CharacterSheet_Imp, 200)>>
\<<set $CharacterSheet_Imp.fight.strength += 130>>
\<<set $CharacterSheet_Imp.fight.hp += 500>>
\<<set $CharacterSheet_Imp.fight.stamina += 400>>
\<<set $CharacterSheet_Imp.quest.ascended = true>>


""



200
130
500
400

<<print setup.getLength(setup.applyGrowth($CharacterSheet_Imp, "height", 1500))>>
\<<set $growth = setup.applyGrowth($CharacterSheet_Imp, "muscles", 100)>>
<<print setup.getMusclesDescriptor($CharacterSheet_Imp)>>(+$growth)
<<print setup.getLength(setup.applyGrowth($CharacterSheet_Imp, "cock", 500))>>
<<print setup.getLength(setup.applyGrowth($CharacterSheet_Imp, "balls", 200))>>

\<<run setup.choice("[[->Quest_MQ002_ApothusRealm_ImpInvasion_11]]");>>

::Quest_MQ002_ApothusRealm_ImpInvasion_11 <100,22225>
<<print setup.displayEncounterImage("https://sombreve.github.io/Dawn-of-Corruption-Site/Images/Scenes/voidlesky_dawn_of_corruption_9_2_lowres.jpg","https://sombreve.github.io/Dawn-of-Corruption-Site/Images/Scenes/voidlesky_dawn_of_corruption_9_2.jpg", undefined, true)>>
\<<run setup.playRealizationPackage(["CharacterSheet_Imp"], 2)>>

 
 



"<<PlayerName>>"

\<<run setup.choice("[[->Quest_MQ002_ApothusRealm_ImpInvasion_12]]");>>

::Quest_MQ002_ApothusRealm_ImpInvasion_12 <225,22225>
<<print setup.displayEncounterImage("https://sombreve.github.io/Dawn-of-Corruption-Site/Images/Scenes/voidlesky_dawn_of_corruption_9_1_lowres.jpg","https://sombreve.github.io/Dawn-of-Corruption-Site/Images/Scenes/voidlesky_dawn_of_corruption_9_1.jpg", undefined, true)>>
\<<run setup.playRealizationPackage(["CharacterSheet_Imp"], 2)>>

 





\<<run setup.choice("[[->Quest_MQ002_ApothusRealm_ImpInvasion_13]]");>>

::Quest_MQ002_ApothusRealm_ImpInvasion_13 <350,22225>
<<print setup.setAndDisplayBodyVisual($CharacterSheet_Apothus, "licky")>>
\<<run setup.playRealizationPackage(["CharacterSheet_Imp"], 3)>>



", "





\<<run setup.choice("[[->Quest_MQ002_ApothusRealm_ImpInvasion_14]]");>>

::Quest_MQ002_ApothusRealm_ImpInvasion_14 <475,22225>
<<print setup.displayEncounterImage("https://sombreve.github.io/Dawn-of-Corruption-Site/Images/Scenes/voidlesky_dawn_of_corruption_9_2_lowres.jpg","https://sombreve.github.io/Dawn-of-Corruption-Site/Images/Scenes/voidlesky_dawn_of_corruption_9_2.jpg", undefined, true)>>
\<<run setup.playRealizationPackage(["CharacterSheet_Imp"], 4)>>

"!"


<<print setup.getLength(setup.getStatValue($CharacterSheet_Imp, "height"))>> ;

"...  !"


 


", !"

\<<run setup.applyCorruption($CharacterSheet_Imp, 400)>>
400

<<print setup.getLength(setup.applyGrowth($CharacterSheet_Imp, "height", 6000))>>
\<<set $growth = setup.applyGrowth($CharacterSheet_Imp, "muscles", 200)>>
<<print setup.getMusclesDescriptor($CharacterSheet_Imp)>>(+$growth)
<<print setup.getLength(setup.applyGrowth($CharacterSheet_Imp, "cock", 2000))>>
<<print setup.getLength(setup.applyGrowth($CharacterSheet_Imp, "balls", 800))>>

\<<run setup.choice("[[->Quest_MQ002_ApothusRealm_ImpInvasion_15]]");>>

::Quest_MQ002_ApothusRealm_ImpInvasion_15 <600,22225>
<<print setup.displayEncounterImage("https://sombreve.github.io/Dawn-of-Corruption-Site/Images/Scenes/voidlesky_dawn_of_corruption_9_1_lowres.jpg","https://sombreve.github.io/Dawn-of-Corruption-Site/Images/Scenes/voidlesky_dawn_of_corruption_9_1.jpg", undefined, true)>>
\<<run setup.playRealizationPackage(["CharacterSheet_Imp"], 5)>>





""

\<<run setup.choice("[[->FightLogic][$Encounter_Target = $CharacterSheet_Imp]]");>>

::Quest_MQ002_ApothusRealm_ImpInvasion_Loss <725,22225>
<<print setup.displayEncounterImage("https://sombreve.github.io/Dawn-of-Corruption-Site/Images/Scenes/voidlesky_dawn_of_corruption_9_1_lowres.jpg","https://sombreve.github.io/Dawn-of-Corruption-Site/Images/Scenes/voidlesky_dawn_of_corruption_9_1.jpg", undefined, true)>>





 
 






""

\<<run setup.choice("[[->Quest_MQ002_ApothusRealm_ImpInvasion_Loss_2]]");>>

::Quest_MQ002_ApothusRealm_ImpInvasion_Loss_2 <850,22225>
<<print setup.displayEncounterImage("https://sombreve.github.io/Dawn-of-Corruption-Site/Images/Scenes/voidlesky_dawn_of_corruption_9_1_lowres.jpg","https://sombreve.github.io/Dawn-of-Corruption-Site/Images/Scenes/voidlesky_dawn_of_corruption_9_1.jpg", undefined, true)>>


 
 



\<<run setup.choice("[[->Quest_MQ002_ApothusRealm_ImpInvasion_Loss_3]]");>>

::Quest_MQ002_ApothusRealm_ImpInvasion_Loss_3 <975,22225>
<<print setup.displayEncounterImage("https://sombreve.github.io/Dawn-of-Corruption-Site/Images/Scenes/voidlesky_dawn_of_corruption_9_1_lowres.jpg","https://sombreve.github.io/Dawn-of-Corruption-Site/Images/Scenes/voidlesky_dawn_of_corruption_9_1.jpg", undefined, true)>>
\<<run setup.playRealizationPackage(["CharacterSheet_Imp"], 1)>>




 

""



\<<run setup.choice("[[->Quest_MQ002_ApothusRealm_ImpInvasion_Loss_4]]");>>

::Quest_MQ002_ApothusRealm_ImpInvasion_Loss_4 <1100,22225>
<<print setup.displayEncounterImage("https://sombreve.github.io/Dawn-of-Corruption-Site/Images/Scenes/voidlesky_dawn_of_corruption_9_2_lowres.jpg","https://sombreve.github.io/Dawn-of-Corruption-Site/Images/Scenes/voidlesky_dawn_of_corruption_9_2.jpg", undefined, true)>>
\<<run setup.playRealizationPackage(["CharacterSheet_Imp"], 1)>>

 
 



 

\<<run setup.choice("[[->Quest_MQ002_ApothusRealm_ImpInvasion_Loss_5]]");>>

::Quest_MQ002_ApothusRealm_ImpInvasion_Loss_5 <1225,22225>
<<print setup.displayEncounterImage("https://sombreve.github.io/Dawn-of-Corruption-Site/Images/Scenes/voidlesky_dawn_of_corruption_9_2_lowres.jpg","https://sombreve.github.io/Dawn-of-Corruption-Site/Images/Scenes/voidlesky_dawn_of_corruption_9_2.jpg", undefined, true)>>
\<<run setup.playRealizationPackage(["CharacterSheet_Imp"], 2)>>


 
 

; 



\<<run setup.choice("[[->Quest_MQ002_ApothusRealm_ImpInvasion_Loss_6]]");>>

::Quest_MQ002_ApothusRealm_ImpInvasion_Loss_6 <100,22350>
<<print setup.displayEncounterImage("https://sombreve.github.io/Dawn-of-Corruption-Site/Images/Scenes/voidlesky_dawn_of_corruption_9_1_lowres.jpg","https://sombreve.github.io/Dawn-of-Corruption-Site/Images/Scenes/voidlesky_dawn_of_corruption_9_1.jpg", undefined, true)>>
\<<run setup.playRealizationPackage(["CharacterSheet_Imp"], 2)>>


 
 



 
 
 



; 

\<<run setup.choice("[[->Quest_MQ002_ApothusRealm_ImpInvasion_Loss_7]]");>>

::Quest_MQ002_ApothusRealm_ImpInvasion_Loss_7 <225,22350>
<<print setup.displayEncounterImage("https://sombreve.github.io/Dawn-of-Corruption-Site/Images/Scenes/voidlesky_dawn_of_corruption_9_1_lowres.jpg","https://sombreve.github.io/Dawn-of-Corruption-Site/Images/Scenes/voidlesky_dawn_of_corruption_9_1.jpg", undefined, true)>>
\<<run setup.playRealizationPackage(["CharacterSheet_Imp"], 2)>>

 
 



\<<run setup.choice("[[->Quest_MQ002_ApothusRealm_ImpInvasion_Loss_8]]");>>

::Quest_MQ002_ApothusRealm_ImpInvasion_Loss_8 <350,22350>
\<<run setup.playRealizationPackage(["CharacterSheet_Imp"], 2)>>

 

 



\<<run setup.choice("[[->Quest_MQ002_ApothusRealm_ImpInvasion_Loss_9]]");>>

::Quest_MQ002_ApothusRealm_ImpInvasion_Loss_9 <475,22350>
\<<run setup.playRealizationPackage(["CharacterSheet_Imp"], 2)>>

 
 
 
 

 




\<<run setup.choice("[[->Quest_MQ002_ApothusRealm_ImpInvasion_Loss_10]]");>>

::Quest_MQ002_ApothusRealm_ImpInvasion_Loss_10 <600,22350>
<<print setup.displayEncounterImage("https://sombreve.github.io/Dawn-of-Corruption-Site/Images/Scenes/voidlesky_dawn_of_corruption_9_1_lowres.jpg","https://sombreve.github.io/Dawn-of-Corruption-Site/Images/Scenes/voidlesky_dawn_of_corruption_9_1.jpg", undefined, true)>>
\<<run setup.playRealizationPackage(["CharacterSheet_Imp"], 2)>>

 


 


\<<run setup.choice("[[->Quest_MQ002_ApothusRealm_ImpInvasion_Loss_11]]");>>

::Quest_MQ002_ApothusRealm_ImpInvasion_Loss_11 <725,22350>
<<print setup.displayEncounterImage("https://sombreve.github.io/Dawn-of-Corruption-Site/Images/Scenes/voidlesky_dawn_of_corruption_9_1_lowres.jpg","https://sombreve.github.io/Dawn-of-Corruption-Site/Images/Scenes/voidlesky_dawn_of_corruption_9_1.jpg", undefined, true)>>
\<<run setup.playRealizationPackage(["CharacterSheet_Imp"], 2)>>

 




 

""

 
 

\<<run setup.choice("[[->Quest_MQ002_ApothusRealm_ImpInvasion_Loss_12]]");>>

::Quest_MQ002_ApothusRealm_ImpInvasion_Loss_12 <850,22350>
<<print setup.displayEncounterImage("https://sombreve.github.io/Dawn-of-Corruption-Site/Images/Scenes/voidlesky_dawn_of_corruption_9_2_lowres.jpg","https://sombreve.github.io/Dawn-of-Corruption-Site/Images/Scenes/voidlesky_dawn_of_corruption_9_2.jpg", undefined, true)>>
\<<run setup.playRealizationPackage(["CharacterSheet_Imp"], 3)>>

""



 

 
 





\<<run setup.choice("[[->Quest_MQ002_ApothusRealm_ImpInvasion_Loss_13]]");>>

::Quest_MQ002_ApothusRealm_ImpInvasion_Loss_13 <975,22350>
<<print setup.displayEncounterImage("https://sombreve.github.io/Dawn-of-Corruption-Site/Images/Scenes/voidlesky_dawn_of_corruption_9_2_lowres.jpg","https://sombreve.github.io/Dawn-of-Corruption-Site/Images/Scenes/voidlesky_dawn_of_corruption_9_2.jpg", undefined, true)>>
\<<run setup.playRealizationPackage(["CharacterSheet_Imp"], 3)>>


 


. 



\<<run setup.choice("[[->Quest_MQ002_ApothusRealm_ImpInvasion_Loss_14]]");>>

::Quest_MQ002_ApothusRealm_ImpInvasion_Loss_14 <1100,22350>
<<print setup.displayEncounterImage("https://sombreve.github.io/Dawn-of-Corruption-Site/Images/Scenes/voidlesky_dawn_of_corruption_9_1_lowres.jpg","https://sombreve.github.io/Dawn-of-Corruption-Site/Images/Scenes/voidlesky_dawn_of_corruption_9_1.jpg", undefined, true)>>
\<<run setup.playRealizationPackage(["CharacterSheet_Imp"], 3)>>

 
 

 

\<<run setup.choice("[[->Quest_MQ002_ApothusRealm_ImpInvasion_Loss_15]]");>>

::Quest_MQ002_ApothusRealm_ImpInvasion_Loss_15 <1225,22350>
<<print setup.displayEncounterImage("https://sombreve.github.io/Dawn-of-Corruption-Site/Images/Scenes/voidlesky_dawn_of_corruption_9_2_lowres.jpg","https://sombreve.github.io/Dawn-of-Corruption-Site/Images/Scenes/voidlesky_dawn_of_corruption_9_2.jpg", undefined, true)>>
\<<run setup.playRealizationPackage(["CharacterSheet_Imp"], 3)>>

 

 
 

 



<h2></h2>

\<<run setup.choice("[[->Quest_MQ002_ApothusRealm_ImpInvasion_Loss_16]]");>>

::Quest_MQ002_ApothusRealm_ImpInvasion_Loss_16 <100,22475>
<<print setup.displayEncounterImage("https://sombreve.github.io/Dawn-of-Corruption-Site/Images/Scenes/voidlesky_dawn_of_corruption_9_1_lowres.jpg","https://sombreve.github.io/Dawn-of-Corruption-Site/Images/Scenes/voidlesky_dawn_of_corruption_9_1.jpg", undefined, true)>>
\<<run setup.playRealizationPackage(["CharacterSheet_Imp"], 4)>>



 
 

 



"<<PlayerName>>"""

\<<run setup.choice("[[->Quest_MQ002_ApothusRealm_ImpInvasion_Loss_17]]");>>

::Quest_MQ002_ApothusRealm_ImpInvasion_Loss_17 <225,22475>
\<<run setup.playRealizationPackage(["CharacterSheet_Imp"], 4)>>

\<<run setup.completeAchievement("Achievement_MemoriesOfKanathar");>>
<<print setup.displayEncounterImage("https://sombreve.github.io/Dawn-of-Corruption-Site/Images/Scenes/voidlesky_dawn_of_corruption_9_3_lowres.jpg","https://sombreve.github.io/Dawn-of-Corruption-Site/Images/Scenes/voidlesky_dawn_of_corruption_9_3.jpg", undefined, true)>>

<h2>!!!</h2>

\<<run setup.choice("[[->Ending][setup.stopRealizationPackages(['CharacterSheet_Imp']);]]");>>

::Quest_MQ002_ApothusRealm_ImpInvasion_Win <350,22475>
<<print setup.displayEncounterImage("https://sombreve.github.io/Dawn-of-Corruption-Site/Images/Scenes/voidlesky_dawn_of_corruption_9_1_lowres.jpg","https://sombreve.github.io/Dawn-of-Corruption-Site/Images/Scenes/voidlesky_dawn_of_corruption_9_1.jpg", undefined, true)>>


 

 


\<<run setup.choice("[[->Quest_MQ002_ApothusRealm_ImpInvasion_Win_2]]");>>

::Quest_MQ002_ApothusRealm_ImpInvasion_Win_2 <475,22475>
<<print setup.displayEncounterImage("https://sombreve.github.io/Dawn-of-Corruption-Site/Images/Scenes/voidlesky_dawn_of_corruption_9_1_lowres.jpg","https://sombreve.github.io/Dawn-of-Corruption-Site/Images/Scenes/voidlesky_dawn_of_corruption_9_1.jpg", undefined, true)>>


 








"<<PlayerName>>"

\<<run setup.choice("[[->Quest_MQ002_ApothusRealm_ImpInvasion_Win_3]]");>>

::Quest_MQ002_ApothusRealm_ImpInvasion_Win_3 <600,22475>
<<print setup.displayEncounterImage("https://sombreve.github.io/Dawn-of-Corruption-Site/Images/Scenes/voidlesky_dawn_of_corruption_9_1_lowres.jpg","https://sombreve.github.io/Dawn-of-Corruption-Site/Images/Scenes/voidlesky_dawn_of_corruption_9_1.jpg", undefined, true)>>
<<Hands>>



\<<run setup.choice("[[->Quest_MQ002_ApothusRealm_ImpInvasion_Win_3_StepBack]]");>>
\<<run setup.choice("[[->Quest_MQ002_ApothusRealm_ImpInvasion_Win_3_ReachOut]]");>>

::Quest_MQ002_ApothusRealm_ImpInvasion_Win_3_StepBack <725,22475>
<<print setup.displayEncounterImage("https://sombreve.github.io/Dawn-of-Corruption-Site/Images/Scenes/voidlesky_dawn_of_corruption_9_1_lowres.jpg","https://sombreve.github.io/Dawn-of-Corruption-Site/Images/Scenes/voidlesky_dawn_of_corruption_9_1.jpg", undefined, true)>>





 

\<<run setup.choice("[[->Quest_MQ002_ApothusRealm_ImpInvasion_Win_3_StepBack_2]]");>>

::Quest_MQ002_ApothusRealm_ImpInvasion_Win_3_StepBack_2 <850,22475>
<<print setup.displayEncounterImage("https://sombreve.github.io/Dawn-of-Corruption-Site/Images/Scenes/voidlesky_dawn_of_corruption_9_2_lowres.jpg","https://sombreve.github.io/Dawn-of-Corruption-Site/Images/Scenes/voidlesky_dawn_of_corruption_9_2.jpg", undefined, true)>>

 


\<<run setup.choice("[[->Quest_MQ002_ApothusRealm_ImpInvasion_Win_4]]");>>

::Quest_MQ002_ApothusRealm_ImpInvasion_Win_3_ReachOut <975,22475>
<<print setup.displayEncounterImage("https://sombreve.github.io/Dawn-of-Corruption-Site/Images/Scenes/voidlesky_dawn_of_corruption_9_1_lowres.jpg","https://sombreve.github.io/Dawn-of-Corruption-Site/Images/Scenes/voidlesky_dawn_of_corruption_9_1.jpg", undefined, true)>>

 


 

\<<run setup.choice("[[->Quest_MQ002_ApothusRealm_ImpInvasion_Win_3_ReachOut_2]]");>>

::Quest_MQ002_ApothusRealm_ImpInvasion_Win_3_ReachOut_2 <1100,22475>
<<print setup.displayEncounterImage("https://sombreve.github.io/Dawn-of-Corruption-Site/Images/Scenes/voidlesky_dawn_of_corruption_9_2_lowres.jpg","https://sombreve.github.io/Dawn-of-Corruption-Site/Images/Scenes/voidlesky_dawn_of_corruption_9_2.jpg", undefined, true)>>

 
 
; 



\<<run setup.choice("[[->Quest_MQ002_ApothusRealm_ImpInvasion_Win_4]]");>>

::Quest_MQ002_ApothusRealm_ImpInvasion_Win_4 <1225,22475>






\<<run setup.choice("[[->Quest_MQ002_ApothusRealm_ImpInvasion_Win_5]]");>>

::Quest_MQ002_ApothusRealm_ImpInvasion_Win_5 <100,22600>
 



\<<run setup.choice("[[->Quest_MQ002_ApothusRealm_ImpInvasion_Win_6]]");>>

::Quest_MQ002_ApothusRealm_ImpInvasion_Win_6 <225,22600>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 1)>>
 







\<<run setup.choice("[[->Quest_MQ002_ApothusRealm_ImpInvasion_Win_7]]");>>

::Quest_MQ002_ApothusRealm_ImpInvasion_Win_7 <350,22600>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 2)>>

;  



. 



\<<run setup.choice("[[->Quest_MQ002_ApothusRealm_ImpInvasion_Win_8]]");>>

::Quest_MQ002_ApothusRealm_ImpInvasion_Win_8 <475,22600>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 1)>>

 

 

; 



\<<run setup.choice("[[->Quest_MQ002_ApothusRealm_ImpInvasion_Win_9]]");>>

::Quest_MQ002_ApothusRealm_ImpInvasion_Win_9 <600,22600>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 3)>>

 

 



\<<run setup.choice("[[->Quest_MQ002_ApothusRealm_ImpInvasion_Win_10]]");>>

::Quest_MQ002_ApothusRealm_ImpInvasion_Win_10 <725,22600>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 3)>>
 




\<<run setup.choice("[[->Quest_MQ002_ApothusRealm_ImpInvasion_Win_11]]");>>

::Quest_MQ002_ApothusRealm_ImpInvasion_Win_11 <850,22600>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 3)>>
; 
 



\<<run setup.choice("[[->Quest_MQ002_ApothusRealm_ImpInvasion_Win_12]]");>>

::Quest_MQ002_ApothusRealm_ImpInvasion_Win_12 <975,22600>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 3)>>
 
 





\<<run setup.choice("[[->Quest_MQ002_ApothusRealm_ImpInvasion_Win_13]]");>>

::Quest_MQ002_ApothusRealm_ImpInvasion_Win_13 <1100,22600>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 4)>>
; 






\<<run setup.completeAchievement("Achievement_MemoriesOfDemonicAscent");>>
\<<run setup.choice("[[->Ending]]");>>

::Quest_MQ002_Manor_MainHall [NyxCastle] <0,200>




<<print "" + ($WorldState.cultManor.westWing_ClearedRooms.length > 3 ? "" : $WorldState.cultManor.westWing_ClearedRooms.length) + "">>


\<<if $CharacterSheet_MQ002_Guard.quest.lustIncrease == true>>

\<</if>>

\<<set $MQ002_Manor_Destinations = setup.getManorDestinations()>>
\<<run setup.choice("[[->MQ002_Manor_WestWing_Entrance]]");>>
\<<run setup.choice("[[->Quest_MQ002_Manor_MainHall_ExamineMonolith]]");>>
\<<run setup.choice("[[->Quest_MQ002_Manor_MainHall_TalkMinotaur]]");>>

\<<run setup.choice("[[->Quest_MQ002_Entrance_NoGuard]]");>>

::Quest_MQ002_Manor_MainHall_ExamineMonolith <100,22725>
\<<if $WorldState.cultManor.monolithBroken>>




\<<else>>






\<span class = "monolith">
\<<if setup.MQ002_Manor_IsCorruptedInManor($CharacterSheet_Player)>>
    \<<if $WorldState.cultManor.mainHall.isBroken>>
//""//
    \<</if>>
//""//
\<<else>>
    \<<if $WorldState.cultManor.mainHall.isBroken>>
//""//
    \<<else>>
//""//
    \<</if>>
\<</if>>
\</span>

\<<if $WorldState.cultManor.westWing_ClearedRooms.length >= 3>>



\<<run setup.choice("[[->Quest_MQ002_ApothusRealm_Entrance]]");>>

\<<else>>

<<print " " + $WorldState.cultManor.westWing_ClearedRooms.length + " ">>

\<</if>>
\<</if>>
\<<run setup.choice("[[->Quest_MQ002_Manor_MainHall]]");>>

::Feed_The_Chosen_Final_Minotaur <225,22725>







\<<run setup.choice("[[->Feed_The_Chosen_Final_Minotaur_2]]");>>

::Feed_The_Chosen_Final_Minotaur_2 <350,22725>
<<ImageMinoNakedAura>>









\<<run setup.choice("[[->Feed_The_Chosen_Final_Minotaur_3]]");>>

::Feed_The_Chosen_Final_Minotaur_3 <475,22725>

<span class="glitch nyx" data-text=" "></span>.





\<<run setup.choice("[[->Feed_The_Chosen_Final_Minotaur_4]]");>>

::Feed_The_Chosen_Final_Minotaur_4 <600,22725>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 1)>>
<span class="glitch nyx" data-text="">""</span>

 





\<<run setup.choice("[[->Feed_The_Chosen_Final_Minotaur_5]]");>>

::Feed_The_Chosen_Final_Minotaur_5 <725,22725>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 2)>>
 




\<<run setup.choice("[[->Feed_The_Chosen_Final_Minotaur_6]]");>>

::Feed_The_Chosen_Final_Minotaur_6 <850,22725>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 3)>>
. 
 

 

\<<run setup.choice("[[->Feed_The_Chosen_Final_Minotaur_7]]");>>

::Feed_The_Chosen_Final_Minotaur_7 <975,22725>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 4)>>



 


 



\<<run setup.choice("[[->Feed_The_Chosen_Final_Minotaur_8]]");>>

::Feed_The_Chosen_Final_Minotaur_8 <1100,22725>
\<<run setup.stopRealizationPackages(["CharacterSheet_Player"])>>
 
 

 

\<<run setup.choice("[[->Feed_The_Chosen_Final_Minotaur_9]]");>>

::Feed_The_Chosen_Final_Minotaur_9 <1225,22725>
 


 
 

\<<run setup.choice("[[->Feed_The_Chosen_Final_Minotaur_10]]");>>

::Feed_The_Chosen_Final_Minotaur_10 <100,22850>
 
 



\<<run setup.choice("[[-->Feed_The_Chosen_Final_Minotaur_11]]");>>

::Feed_The_Chosen_Final_Minotaur_11 <225,22850>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 2)>>
 



;



\<<run setup.choice("[[->Feed_The_Chosen_Final_Minotaur_12]]");>>

::Feed_The_Chosen_Final_Minotaur_12 <350,22850>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 3)>>





 

 

\<<run setup.choice("[[->Feed_The_Chosen_Final_Minotaur_13]]");>>

::Feed_The_Chosen_Final_Minotaur_13 <475,22850>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 4)>>
\<<run setup.completeAchievement("Achievement_MemoriesOfTheMinotaur");>>




 
 

\<<run setup.choice("[[->Feed_The_Chosen_Final_Minotaur_14]]");>>

::Feed_The_Chosen_Final_Minotaur_14 <600,22850>
\<<run setup.stopRealizationPackages(["CharacterSheet_Player"])>>



\<<run setup.choice("[[, ->Ending]]");>>

::Quest_MQ002_Manor_MainHall_TalkMinotaur <725,22850>
\<<run setup.updateMinoLust()>>
<<include setup.getMinoTalkMenuPassage()>>

::Quest_MQ002_Manor_MainHall_TalkMinotaur_Lust1 <850,22850>
<<ImageMinoClothedNoBG>>





[[->Quest_MQ002_Manor_MainHall_TalkMinotaur_AskMonsters_Lust1]]
[[->Quest_MQ002_Manor_MainHall_TalkMinotaur_AskCastle_Lust1]]
[[->Quest_MQ002_Manor_MainHall_TalkMinotaur_AskWhyHere_Lust1]]
[[->Quest_MQ002_Manor_MainHall_TalkMinotaur_AskFeeling_Lust1]]

\<<run setup.choice("[[->Quest_MQ002_Manor_MainHall]]");>>

::Quest_MQ002_Manor_MainHall_TalkMinotaur_AskWhyHere_Lust1 <975,22850>
<<ImageMinoClothedNoBG>>

""

\<<run setup.choice("[[->Quest_MQ002_Manor_MainHall_TalkMinotaur]]");>>

::Quest_MQ002_Manor_MainHall_TalkMinotaur_AskMonsters_Lust1 <1100,22850>
<<ImageMinoClothedNoBG>>

""



""

\<<run setup.choice("[[->Quest_MQ002_Manor_MainHall_TalkMinotaur]]");>>

::Quest_MQ002_Manor_MainHall_TalkMinotaur_AskCastle_Lust1 <1225,22850>
<<ImageMinoClothedNoBG>>

""

.

""

\<<run setup.choice("[[->Quest_MQ002_Manor_MainHall_TalkMinotaur]]");>>

::Quest_MQ002_Manor_MainHall_TalkMinotaur_AskFeeling_Lust1 <100,22975>
<<ImageMinoClothedNoBG>>

""

\<<run setup.choice("[[->Quest_MQ002_Manor_MainHall_TalkMinotaur]]");>>

::Quest_MQ002_Manor_MainHall_TalkMinotaur_Lust2 <225,22975>
<<ImageMinoNakedNoBG>>



, 

[[->Quest_MQ002_Manor_MainHall_TalkMinotaur_AskFeeling_Lust2]]
[[->Quest_MQ002_Manor_MainHall_TalkMinotaur_AskMonsters_Lust2]]

\<<run setup.choice("[[->Quest_MQ002_Manor_MainHall]]");>>

::Quest_MQ002_Manor_MainHall_TalkMinotaur_AskMonsters_Lust2 <350,22975>
<<ImageMinoNakedNoBG>>

""



\<<run setup.choice("[[->Quest_MQ002_Manor_MainHall_TalkMinotaur]]");>>

::Quest_MQ002_Manor_MainHall_TalkMinotaur_AskFeeling_Lust2 <475,22975>
<<ImageMinoNakedNoBG>>

""



""

\<<run setup.choice("[[->Quest_MQ002_Manor_MainHall_TalkMinotaur]]");>>

::Quest_MQ002_Manor_MainHall_TalkMinotaur_Lust3 <600,22975>
<<ImageMinoNakedAura>>





[[->Quest_MQ002_Manor_MainHall_TalkMinotaur_AskFeeling_Lust3]]
[[->Quest_MQ002_Manor_MainHall_TalkMinotaur_AskMonsters_Lust3]]

\<<run setup.choice("[[->Quest_MQ002_Manor_MainHall]]");>>

::Quest_MQ002_Manor_MainHall_TalkMinotaur_AskMonsters_Lust3 <725,22975>
<<ImageMinoNakedAura>>





" <span class="glitch nyx" data-text="">~</span>"

\<<run setup.choice("[[->Quest_MQ002_Manor_MainHall_TalkMinotaur_Sex_1]]");>>
\<<run setup.choice("[[->Quest_MQ002_Manor_MainHall_TalkMinotaur]]");>>

::Quest_MQ002_Manor_MainHall_TalkMinotaur_AskFeeling_Lust3 <850,22975>
<<ImageMinoNakedAura>>

""



""

\<<run setup.choice("[[->Quest_MQ002_Manor_MainHall_TalkMinotaur_Sex_1]]");>>
\<<run setup.choice("[[->Quest_MQ002_Manor_MainHall_TalkMinotaur]]");>>

::Quest_MQ002_Manor_MainHall_TalkMinotaur_Sex_1 <975,22975>
<<ImageMinoNakedAura>>




""

\<<run setup.choice("[[->Quest_MQ002_Manor_MainHall_TalkMinotaur_Sex_2]]");>>

::Quest_MQ002_Manor_MainHall_TalkMinotaur_Sex_2 <1100,22975>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 1)>>
<<ImageMinoNakedAura>>

 


""


\<<run setup.choice("[[->Quest_MQ002_Manor_MainHall_TalkMinotaur_Sex_3]]");>>

::Quest_MQ002_Manor_MainHall_TalkMinotaur_Sex_3 <1225,22975>
<<ImageMinoNakedAura>>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 2)>>


""



\<<run setup.choice("[[->Quest_MQ002_Manor_MainHall_TalkMinotaur_Sex_4]]");>>

::Quest_MQ002_Manor_MainHall_TalkMinotaur_Sex_4 <100,23100>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 3)>>
 
 

 


""

\<<run setup.choice("[[->Quest_MQ002_Manor_MainHall_TalkMinotaur_Sex_5]]");>>

::Quest_MQ002_Manor_MainHall_TalkMinotaur_Sex_5 <225,23100>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 4)>>


""



\<<run setup.choice("[[->Quest_MQ002_Manor_MainHall_TalkMinotaur_Sex_6]]");>>

::Quest_MQ002_Manor_MainHall_TalkMinotaur_Sex_6 <350,23100>
\<<run setup.stopRealizationPackages(["CharacterSheet_Player"])>>


""




\<<run setup.choice("[[->Quest_MQ002_Manor_MainHall_TalkMinotaur_Sex_7]]");>>

::Quest_MQ002_Manor_MainHall_TalkMinotaur_Sex_7 <475,23100>
<<ImageMinoNakedAura>>



\<<if $CharacterSheet_MQ002_Guard.quest.nyxPromise == false>>
\<<set $CharacterSheet_MQ002_Guard.quest.nyxPromise = true>>
\<<run setup.choice("[[->Quest_MQ002_Manor_MainHall_TalkMinotaur_Sex_Promise]]");>>
\<<else>>
\<<run setup.choice("[[->Quest_MQ002_Manor_MainHall_TalkMinotaur]]");>>
\<</if>>

::Quest_MQ002_Manor_MainHall_TalkMinotaur_Sex_Promise <600,23100>


<span class="glitch nyx" data-text=""></span>

\<<run setup.applyCorruption($CharacterSheet_Player, 18)>>
\<<run $CharacterSheet_Player.applyAbilityRuntimeData(setup.Ability_PromiseOfServitude);>>
: 18
: ""

\<<run setup.choice("[[->Quest_MQ002_Manor_MainHall_TalkMinotaur]]");>>

::Quest_MQ002_Manor_MainHall_TalkMinotaur_PromisedMenu <725,23100>
<<ImageMinoNakedAura>>

""



"!"

\<<run setup.choice("[[->Quest_MQ002_Manor_MainHall_TalkMinotaur_Sex_1]]");>>

\<<run setup.choice("[[->Quest_MQ002_Manor_MainHall]]");>>

::Quest_MQ002_MoveInsideGate <850,23100>
\<<if setup.MQ002_Manor_IsMassiveInManor($CharacterSheet_Player)>>

\<<else>>
 <<if setup.MQ002_Manor_IsCorruptedInManor($CharacterSheet_Player)>><<else>><</if>>  


\<</if>>

\<<if setup.MQ002_Manor_IsCorruptedInManor($CharacterSheet_Player)>>
 

\<<else>>

\<</if>>

\<<run setup.choice("[[->Quest_MQ002_MoveInsideGate_2]]");>>
\<<run setup.choice("[[->Quest_MQ002_Entrance_NoGuard]]");>>

::Quest_MQ002_MoveInsideGate_2 <975,23100>






\<<run setup.choice("[[->Quest_MQ002_MoveInsideGate_3]]");>>

::Quest_MQ002_MoveInsideGate_3 <1100,23100>


\<<if setup.MQ002_Manor_IsCorruptedInManor($CharacterSheet_Player)>>


\<<else>>
 


\<</if>>

 




""
\<<run setup.MQ002_GiveNyxLightAbility()>>
\<<set $CharacterSheet_Player.quest.knowsAboutNyx = true>>

\<<if $MQ002_LookedUpwards == undefined>>
\<<run setup.choice("[[->Quest_MQ002_MoveInsideGate_LookUpwards]]");>>
\<</if>>
\<<if $MQ002_LookedAround == undefined>>
\<<run setup.choice("[[->Quest_MQ002_MoveInsideGate_LookAround]]");>>
\<<else>>
\<<run setup.choice("[[->Quest_MQ002_MoveInsideGate_3_GoToManor]]");>>
\<</if>>

::Quest_MQ002_MoveInsideGate_LookUpwards <1225,23100>




 



7
\<<run setup.applyCorruption($CharacterSheet_Player, 7)>>
\<<set $MQ002_LookedUpwards = true>>
\<<run setup.choice("[[->Quest_MQ002_MoveInsideGate_3]]");>>

::Quest_MQ002_MoveInsideGate_LookAround <100,23225>


<<print setup.displayPlaceholderImage("https://sombreve.github.io/Dawn-of-Corruption-Site/Images/Scenes/nyx_castle_lowres.png","https://sombreve.github.io/Dawn-of-Corruption-Site/Images/Scenes/nyx_castle.png", undefined, true)>>

\<<set $MQ002_LookedAround = true>>
\<<run setup.choice("[[->Quest_MQ002_MoveInsideGate_3]]");>>

::Quest_MQ002_MoveInsideGate_3_GoToManor <225,23225>
<<print setup.displayPlaceholderImage("https://sombreve.github.io/Dawn-of-Corruption-Site/Images/Scenes/nyx_castle_lowres.png","https://sombreve.github.io/Dawn-of-Corruption-Site/Images/Scenes/nyx_castle.png", undefined, true)>>




 

\<<run setup.choice("[[->Quest_MQ002_Manor_Entrance_2]]");>>

::Quest_MQ002_Manor_Entrance_2 <350,23225>



\<<if setup.MQ002_Manor_HasBrokenPartOfManor()>>


\<</if>>
\<<if $WorldState.cultManor.mainHall.isBroken>>

\<<else>>

\<</if>>
\<<if $CharacterSheet_MQ002_Guard.quest.movedToCastle == false>>
\<<set $CharacterSheet_MQ002_Guard.quest.movedToCastle = true>>


\<</if>>

\<<if setup.MQ002_Manor_IsMassiveInManor($CharacterSheet_Player)>>
<<include Quest_MQ002_Manor_Entrance_Massive>>
\<<else>>
<<include Quest_MQ002_Manor_Entrance_Normal>>
\<</if>>

::Quest_MQ002_Manor_Entrance_Normal <1100,22100>
\<<run setup.choice("[[->Quest_MQ002_Manor_MainHall]]");>>
\<<run setup.choice("[[->Quest_MQ002_Entrance_NoGuard]]");>>

::Quest_MQ002_Manor_Entrance_Massive <600,23225>
\<<if $WorldState.cultManor.mainHall.isBroken>>
\<<run setup.choice("[[->Quest_MQ002_Manor_MainHall]]");>>
\<<else>>



\<<run setup.choice("[[->Quest_MQ002_Manor_Entrance_Massive_BargeIn]]");>>
\<</if>>
\<<run setup.choice("[[->Quest_MQ002_Entrance_NoGuard]]");>>

::Quest_MQ002_Manor_Entrance_Massive_BargeIn <725,23225>
\<<if setup.getStatValue($CharacterSheet_Player, "corruption") < 50>>

\<<else>>
  
\<</if>>

 


\<<run setup.choice("[[->Quest_MQ002_Manor_MainHall]]");>>

::MQ002_Manor_WestWing_Entrance <850,23225>

 





<<print setup.getNextManorDestination()>>
\<<run setup.choice("[[->Quest_MQ002_Manor_MainHall]]");>>

::MQ002_Manor_WestWing_Ending <975,23225>

 

 



\<<run setup.choice("[[->Quest_MQ002_Manor_MainHall]]");>>

::Quest_MQ002_Manor_WestWing_Path <1100,23225>
\<<set $CharacterSheet_MQ002_NyxParasite.info.height = setup.getStatValue($CharacterSheet_Player, "cock") * 3>>
\<<if setup.MQ002_Manor_RandomEncounter()>>\
<<include Quest_MQ002_Manor_WestWing_Path_SeeParasite>>
\<<else>>
\<<if $WorldState.cultManor.westWingHallway.isBroken>>


\<<run setup.choice("[[->$MQ002_Manor_Destination]]");>>
\<<elseif setup.MQ002_Manor_IsMassiveInManor($CharacterSheet_Player)>>


\<<set $WorldState.cultManor.westWingHallway.isBroken = true>>

\<<run setup.choice("[[->$MQ002_Manor_Destination]]");>>
\<<else>>
 


\<<run setup.choice("[[->$MQ002_Manor_Destination]]");>>
\<</if>>
\<</if>>

::Quest_MQ002_Manor_WestWing <1225,23225>







\<<run setup.choice("[[->Quest_MQ002_Manor_DragonRoom]]");>>
\<<set $MQ002_Manor_Destination = "Quest_MQ002_Manor_MainHall">>
\<<run setup.choice("[[->Quest_MQ002_Manor_WestWing_Path]]");>>

::WestWing_DrenthRoom <100,23350>
<<include setup.getNextNarativeEventPassage(setup.StorySheet_MQ002_DragonMonk.encounterPassages)>>

::Quest_MQ002_Manor_DragonRoom_Enter <225,23350>


\<<if $CharacterSheet_MQ002_DragonMonk.quest.infected == true || $CharacterSheet_MQ002_DragonMonk.quest.beaten == true>>

\<<else>>

\<</if>>

\<<run setup.choice("[[->Quest_MQ002_Manor_DragonRoom]]");>>

::Quest_MQ002_Manor_DragonRoom <350,23350>
\<<if $CharacterSheet_MQ002_DragonMonk.quest.infected == true>>


\<<run setup.choice("[[->Quest_MQ002_Manor_DragonRoom_Leave]]");>>
\<<elseif $CharacterSheet_MQ002_DragonMonk.quest.beaten == true>>


\<<run setup.choice("[[->Quest_MQ002_Manor_DragonRoom_Leave]]");>>
\<<elseif $CharacterSheet_MQ002_DragonMonk.quest.threatened == true>>
\<<include Quest_MQ002_Manor_DragonRoom_Threatened>>
\<<else>>
\<<include Quest_MQ002_Manor_DragonRoom_Safe>>
\<</if>>

::Quest_MQ002_Manor_DragonRoom_Threatened <475,23350>
<<print setup.displayEncounterImage($CharacterSheet_MQ002_DragonMonk.info.picture)>>
\<<include Quest_MQ002_Manor_DragonRoom_ParasiteHint>>

"" 



""

\<<run setup.choice("[[->Quest_MQ002_Manor_DragonRoom_Fight]]");>>
\<<run setup.choice("[[->Quest_MQ002_Manor_DragonRoom_Leave]]");>>

::Quest_MQ002_Manor_DragonRoom_ParasiteHint <600,23350>
\<<if $CharacterSheet_Player.quest.nyxParasiteInfections <= 0>>


\<<else>>
 




\<</if>>

::Quest_MQ002_Manor_DragonRoom_Safe <725,23350>
\<<if setup.MQ002_HasIntactOath()>>
<<print setup.displayEncounterImage($CharacterSheet_MQ002_DragonMonk.info.pictureFriend)>>
\<<else>>
<<print setup.displayEncounterImage($CharacterSheet_MQ002_DragonMonk.info.picture)>>
\<</if>>
\<<include Quest_MQ002_Manor_DragonRoom_ParasiteHint>>

\<<if $CharacterSheet_Player.quest.nyxParasiteInfections > 0 && $CharacterSheet_MQ002_DragonMonk.quest.askedWhoAreYou>>
<span class="glitch" data-text="">[[->Quest_MQ002_Manor_DragonRoom_InfestHim]]</span>
\<<else>>
[[->Quest_MQ002_Manor_DragonRoom_WhoAreYou]]
\<</if>>
\
\<<if $CharacterSheet_Player.quest.nyxParasiteInfections > 0 && $CharacterSheet_MQ002_DragonMonk.quest.askedWhyAreYouHere>>
<span class="glitch" data-text="">[[->Quest_MQ002_Manor_DragonRoom_InfestHim]]</span>
\<<elseif $CharacterSheet_MQ002_DragonMonk.quest.askedWhoAreYou>>
[[->Quest_MQ002_Manor_DragonRoom_WhyAreYouHere]]
\<</if>>
\
\<<if $CharacterSheet_Player.quest.nyxParasiteInfections > 0 && $CharacterSheet_MQ002_DragonMonk.quest.askedLookingForSomeone>>
<span class="glitch" data-text="">[[->Quest_MQ002_Manor_DragonRoom_InfestHim]]</span>
\<<elseif $CharacterSheet_MQ002_DragonMonk.quest.askedWhyAreYouHere && !$CharacterSheet_MQ002_DragonMonk.quest.askedLookingForSomeone>>
[[->Quest_MQ002_Manor_DragonRoom_ImLookingForSomeone]]
\<</if>>

\<<if $CharacterSheet_Player.quest.nyxParasiteInfections > 0>>
[[->Quest_MQ002_Manor_DragonRoom_InfestHim]]
\<</if>>
\<<run setup.choice("[[->Quest_MQ002_Manor_DragonRoom_Fight]]");>>

\<<run setup.choice("[[->Quest_MQ002_Manor_DragonRoom_Leave]]");>>

::Quest_MQ002_Manor_DragonRoom_Reassure <850,23350>
\<<if setup.MQ002_Manor_IsMassiveInManor($CharacterSheet_Player)>>
\

\<<else>>
\

\<</if>>
"" 

\<<run setup.choice("[[->Quest_MQ002_Manor_DragonRoom_Safe]]");>>

::Quest_MQ002_Manor_DragonRoom_WhyAreYouHere <975,23350>


"" 

"" 



"
" 

\<<run setup.choice("[[->Quest_MQ002_Manor_DragonRoom_WhyAreYouHere_2]]");>>

::Quest_MQ002_Manor_DragonRoom_WhyAreYouHere_2 <1100,23350>
". 
" 

" He went back to Nyx and gave himself to its corruption.
" 

""

\<<run setup.choice("[[->Quest_MQ002_Manor_DragonRoom_WhyAreYouHere_3]]");>>

::Quest_MQ002_Manor_DragonRoom_WhyAreYouHere_3 <1225,23350>
; 
 
" 

""

\<<set $CharacterSheet_MQ002_DragonMonk.quest.askedWhyAreYouHere = true>>
\<<run setup.choice("[[->Quest_MQ002_Manor_DragonRoom]]");>>

::Quest_MQ002_Manor_DragonRoom_WhoAreYou <100,23475>


""

", " 



""
\<<set $CharacterSheet_MQ002_DragonMonk.quest.askedWhoAreYou = true>>

\<<run setup.choice("[[->Quest_MQ002_Manor_DragonRoom]]");>>

::Quest_MQ002_Manor_DragonRoom_ImLookingForSomeone <225,23475>
""


 




\<<run setup.choice("[[->Quest_MQ002_Manor_DragonRoom_ImLookingForSomeone_2]]");>>

::Quest_MQ002_Manor_DragonRoom_ImLookingForSomeone_2 <350,23475>
""



"" 

"
"



" "

[[->Quest_MQ002_Manor_DragonRoom_ImLookingForSomeone_SaveHim]]
[[->Quest_MQ002_Manor_DragonRoom_ImLookingForSomeone_GiveUp]]

::Quest_MQ002_Manor_DragonRoom_ImLookingForSomeone_SaveHim <475,23475>


""



" "

[[->Quest_MQ002_Manor_DragonRoom_ImLookingForSomeone_SaveHim_2]]
[[->Quest_MQ002_Manor_DragonRoom_ImLookingForSomeone_GiveUp]]

::Quest_MQ002_Manor_DragonRoom_ImLookingForSomeone_SaveHim_2 <600,23475>


""



"" 

[[->Quest_MQ002_Manor_DragonRoom_ImLookingForSomeone_SaveHim_3]]
[[->Quest_MQ002_Manor_DragonRoom_ImLookingForSomeone_GiveUp]]

::Quest_MQ002_Manor_DragonRoom_ImLookingForSomeone_SaveHim_3 <725,23475>
"


""



" "



[[->Quest_MQ002_Manor_DragonRoom_ImLookingForSomeone_MakeOath]]
[[->Quest_MQ002_Manor_DragonRoom_ImLookingForSomeone_RefuseOath]]

::Quest_MQ002_Manor_DragonRoom_ImLookingForSomeone_MakeOath <850,23475>
""



""




""

[[->Quest_MQ002_Manor_DragonRoom_ImLookingForSomeone_MakeOath_2]]

::Quest_MQ002_Manor_DragonRoom_ImLookingForSomeone_MakeOath_2 <975,23475>


"" 




[[->Quest_MQ002_Manor_DragonRoom_ImLookingForSomeone_MakeOath_3]]

::Quest_MQ002_Manor_DragonRoom_ImLookingForSomeone_MakeOath_3 <1100,23475>




; 



[[->Quest_MQ002_Manor_DragonRoom_ImLookingForSomeone_MakeOath_4]]

::Quest_MQ002_Manor_DragonRoom_ImLookingForSomeone_MakeOath_4 <1225,23475>



" "


\<<set $CharacterSheet_MQ002_DragonMonk.quest.askedLookingForSomeone = true>>
\<<set $CharacterSheet_Player.quest.oaths.drenth = setup.Oath.ACTIVE>>

\<<run $CharacterSheet_Player.applyAbilityRuntimeData(setup.Ability_Oath_Containment);>>

\<<print setup.clearWestWingRoom("WestWing_DrenthRoom")>>

\<<run setup.choice("[[->Quest_MQ002_Manor_DragonRoom]]");>>

::Quest_MQ002_Manor_DragonRoom_ImLookingForSomeone_RefuseOath <100,23600>
""



\<<run setup.choice("[[->Quest_MQ002_Manor_DragonRoom]]");>>

::Quest_MQ002_Manor_DragonRoom_ImLookingForSomeone_GiveUp <225,23600>
"



\<<run setup.choice("[[->Quest_MQ002_Manor_DragonRoom]]");>>

::Quest_MQ002_Manor_DragonRoom_InfestHim <350,23600>




"" 




\<<run setup.choice("[[->Quest_MQ002_Manor_DragonRoom_InfestHim_2]]");>>

::Quest_MQ002_Manor_DragonRoom_InfestHim_2 <475,23600>
" " 

 


"!" 

\<<run setup.choice("[[->Quest_MQ002_Manor_DragonRoom_InfestHim_3]]");>>

::Quest_MQ002_Manor_DragonRoom_InfestHim_3 <600,23600>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 1)>>


<<print setup.processFlavours($CharacterSheet_MQ002_DragonMonk, "@[all|cocks|noverb]")>> 
, . 




\<<run setup.choice("[[->Quest_MQ002_Manor_DragonRoom_InfestHim_4]]");>>

::Quest_MQ002_Manor_DragonRoom_InfestHim_4 <725,23600>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 1)>>
 
<<print setup.processFlavours($CharacterSheet_Player, "@[all|pecs|noverb]  @[all|abdominals|noverb]")>> 



<<print setup.processFlavours($CharacterSheet_Player, "@[all|tongues|noverb]")>> 
<<print setup.processFlavours($CharacterSheet_MQ002_DragonMonk, ", @[all|cocks|noverb]")>>


<<print setup.processFlavours($CharacterSheet_Player, "@[all|cocks|noverb]")>> 

"" 

\<<run setup.choice("[[->Quest_MQ002_Manor_DragonRoom_InfestHim_5]]");>>

::Quest_MQ002_Manor_DragonRoom_InfestHim_5 <850,23600>
<<print setup.processFlavours($CharacterSheet_Player, "@[all|cocks|noverb] , ")>> 

<<print setup.processFlavours($CharacterSheet_Player, "@[all|cocks|noverb]")>>  

<<print setup.processFlavours($CharacterSheet_Player, "@[1|cocks|noverb]")>> 




\<<run setup.choice("[[->Quest_MQ002_Manor_DragonRoom_InfestHim_6]]");>>

::Quest_MQ002_Manor_DragonRoom_InfestHim_6 <975,23600>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 1)>>
 

<<print setup.processFlavours($CharacterSheet_Player, "@[all|balls|noverb]")>>

""

<<print setup.processFlavours($CharacterSheet_Player, "@[all|cocks|noverb]")>>


""

 
 

\<<run setup.choice("[[->Quest_MQ002_Manor_DragonRoom_InfestHim_7]]");>>

::Quest_MQ002_Manor_DragonRoom_InfestHim_7 <1100,23600>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 2)>>
<<print setup.processFlavours($CharacterSheet_Player, "@[all|teeths|noverb]")>> 


 
<<print setup.processFlavours($CharacterSheet_Player, "@[all|churning|balls|noverb]")>>
<<print setup.processFlavours($CharacterSheet_Player, "@[all|abdominals|noverb]@[all|pecs|noverb]")>> 




 


<<print setup.getRace($CharacterSheet_Player.info.anatomy, true)>>'

"~"

\<<run setup.choice("[[->Quest_MQ002_Manor_DragonRoom_InfestHim_8]]");>>

::Quest_MQ002_Manor_DragonRoom_InfestHim_8 <1225,23600>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 3)>>

 



\<<run setup.choice("[[->Quest_MQ002_Manor_DragonRoom_InfestHim_8_1]]");>>

::Quest_MQ002_Manor_DragonRoom_InfestHim_8_1 <100,23725>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 4)>>


<<print setup.processFlavours($CharacterSheet_Player, " @[all|pecs|noverb]")>> 

""

\<<run setup.choice("[[->Quest_MQ002_Manor_DragonRoom_InfestHim_8_2]]");>>

::Quest_MQ002_Manor_DragonRoom_InfestHim_8_2 <225,23725>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 4)>>
"" 





\<<run setup.choice("[[->Quest_MQ002_Manor_DragonRoom_InfestHim_8_3]]");>>

::Quest_MQ002_Manor_DragonRoom_InfestHim_8_3 <350,23725>
\<<run setup.stopRealizationPackages(["CharacterSheet_Player"])>>
"" 

""



"" 

\<<run setup.breakOath("drenth")>>
\<<run setup.choice("[[->Quest_MQ002_Manor_DragonRoom_InfestHim_10]]");>>

::Quest_MQ002_Manor_DragonRoom_InfestHim_10 <475,23725>
<<print setup.displayEncounterImage($CharacterSheet_MQ002_DragonMonk.info.pictureCorrupt)>>
<<print setup.processFlavours($CharacterSheet_Player, " @[all|tongues|noverb]")>>



"," "" 
 



\<<run setup.choice("[[->Quest_MQ002_Manor_DragonRoom_InfestHim_11]]");>>

::Quest_MQ002_Manor_DragonRoom_InfestHim_11 <600,23725>
""

""



", "



""
\<<run setup.changeLimbNumber($CharacterSheet_MQ002_DragonMonk.info.anatomy, "tongues", 2)>>
\<<set $CharacterSheet_MQ002_DragonMonk.quest.infected = true>>

\<<print setup.clearWestWingRoom("WestWing_DrenthRoom")>>

\<<run setup.choice("[[->Quest_MQ002_Manor_DragonRoom]]");>>

::Quest_MQ002_Manor_DragonRoom_Fight <725,23725>
"" 



", "

\<<set $CharacterSheet_MQ002_DragonMonk.quest.threatened = true>>
\<<run setup.choice("[[->FightLogic][$Encounter_Target = $CharacterSheet_MQ002_DragonMonk]]");>>
\<<run setup.choice("[[->Quest_MQ002_Manor_DragonRoom_Leave]]");>>

::Quest_MQ002_Manor_DragonRoom_Leave <850,23725>
\<<run setup.stopRealizationPackages(["CharacterSheet_Player"])>>



<<print setup.getNextManorDestination()>>

::WestWing_DrenthRoom_FirstTime <975,23725>
\<<set $CharacterSheet_MQ002_DragonMonk.quest.available_encounterPassages_firstTime = false>>\
<<include WestWing_DrenthRoom_BreakRoof>>





\<<run setup.choice("[[->WestWing_DrenthRoom_FirstTime_2]]");>>

::WestWing_DrenthRoom_FirstTime_2 <1100,23725>



""

 


\<<run setup.choice("[[->Quest_MQ002_Manor_DragonRoom_Reassure]]");>>
\<<run setup.choice("[[->Quest_MQ002_Manor_DragonRoom_Fight]]");>>

::WestWing_DrenthRoom_FirstTime_Came <1225,23725>
\<<set $CharacterSheet_MQ002_DragonMonk.quest.available_encounterPassages_firstTime = false>>\
<<include WestWing_DrenthRoom_BreakRoof>>







\<<run setup.choice("[[->WestWing_DrenthRoom_FirstTime_Came_2]]");>>

::WestWing_DrenthRoom_FirstTime_Came_2 <100,23850>





\<<run setup.choice("[[->WestWing_DrenthRoom_FirstTime_Came_3]]");>>

::WestWing_DrenthRoom_FirstTime_Came_3 <225,23850>



""

 




\<<run setup.choice("[[->Quest_MQ002_Manor_DragonRoom_Reassure]]");>>
\<<run setup.choice("[[->Quest_MQ002_Manor_DragonRoom_Fight]]");>>

::WestWing_DrenthRoom_FirstTime_Infected <350,23850>
\<<set $CharacterSheet_MQ002_DragonMonk.quest.available_encounterPassages_firstTime = false>>\
<<include WestWing_DrenthRoom_BreakRoof>>







\<<run setup.choice("[[->WestWing_DrenthRoom_FirstTime_Infected_2]]");>>

::WestWing_DrenthRoom_FirstTime_Infected_2 <475,23850>





\<<run setup.choice("[[->WestWing_DrenthRoom_FirstTime_Infected_3]]");>>

::WestWing_DrenthRoom_FirstTime_Infected_3 <600,23850>



""

""






\<<run setup.choice("[[->Quest_MQ002_Manor_DragonRoom_Reassure]]");>>
\<<run setup.choice("[[->Quest_MQ002_Manor_DragonRoom_Fight]]");>>

::WestWing_DrenthRoom_BreakRoof <725,23850>
\<<if setup.MQ002_Manor_IsMassiveInManor($CharacterSheet_Player)>>


\<<set $WorldState.cultManor.dragonRoom.isBroken = true>>

\<</if>>

::WestWing_NyxSpawnFight <850,23850>
\<<if setup.MQ002_Manor_IsMassiveInManor($CharacterSheet_Player)>>


 
\<<else>>


; 


\<</if>>

 
 

\<<run setup.choice("[[->Quest_MQ002_Manor_WestWing_Path_SeeParasite_2]]");>>

::Quest_MQ002_Manor_WestWing_Path_SeeParasite_2 <975,23850>
<<print setup.displayEncounterImage($CharacterSheet_MQ002_NyxParasite.info.picture)>>

<<print setup.getLength(setup.getStatValue($CharacterSheet_MQ002_NyxParasite, "height"))>>

\<<run setup.choice("[[->FightLogic][$Encounter_Target = $CharacterSheet_MQ002_NyxParasite]]");>>

::WestWing_GloryHole <1100,23850>




\<<run setup.choice("[[->WestWing_GloryHole_2]]")>>
\<<run setup.choice("[[->WestWing_GloryHole_Leave]]")>>

::WestWing_GloryHole_2 <1225,23850>
<<include setup.getNextNarativeEventPassage(setup.StorySheet_MQ002_DragonMonk.gloryHoleStartPassage)>>

::WestWing_GloryHole_Absent <100,23975>





\<<run setup.choice("[[->WestWing_GloryHole_Leave]]")>>

::WestWing_GloryHole_Present <225,23975>





\<<if $CharacterSheet_MQ002_DragonMonk.quest.met == true>>

\<</if>>

\<<run setup.choice("[[->WestWing_GloryHole_3]]")>>

::WestWing_GloryHole_3 <350,23975>


""

\<<run setup.choice("[[just Do it->WestWing_GloryHole_4]]")>>
\<<run setup.choice("[[->WestWing_GloryHole_Leave]]")>>

::WestWing_GloryHole_4 <475,23975>


\<<if setup.MQ002_Manor_IsGiganticInManor($CharacterSheet_Player)>>

\<<elseif setup.MQ002_Manor_IsMassiveInManor($CharacterSheet_Player)>>

\<<else>>

\<</if>>

\<<if setup.MQ002_Manor_IsCockGiganticInManor($CharacterSheet_Player)>>

\<<elseif setup.MQ002_Manor_IsCockMassiveInManor($CharacterSheet_Player)>>

\<<else>>

\<</if>>






\<<run setup.choice("[[->WestWing_GloryHole_5]]")>>

::WestWing_GloryHole_5 <600,23975>






\<<run setup.choice("[[->WestWing_GloryHole_6]]")>>

::WestWing_GloryHole_6 <725,23975>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 1)>>



\<<if setup.MQ002_Manor_IsCockMassiveInManor($CharacterSheet_Player)>>

\<</if>>




\<<run setup.choice("[[->WestWing_GloryHole_7]]")>>

::WestWing_GloryHole_7 <850,23975>





\<<run setup.choice("[[->WestWing_GloryHole_8]]")>>

::WestWing_GloryHole_8 <975,23975>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 1)>>





\<<run setup.choice("[[->WestWing_GloryHole_9]]")>>

::WestWing_GloryHole_9 <1100,23975>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 2)>>









\<<run setup.choice("[[Keep going->WestWing_GloryHole_10]]")>>

::WestWing_GloryHole_10 <1225,23975>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 2)>>





\<<run setup.choice("[[->WestWing_GloryHole_11]]")>>

::WestWing_GloryHole_11 <100,24100>
\<<run setup.playSoundActionParams(["action_Suck"], true)>>
\<<if setup.MQ002_Manor_IsCockGiganticInManor($CharacterSheet_Player)>>
<<include WestWing_GloryHole_11_Gigantic>>
\<<elseif setup.MQ002_Manor_IsCockMassiveInManor($CharacterSheet_Player)>>
<<include WestWing_GloryHole_11_Massive>>
\<<else>>
<<include WestWing_GloryHole_11_Normal>>
\<</if>>

::WestWing_GloryHole_11_Normal <225,24100>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 2)>>







\<<run setup.choice("[[->WestWing_GloryHole_11_Normal_2]]")>>

::WestWing_GloryHole_11_Normal_2 <350,24100>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 3)>>








\<<run setup.choice("[[->WestWing_GloryHole_11_Normal_3]]")>>

::WestWing_GloryHole_11_Normal_3 <475,24100>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 3)>>









\<<run setup.choice("[[->WestWing_GloryHole_11_Cum]]")>>

::WestWing_GloryHole_11_Normal_Cum <600,24100>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 4)>>





\<<run setup.choice("[[->WestWing_GloryHole_12]]")>>

::WestWing_GloryHole_11_Massive <725,24100>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 2)>>







\<<run setup.choice("[[->WestWing_GloryHole_11_Massive_2]]")>>

::WestWing_GloryHole_11_Massive_2 <850,24100>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 2)>>







\<<run setup.choice("[[->WestWing_GloryHole_11_Massive_3]]")>>

::WestWing_GloryHole_11_Massive_3 <975,24100>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 3)>>








\<<run setup.choice("[[->WestWing_GloryHole_11_Massive_4]]")>>

::WestWing_GloryHole_11_Massive_4 <1100,24100>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 3)>>




\<<run setup.choice("[[->WestWing_GloryHole_11_Cum]]")>>

::WestWing_GloryHole_11_Massive_Cum <1225,24100>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 4)>>








\<<run setup.choice("[[->WestWing_GloryHole_12]]")>>

::WestWing_GloryHole_11_Gigantic <100,24225>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 2)>>







\<<run setup.choice("[[->WestWing_GloryHole_11_Gigantic_2]]")>>

::WestWing_GloryHole_11_Gigantic_2 <225,24225>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 3)>>








\<<run setup.choice("[[->WestWing_GloryHole_11_Gigantic_3]]")>>

::WestWing_GloryHole_11_Gigantic_3 <350,24225>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 3)>>







\<<run setup.choice("[[->WestWing_GloryHole_11_Cum]]")>>

::WestWing_GloryHole_11_Gigantic_Cum <475,24225>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 4)>>







\<<run setup.choice("[[->WestWing_GloryHole_11_Gigantic_5]]")>>

::WestWing_GloryHole_11_Gigantic_5 <600,24225>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 4)>>







\<<run setup.choice("[[->WestWing_GloryHole_12]]")>>

::WestWing_GloryHole_12 <725,24225>
\<<run setup.stopSoundActions();>>
\<<run setup.stopRealizationPackages(["CharacterSheet_Player"])>>




<<print setup.clearWestWingRoom("WestWing_GloryHole")>>

<<print setup.getNextManorDestination()>>

::WestWing_GloryHole_11_Cum <850,24225>
\<<set State.variables.CharacterSheet_MQ002_DragonMonk.quest.came_GloryRoom = true>>
<<include setup.getNextNarativeEventPassage(setup.StorySheet_MQ002_DragonMonk.gloryHoleCumPassages)>>

::WestWing_GloryHole_Leave <975,24225>


<<print setup.getNextManorDestination()>>

::WestWing_GloryHole_Infect <1100,24225>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 3)>>





\<<run setup.choice("[[->WestWing_GloryHole_Infect_2]]")>>

::WestWing_GloryHole_Infect_2 <1225,24225>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 3)>>



"<span class="glitch nyx" data-text="  ">""</span>"



\<<run setup.choice("[[->WestWing_GloryHole_Infect_3]]")>>

::WestWing_GloryHole_Infect_3 <100,24350>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 4)>>









\<<run setup.choice("[[->WestWing_GloryHole_Infect_4]]")>>

::WestWing_GloryHole_Infect_4 <225,24350>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 4)>>



""








""

\<<set State.variables.CharacterSheet_MQ002_DragonMonk.quest.infected_GloryRoom = true>>
\<<run setup.choice("[[->WestWing_GloryHole_12]]")>>

::WestWing_GymRoom <350,24350>







\<<run setup.choice("[[->WestWing_GymRoom_2]]");>>
\<<run setup.choice("[[->WestWing_GymRoom_Leave]]");>>

::WestWing_GymRoom_2 <475,24350>







\<<run setup.choice("[[->WestWing_GymRoom_3]]");>>

::WestWing_GymRoom_3 <600,24350>
 




\<<run setup.choice("[[->WestWing_GymRoom_3_1]]");>>

::WestWing_GymRoom_3_1 <725,24350>



 





\<<run setup.choice("[[->WestWing_GymRoom_4]]");>>

::WestWing_GymRoom_4 <850,24350>



 

;

\<<run setup.choice("[[->WestWing_GymRoom_5]]");>>

::WestWing_GymRoom_5 <975,24350>





 

\<<run setup.choice("[[->WestWing_GymRoom_6]]");>>

::WestWing_GymRoom_6 <1100,24350>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 1)>>



 
 



\<<run setup.choice("[[->WestWing_GymRoom_7]]");>>

::WestWing_GymRoom_7 <1225,24350>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 1)>>
 



\<<run setup.choice("[[->WestWing_GymRoom_7_1]]");>>

::WestWing_GymRoom_7_1 <100,24475>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 2)>>








\<<run setup.choice("[[->WestWing_GymRoom_8]]");>>

::WestWing_GymRoom_8 <225,24475>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 3)>>
\<<run setup.playSoundActionParams(["action_Suck"], true)>>






 



\<<run setup.choice("[[->WestWing_GymRoom_9]]");>>

::WestWing_GymRoom_9 <350,24475>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 3)>>
,,,



"~"



\<<run setup.choice("[[->WestWing_GymRoom_10]]");>>

::WestWing_GymRoom_10 <475,24475>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 4)>>










\<<run setup.choice("[[->WestWing_GymRoom_11]]");>>

::WestWing_GymRoom_11 <600,24475>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 1)>>
\<<run setup.stopSoundActions()>>
 

 

 




""
\<<run $CharacterSheet_Player.applyAbilityRuntimeData(setup.Ability_NyxInducedWorkout)>>

\<<print setup.clearWestWingRoom("WestWing_GymRoom")>>

\<<run setup.choice("[[->WestWing_GymRoom_Leave]]");>>

::WestWing_GymRoom_Leave <725,24475>
\<<run setup.stopRealizationPackages(["CharacterSheet_Player"])>>


<<print setup.getNextManorDestination()>>

::WestWing_MirrorRoom <0,250>
 

 
 

\<<if setup.MQ002_Manor_IsMassiveInManor($CharacterSheet_Player)>>

\<<else>>

\<</if>>

\<<run setup.choice("[[->WestWing_MirrorRoom_2]]");>>
\<<run setup.choice("[[->WestWing_MirrorRoom_Exit]]");>>

::WestWing_MirrorRoom_2 <975,24475>



;



\<<if setup.MQ002_Manor_IsCorruptedInManor($CharacterSheet_Player)>>
\<<set $CharacterSheet_Doppleganger.quest.corruptionState = setup.Doppleganger_CorruptionState.PURE>>
\<<else>>
\<<set $CharacterSheet_Doppleganger.quest.corruptionState = setup.Doppleganger_CorruptionState.CORRUPTED>>
\<</if>>
\
\<<run setup.setDopplegangerStats()>>
\<<run setup.choice("[[->WestWing_MirrorRoom_3]]");>>
\<<run setup.choice("[[->WestWing_MirrorRoom_Exit]]");>>

::WestWing_MirrorRoom_3 <1100,24475>
<<include setup.getNextNarativeEventPassage(setup.StorySheet_Doppleganger.encounterPassages)>>

::WestWing_MirrorRoom_Exit <1225,24475>
\<<run setup.stopRealizationPackages(["CharacterSheet_Player", "CharacterSheet_Doppleganger"])>>



<<print setup.getNextManorDestination()>>

::WestWing_NyxSpawnPit <100,24600>

 





\<<run setup.choice("[[->WestWing_NyxSpawnPit_2]]");>>
\<<if $CharacterSheet_Player.quest.nyxParasiteInfections <= 0>>
\<<run setup.choice("[[->WestWing_NyxSpawnPit_Leave]]");>>
\<<else>>
<span class="glitch nyx fucked" data-text="DO NOT">[[->WestWing_NyxSpawnPit_Leave]]</span>
\<</if>>

::WestWing_NyxSpawnPit_2 <225,24600>






20

\<<run setup.choice("[[->WestWing_NyxSpawnPit_3]]");>>

::WestWing_NyxSpawnPit_3 <350,24600>



 

\<<run setup.choice("[[->WestWing_NyxSpawnPit_4]]");>>
\<<run setup.choice("[[->WestWing_NyxSpawnPit_Leave]]");>>

::WestWing_NyxSpawnPit_4 <475,24600>






\<<run setup.choice("[[->WestWing_NyxSpawnPit_5]]");>>

::WestWing_NyxSpawnPit_5 <600,24600>
 


 


\<<run setup.choice("[[->WestWing_NyxSpawnPit_6]]");>>

::WestWing_NyxSpawnPit_6 <725,24600>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 1)>>





\<<run setup.choice("[[->WestWing_NyxSpawnPit_7]]");>>

::WestWing_NyxSpawnPit_7 <850,24600>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 1)>>


 
 


\<<run setup.choice("[[->WestWing_NyxSpawnPit_8]]");>>

::WestWing_NyxSpawnPit_8 <975,24600>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 2)>>

 

 





\<<run setup.choice("[[->WestWing_NyxSpawnPit_9]]");>>

::WestWing_NyxSpawnPit_9 <1100,24600>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 2)>>

 



\<<run setup.choice("[[->WestWing_NyxSpawnPit_10]]");>>

::WestWing_NyxSpawnPit_10 <1225,24600>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 3)>>


 






\<<run setup.choice("[[->WestWing_NyxSpawnPit_11]]");>>

::WestWing_NyxSpawnPit_11 <100,24725>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 3)>>




\<<run setup.choice("[[->WestWing_NyxSpawnPit_12]]");>>

::WestWing_NyxSpawnPit_12 <225,24725>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 3)>>
 






\<<run setup.choice("[[->WestWing_NyxSpawnPit_13]]");>>

::WestWing_NyxSpawnPit_13 <350,24725>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 3)>>






 

 

\<<run setup.choice("[[->WestWing_NyxSpawnPit_14]]");>>

::WestWing_NyxSpawnPit_14 <475,24725>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 3)>>
 





\<<run setup.choice("[[->WestWing_NyxSpawnPit_15]]");>>

::WestWing_NyxSpawnPit_15 <600,24725>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 3)>>







\<<run setup.choice("[[->WestWing_NyxSpawnPit_16]]");>>

::WestWing_NyxSpawnPit_16 <725,24725>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 3)>>
; 









\<<run setup.choice("[[->WestWing_NyxSpawnPit_17]]");>>

::WestWing_NyxSpawnPit_17 <850,24725>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 3)>>
 






\<<run setup.choice("[[->WestWing_NyxSpawnPit_18]]");>>

::WestWing_NyxSpawnPit_18 <975,24725>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 3)>>


 

\<<run setup.choice("[[->WestWing_NyxSpawnPit_19]]");>>

::WestWing_NyxSpawnPit_19 <1100,24725>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 4)>>











\<<run setup.choice("[[->WestWing_NyxSpawnPit_20]]");>>

::WestWing_NyxSpawnPit_20 <1225,24725>
\<<run setup.playRealizationPackage(["CharacterSheet_Player"], 1)>>




 - 



\<<run setup.choice("[[->WestWing_NyxSpawnPit_21]]");>>

::WestWing_NyxSpawnPit_21 <100,24850>
\<<run setup.stopRealizationPackages(["CharacterSheet_Player"])>>
,




""
\<<run setup.MQ002_AddNyxParasiteInfection()>>

\<<print setup.clearWestWingRoom("WestWing_NyxSpawnPit")>>

\<<run setup.choice("[[->WestWing_NyxSpawnPit_Leave]]");>>

::WestWing_NyxSpawnPit_Leave <225,24850>
\<<run setup.stopRealizationPackages(["CharacterSheet_Player"])>>



<<print setup.getNextManorDestination()>>

::WestWing_SoundingRoom <350,24850>


<<print setup.getNextManorDestination()>>

::Explore_EastFirstTime <475,24850>
\<<set $CharacterSheet_Player.quest.available_exploration_villageGateEast_eastFirstTime = false>>
\<<if $Level > 5>>



"<<print $CharacterSheet_Player.info.name>>" 



""

\<<run setup.choice("[[->$Explore_Destination][$Encounter_Target = setup.getRandomEncounter(1)]]");>>
\<<run setup.choice("[[->Village]]");>>
\<<else>>


"" 

""

\<<run setup.choice("[[->$Explore_Destination][$Encounter_Target = setup.getRandomEncounter(1)]]");>>
\<<run setup.choice("[[->Village]]");>>
\<</if>>

::Explore_EastGrownParasites <600,24850>
\<<set $CharacterSheet_Player.quest.available_exploration_villageGateEast_eastGrownParasites = false>>








\<<run setup.choice("[[->$Explore_Destination][$Encounter_Target = setup.getRandomEncounter(1)]]");>>

::Explore_EastGrownDemonic <725,24850>
\<<set $CharacterSheet_Player.quest.available_exploration_villageGateEast_eastGrownDemonic = false>>


 

\<<run setup.choice("[[->$Explore_Destination][$Encounter_Target = setup.getRandomEncounter(1)]]");>>

::Explore_EastGrownMacro <850,24850>
\<<set $CharacterSheet_Player.available_exploration_villageGateEast_eastGrownMacro = false>>




\<<run setup.choice("[[->$Explore_Destination][$Encounter_Target = setup.getRandomEncounter(1)]]");>>

::Explore_EastGrownLordOfLust <975,24850>
\<<set $CharacterSheet_Player.quest.available_exploration_villageGateEast_eastGrownLordOfLust = false>>


; 



\<<run setup.choice("[[->$Explore_Destination][$Encounter_Target = setup.getRandomEncounter(1)]]");>>

::Explore_EastGrownMegaMacro <1100,24850>
\<<set $CharacterSheet_Player.quest.available_exploration_villageGateEast_eastGrownMegaMacro = false>>
 \
; 







\<<run setup.choice("[[->$Explore_Destination][$Encounter_Target = setup.getRandomEncounter(1)]]");>>

::Explore_NorthFirstTime <1225,24850>
\<<set $CharacterSheet_Player.quest.available_exploration_villageGateNorth_northFirstTime = false>>


"" 



""

""

\<<run setup.choice("[[->$Explore_Destination][$Encounter_Target = setup.getRandomEncounter(0)]]");>>
\<<run setup.choice("[[->Village]]");>>

::Explore_NorthGrownMuscular <100,24975>
\<<set $CharacterSheet_Player.quest.available_exploration_villageGateNorth_northGrownMuscular = false>>
 

 



""

\<<run setup.choice("[[->$Explore_Destination][$Encounter_Target = setup.getRandomEncounter(0)]]");>>

::Explore_NorthVisibleCorruption <225,24975>
\<<set $CharacterSheet_Player.quest.available_exploration_villageGateNorth_northVisibleCorruption = false>>
; 





\<<run setup.choice("[[->$Explore_Destination][$Encounter_Target = setup.getRandomEncounter(0)]]");>>

::Explore_NorthGrownHeight <350,24975>
\<<set $CharacterSheet_Player.quest.available_exploration_villageGateNorth_northGrownHeight = false>>








\<<run setup.choice("[[->$Explore_Destination][$Encounter_Target = setup.getRandomEncounter(0)]]");>>

::Explore_NorthGrownHeightMassive <475,24975>
\<<set $CharacterSheet_Player.quest.available_exploration_villageGateNorth_northGrownHeightMassive = false>>






\<<run setup.choice("[[->$Explore_Destination][$Encounter_Target = setup.getRandomEncounter(0)]]");>>

::ChoicesWindowSettings <600,24975>
:
<label><<radiobutton '$ChoicesWindow' false autocheck>></label>
<label><<radiobutton '$ChoicesWindow' true autocheck>></label>

::Combat_Guide <725,24975>





324 

: 
<<print setup.displayEncounterImage("https://sombreve.github.io/Dawn-of-Corruption-Site/Images/combo_guide.png")>>

\<<run setup.choice("[[->Village]]");>>

::Credits <850,24975>
<p style="text-align:center">
\<<if State.variables.SecretCheat >= 10>>
<h2>Best boyfriend</h2>
Draco 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[img[https://sombreve.github.io/Dawn-of-Corruption-Site/Images/draco.png][http://www.furaffinity.net/user/dracoofzeradaith/]]
\<</if>>

<h2></h2>
Sombreve 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[img[https://sombreve.github.io/Dawn-of-Corruption-Site/Images/sombreve.png][http://www.furaffinity.net/user/sombreve/]]

<h2></h2>
Winty 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[img[https://sombreve.github.io/Dawn-of-Corruption-Site/Images/wintech3112.gif][http://www.furaffinity.net/user/wintech3112/]]

Deriaz 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[img[https://sombreve.github.io/Dawn-of-Corruption-Site/Images/deriaz.jpg][https://www.furaffinity.net/user/deriaz]]

Zhenelov 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[img[https://sombreve.github.io/Dawn-of-Corruption-Site/Images/lerchief2007.gif][https://www.furaffinity.net/user/lerchief2007/]]

Rethxus 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[img[https://sombreve.github.io/Dawn-of-Corruption-Site/Images/rethxus.gif][http://www.furaffinity.net/user/rethxus/]]

<h2></h2>
Sombreve 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[img[https://sombreve.github.io/Dawn-of-Corruption-Site/Images/sombreve.png][http://www.furaffinity.net/user/sombreve/]]

<h2></h2>
AudioElk 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[img[https://sombreve.github.io/Dawn-of-Corruption-Site/Images/deckardholiday.gif][https://www.furaffinity.net/user/deckardholiday]]

Mithane 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[img[https://sombreve.github.io/Dawn-of-Corruption-Site/Images/mithane.gif][https://www.furaffinity.net/user/mithane]]

Dandicoot 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[img[https://sombreve.github.io/Dawn-of-Corruption-Site/Images/dandicoot.gif][https://www.furaffinity.net/user/dandicoot]]

GiganticBeast 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[img[https://sombreve.github.io/Dawn-of-Corruption-Site/Images/giganticbeast.jpg][https://twitter.com/Gigantic_Beast]]

<h2></h2>
Ardolf
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[img[https://sombreve.github.io/Dawn-of-Corruption-Site/Images/ardolf.jpg][https://twitter.com/ardolf_official]]

<h2></h2>
Sombreve 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[img[https://sombreve.github.io/Dawn-of-Corruption-Site/Images/sombreve.png][http://www.furaffinity.net/user/sombreve/]]

Jagaz
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[img[https://sombreve.github.io/Dawn-of-Corruption-Site/Images/jagaz.gif][http://www.furaffinity.net/user/jagaz/]]

Delta-Tango
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[img[https://sombreve.github.io/Dawn-of-Corruption-Site/Images/delta-tango.gif][https://www.furaffinity.net/user/Delta-Tango]]

Ninjasy2667 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[img[https://sombreve.github.io/Dawn-of-Corruption-Site/Images/ninjasy2667.gif][https://www.furaffinity.net/user/ninjasy2667]]

Draco of Zeradaith
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[img[https://sombreve.github.io/Dawn-of-Corruption-Site/Images/draco.png][http://www.furaffinity.net/user/dracoofzeradaith/]]

Dragonien 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[img[https://sombreve.github.io/Dawn-of-Corruption-Site/Images/dragonien.gif][https://www.furaffinity.net/user/dragonien/]]

<h2>UI</h2>
Sombreve 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[img[https://sombreve.github.io/Dawn-of-Corruption-Site/Images/sombreve.png][http://www.furaffinity.net/user/sombreve/]]

Musclemage
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[img[https://sombreve.github.io/Dawn-of-Corruption-Site/Images/musclemage.jpg][https://twitter.com/the_musclemage]]

Ghost
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[img[https://sombreve.github.io/Dawn-of-Corruption-Site/Images/ghostboy.gif][https://www.furaffinity.net/user/ghostboy]]

Furyalpha123
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[img[https://sombreve.github.io/Dawn-of-Corruption-Site/Images/Furyalpha123.jpg][https://www.furaffinity.net/user/Furyalpha123]]

<h2></h2>
Vertigo
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[img[https://sombreve.github.io/Dawn-of-Corruption-Site/Images/vertigolapse.gif][https://www.furaffinity.net/user/vertigolapse]]

Whiteleo
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[img[https://sombreve.github.io/Dawn-of-Corruption-Site/Images/whiteleo.gif][https://www.furaffinity.net/user/whiteleo]]

Shadowlost25
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[img[https://sombreve.github.io/Dawn-of-Corruption-Site/Images/shadowlost25.gif][https://www.furaffinity.net/user/shadowlost25]]

Legdim
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[img[https://sombreve.github.io/Dawn-of-Corruption-Site/Images/legdim.png][https://www.furaffinity.net/user/legdim/]]

bassman97 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[img[https://sombreve.github.io/Dawn-of-Corruption-Site/Images/bassman97.gif][https://www.furaffinity.net/user/bassman97]]

Tomi
Garryn
AizelTheUncultured
MikeLovesPecs

NVidia CanvasDall-EPlaceholder art
</p>

::CreditsInGame <975,24975>
<<include Credits>>

\<<run setup.choice("[[->GameplaySettings]]");>>

::CreditsMainMenu <1100,24975>
<<include Credits>>

\<<run setup.choice("[[->Main Menu]]");>>

::Ending <1225,24975>




[[->Name Setup][$Intro_Passage = "intro_wake_up"]]

<<include Ending_Reset>>

::Ending_Slow <100,25100>




[[->Name Setup]]

<<include Ending_Reset>>

::Ending_Reset <225,25100>
<<silently>>
<<set $CycleBackup = $Cycle +1>>
<<set $NameBackup = $CharacterSheet_Player.info.name>>

<<run setup.backupEndingAbilities()>>
<<run setup.backupAchievements()>>

<<run setup.triggerEndingsPostWorldCallbacks()>>

<<set $Cycle = $CycleBackup>>
<<set $CharacterSheet_Player.info.name = $NameBackup>>

<<silently>>
<<run SimpleAudio.lists.clear()>>
<<run SimpleAudio.tracks.clear()>>
<<include StoryInit>>
<</silently>>

<<run setup.loadBackedUpAchievements()>>
<<unset $CycleBackup>>
<<unset $NameBackup>>
<</silently>>

::Reload_Unsupported_Enter <350,25100>
)
()

()

[[->Reload_Unsupported][$Intro_Passage = "intro_wake_up"]]
\<<run setup.choice("[[->Village]]");>>

::Reload_Unsupported <475,25100>
<<set $Version = 10705>>
<<set $VersionStr = '0.7.5'>>

<<set $ExpBackup = $Exp>>
<<set $EssenceBackup = $Essence>>

\<<run setup.stopSoundActions()>>
\<<run setup.stopAllRealizationPackages()>>

<<include Ending_Slow>>

<<set $Exp = $ExpBackup>>
<<set $Essence = $EssenceBackup>>

<<unset $ExpBackup>>
<<unset $EssenceBackup>>

::Exit_Popup <600,25100>




<div class="ExitPopupButtons">
\<<button "">>
\<<run Dialog.close();>>
\<</button>>
\&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
\<<button "">>
\<<run window.close();>>
\<</button>>
</div>

::GameplaySettings [Overworld] <725,25100>
<h2></h2>

<<include MeasurementSystem>>

<<include ChoicesWindowSettings>>

\<<run setup.choice("[[->CreditsInGame]]");>>
\<<run setup.choice("[[->Village]]");>>

::Level Up [Overworld] <850,25100>
<<nobr>>
<<unset $AbilityOptions>>

<<set $LevelUpParams = 
{
    hp: {name: "", value: $CharacterSheet_Player.fight.hp},
	stamina: {name: "", value: $CharacterSheet_Player.fight.stamina},
	strength: {name: "", value: $CharacterSheet_Player.fight.strength},
	arousalGain: {name: "", value: $CharacterSheet_Player.fight.arousalGain},
	limitBreaks: {name: "", value: $CharacterSheet_Player.info.limitBreaks.points},
}>>

<<set setup.LevelUpStatGainTable = 
[
	{
		hp: 6,
		limitBreaks: 3,
	},
	{
		strength: 3,
		stamina: 4,
	},
	{
		hp: 6,
		limitBreaks: 3,
	},
	{
		stamina: 4,
		strength: 3,
	},
	{
		hp: 6,
		limitBreaks: 3,
	},
	{
		strength: 3,
		stamina: 4,
	},
]>>
<</nobr>>
<h1></h1>

<<print setup.displayStatsUp($CharacterSheet_Player, $LevelUpParams)>>

<<print setup.displayAbilitiesUp($CharacterSheet_Player)>>

\<<run setup.choice("[[->Village][setup.levelUp($CharacterSheet_Player, $LevelUpParams)]]");>>
\<<run setup.choice("[[->Village]]");>>

::StoryBanner <975,25100>


::Main Menu [Name] <19,1463>
<div class="MainMenu">\
18




Patreon: https://www.patreon.com/sombreve
Gumroad: https://gumroad.com/sombreve

[[->CreditsMainMenu]]

<h1>[[->Name Setup][$Intro_Passage = "intro_start"]]</h1>

</div>

::MeasurementSystem <1225,25100>

<label><<radiobutton '$Measurement' setup.Units.IMPERIAL autocheck>></label>
<label><<radiobutton '$Measurement' setup.Units.METRIC autocheck>></label>

::PassageFooter <100,25225>
\<<if $ChoicesWindow == true>>
<<append "#StoryContainer">><div id="choiceWindow"><<print setup.choices>></div><</append>>
\<<else>>
<<print setup.choices>>
\<</if>>

::PassageHeader <225,25225>
<<run document.getElementById("story").scroll(0,0);>>
<<print setup.printActiveSound()>>

::RestartScreen <350,25225>


?



<div class="ExitPopupButtons">
\<<button "">>
\<<run Dialog.close();>>
\<</button>>
\&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
\<<button "">>
\<<run Dialog.close();>>
\<<set $Intro_Passage = "intro_wake_up">>
\<<goto [[Ending]]>>
\<</button>>
</div>

::Purgatory <475,25225>


::UpgradeSave <600,25225>


<div class="ExitPopupButtons">
\<<button "">>
\<<run Dialog.close();>>
\<<set $Intro_Passage = "intro_wake_up">>
\<<goto [[Reload_Unsupported]]>>
\<</button>>
</div>

::StoryCaption <21,1308>
\<<if $CorruptSidebar>>
\<<print setup.displayCorruptSidebar(State.variables.CharacterSheet_Player)>>
\<<link [img[setup.getSaveIcon($CharacterSheet_Player)]]>><<script>>setup.saves()<</script>><</link>> &nbsp;
\<<link [img[setup.getSaveIcon($CharacterSheet_Player)]]>><<script>>setup.saves()<</script>><</link>> &nbsp;
\<<link [img[setup.getSaveIcon($CharacterSheet_Player)]]>><<script>>setup.saves()<</script>><</link>> &nbsp;
\<<link [img[setup.getSaveIcon($CharacterSheet_Player)]]>><<script>>setup.saves()<</script>><</link>> &nbsp;
\<<link [img[setup.getSaveIcon($CharacterSheet_Player)]]>><<script>>setup.saves()<</script>><</link>> &nbsp;
\<<link [img[setup.getSaveIcon($CharacterSheet_Player)]]>><<script>>setup.saves()<</script>><</link>> &nbsp;
\<<link [img[setup.getSaveIcon($CharacterSheet_Player)]]>><<script>>setup.saves()<</script>><</link>> &nbsp;
\<<link [img[setup.getSaveIcon($CharacterSheet_Player)]]>><<script>>setup.saves()<</script>><</link>> &nbsp;
\<<link [img[setup.getSaveIcon($CharacterSheet_Player)]]>><<script>>setup.saves()<</script>><</link>> &nbsp;
\<<link [img[setup.getSaveIcon($CharacterSheet_Player)]]>><<script>>setup.saves()<</script>><</link>> &nbsp;
\<<link [img[setup.getSaveIcon($CharacterSheet_Player)]]>><<script>>setup.saves()<</script>><</link>> &nbsp;
\<<link [img[setup.getSaveIcon($CharacterSheet_Player)]]>><<script>>setup.saves()<</script>><</link>> &nbsp;
\<<link [img[setup.getSaveIcon($CharacterSheet_Player)]]>><<script>>setup.saves()<</script>><</link>> &nbsp;
\<<link [img[setup.getSaveIcon($CharacterSheet_Player)]]>><<script>>setup.saves()<</script>><</link>> &nbsp;
\<<link [img[setup.getSaveIcon($CharacterSheet_Player)]]>><<script>>setup.saves()<</script>><</link>> &nbsp;
\<<link [img[setup.getSaveIcon($CharacterSheet_Player)]]>><<script>>setup.saves()<</script>><</link>> &nbsp;
\<<link [img[setup.getSaveIcon($CharacterSheet_Player)]]>><<script>>setup.saves()<</script>><</link>> &nbsp;
\<<link [img[setup.getSaveIcon($CharacterSheet_Player)]]>><<script>>setup.saves()<</script>><</link>> &nbsp;
\<<link [img[setup.getSaveIcon($CharacterSheet_Player)]]>><<script>>setup.saves()<</script>><</link>> &nbsp;
\<<link [img[setup.getSaveIcon($CharacterSheet_Player)]]>><<script>>setup.saves()<</script>><</link>> &nbsp;
\<<link [img[setup.getResetIcon($CharacterSheet_Player)]]>><<script>>setup.restart()<</script>><</link>> &nbsp;
\<<else>>
\<<print setup.displayInfoStats(State.variables.CharacterSheet_Player)>>
\<<print setup.displayFightStats(State.variables.CharacterSheet_Player)>>
\<div class='SidebarIcons'>
\<<link [img[setup.getAchievementIcon($CharacterSheet_Player)]]>><<script>>setup.achievements()<</script>><</link>> &nbsp;
\<<link [img[setup.getSaveIcon($CharacterSheet_Player)]]>><<script>>setup.saves()<</script>><</link>> &nbsp;
\<<link [img[setup.getResetIcon($CharacterSheet_Player)]]>><<script>>setup.restart()<</script>><</link>>
\<img src='https://sombreve.github.io/Dawn-of-Corruption-Site/UI/VoidUI/text_logo/text_logo_color_bg_small.png'>
\</div>
\<div class="sidebar-footer">
\   <div class="volume-control-container">
\       <span class="volumeLabel">
\       <<link >> <<script>>setup.volumeMenu()<</script>><</link>>
\       </span>
\       <<volume>>
\   </div>
\
\<<if $SpecialBuild>>
\   <div class="VersionNumber"><<print "v" + $VersionStr + " s">></div>
\<<else>>
\   <div class="VersionNumber">v$VersionStr</div>
\<</if>>
\</div>
\<</if>>

::Twee2Settings [twee2]
@story_start_name = 'Main Menu'

